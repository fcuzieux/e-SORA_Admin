function $S(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function k_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var j_={exports:{}},of={},D_={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc=Symbol.for("react.element"),GS=Symbol.for("react.portal"),HS=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),ZS=Symbol.for("react.profiler"),KS=Symbol.for("react.provider"),XS=Symbol.for("react.context"),JS=Symbol.for("react.forward_ref"),YS=Symbol.for("react.suspense"),QS=Symbol.for("react.memo"),eA=Symbol.for("react.lazy"),my=Symbol.iterator;function tA(e){return e===null||typeof e!="object"?null:(e=my&&e[my]||e["@@iterator"],typeof e=="function"?e:null)}var O_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,I_={};function Dl(e,t,r){this.props=e,this.context=t,this.refs=I_,this.updater=r||O_}Dl.prototype.isReactComponent={};Dl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function L_(){}L_.prototype=Dl.prototype;function iv(e,t,r){this.props=e,this.context=t,this.refs=I_,this.updater=r||O_}var av=iv.prototype=new L_;av.constructor=iv;R_(av,Dl.prototype);av.isPureReactComponent=!0;var gy=Array.isArray,P_=Object.prototype.hasOwnProperty,ov={current:null},M_={key:!0,ref:!0,__self:!0,__source:!0};function B_(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)P_.call(t,n)&&!M_.hasOwnProperty(n)&&(i[n]=t[n]);var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)i[n]===void 0&&(i[n]=u[n]);return{$$typeof:Oc,type:e,key:a,ref:s,props:i,_owner:ov.current}}function rA(e,t){return{$$typeof:Oc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oc}function nA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vy=/\/+/g;function op(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nA(""+e.key):t.toString(36)}function rh(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Oc:case GS:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+op(s,0):n,gy(i)?(r="",e!=null&&(r=e.replace(vy,"$&/")+"/"),rh(i,t,r,"",function(h){return h})):i!=null&&(sv(i)&&(i=rA(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(vy,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",gy(e))for(var u=0;u<e.length;u++){a=e[u];var d=n+op(a,u);s+=rh(a,t,r,d,i)}else if(d=tA(e),typeof d=="function")for(e=d.call(e),u=0;!(a=e.next()).done;)a=a.value,d=n+op(a,u++),s+=rh(a,t,r,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Sd(e,t,r){if(e==null)return e;var n=[],i=0;return rh(e,n,"","",function(a){return t.call(r,a,i++)}),n}function iA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},nh={transition:null},aA={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:nh,ReactCurrentOwner:ov};function F_(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:Sd,forEach:function(e,t,r){Sd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Sd(e,function(){t++}),t},toArray:function(e){return Sd(e,function(t){return t})||[]},only:function(e){if(!sv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tt.Component=Dl;Tt.Fragment=HS;Tt.Profiler=ZS;Tt.PureComponent=iv;Tt.StrictMode=WS;Tt.Suspense=YS;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aA;Tt.act=F_;Tt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=R_({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=ov.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)P_.call(t,d)&&!M_.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:Oc,type:e.type,key:i,ref:a,props:n,_owner:s}};Tt.createContext=function(e){return e={$$typeof:XS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:KS,_context:e},e.Consumer=e};Tt.createElement=B_;Tt.createFactory=function(e){var t=B_.bind(null,e);return t.type=e,t};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(e){return{$$typeof:JS,render:e}};Tt.isValidElement=sv;Tt.lazy=function(e){return{$$typeof:eA,_payload:{_status:-1,_result:e},_init:iA}};Tt.memo=function(e,t){return{$$typeof:QS,type:e,compare:t===void 0?null:t}};Tt.startTransition=function(e){var t=nh.transition;nh.transition={};try{e()}finally{nh.transition=t}};Tt.unstable_act=F_;Tt.useCallback=function(e,t){return rn.current.useCallback(e,t)};Tt.useContext=function(e){return rn.current.useContext(e)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};Tt.useEffect=function(e,t){return rn.current.useEffect(e,t)};Tt.useId=function(){return rn.current.useId()};Tt.useImperativeHandle=function(e,t,r){return rn.current.useImperativeHandle(e,t,r)};Tt.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};Tt.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};Tt.useMemo=function(e,t){return rn.current.useMemo(e,t)};Tt.useReducer=function(e,t,r){return rn.current.useReducer(e,t,r)};Tt.useRef=function(e){return rn.current.useRef(e)};Tt.useState=function(e){return rn.current.useState(e)};Tt.useSyncExternalStore=function(e,t,r){return rn.current.useSyncExternalStore(e,t,r)};Tt.useTransition=function(){return rn.current.useTransition()};Tt.version="18.3.1";D_.exports=Tt;var ge=D_.exports;const qo=Dc(ge),oA=$S({__proto__:null,default:qo},[ge]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=ge,lA=Symbol.for("react.element"),uA=Symbol.for("react.fragment"),cA=Object.prototype.hasOwnProperty,dA=sA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hA={key:!0,ref:!0,__self:!0,__source:!0};function z_(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)cA.call(t,n)&&!hA.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:lA,type:e,key:a,ref:s,props:i,_owner:dA.current}}of.Fragment=uA;of.jsx=z_;of.jsxs=z_;j_.exports=of;var l=j_.exports,U_={exports:{}},Mn={},q_={exports:{}},V_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,O){var ne=ue.length;ue.push(O);e:for(;0<ne;){var J=ne-1>>>1,G=ue[J];if(0<i(G,O))ue[J]=O,ue[ne]=G,ne=J;else break e}}function r(ue){return ue.length===0?null:ue[0]}function n(ue){if(ue.length===0)return null;var O=ue[0],ne=ue.pop();if(ne!==O){ue[0]=ne;e:for(var J=0,G=ue.length,ve=G>>>1;J<ve;){var de=2*(J+1)-1,Z=ue[de],se=de+1,F=ue[se];if(0>i(Z,ne))se<G&&0>i(F,Z)?(ue[J]=F,ue[se]=ne,J=se):(ue[J]=Z,ue[de]=ne,J=de);else if(se<G&&0>i(F,ne))ue[J]=F,ue[se]=ne,J=se;else break e}}return O}function i(ue,O){var ne=ue.sortIndex-O.sortIndex;return ne!==0?ne:ue.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var d=[],h=[],f=1,p=null,v=3,b=!1,k=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ue){for(var O=r(h);O!==null;){if(O.callback===null)n(h);else if(O.startTime<=ue)n(h),O.sortIndex=O.expirationTime,t(d,O);else break;O=r(h)}}function E(ue){if(S=!1,w(ue),!k)if(r(d)!==null)k=!0,fe(N);else{var O=r(h);O!==null&&re(E,O.startTime-ue)}}function N(ue,O){k=!1,S&&(S=!1,y(D),D=-1),b=!0;var ne=v;try{for(w(O),p=r(d);p!==null&&(!(p.expirationTime>O)||ue&&!te());){var J=p.callback;if(typeof J=="function"){p.callback=null,v=p.priorityLevel;var G=J(p.expirationTime<=O);O=e.unstable_now(),typeof G=="function"?p.callback=G:p===r(d)&&n(d),w(O)}else n(d);p=r(d)}if(p!==null)var ve=!0;else{var de=r(h);de!==null&&re(E,de.startTime-O),ve=!1}return ve}finally{p=null,v=ne,b=!1}}var M=!1,B=null,D=-1,A=5,H=-1;function te(){return!(e.unstable_now()-H<A)}function z(){if(B!==null){var ue=e.unstable_now();H=ue;var O=!0;try{O=B(!0,ue)}finally{O?ae():(M=!1,B=null)}}else M=!1}var ae;if(typeof _=="function")ae=function(){_(z)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ce=P.port2;P.port1.onmessage=z,ae=function(){ce.postMessage(null)}}else ae=function(){T(z,0)};function fe(ue){B=ue,M||(M=!0,ae())}function re(ue,O){D=T(function(){ue(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){k||b||(k=!0,fe(N))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(ue){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var ne=v;v=O;try{return ue()}finally{v=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,O){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ne=v;v=ue;try{return O()}finally{v=ne}},e.unstable_scheduleCallback=function(ue,O,ne){var J=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?J+ne:J):ne=J,ue){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,ue={id:f++,callback:O,priorityLevel:ue,startTime:ne,expirationTime:G,sortIndex:-1},ne>J?(ue.sortIndex=ne,t(h,ue),r(d)===null&&ue===r(h)&&(S?(y(D),D=-1):S=!0,re(E,ne-J))):(ue.sortIndex=G,t(d,ue),k||b||(k=!0,fe(N))),ue},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(ue){var O=v;return function(){var ne=v;v=O;try{return ue.apply(this,arguments)}finally{v=ne}}}})(V_);q_.exports=V_;var fA=q_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA=ge,Rn=fA;function Be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $_=new Set,Ku={};function Yo(e,t){hl(e,t),hl(e+"Capture",t)}function hl(e,t){for(Ku[e]=t,e=0;e<t.length;e++)$_.add(t[e])}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tm=Object.prototype.hasOwnProperty,mA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},xy={};function gA(e){return Tm.call(xy,e)?!0:Tm.call(yy,e)?!1:mA.test(e)?xy[e]=!0:(yy[e]=!0,!1)}function vA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yA(e,t,r,n){if(t===null||typeof t>"u"||vA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nn(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pr[e]=new nn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pr[t]=new nn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pr[e]=new nn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pr[e]=new nn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pr[e]=new nn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pr[e]=new nn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pr[e]=new nn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pr[e]=new nn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pr[e]=new nn(e,5,!1,e.toLowerCase(),null,!1,!1)});var lv=/[\-:]([a-z])/g;function uv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lv,uv);Pr[t]=new nn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lv,uv);Pr[t]=new nn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lv,uv);Pr[t]=new nn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pr[e]=new nn(e,1,!1,e.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pr[e]=new nn(e,1,!1,e.toLowerCase(),null,!0,!0)});function cv(e,t,r,n){var i=Pr.hasOwnProperty(t)?Pr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yA(t,r,i,n)&&(r=null),n||i===null?gA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var sa=pA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ad=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),G_=Symbol.for("react.provider"),H_=Symbol.for("react.context"),hv=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),jm=Symbol.for("react.suspense_list"),fv=Symbol.for("react.memo"),Ca=Symbol.for("react.lazy"),W_=Symbol.for("react.offscreen"),by=Symbol.iterator;function fu(e){return e===null||typeof e!="object"?null:(e=by&&e[by]||e["@@iterator"],typeof e=="function"?e:null)}var rr=Object.assign,sp;function Nu(e){if(sp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sp=t&&t[1]||""}return`
`+sp+e}var lp=!1;function up(e,t){if(!e||lp)return"";lp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,u=a.length-1;1<=s&&0<=u&&i[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==a[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==a[u]){var d=`
`+i[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=u);break}}}finally{lp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Nu(e):""}function xA(e){switch(e.tag){case 5:return Nu(e.type);case 16:return Nu("Lazy");case 13:return Nu("Suspense");case 19:return Nu("SuspenseList");case 0:case 2:case 15:return e=up(e.type,!1),e;case 11:return e=up(e.type.render,!1),e;case 1:return e=up(e.type,!0),e;default:return""}}function Dm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $s:return"Fragment";case Vs:return"Portal";case Nm:return"Profiler";case dv:return"StrictMode";case km:return"Suspense";case jm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case H_:return(e.displayName||"Context")+".Consumer";case G_:return(e._context.displayName||"Context")+".Provider";case hv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fv:return t=e.displayName||null,t!==null?t:Dm(e.type)||"Memo";case Ca:t=e._payload,e=e._init;try{return Dm(e(t))}catch{}}return null}function bA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(t);case 8:return t===dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ha(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _A(e){var t=Z_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Td(e){e._valueTracker||(e._valueTracker=_A(e))}function K_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Z_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Om(e,t){var r=t.checked;return rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _y(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ha(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X_(e,t){t=t.checked,t!=null&&cv(e,"checked",t,!1)}function Rm(e,t){X_(e,t);var r=Ha(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Im(e,t.type,r):t.hasOwnProperty("defaultValue")&&Im(e,t.type,Ha(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Im(e,t,r){(t!=="number"||gh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ku=Array.isArray;function il(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ha(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Lm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Be(91));return rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ey(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Be(92));if(ku(r)){if(1<r.length)throw Error(Be(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ha(r)}}function J_(e,t){var r=Ha(t.value),n=Ha(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Y_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Y_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nd,Q_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nd=Nd||document.createElement("div"),Nd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wA=["Webkit","ms","Moz","O"];Object.keys(Lu).forEach(function(e){wA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lu[t]=Lu[e]})});function ew(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Lu.hasOwnProperty(e)&&Lu[e]?(""+t).trim():t+"px"}function tw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=ew(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var EA=rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mm(e,t){if(t){if(EA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Be(62))}}function Bm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fm=null;function pv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zm=null,al=null,ol=null;function Sy(e){if(e=Lc(e)){if(typeof zm!="function")throw Error(Be(280));var t=e.stateNode;t&&(t=df(t),zm(e.stateNode,e.type,t))}}function rw(e){al?ol?ol.push(e):ol=[e]:al=e}function nw(){if(al){var e=al,t=ol;if(ol=al=null,Sy(e),t)for(e=0;e<t.length;e++)Sy(t[e])}}function iw(e,t){return e(t)}function aw(){}var cp=!1;function ow(e,t,r){if(cp)return e(t,r);cp=!0;try{return iw(e,t,r)}finally{cp=!1,(al!==null||ol!==null)&&(aw(),nw())}}function Ju(e,t){var r=e.stateNode;if(r===null)return null;var n=df(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Be(231,t,typeof r));return r}var Um=!1;if(ra)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){Um=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch{Um=!1}function CA(e,t,r,n,i,a,s,u,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(f){this.onError(f)}}var Pu=!1,vh=null,yh=!1,qm=null,SA={onError:function(e){Pu=!0,vh=e}};function AA(e,t,r,n,i,a,s,u,d){Pu=!1,vh=null,CA.apply(SA,arguments)}function TA(e,t,r,n,i,a,s,u,d){if(AA.apply(this,arguments),Pu){if(Pu){var h=vh;Pu=!1,vh=null}else throw Error(Be(198));yh||(yh=!0,qm=h)}}function Qo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ay(e){if(Qo(e)!==e)throw Error(Be(188))}function NA(e){var t=e.alternate;if(!t){if(t=Qo(e),t===null)throw Error(Be(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Ay(i),e;if(a===n)return Ay(i),t;a=a.sibling}throw Error(Be(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,u=i.child;u;){if(u===r){s=!0,r=i,n=a;break}if(u===n){s=!0,n=i,r=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===r){s=!0,r=a,n=i;break}if(u===n){s=!0,n=a,r=i;break}u=u.sibling}if(!s)throw Error(Be(189))}}if(r.alternate!==n)throw Error(Be(190))}if(r.tag!==3)throw Error(Be(188));return r.stateNode.current===r?e:t}function lw(e){return e=NA(e),e!==null?uw(e):null}function uw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uw(e);if(t!==null)return t;e=e.sibling}return null}var cw=Rn.unstable_scheduleCallback,Ty=Rn.unstable_cancelCallback,kA=Rn.unstable_shouldYield,jA=Rn.unstable_requestPaint,dr=Rn.unstable_now,DA=Rn.unstable_getCurrentPriorityLevel,mv=Rn.unstable_ImmediatePriority,dw=Rn.unstable_UserBlockingPriority,xh=Rn.unstable_NormalPriority,OA=Rn.unstable_LowPriority,hw=Rn.unstable_IdlePriority,sf=null,Ii=null;function RA(e){if(Ii&&typeof Ii.onCommitFiberRoot=="function")try{Ii.onCommitFiberRoot(sf,e,void 0,(e.current.flags&128)===128)}catch{}}var fi=Math.clz32?Math.clz32:PA,IA=Math.log,LA=Math.LN2;function PA(e){return e>>>=0,e===0?32:31-(IA(e)/LA|0)|0}var kd=64,jd=4194304;function ju(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var u=s&~i;u!==0?n=ju(u):(a&=s,a!==0&&(n=ju(a)))}else s=r&~i,s!==0?n=ju(s):a!==0&&(n=ju(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-fi(t),i=1<<r,n|=e[r],t&=~i;return n}function MA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BA(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-fi(a),u=1<<s,d=i[s];d===-1?(!(u&r)||u&n)&&(i[s]=MA(u,t)):d<=t&&(e.expiredLanes|=u),a&=~u}}function Vm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fw(){var e=kd;return kd<<=1,!(kd&4194240)&&(kd=64),e}function dp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Rc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fi(t),e[t]=r}function FA(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-fi(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function gv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-fi(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Bt=0;function pw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mw,vv,gw,vw,yw,$m=!1,Dd=[],Ia=null,La=null,Pa=null,Yu=new Map,Qu=new Map,Ta=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(e,t){switch(e){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Yu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(t.pointerId)}}function mu(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Lc(t),t!==null&&vv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function UA(e,t,r,n,i){switch(t){case"focusin":return Ia=mu(Ia,e,t,r,n,i),!0;case"dragenter":return La=mu(La,e,t,r,n,i),!0;case"mouseover":return Pa=mu(Pa,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Yu.set(a,mu(Yu.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Qu.set(a,mu(Qu.get(a)||null,e,t,r,n,i)),!0}return!1}function xw(e){var t=Io(e.target);if(t!==null){var r=Qo(t);if(r!==null){if(t=r.tag,t===13){if(t=sw(r),t!==null){e.blockedOn=t,yw(e.priority,function(){gw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ih(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Fm=n,r.target.dispatchEvent(n),Fm=null}else return t=Lc(r),t!==null&&vv(t),e.blockedOn=r,!1;t.shift()}return!0}function ky(e,t,r){ih(e)&&r.delete(t)}function qA(){$m=!1,Ia!==null&&ih(Ia)&&(Ia=null),La!==null&&ih(La)&&(La=null),Pa!==null&&ih(Pa)&&(Pa=null),Yu.forEach(ky),Qu.forEach(ky)}function gu(e,t){e.blockedOn===t&&(e.blockedOn=null,$m||($m=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,qA)))}function ec(e){function t(i){return gu(i,e)}if(0<Dd.length){gu(Dd[0],e);for(var r=1;r<Dd.length;r++){var n=Dd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ia!==null&&gu(Ia,e),La!==null&&gu(La,e),Pa!==null&&gu(Pa,e),Yu.forEach(t),Qu.forEach(t),r=0;r<Ta.length;r++)n=Ta[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ta.length&&(r=Ta[0],r.blockedOn===null);)xw(r),r.blockedOn===null&&Ta.shift()}var sl=sa.ReactCurrentBatchConfig,_h=!0;function VA(e,t,r,n){var i=Bt,a=sl.transition;sl.transition=null;try{Bt=1,yv(e,t,r,n)}finally{Bt=i,sl.transition=a}}function $A(e,t,r,n){var i=Bt,a=sl.transition;sl.transition=null;try{Bt=4,yv(e,t,r,n)}finally{Bt=i,sl.transition=a}}function yv(e,t,r,n){if(_h){var i=Gm(e,t,r,n);if(i===null)_p(e,t,n,wh,r),Ny(e,n);else if(UA(i,e,t,r,n))n.stopPropagation();else if(Ny(e,n),t&4&&-1<zA.indexOf(e)){for(;i!==null;){var a=Lc(i);if(a!==null&&mw(a),a=Gm(e,t,r,n),a===null&&_p(e,t,n,wh,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else _p(e,t,n,null,r)}}var wh=null;function Gm(e,t,r,n){if(wh=null,e=pv(n),e=Io(e),e!==null)if(t=Qo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sw(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wh=e,null}function bw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DA()){case mv:return 1;case dw:return 4;case xh:case OA:return 16;case hw:return 536870912;default:return 16}default:return 16}}var ja=null,xv=null,ah=null;function _w(){if(ah)return ah;var e,t=xv,r=t.length,n,i="value"in ja?ja.value:ja.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return ah=i.slice(e,1<n?1-n:void 0)}function oh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Od(){return!0}function jy(){return!1}function Bn(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Od:jy,this.isPropagationStopped=jy,this}return rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Od)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Od)},persist:function(){},isPersistent:Od}),t}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bv=Bn(Ol),Ic=rr({},Ol,{view:0,detail:0}),GA=Bn(Ic),hp,fp,vu,lf=rr({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vu&&(vu&&e.type==="mousemove"?(hp=e.screenX-vu.screenX,fp=e.screenY-vu.screenY):fp=hp=0,vu=e),hp)},movementY:function(e){return"movementY"in e?e.movementY:fp}}),Dy=Bn(lf),HA=rr({},lf,{dataTransfer:0}),WA=Bn(HA),ZA=rr({},Ic,{relatedTarget:0}),pp=Bn(ZA),KA=rr({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),XA=Bn(KA),JA=rr({},Ol,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),YA=Bn(JA),QA=rr({},Ol,{data:0}),Oy=Bn(QA),eT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rT[e])?!!t[e]:!1}function _v(){return nT}var iT=rr({},Ic,{key:function(e){if(e.key){var t=eT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(e){return e.type==="keypress"?oh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aT=Bn(iT),oT=rr({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=Bn(oT),sT=rr({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),lT=Bn(sT),uT=rr({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),cT=Bn(uT),dT=rr({},lf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hT=Bn(dT),fT=[9,13,27,32],wv=ra&&"CompositionEvent"in window,Mu=null;ra&&"documentMode"in document&&(Mu=document.documentMode);var pT=ra&&"TextEvent"in window&&!Mu,ww=ra&&(!wv||Mu&&8<Mu&&11>=Mu),Iy=" ",Ly=!1;function Ew(e,t){switch(e){case"keyup":return fT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function mT(e,t){switch(e){case"compositionend":return Cw(t);case"keypress":return t.which!==32?null:(Ly=!0,Iy);case"textInput":return e=t.data,e===Iy&&Ly?null:e;default:return null}}function gT(e,t){if(Gs)return e==="compositionend"||!wv&&Ew(e,t)?(e=_w(),ah=xv=ja=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ww&&t.locale!=="ko"?null:t.data;default:return null}}var vT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vT[e.type]:t==="textarea"}function Sw(e,t,r,n){rw(n),t=Eh(t,"onChange"),0<t.length&&(r=new bv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Bu=null,tc=null;function yT(e){Pw(e,0)}function uf(e){var t=Zs(e);if(K_(t))return e}function xT(e,t){if(e==="change")return t}var Aw=!1;if(ra){var mp;if(ra){var gp="oninput"in document;if(!gp){var My=document.createElement("div");My.setAttribute("oninput","return;"),gp=typeof My.oninput=="function"}mp=gp}else mp=!1;Aw=mp&&(!document.documentMode||9<document.documentMode)}function By(){Bu&&(Bu.detachEvent("onpropertychange",Tw),tc=Bu=null)}function Tw(e){if(e.propertyName==="value"&&uf(tc)){var t=[];Sw(t,tc,e,pv(e)),ow(yT,t)}}function bT(e,t,r){e==="focusin"?(By(),Bu=t,tc=r,Bu.attachEvent("onpropertychange",Tw)):e==="focusout"&&By()}function _T(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uf(tc)}function wT(e,t){if(e==="click")return uf(t)}function ET(e,t){if(e==="input"||e==="change")return uf(t)}function CT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gi=typeof Object.is=="function"?Object.is:CT;function rc(e,t){if(gi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Tm.call(t,i)||!gi(e[i],t[i]))return!1}return!0}function Fy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zy(e,t){var r=Fy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fy(r)}}function Nw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kw(){for(var e=window,t=gh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gh(e.document)}return t}function Ev(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ST(e){var t=kw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Nw(r.ownerDocument.documentElement,r)){if(n!==null&&Ev(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=zy(r,a);var s=zy(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AT=ra&&"documentMode"in document&&11>=document.documentMode,Hs=null,Hm=null,Fu=null,Wm=!1;function Uy(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wm||Hs==null||Hs!==gh(n)||(n=Hs,"selectionStart"in n&&Ev(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fu&&rc(Fu,n)||(Fu=n,n=Eh(Hm,"onSelect"),0<n.length&&(t=new bv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Hs)))}function Rd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ws={animationend:Rd("Animation","AnimationEnd"),animationiteration:Rd("Animation","AnimationIteration"),animationstart:Rd("Animation","AnimationStart"),transitionend:Rd("Transition","TransitionEnd")},vp={},jw={};ra&&(jw=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function cf(e){if(vp[e])return vp[e];if(!Ws[e])return e;var t=Ws[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jw)return vp[e]=t[r];return e}var Dw=cf("animationend"),Ow=cf("animationiteration"),Rw=cf("animationstart"),Iw=cf("transitionend"),Lw=new Map,qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(e,t){Lw.set(e,t),Yo(t,[e])}for(var yp=0;yp<qy.length;yp++){var xp=qy[yp],TT=xp.toLowerCase(),NT=xp[0].toUpperCase()+xp.slice(1);Qa(TT,"on"+NT)}Qa(Dw,"onAnimationEnd");Qa(Ow,"onAnimationIteration");Qa(Rw,"onAnimationStart");Qa("dblclick","onDoubleClick");Qa("focusin","onFocus");Qa("focusout","onBlur");Qa(Iw,"onTransitionEnd");hl("onMouseEnter",["mouseout","mouseover"]);hl("onMouseLeave",["mouseout","mouseover"]);hl("onPointerEnter",["pointerout","pointerover"]);hl("onPointerLeave",["pointerout","pointerover"]);Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Du));function Vy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,TA(n,t,void 0,e),e.currentTarget=null}function Pw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var u=n[s],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==a&&i.isPropagationStopped())break e;Vy(i,u,h),a=d}else for(s=0;s<n.length;s++){if(u=n[s],d=u.instance,h=u.currentTarget,u=u.listener,d!==a&&i.isPropagationStopped())break e;Vy(i,u,h),a=d}}}if(yh)throw e=qm,yh=!1,qm=null,e}function Gt(e,t){var r=t[Ym];r===void 0&&(r=t[Ym]=new Set);var n=e+"__bubble";r.has(n)||(Mw(t,e,2,!1),r.add(n))}function bp(e,t,r){var n=0;t&&(n|=4),Mw(r,e,n,t)}var Id="_reactListening"+Math.random().toString(36).slice(2);function nc(e){if(!e[Id]){e[Id]=!0,$_.forEach(function(r){r!=="selectionchange"&&(kT.has(r)||bp(r,!1,e),bp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Id]||(t[Id]=!0,bp("selectionchange",!1,t))}}function Mw(e,t,r,n){switch(bw(t)){case 1:var i=VA;break;case 4:i=$A;break;default:i=yv}r=i.bind(null,t,r,e),i=void 0,!Um||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function _p(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var u=n.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var d=s.tag;if((d===3||d===4)&&(d=s.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Io(u),s===null)return;if(d=s.tag,d===5||d===6){n=a=s;continue e}u=u.parentNode}}n=n.return}ow(function(){var h=a,f=pv(r),p=[];e:{var v=Lw.get(e);if(v!==void 0){var b=bv,k=e;switch(e){case"keypress":if(oh(r)===0)break e;case"keydown":case"keyup":b=aT;break;case"focusin":k="focus",b=pp;break;case"focusout":k="blur",b=pp;break;case"beforeblur":case"afterblur":b=pp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Dy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=WA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=lT;break;case Dw:case Ow:case Rw:b=XA;break;case Iw:b=cT;break;case"scroll":b=GA;break;case"wheel":b=hT;break;case"copy":case"cut":case"paste":b=YA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Ry}var S=(t&4)!==0,T=!S&&e==="scroll",y=S?v!==null?v+"Capture":null:v;S=[];for(var _=h,w;_!==null;){w=_;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=Ju(_,y),E!=null&&S.push(ic(_,E,w)))),T)break;_=_.return}0<S.length&&(v=new b(v,k,null,r,f),p.push({event:v,listeners:S}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",v&&r!==Fm&&(k=r.relatedTarget||r.fromElement)&&(Io(k)||k[na]))break e;if((b||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,b?(k=r.relatedTarget||r.toElement,b=h,k=k?Io(k):null,k!==null&&(T=Qo(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=h),b!==k)){if(S=Dy,E="onMouseLeave",y="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(S=Ry,E="onPointerLeave",y="onPointerEnter",_="pointer"),T=b==null?v:Zs(b),w=k==null?v:Zs(k),v=new S(E,_+"leave",b,r,f),v.target=T,v.relatedTarget=w,E=null,Io(f)===h&&(S=new S(y,_+"enter",k,r,f),S.target=w,S.relatedTarget=T,E=S),T=E,b&&k)t:{for(S=b,y=k,_=0,w=S;w;w=ws(w))_++;for(w=0,E=y;E;E=ws(E))w++;for(;0<_-w;)S=ws(S),_--;for(;0<w-_;)y=ws(y),w--;for(;_--;){if(S===y||y!==null&&S===y.alternate)break t;S=ws(S),y=ws(y)}S=null}else S=null;b!==null&&$y(p,v,b,S,!1),k!==null&&T!==null&&$y(p,T,k,S,!0)}}e:{if(v=h?Zs(h):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var N=xT;else if(Py(v))if(Aw)N=ET;else{N=_T;var M=bT}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(N=wT);if(N&&(N=N(e,h))){Sw(p,N,r,f);break e}M&&M(e,v,h),e==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&Im(v,"number",v.value)}switch(M=h?Zs(h):window,e){case"focusin":(Py(M)||M.contentEditable==="true")&&(Hs=M,Hm=h,Fu=null);break;case"focusout":Fu=Hm=Hs=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,Uy(p,r,f);break;case"selectionchange":if(AT)break;case"keydown":case"keyup":Uy(p,r,f)}var B;if(wv)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Gs?Ew(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(ww&&r.locale!=="ko"&&(Gs||D!=="onCompositionStart"?D==="onCompositionEnd"&&Gs&&(B=_w()):(ja=f,xv="value"in ja?ja.value:ja.textContent,Gs=!0)),M=Eh(h,D),0<M.length&&(D=new Oy(D,e,null,r,f),p.push({event:D,listeners:M}),B?D.data=B:(B=Cw(r),B!==null&&(D.data=B)))),(B=pT?mT(e,r):gT(e,r))&&(h=Eh(h,"onBeforeInput"),0<h.length&&(f=new Oy("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:h}),f.data=B))}Pw(p,t)})}function ic(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Eh(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ju(e,r),a!=null&&n.unshift(ic(e,a,i)),a=Ju(e,t),a!=null&&n.push(ic(e,a,i))),e=e.return}return n}function ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $y(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var u=r,d=u.alternate,h=u.stateNode;if(d!==null&&d===n)break;u.tag===5&&h!==null&&(u=h,i?(d=Ju(r,a),d!=null&&s.unshift(ic(r,d,u))):i||(d=Ju(r,a),d!=null&&s.push(ic(r,d,u)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var jT=/\r\n?/g,DT=/\u0000|\uFFFD/g;function Gy(e){return(typeof e=="string"?e:""+e).replace(jT,`
`).replace(DT,"")}function Ld(e,t,r){if(t=Gy(t),Gy(e)!==t&&r)throw Error(Be(425))}function Ch(){}var Zm=null,Km=null;function Xm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jm=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,RT=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(e){return Hy.resolve(null).then(e).catch(IT)}:Jm;function IT(e){setTimeout(function(){throw e})}function wp(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),ec(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ec(t)}function Ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),Oi="__reactFiber$"+Rl,ac="__reactProps$"+Rl,na="__reactContainer$"+Rl,Ym="__reactEvents$"+Rl,LT="__reactListeners$"+Rl,PT="__reactHandles$"+Rl;function Io(e){var t=e[Oi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[na]||r[Oi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Wy(e);e!==null;){if(r=e[Oi])return r;e=Wy(e)}return t}e=r,r=e.parentNode}return null}function Lc(e){return e=e[Oi]||e[na],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Be(33))}function df(e){return e[ac]||null}var Qm=[],Ks=-1;function eo(e){return{current:e}}function Ht(e){0>Ks||(e.current=Qm[Ks],Qm[Ks]=null,Ks--)}function Vt(e,t){Ks++,Qm[Ks]=e.current,e.current=t}var Wa={},Vr=eo(Wa),vn=eo(!1),Vo=Wa;function fl(e,t){var r=e.type.contextTypes;if(!r)return Wa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yn(e){return e=e.childContextTypes,e!=null}function Sh(){Ht(vn),Ht(Vr)}function Zy(e,t,r){if(Vr.current!==Wa)throw Error(Be(168));Vt(Vr,t),Vt(vn,r)}function Bw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Be(108,bA(e)||"Unknown",i));return rr({},r,n)}function Ah(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wa,Vo=Vr.current,Vt(Vr,e),Vt(vn,vn.current),!0}function Ky(e,t,r){var n=e.stateNode;if(!n)throw Error(Be(169));r?(e=Bw(e,t,Vo),n.__reactInternalMemoizedMergedChildContext=e,Ht(vn),Ht(Vr),Vt(Vr,e)):Ht(vn),Vt(vn,r)}var Ji=null,hf=!1,Ep=!1;function Fw(e){Ji===null?Ji=[e]:Ji.push(e)}function MT(e){hf=!0,Fw(e)}function to(){if(!Ep&&Ji!==null){Ep=!0;var e=0,t=Bt;try{var r=Ji;for(Bt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ji=null,hf=!1}catch(i){throw Ji!==null&&(Ji=Ji.slice(e+1)),cw(mv,to),i}finally{Bt=t,Ep=!1}}return null}var Xs=[],Js=0,Th=null,Nh=0,Vn=[],$n=0,$o=null,Yi=1,Qi="";function No(e,t){Xs[Js++]=Nh,Xs[Js++]=Th,Th=e,Nh=t}function zw(e,t,r){Vn[$n++]=Yi,Vn[$n++]=Qi,Vn[$n++]=$o,$o=e;var n=Yi;e=Qi;var i=32-fi(n)-1;n&=~(1<<i),r+=1;var a=32-fi(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Yi=1<<32-fi(t)+i|r<<i|n,Qi=a+e}else Yi=1<<a|r<<i|n,Qi=e}function Cv(e){e.return!==null&&(No(e,1),zw(e,1,0))}function Sv(e){for(;e===Th;)Th=Xs[--Js],Xs[Js]=null,Nh=Xs[--Js],Xs[Js]=null;for(;e===$o;)$o=Vn[--$n],Vn[$n]=null,Qi=Vn[--$n],Vn[$n]=null,Yi=Vn[--$n],Vn[$n]=null}var On=null,Dn=null,Zt=!1,di=null;function Uw(e,t){var r=Gn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Xy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,On=e,Dn=Ma(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,On=e,Dn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$o!==null?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,On=e,Dn=null,!0):!1;default:return!1}}function eg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tg(e){if(Zt){var t=Dn;if(t){var r=t;if(!Xy(e,t)){if(eg(e))throw Error(Be(418));t=Ma(r.nextSibling);var n=On;t&&Xy(e,t)?Uw(n,r):(e.flags=e.flags&-4097|2,Zt=!1,On=e)}}else{if(eg(e))throw Error(Be(418));e.flags=e.flags&-4097|2,Zt=!1,On=e}}}function Jy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;On=e}function Pd(e){if(e!==On)return!1;if(!Zt)return Jy(e),Zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xm(e.type,e.memoizedProps)),t&&(t=Dn)){if(eg(e))throw qw(),Error(Be(418));for(;t;)Uw(e,t),t=Ma(t.nextSibling)}if(Jy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Dn=Ma(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Dn=null}}else Dn=On?Ma(e.stateNode.nextSibling):null;return!0}function qw(){for(var e=Dn;e;)e=Ma(e.nextSibling)}function pl(){Dn=On=null,Zt=!1}function Av(e){di===null?di=[e]:di.push(e)}var BT=sa.ReactCurrentBatchConfig;function yu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Be(309));var n=r.stateNode}if(!n)throw Error(Be(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var u=i.refs;s===null?delete u[a]:u[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(Be(284));if(!r._owner)throw Error(Be(290,e))}return e}function Md(e,t){throw e=Object.prototype.toString.call(t),Error(Be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yy(e){var t=e._init;return t(e._payload)}function Vw(e){function t(y,_){if(e){var w=y.deletions;w===null?(y.deletions=[_],y.flags|=16):w.push(_)}}function r(y,_){if(!e)return null;for(;_!==null;)t(y,_),_=_.sibling;return null}function n(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=Ua(y,_),y.index=0,y.sibling=null,y}function a(y,_,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<_?(y.flags|=2,_):w):(y.flags|=2,_)):(y.flags|=1048576,_)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,_,w,E){return _===null||_.tag!==6?(_=jp(w,y.mode,E),_.return=y,_):(_=i(_,w),_.return=y,_)}function d(y,_,w,E){var N=w.type;return N===$s?f(y,_,w.props.children,E,w.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ca&&Yy(N)===_.type)?(E=i(_,w.props),E.ref=yu(y,_,w),E.return=y,E):(E=fh(w.type,w.key,w.props,null,y.mode,E),E.ref=yu(y,_,w),E.return=y,E)}function h(y,_,w,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Dp(w,y.mode,E),_.return=y,_):(_=i(_,w.children||[]),_.return=y,_)}function f(y,_,w,E,N){return _===null||_.tag!==7?(_=zo(w,y.mode,E,N),_.return=y,_):(_=i(_,w),_.return=y,_)}function p(y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=jp(""+_,y.mode,w),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ad:return w=fh(_.type,_.key,_.props,null,y.mode,w),w.ref=yu(y,null,_),w.return=y,w;case Vs:return _=Dp(_,y.mode,w),_.return=y,_;case Ca:var E=_._init;return p(y,E(_._payload),w)}if(ku(_)||fu(_))return _=zo(_,y.mode,w,null),_.return=y,_;Md(y,_)}return null}function v(y,_,w,E){var N=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:u(y,_,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ad:return w.key===N?d(y,_,w,E):null;case Vs:return w.key===N?h(y,_,w,E):null;case Ca:return N=w._init,v(y,_,N(w._payload),E)}if(ku(w)||fu(w))return N!==null?null:f(y,_,w,E,null);Md(y,w)}return null}function b(y,_,w,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,u(_,y,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ad:return y=y.get(E.key===null?w:E.key)||null,d(_,y,E,N);case Vs:return y=y.get(E.key===null?w:E.key)||null,h(_,y,E,N);case Ca:var M=E._init;return b(y,_,w,M(E._payload),N)}if(ku(E)||fu(E))return y=y.get(w)||null,f(_,y,E,N,null);Md(_,E)}return null}function k(y,_,w,E){for(var N=null,M=null,B=_,D=_=0,A=null;B!==null&&D<w.length;D++){B.index>D?(A=B,B=null):A=B.sibling;var H=v(y,B,w[D],E);if(H===null){B===null&&(B=A);break}e&&B&&H.alternate===null&&t(y,B),_=a(H,_,D),M===null?N=H:M.sibling=H,M=H,B=A}if(D===w.length)return r(y,B),Zt&&No(y,D),N;if(B===null){for(;D<w.length;D++)B=p(y,w[D],E),B!==null&&(_=a(B,_,D),M===null?N=B:M.sibling=B,M=B);return Zt&&No(y,D),N}for(B=n(y,B);D<w.length;D++)A=b(B,y,D,w[D],E),A!==null&&(e&&A.alternate!==null&&B.delete(A.key===null?D:A.key),_=a(A,_,D),M===null?N=A:M.sibling=A,M=A);return e&&B.forEach(function(te){return t(y,te)}),Zt&&No(y,D),N}function S(y,_,w,E){var N=fu(w);if(typeof N!="function")throw Error(Be(150));if(w=N.call(w),w==null)throw Error(Be(151));for(var M=N=null,B=_,D=_=0,A=null,H=w.next();B!==null&&!H.done;D++,H=w.next()){B.index>D?(A=B,B=null):A=B.sibling;var te=v(y,B,H.value,E);if(te===null){B===null&&(B=A);break}e&&B&&te.alternate===null&&t(y,B),_=a(te,_,D),M===null?N=te:M.sibling=te,M=te,B=A}if(H.done)return r(y,B),Zt&&No(y,D),N;if(B===null){for(;!H.done;D++,H=w.next())H=p(y,H.value,E),H!==null&&(_=a(H,_,D),M===null?N=H:M.sibling=H,M=H);return Zt&&No(y,D),N}for(B=n(y,B);!H.done;D++,H=w.next())H=b(B,y,D,H.value,E),H!==null&&(e&&H.alternate!==null&&B.delete(H.key===null?D:H.key),_=a(H,_,D),M===null?N=H:M.sibling=H,M=H);return e&&B.forEach(function(z){return t(y,z)}),Zt&&No(y,D),N}function T(y,_,w,E){if(typeof w=="object"&&w!==null&&w.type===$s&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ad:e:{for(var N=w.key,M=_;M!==null;){if(M.key===N){if(N=w.type,N===$s){if(M.tag===7){r(y,M.sibling),_=i(M,w.props.children),_.return=y,y=_;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ca&&Yy(N)===M.type){r(y,M.sibling),_=i(M,w.props),_.ref=yu(y,M,w),_.return=y,y=_;break e}r(y,M);break}else t(y,M);M=M.sibling}w.type===$s?(_=zo(w.props.children,y.mode,E,w.key),_.return=y,y=_):(E=fh(w.type,w.key,w.props,null,y.mode,E),E.ref=yu(y,_,w),E.return=y,y=E)}return s(y);case Vs:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){r(y,_.sibling),_=i(_,w.children||[]),_.return=y,y=_;break e}else{r(y,_);break}else t(y,_);_=_.sibling}_=Dp(w,y.mode,E),_.return=y,y=_}return s(y);case Ca:return M=w._init,T(y,_,M(w._payload),E)}if(ku(w))return k(y,_,w,E);if(fu(w))return S(y,_,w,E);Md(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(r(y,_.sibling),_=i(_,w),_.return=y,y=_):(r(y,_),_=jp(w,y.mode,E),_.return=y,y=_),s(y)):r(y,_)}return T}var ml=Vw(!0),$w=Vw(!1),kh=eo(null),jh=null,Ys=null,Tv=null;function Nv(){Tv=Ys=jh=null}function kv(e){var t=kh.current;Ht(kh),e._currentValue=t}function rg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ll(e,t){jh=e,Tv=Ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mn=!0),e.firstContext=null)}function Zn(e){var t=e._currentValue;if(Tv!==e)if(e={context:e,memoizedValue:t,next:null},Ys===null){if(jh===null)throw Error(Be(308));Ys=e,jh.dependencies={lanes:0,firstContext:e}}else Ys=Ys.next=e;return t}var Lo=null;function jv(e){Lo===null?Lo=[e]:Lo.push(e)}function Gw(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,jv(t)):(r.next=i.next,i.next=r),t.interleaved=r,ia(e,n)}function ia(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sa=!1;function Dv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ea(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ot&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ia(e,r)}return i=n.interleaved,i===null?(t.next=t,jv(n)):(t.next=i.next,i.next=t),n.interleaved=t,ia(e,r)}function sh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gv(e,r)}}function Qy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Dh(e,t,r,n){var i=e.updateQueue;Sa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,h=d.next;d.next=null,s===null?a=h:s.next=h,s=d;var f=e.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=h:u.next=h,f.lastBaseUpdate=d))}if(a!==null){var p=i.baseState;s=0,f=h=d=null,u=a;do{var v=u.lane,b=u.eventTime;if((n&v)===v){f!==null&&(f=f.next={eventTime:b,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=e,S=u;switch(v=t,b=r,S.tag){case 1:if(k=S.payload,typeof k=="function"){p=k.call(b,p,v);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,v=typeof k=="function"?k.call(b,p,v):k,v==null)break e;p=rr({},p,v);break e;case 2:Sa=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[u]:v.push(u))}else b={eventTime:b,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(h=f=b,d=p):f=f.next=b,s|=v;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;v=u,u=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(d=p),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ho|=s,e.lanes=s,e.memoizedState=p}}function ex(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Be(191,i));i.call(n)}}}var Pc={},Li=eo(Pc),oc=eo(Pc),sc=eo(Pc);function Po(e){if(e===Pc)throw Error(Be(174));return e}function Ov(e,t){switch(Vt(sc,t),Vt(oc,e),Vt(Li,Pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pm(t,e)}Ht(Li),Vt(Li,t)}function gl(){Ht(Li),Ht(oc),Ht(sc)}function Ww(e){Po(sc.current);var t=Po(Li.current),r=Pm(t,e.type);t!==r&&(Vt(oc,e),Vt(Li,r))}function Rv(e){oc.current===e&&(Ht(Li),Ht(oc))}var Yt=eo(0);function Oh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cp=[];function Iv(){for(var e=0;e<Cp.length;e++)Cp[e]._workInProgressVersionPrimary=null;Cp.length=0}var lh=sa.ReactCurrentDispatcher,Sp=sa.ReactCurrentBatchConfig,Go=0,tr=null,_r=null,Nr=null,Rh=!1,zu=!1,lc=0,FT=0;function Br(){throw Error(Be(321))}function Lv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!gi(e[r],t[r]))return!1;return!0}function Pv(e,t,r,n,i,a){if(Go=a,tr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lh.current=e===null||e.memoizedState===null?VT:$T,e=r(n,i),zu){a=0;do{if(zu=!1,lc=0,25<=a)throw Error(Be(301));a+=1,Nr=_r=null,t.updateQueue=null,lh.current=GT,e=r(n,i)}while(zu)}if(lh.current=Ih,t=_r!==null&&_r.next!==null,Go=0,Nr=_r=tr=null,Rh=!1,t)throw Error(Be(300));return e}function Mv(){var e=lc!==0;return lc=0,e}function ki(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?tr.memoizedState=Nr=e:Nr=Nr.next=e,Nr}function Kn(){if(_r===null){var e=tr.alternate;e=e!==null?e.memoizedState:null}else e=_r.next;var t=Nr===null?tr.memoizedState:Nr.next;if(t!==null)Nr=t,_r=e;else{if(e===null)throw Error(Be(310));_r=e,e={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},Nr===null?tr.memoizedState=Nr=e:Nr=Nr.next=e}return Nr}function uc(e,t){return typeof t=="function"?t(e):t}function Ap(e){var t=Kn(),r=t.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=e;var n=_r,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var u=s=null,d=null,h=a;do{var f=h.lane;if((Go&f)===f)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=p,s=n):d=d.next=p,tr.lanes|=f,Ho|=f}h=h.next}while(h!==null&&h!==a);d===null?s=n:d.next=u,gi(n,t.memoizedState)||(mn=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,tr.lanes|=a,Ho|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Tp(e){var t=Kn(),r=t.queue;if(r===null)throw Error(Be(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);gi(a,t.memoizedState)||(mn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Zw(){}function Kw(e,t){var r=tr,n=Kn(),i=t(),a=!gi(n.memoizedState,i);if(a&&(n.memoizedState=i,mn=!0),n=n.queue,Bv(Yw.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Nr!==null&&Nr.memoizedState.tag&1){if(r.flags|=2048,cc(9,Jw.bind(null,r,n,i,t),void 0,null),kr===null)throw Error(Be(349));Go&30||Xw(r,t,i)}return i}function Xw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=tr.updateQueue,t===null?(t={lastEffect:null,stores:null},tr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Jw(e,t,r,n){t.value=r,t.getSnapshot=n,Qw(t)&&e2(e)}function Yw(e,t,r){return r(function(){Qw(t)&&e2(e)})}function Qw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gi(e,r)}catch{return!0}}function e2(e){var t=ia(e,1);t!==null&&pi(t,e,1,-1)}function tx(e){var t=ki();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:e},t.queue=e,e=e.dispatch=qT.bind(null,tr,e),[t.memoizedState,e]}function cc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=tr.updateQueue,t===null?(t={lastEffect:null,stores:null},tr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function t2(){return Kn().memoizedState}function uh(e,t,r,n){var i=ki();tr.flags|=e,i.memoizedState=cc(1|t,r,void 0,n===void 0?null:n)}function ff(e,t,r,n){var i=Kn();n=n===void 0?null:n;var a=void 0;if(_r!==null){var s=_r.memoizedState;if(a=s.destroy,n!==null&&Lv(n,s.deps)){i.memoizedState=cc(t,r,a,n);return}}tr.flags|=e,i.memoizedState=cc(1|t,r,a,n)}function rx(e,t){return uh(8390656,8,e,t)}function Bv(e,t){return ff(2048,8,e,t)}function r2(e,t){return ff(4,2,e,t)}function n2(e,t){return ff(4,4,e,t)}function i2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a2(e,t,r){return r=r!=null?r.concat([e]):null,ff(4,4,i2.bind(null,t,e),r)}function Fv(){}function o2(e,t){var r=Kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Lv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function s2(e,t){var r=Kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Lv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function l2(e,t,r){return Go&21?(gi(r,t)||(r=fw(),tr.lanes|=r,Ho|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mn=!0),e.memoizedState=r)}function zT(e,t){var r=Bt;Bt=r!==0&&4>r?r:4,e(!0);var n=Sp.transition;Sp.transition={};try{e(!1),t()}finally{Bt=r,Sp.transition=n}}function u2(){return Kn().memoizedState}function UT(e,t,r){var n=za(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},c2(e))d2(t,r);else if(r=Gw(e,t,r,n),r!==null){var i=tn();pi(r,e,n,i),h2(r,t,n)}}function qT(e,t,r){var n=za(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(c2(e))d2(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,u=a(s,r);if(i.hasEagerState=!0,i.eagerState=u,gi(u,s)){var d=t.interleaved;d===null?(i.next=i,jv(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=Gw(e,t,i,n),r!==null&&(i=tn(),pi(r,e,n,i),h2(r,t,n))}}function c2(e){var t=e.alternate;return e===tr||t!==null&&t===tr}function d2(e,t){zu=Rh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function h2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gv(e,r)}}var Ih={readContext:Zn,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},VT={readContext:Zn,useCallback:function(e,t){return ki().memoizedState=[e,t===void 0?null:t],e},useContext:Zn,useEffect:rx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,uh(4194308,4,i2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return uh(4194308,4,e,t)},useInsertionEffect:function(e,t){return uh(4,2,e,t)},useMemo:function(e,t){var r=ki();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ki();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=UT.bind(null,tr,e),[n.memoizedState,e]},useRef:function(e){var t=ki();return e={current:e},t.memoizedState=e},useState:tx,useDebugValue:Fv,useDeferredValue:function(e){return ki().memoizedState=e},useTransition:function(){var e=tx(!1),t=e[0];return e=zT.bind(null,e[1]),ki().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=tr,i=ki();if(Zt){if(r===void 0)throw Error(Be(407));r=r()}else{if(r=t(),kr===null)throw Error(Be(349));Go&30||Xw(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,rx(Yw.bind(null,n,a,e),[e]),n.flags|=2048,cc(9,Jw.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ki(),t=kr.identifierPrefix;if(Zt){var r=Qi,n=Yi;r=(n&~(1<<32-fi(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=lc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=FT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$T={readContext:Zn,useCallback:o2,useContext:Zn,useEffect:Bv,useImperativeHandle:a2,useInsertionEffect:r2,useLayoutEffect:n2,useMemo:s2,useReducer:Ap,useRef:t2,useState:function(){return Ap(uc)},useDebugValue:Fv,useDeferredValue:function(e){var t=Kn();return l2(t,_r.memoizedState,e)},useTransition:function(){var e=Ap(uc)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:Zw,useSyncExternalStore:Kw,useId:u2,unstable_isNewReconciler:!1},GT={readContext:Zn,useCallback:o2,useContext:Zn,useEffect:Bv,useImperativeHandle:a2,useInsertionEffect:r2,useLayoutEffect:n2,useMemo:s2,useReducer:Tp,useRef:t2,useState:function(){return Tp(uc)},useDebugValue:Fv,useDeferredValue:function(e){var t=Kn();return _r===null?t.memoizedState=e:l2(t,_r.memoizedState,e)},useTransition:function(){var e=Tp(uc)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:Zw,useSyncExternalStore:Kw,useId:u2,unstable_isNewReconciler:!1};function oi(e,t){if(e&&e.defaultProps){t=rr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ng(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:rr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var pf={isMounted:function(e){return(e=e._reactInternals)?Qo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tn(),i=za(e),a=ea(n,i);a.payload=t,r!=null&&(a.callback=r),t=Ba(e,a,i),t!==null&&(pi(t,e,i,n),sh(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tn(),i=za(e),a=ea(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ba(e,a,i),t!==null&&(pi(t,e,i,n),sh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tn(),n=za(e),i=ea(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ba(e,i,n),t!==null&&(pi(t,e,n,r),sh(t,e,n))}};function nx(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!rc(r,n)||!rc(i,a):!0}function f2(e,t,r){var n=!1,i=Wa,a=t.contextType;return typeof a=="object"&&a!==null?a=Zn(a):(i=yn(t)?Vo:Vr.current,n=t.contextTypes,a=(n=n!=null)?fl(e,i):Wa),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ix(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&pf.enqueueReplaceState(t,t.state,null)}function ig(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Dv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Zn(a):(a=yn(t)?Vo:Vr.current,i.context=fl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ng(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&pf.enqueueReplaceState(i,i.state,null),Dh(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vl(e,t){try{var r="",n=t;do r+=xA(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Np(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ag(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var HT=typeof WeakMap=="function"?WeakMap:Map;function p2(e,t,r){r=ea(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ph||(Ph=!0,mg=n),ag(e,t)},r}function m2(e,t,r){r=ea(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ag(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){ag(e,t),typeof n!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function ax(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new HT;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=oN.bind(null,e,t,r),t.then(e,e))}function ox(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sx(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ea(-1,1),t.tag=2,Ba(r,t,1))),r.lanes|=1),e)}var WT=sa.ReactCurrentOwner,mn=!1;function en(e,t,r,n){t.child=e===null?$w(t,null,r,n):ml(t,e.child,r,n)}function lx(e,t,r,n,i){r=r.render;var a=t.ref;return ll(t,i),n=Pv(e,t,r,n,a,i),r=Mv(),e!==null&&!mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,aa(e,t,i)):(Zt&&r&&Cv(t),t.flags|=1,en(e,t,n,i),t.child)}function ux(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!Wv(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,g2(e,t,a,n,i)):(e=fh(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:rc,r(s,n)&&e.ref===t.ref)return aa(e,t,i)}return t.flags|=1,e=Ua(a,n),e.ref=t.ref,e.return=t,t.child=e}function g2(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(rc(a,n)&&e.ref===t.ref)if(mn=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(mn=!0);else return t.lanes=e.lanes,aa(e,t,i)}return og(e,t,r,n,i)}function v2(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(el,jn),jn|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(el,jn),jn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Vt(el,jn),jn|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Vt(el,jn),jn|=n;return en(e,t,i,r),t.child}function y2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function og(e,t,r,n,i){var a=yn(r)?Vo:Vr.current;return a=fl(t,a),ll(t,i),r=Pv(e,t,r,n,a,i),n=Mv(),e!==null&&!mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,aa(e,t,i)):(Zt&&n&&Cv(t),t.flags|=1,en(e,t,r,i),t.child)}function cx(e,t,r,n,i){if(yn(r)){var a=!0;Ah(t)}else a=!1;if(ll(t,i),t.stateNode===null)ch(e,t),f2(t,r,n),ig(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var d=s.context,h=r.contextType;typeof h=="object"&&h!==null?h=Zn(h):(h=yn(r)?Vo:Vr.current,h=fl(t,h));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==n||d!==h)&&ix(t,s,n,h),Sa=!1;var v=t.memoizedState;s.state=v,Dh(t,n,s,i),d=t.memoizedState,u!==n||v!==d||vn.current||Sa?(typeof f=="function"&&(ng(t,r,f,n),d=t.memoizedState),(u=Sa||nx(t,r,u,n,v,d,h))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),s.props=n,s.state=d,s.context=h,n=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Hw(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:oi(t.type,u),s.props=h,p=t.pendingProps,v=s.context,d=r.contextType,typeof d=="object"&&d!==null?d=Zn(d):(d=yn(r)?Vo:Vr.current,d=fl(t,d));var b=r.getDerivedStateFromProps;(f=typeof b=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||v!==d)&&ix(t,s,n,d),Sa=!1,v=t.memoizedState,s.state=v,Dh(t,n,s,i);var k=t.memoizedState;u!==p||v!==k||vn.current||Sa?(typeof b=="function"&&(ng(t,r,b,n),k=t.memoizedState),(h=Sa||nx(t,r,h,n,v,k,d)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,k,d),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,k,d)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),s.props=n,s.state=k,s.context=d,n=h):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),n=!1)}return sg(e,t,r,n,a,i)}function sg(e,t,r,n,i,a){y2(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&Ky(t,r,!1),aa(e,t,a);n=t.stateNode,WT.current=t;var u=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=ml(t,e.child,null,a),t.child=ml(t,null,u,a)):en(e,t,u,a),t.memoizedState=n.state,i&&Ky(t,r,!0),t.child}function x2(e){var t=e.stateNode;t.pendingContext?Zy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zy(e,t.context,!1),Ov(e,t.containerInfo)}function dx(e,t,r,n,i){return pl(),Av(i),t.flags|=256,en(e,t,r,n),t.child}var lg={dehydrated:null,treeContext:null,retryLane:0};function ug(e){return{baseLanes:e,cachePool:null,transitions:null}}function b2(e,t,r){var n=t.pendingProps,i=Yt.current,a=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vt(Yt,i&1),e===null)return tg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=vf(s,n,0,null),e=zo(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ug(r),t.memoizedState=lg,e):zv(t,s));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return ZT(e,t,s,n,u,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,u=i.sibling;var d={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Ua(i,d),n.subtreeFlags=i.subtreeFlags&14680064),u!==null?a=Ua(u,a):(a=zo(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?ug(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=lg,n}return a=e.child,e=a.sibling,n=Ua(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function zv(e,t){return t=vf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bd(e,t,r,n){return n!==null&&Av(n),ml(t,e.child,null,r),e=zv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ZT(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=Np(Error(Be(422))),Bd(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=vf({mode:"visible",children:n.children},i,0,null),a=zo(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&ml(t,e.child,null,s),t.child.memoizedState=ug(s),t.memoizedState=lg,a);if(!(t.mode&1))return Bd(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var u=n.dgst;return n=u,a=Error(Be(419)),n=Np(a,n,void 0),Bd(e,t,s,n)}if(u=(s&e.childLanes)!==0,mn||u){if(n=kr,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ia(e,i),pi(n,e,i,-1))}return Hv(),n=Np(Error(Be(421))),Bd(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=sN.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Dn=Ma(i.nextSibling),On=t,Zt=!0,di=null,e!==null&&(Vn[$n++]=Yi,Vn[$n++]=Qi,Vn[$n++]=$o,Yi=e.id,Qi=e.overflow,$o=t),t=zv(t,n.children),t.flags|=4096,t)}function hx(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rg(e.return,t,r)}function kp(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function _2(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(en(e,t,n.children,r),n=Yt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hx(e,r,t);else if(e.tag===19)hx(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Vt(Yt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Oh(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),kp(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Oh(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}kp(t,!0,r,null,a);break;case"together":kp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ch(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function aa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ho|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Be(153));if(t.child!==null){for(e=t.child,r=Ua(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ua(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function KT(e,t,r){switch(t.tag){case 3:x2(t),pl();break;case 5:Ww(t);break;case 1:yn(t.type)&&Ah(t);break;case 4:Ov(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Vt(kh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Vt(Yt,Yt.current&1),t.flags|=128,null):r&t.child.childLanes?b2(e,t,r):(Vt(Yt,Yt.current&1),e=aa(e,t,r),e!==null?e.sibling:null);Vt(Yt,Yt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return _2(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(Yt,Yt.current),n)break;return null;case 22:case 23:return t.lanes=0,v2(e,t,r)}return aa(e,t,r)}var w2,cg,E2,C2;w2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cg=function(){};E2=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Po(Li.current);var a=null;switch(r){case"input":i=Om(e,i),n=Om(e,n),a=[];break;case"select":i=rr({},i,{value:void 0}),n=rr({},n,{value:void 0}),a=[];break;case"textarea":i=Lm(e,i),n=Lm(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ch)}Mm(r,n);var s;r=null;for(h in i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ku.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in n){var d=n[h];if(u=i!=null?i[h]:void 0,n.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(s in u)!u.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in d)d.hasOwnProperty(s)&&u[s]!==d[s]&&(r||(r={}),r[s]=d[s])}else r||(a||(a=[]),a.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ku.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Gt("scroll",e),a||u===d||(a=[])):(a=a||[]).push(h,d))}r&&(a=a||[]).push("style",r);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};C2=function(e,t,r,n){r!==n&&(t.flags|=4)};function xu(e,t){if(!Zt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Fr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function XT(e,t,r){var n=t.pendingProps;switch(Sv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(t),null;case 1:return yn(t.type)&&Sh(),Fr(t),null;case 3:return n=t.stateNode,gl(),Ht(vn),Ht(Vr),Iv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Pd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,di!==null&&(yg(di),di=null))),cg(e,t),Fr(t),null;case 5:Rv(t);var i=Po(sc.current);if(r=t.type,e!==null&&t.stateNode!=null)E2(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Be(166));return Fr(t),null}if(e=Po(Li.current),Pd(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Oi]=t,n[ac]=a,e=(t.mode&1)!==0,r){case"dialog":Gt("cancel",n),Gt("close",n);break;case"iframe":case"object":case"embed":Gt("load",n);break;case"video":case"audio":for(i=0;i<Du.length;i++)Gt(Du[i],n);break;case"source":Gt("error",n);break;case"img":case"image":case"link":Gt("error",n),Gt("load",n);break;case"details":Gt("toggle",n);break;case"input":_y(n,a),Gt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Gt("invalid",n);break;case"textarea":Ey(n,a),Gt("invalid",n)}Mm(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="children"?typeof u=="string"?n.textContent!==u&&(a.suppressHydrationWarning!==!0&&Ld(n.textContent,u,e),i=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Ld(n.textContent,u,e),i=["children",""+u]):Ku.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Gt("scroll",n)}switch(r){case"input":Td(n),wy(n,a,!0);break;case"textarea":Td(n),Cy(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ch)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Y_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Oi]=t,e[ac]=n,w2(e,t,!1,!1),t.stateNode=e;e:{switch(s=Bm(r,n),r){case"dialog":Gt("cancel",e),Gt("close",e),i=n;break;case"iframe":case"object":case"embed":Gt("load",e),i=n;break;case"video":case"audio":for(i=0;i<Du.length;i++)Gt(Du[i],e);i=n;break;case"source":Gt("error",e),i=n;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),i=n;break;case"details":Gt("toggle",e),i=n;break;case"input":_y(e,n),i=Om(e,n),Gt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=rr({},n,{value:void 0}),Gt("invalid",e);break;case"textarea":Ey(e,n),i=Lm(e,n),Gt("invalid",e);break;default:i=n}Mm(r,i),u=i;for(a in u)if(u.hasOwnProperty(a)){var d=u[a];a==="style"?tw(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Q_(e,d)):a==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Xu(e,d):typeof d=="number"&&Xu(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ku.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Gt("scroll",e):d!=null&&cv(e,a,d,s))}switch(r){case"input":Td(e),wy(e,n,!1);break;case"textarea":Td(e),Cy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ha(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?il(e,!!n.multiple,a,!1):n.defaultValue!=null&&il(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ch)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fr(t),null;case 6:if(e&&t.stateNode!=null)C2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Be(166));if(r=Po(sc.current),Po(Li.current),Pd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Oi]=t,(a=n.nodeValue!==r)&&(e=On,e!==null))switch(e.tag){case 3:Ld(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Oi]=t,t.stateNode=n}return Fr(t),null;case 13:if(Ht(Yt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&Dn!==null&&t.mode&1&&!(t.flags&128))qw(),pl(),t.flags|=98560,a=!1;else if(a=Pd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Be(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Be(317));a[Oi]=t}else pl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fr(t),a=!1}else di!==null&&(yg(di),di=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Yt.current&1?wr===0&&(wr=3):Hv())),t.updateQueue!==null&&(t.flags|=4),Fr(t),null);case 4:return gl(),cg(e,t),e===null&&nc(t.stateNode.containerInfo),Fr(t),null;case 10:return kv(t.type._context),Fr(t),null;case 17:return yn(t.type)&&Sh(),Fr(t),null;case 19:if(Ht(Yt),a=t.memoizedState,a===null)return Fr(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)xu(a,!1);else{if(wr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Oh(e),s!==null){for(t.flags|=128,xu(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Vt(Yt,Yt.current&1|2),t.child}e=e.sibling}a.tail!==null&&dr()>yl&&(t.flags|=128,n=!0,xu(a,!1),t.lanes=4194304)}else{if(!n)if(e=Oh(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Zt)return Fr(t),null}else 2*dr()-a.renderingStartTime>yl&&r!==1073741824&&(t.flags|=128,n=!0,xu(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=dr(),t.sibling=null,r=Yt.current,Vt(Yt,n?r&1|2:r&1),t):(Fr(t),null);case 22:case 23:return Gv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?jn&1073741824&&(Fr(t),t.subtreeFlags&6&&(t.flags|=8192)):Fr(t),null;case 24:return null;case 25:return null}throw Error(Be(156,t.tag))}function JT(e,t){switch(Sv(t),t.tag){case 1:return yn(t.type)&&Sh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gl(),Ht(vn),Ht(Vr),Iv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rv(t),null;case 13:if(Ht(Yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Be(340));pl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ht(Yt),null;case 4:return gl(),null;case 10:return kv(t.type._context),null;case 22:case 23:return Gv(),null;case 24:return null;default:return null}}var Fd=!1,Ur=!1,YT=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Qs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ar(e,t,n)}else r.current=null}function dg(e,t,r){try{r()}catch(n){ar(e,t,n)}}var fx=!1;function QT(e,t){if(Zm=_h,e=kw(),Ev(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,u=-1,d=-1,h=0,f=0,p=e,v=null;t:for(;;){for(var b;p!==r||i!==0&&p.nodeType!==3||(u=s+i),p!==a||n!==0&&p.nodeType!==3||(d=s+n),p.nodeType===3&&(s+=p.nodeValue.length),(b=p.firstChild)!==null;)v=p,p=b;for(;;){if(p===e)break t;if(v===r&&++h===i&&(u=s),v===a&&++f===n&&(d=s),(b=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=b}r=u===-1||d===-1?null:{start:u,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Km={focusedElem:e,selectionRange:r},_h=!1,Ze=t;Ze!==null;)if(t=Ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ze=e;else for(;Ze!==null;){t=Ze;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,T=k.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?S:oi(t.type,S),T);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(E){ar(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Ze=e;break}Ze=t.return}return k=fx,fx=!1,k}function Uu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&dg(t,r,a)}i=i.next}while(i!==n)}}function mf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function hg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function S2(e){var t=e.alternate;t!==null&&(e.alternate=null,S2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Oi],delete t[ac],delete t[Ym],delete t[LT],delete t[PT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function A2(e){return e.tag===5||e.tag===3||e.tag===4}function px(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||A2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ch));else if(n!==4&&(e=e.child,e!==null))for(fg(e,t,r),e=e.sibling;e!==null;)fg(e,t,r),e=e.sibling}function pg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pg(e,t,r),e=e.sibling;e!==null;)pg(e,t,r),e=e.sibling}var Rr=null,si=!1;function ma(e,t,r){for(r=r.child;r!==null;)T2(e,t,r),r=r.sibling}function T2(e,t,r){if(Ii&&typeof Ii.onCommitFiberUnmount=="function")try{Ii.onCommitFiberUnmount(sf,r)}catch{}switch(r.tag){case 5:Ur||Qs(r,t);case 6:var n=Rr,i=si;Rr=null,ma(e,t,r),Rr=n,si=i,Rr!==null&&(si?(e=Rr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Rr.removeChild(r.stateNode));break;case 18:Rr!==null&&(si?(e=Rr,r=r.stateNode,e.nodeType===8?wp(e.parentNode,r):e.nodeType===1&&wp(e,r),ec(e)):wp(Rr,r.stateNode));break;case 4:n=Rr,i=si,Rr=r.stateNode.containerInfo,si=!0,ma(e,t,r),Rr=n,si=i;break;case 0:case 11:case 14:case 15:if(!Ur&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&dg(r,t,s),i=i.next}while(i!==n)}ma(e,t,r);break;case 1:if(!Ur&&(Qs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){ar(r,t,u)}ma(e,t,r);break;case 21:ma(e,t,r);break;case 22:r.mode&1?(Ur=(n=Ur)||r.memoizedState!==null,ma(e,t,r),Ur=n):ma(e,t,r);break;default:ma(e,t,r)}}function mx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new YT),t.forEach(function(n){var i=lN.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ri(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:Rr=u.stateNode,si=!1;break e;case 3:Rr=u.stateNode.containerInfo,si=!0;break e;case 4:Rr=u.stateNode.containerInfo,si=!0;break e}u=u.return}if(Rr===null)throw Error(Be(160));T2(a,s,i),Rr=null,si=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){ar(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)N2(t,e),t=t.sibling}function N2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ri(t,e),Ni(e),n&4){try{Uu(3,e,e.return),mf(3,e)}catch(S){ar(e,e.return,S)}try{Uu(5,e,e.return)}catch(S){ar(e,e.return,S)}}break;case 1:ri(t,e),Ni(e),n&512&&r!==null&&Qs(r,r.return);break;case 5:if(ri(t,e),Ni(e),n&512&&r!==null&&Qs(r,r.return),e.flags&32){var i=e.stateNode;try{Xu(i,"")}catch(S){ar(e,e.return,S)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&X_(i,a),Bm(u,s);var h=Bm(u,a);for(s=0;s<d.length;s+=2){var f=d[s],p=d[s+1];f==="style"?tw(i,p):f==="dangerouslySetInnerHTML"?Q_(i,p):f==="children"?Xu(i,p):cv(i,f,p,h)}switch(u){case"input":Rm(i,a);break;case"textarea":J_(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?il(i,!!a.multiple,b,!1):v!==!!a.multiple&&(a.defaultValue!=null?il(i,!!a.multiple,a.defaultValue,!0):il(i,!!a.multiple,a.multiple?[]:"",!1))}i[ac]=a}catch(S){ar(e,e.return,S)}}break;case 6:if(ri(t,e),Ni(e),n&4){if(e.stateNode===null)throw Error(Be(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(S){ar(e,e.return,S)}}break;case 3:if(ri(t,e),Ni(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ec(t.containerInfo)}catch(S){ar(e,e.return,S)}break;case 4:ri(t,e),Ni(e);break;case 13:ri(t,e),Ni(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Vv=dr())),n&4&&mx(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Ur=(h=Ur)||f,ri(t,e),Ur=h):ri(t,e),Ni(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(Ze=e,f=e.child;f!==null;){for(p=Ze=f;Ze!==null;){switch(v=Ze,b=v.child,v.tag){case 0:case 11:case 14:case 15:Uu(4,v,v.return);break;case 1:Qs(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){n=v,r=v.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(S){ar(n,r,S)}}break;case 5:Qs(v,v.return);break;case 22:if(v.memoizedState!==null){vx(p);continue}}b!==null?(b.return=v,Ze=b):vx(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=p.stateNode,d=p.memoizedProps.style,s=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=ew("display",s))}catch(S){ar(e,e.return,S)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(S){ar(e,e.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ri(t,e),Ni(e),n&4&&mx(e);break;case 21:break;default:ri(t,e),Ni(e)}}function Ni(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(A2(r)){var n=r;break e}r=r.return}throw Error(Be(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Xu(i,""),n.flags&=-33);var a=px(e);pg(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,u=px(e);fg(e,u,s);break;default:throw Error(Be(161))}}catch(d){ar(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eN(e,t,r){Ze=e,k2(e)}function k2(e,t,r){for(var n=(e.mode&1)!==0;Ze!==null;){var i=Ze,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Fd;if(!s){var u=i.alternate,d=u!==null&&u.memoizedState!==null||Ur;u=Fd;var h=Ur;if(Fd=s,(Ur=d)&&!h)for(Ze=i;Ze!==null;)s=Ze,d=s.child,s.tag===22&&s.memoizedState!==null?yx(i):d!==null?(d.return=s,Ze=d):yx(i);for(;a!==null;)Ze=a,k2(a),a=a.sibling;Ze=i,Fd=u,Ur=h}gx(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ze=a):gx(e)}}function gx(e){for(;Ze!==null;){var t=Ze;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ur||mf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ur)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:oi(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ex(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ex(t,s,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ec(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Ur||t.flags&512&&hg(t)}catch(v){ar(t,t.return,v)}}if(t===e){Ze=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ze=r;break}Ze=t.return}}function vx(e){for(;Ze!==null;){var t=Ze;if(t===e){Ze=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ze=r;break}Ze=t.return}}function yx(e){for(;Ze!==null;){var t=Ze;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mf(4,t)}catch(d){ar(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(d){ar(t,i,d)}}var a=t.return;try{hg(t)}catch(d){ar(t,a,d)}break;case 5:var s=t.return;try{hg(t)}catch(d){ar(t,s,d)}}}catch(d){ar(t,t.return,d)}if(t===e){Ze=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Ze=u;break}Ze=t.return}}var tN=Math.ceil,Lh=sa.ReactCurrentDispatcher,Uv=sa.ReactCurrentOwner,Hn=sa.ReactCurrentBatchConfig,Ot=0,kr=null,yr=null,Lr=0,jn=0,el=eo(0),wr=0,dc=null,Ho=0,gf=0,qv=0,qu=null,hn=null,Vv=0,yl=1/0,Ki=null,Ph=!1,mg=null,Fa=null,zd=!1,Da=null,Mh=0,Vu=0,gg=null,dh=-1,hh=0;function tn(){return Ot&6?dr():dh!==-1?dh:dh=dr()}function za(e){return e.mode&1?Ot&2&&Lr!==0?Lr&-Lr:BT.transition!==null?(hh===0&&(hh=fw()),hh):(e=Bt,e!==0||(e=window.event,e=e===void 0?16:bw(e.type)),e):1}function pi(e,t,r,n){if(50<Vu)throw Vu=0,gg=null,Error(Be(185));Rc(e,r,n),(!(Ot&2)||e!==kr)&&(e===kr&&(!(Ot&2)&&(gf|=r),wr===4&&Na(e,Lr)),xn(e,n),r===1&&Ot===0&&!(t.mode&1)&&(yl=dr()+500,hf&&to()))}function xn(e,t){var r=e.callbackNode;BA(e,t);var n=bh(e,e===kr?Lr:0);if(n===0)r!==null&&Ty(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ty(r),t===1)e.tag===0?MT(xx.bind(null,e)):Fw(xx.bind(null,e)),RT(function(){!(Ot&6)&&to()}),r=null;else{switch(pw(n)){case 1:r=mv;break;case 4:r=dw;break;case 16:r=xh;break;case 536870912:r=hw;break;default:r=xh}r=M2(r,j2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function j2(e,t){if(dh=-1,hh=0,Ot&6)throw Error(Be(327));var r=e.callbackNode;if(ul()&&e.callbackNode!==r)return null;var n=bh(e,e===kr?Lr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Bh(e,n);else{t=n;var i=Ot;Ot|=2;var a=O2();(kr!==e||Lr!==t)&&(Ki=null,yl=dr()+500,Fo(e,t));do try{iN();break}catch(u){D2(e,u)}while(!0);Nv(),Lh.current=a,Ot=i,yr!==null?t=0:(kr=null,Lr=0,t=wr)}if(t!==0){if(t===2&&(i=Vm(e),i!==0&&(n=i,t=vg(e,i))),t===1)throw r=dc,Fo(e,0),Na(e,n),xn(e,dr()),r;if(t===6)Na(e,n);else{if(i=e.current.alternate,!(n&30)&&!rN(i)&&(t=Bh(e,n),t===2&&(a=Vm(e),a!==0&&(n=a,t=vg(e,a))),t===1))throw r=dc,Fo(e,0),Na(e,n),xn(e,dr()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Be(345));case 2:ko(e,hn,Ki);break;case 3:if(Na(e,n),(n&130023424)===n&&(t=Vv+500-dr(),10<t)){if(bh(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){tn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Jm(ko.bind(null,e,hn,Ki),t);break}ko(e,hn,Ki);break;case 4:if(Na(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-fi(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tN(n/1960))-n,10<n){e.timeoutHandle=Jm(ko.bind(null,e,hn,Ki),n);break}ko(e,hn,Ki);break;case 5:ko(e,hn,Ki);break;default:throw Error(Be(329))}}}return xn(e,dr()),e.callbackNode===r?j2.bind(null,e):null}function vg(e,t){var r=qu;return e.current.memoizedState.isDehydrated&&(Fo(e,t).flags|=256),e=Bh(e,t),e!==2&&(t=hn,hn=r,t!==null&&yg(t)),e}function yg(e){hn===null?hn=e:hn.push.apply(hn,e)}function rN(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!gi(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Na(e,t){for(t&=~qv,t&=~gf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-fi(t),n=1<<r;e[r]=-1,t&=~n}}function xx(e){if(Ot&6)throw Error(Be(327));ul();var t=bh(e,0);if(!(t&1))return xn(e,dr()),null;var r=Bh(e,t);if(e.tag!==0&&r===2){var n=Vm(e);n!==0&&(t=n,r=vg(e,n))}if(r===1)throw r=dc,Fo(e,0),Na(e,t),xn(e,dr()),r;if(r===6)throw Error(Be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ko(e,hn,Ki),xn(e,dr()),null}function $v(e,t){var r=Ot;Ot|=1;try{return e(t)}finally{Ot=r,Ot===0&&(yl=dr()+500,hf&&to())}}function Wo(e){Da!==null&&Da.tag===0&&!(Ot&6)&&ul();var t=Ot;Ot|=1;var r=Hn.transition,n=Bt;try{if(Hn.transition=null,Bt=1,e)return e()}finally{Bt=n,Hn.transition=r,Ot=t,!(Ot&6)&&to()}}function Gv(){jn=el.current,Ht(el)}function Fo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,OT(r)),yr!==null)for(r=yr.return;r!==null;){var n=r;switch(Sv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sh();break;case 3:gl(),Ht(vn),Ht(Vr),Iv();break;case 5:Rv(n);break;case 4:gl();break;case 13:Ht(Yt);break;case 19:Ht(Yt);break;case 10:kv(n.type._context);break;case 22:case 23:Gv()}r=r.return}if(kr=e,yr=e=Ua(e.current,null),Lr=jn=t,wr=0,dc=null,qv=gf=Ho=0,hn=qu=null,Lo!==null){for(t=0;t<Lo.length;t++)if(r=Lo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Lo=null}return e}function D2(e,t){do{var r=yr;try{if(Nv(),lh.current=Ih,Rh){for(var n=tr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Rh=!1}if(Go=0,Nr=_r=tr=null,zu=!1,lc=0,Uv.current=null,r===null||r.return===null){wr=1,dc=t,yr=null;break}e:{var a=e,s=r.return,u=r,d=t;if(t=Lr,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=ox(s);if(b!==null){b.flags&=-257,sx(b,s,u,a,t),b.mode&1&&ax(a,h,t),t=b,d=h;var k=t.updateQueue;if(k===null){var S=new Set;S.add(d),t.updateQueue=S}else k.add(d);break e}else{if(!(t&1)){ax(a,h,t),Hv();break e}d=Error(Be(426))}}else if(Zt&&u.mode&1){var T=ox(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),sx(T,s,u,a,t),Av(vl(d,u));break e}}a=d=vl(d,u),wr!==4&&(wr=2),qu===null?qu=[a]:qu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=p2(a,d,t);Qy(a,y);break e;case 1:u=d;var _=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fa===null||!Fa.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var E=m2(a,u,t);Qy(a,E);break e}}a=a.return}while(a!==null)}I2(r)}catch(N){t=N,yr===r&&r!==null&&(yr=r=r.return);continue}break}while(!0)}function O2(){var e=Lh.current;return Lh.current=Ih,e===null?Ih:e}function Hv(){(wr===0||wr===3||wr===2)&&(wr=4),kr===null||!(Ho&268435455)&&!(gf&268435455)||Na(kr,Lr)}function Bh(e,t){var r=Ot;Ot|=2;var n=O2();(kr!==e||Lr!==t)&&(Ki=null,Fo(e,t));do try{nN();break}catch(i){D2(e,i)}while(!0);if(Nv(),Ot=r,Lh.current=n,yr!==null)throw Error(Be(261));return kr=null,Lr=0,wr}function nN(){for(;yr!==null;)R2(yr)}function iN(){for(;yr!==null&&!kA();)R2(yr)}function R2(e){var t=P2(e.alternate,e,jn);e.memoizedProps=e.pendingProps,t===null?I2(e):yr=t,Uv.current=null}function I2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=JT(r,t),r!==null){r.flags&=32767,yr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wr=6,yr=null;return}}else if(r=XT(r,t,jn),r!==null){yr=r;return}if(t=t.sibling,t!==null){yr=t;return}yr=t=e}while(t!==null);wr===0&&(wr=5)}function ko(e,t,r){var n=Bt,i=Hn.transition;try{Hn.transition=null,Bt=1,aN(e,t,r,n)}finally{Hn.transition=i,Bt=n}return null}function aN(e,t,r,n){do ul();while(Da!==null);if(Ot&6)throw Error(Be(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Be(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(FA(e,a),e===kr&&(yr=kr=null,Lr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zd||(zd=!0,M2(xh,function(){return ul(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Hn.transition,Hn.transition=null;var s=Bt;Bt=1;var u=Ot;Ot|=4,Uv.current=null,QT(e,r),N2(r,e),ST(Km),_h=!!Zm,Km=Zm=null,e.current=r,eN(r),jA(),Ot=u,Bt=s,Hn.transition=a}else e.current=r;if(zd&&(zd=!1,Da=e,Mh=i),a=e.pendingLanes,a===0&&(Fa=null),RA(r.stateNode),xn(e,dr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ph)throw Ph=!1,e=mg,mg=null,e;return Mh&1&&e.tag!==0&&ul(),a=e.pendingLanes,a&1?e===gg?Vu++:(Vu=0,gg=e):Vu=0,to(),null}function ul(){if(Da!==null){var e=pw(Mh),t=Hn.transition,r=Bt;try{if(Hn.transition=null,Bt=16>e?16:e,Da===null)var n=!1;else{if(e=Da,Da=null,Mh=0,Ot&6)throw Error(Be(331));var i=Ot;for(Ot|=4,Ze=e.current;Ze!==null;){var a=Ze,s=a.child;if(Ze.flags&16){var u=a.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(Ze=h;Ze!==null;){var f=Ze;switch(f.tag){case 0:case 11:case 15:Uu(8,f,a)}var p=f.child;if(p!==null)p.return=f,Ze=p;else for(;Ze!==null;){f=Ze;var v=f.sibling,b=f.return;if(S2(f),f===h){Ze=null;break}if(v!==null){v.return=b,Ze=v;break}Ze=b}}}var k=a.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}Ze=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Ze=s;else e:for(;Ze!==null;){if(a=Ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Uu(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Ze=y;break e}Ze=a.return}}var _=e.current;for(Ze=_;Ze!==null;){s=Ze;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,Ze=w;else e:for(s=_;Ze!==null;){if(u=Ze,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:mf(9,u)}}catch(N){ar(u,u.return,N)}if(u===s){Ze=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,Ze=E;break e}Ze=u.return}}if(Ot=i,to(),Ii&&typeof Ii.onPostCommitFiberRoot=="function")try{Ii.onPostCommitFiberRoot(sf,e)}catch{}n=!0}return n}finally{Bt=r,Hn.transition=t}}return!1}function bx(e,t,r){t=vl(r,t),t=p2(e,t,1),e=Ba(e,t,1),t=tn(),e!==null&&(Rc(e,1,t),xn(e,t))}function ar(e,t,r){if(e.tag===3)bx(e,e,r);else for(;t!==null;){if(t.tag===3){bx(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fa===null||!Fa.has(n))){e=vl(r,e),e=m2(t,e,1),t=Ba(t,e,1),e=tn(),t!==null&&(Rc(t,1,e),xn(t,e));break}}t=t.return}}function oN(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=tn(),e.pingedLanes|=e.suspendedLanes&r,kr===e&&(Lr&r)===r&&(wr===4||wr===3&&(Lr&130023424)===Lr&&500>dr()-Vv?Fo(e,0):qv|=r),xn(e,t)}function L2(e,t){t===0&&(e.mode&1?(t=jd,jd<<=1,!(jd&130023424)&&(jd=4194304)):t=1);var r=tn();e=ia(e,t),e!==null&&(Rc(e,t,r),xn(e,r))}function sN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),L2(e,r)}function lN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Be(314))}n!==null&&n.delete(t),L2(e,r)}var P2;P2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vn.current)mn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return mn=!1,KT(e,t,r);mn=!!(e.flags&131072)}else mn=!1,Zt&&t.flags&1048576&&zw(t,Nh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ch(e,t),e=t.pendingProps;var i=fl(t,Vr.current);ll(t,r),i=Pv(null,t,n,e,i,r);var a=Mv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yn(n)?(a=!0,Ah(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dv(t),i.updater=pf,t.stateNode=i,i._reactInternals=t,ig(t,n,e,r),t=sg(null,t,n,!0,a,r)):(t.tag=0,Zt&&a&&Cv(t),en(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ch(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=cN(n),e=oi(n,e),i){case 0:t=og(null,t,n,e,r);break e;case 1:t=cx(null,t,n,e,r);break e;case 11:t=lx(null,t,n,e,r);break e;case 14:t=ux(null,t,n,oi(n.type,e),r);break e}throw Error(Be(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oi(n,i),og(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oi(n,i),cx(e,t,n,i,r);case 3:e:{if(x2(t),e===null)throw Error(Be(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Hw(e,t),Dh(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=vl(Error(Be(423)),t),t=dx(e,t,n,r,i);break e}else if(n!==i){i=vl(Error(Be(424)),t),t=dx(e,t,n,r,i);break e}else for(Dn=Ma(t.stateNode.containerInfo.firstChild),On=t,Zt=!0,di=null,r=$w(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pl(),n===i){t=aa(e,t,r);break e}en(e,t,n,r)}t=t.child}return t;case 5:return Ww(t),e===null&&tg(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Xm(n,i)?s=null:a!==null&&Xm(n,a)&&(t.flags|=32),y2(e,t),en(e,t,s,r),t.child;case 6:return e===null&&tg(t),null;case 13:return b2(e,t,r);case 4:return Ov(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ml(t,null,n,r):en(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oi(n,i),lx(e,t,n,i,r);case 7:return en(e,t,t.pendingProps,r),t.child;case 8:return en(e,t,t.pendingProps.children,r),t.child;case 12:return en(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Vt(kh,n._currentValue),n._currentValue=s,a!==null)if(gi(a.value,s)){if(a.children===i.children&&!vn.current){t=aa(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){s=a.child;for(var d=u.firstContext;d!==null;){if(d.context===n){if(a.tag===1){d=ea(-1,r&-r),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?d.next=d:(d.next=f.next,f.next=d),h.pending=d}}a.lanes|=r,d=a.alternate,d!==null&&(d.lanes|=r),rg(a.return,r,t),u.lanes|=r;break}d=d.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Be(341));s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),rg(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}en(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,ll(t,r),i=Zn(i),n=n(i),t.flags|=1,en(e,t,n,r),t.child;case 14:return n=t.type,i=oi(n,t.pendingProps),i=oi(n.type,i),ux(e,t,n,i,r);case 15:return g2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oi(n,i),ch(e,t),t.tag=1,yn(n)?(e=!0,Ah(t)):e=!1,ll(t,r),f2(t,n,i),ig(t,n,i,r),sg(null,t,n,!0,e,r);case 19:return _2(e,t,r);case 22:return v2(e,t,r)}throw Error(Be(156,t.tag))};function M2(e,t){return cw(e,t)}function uN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(e,t,r,n){return new uN(e,t,r,n)}function Wv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cN(e){if(typeof e=="function")return Wv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hv)return 11;if(e===fv)return 14}return 2}function Ua(e,t){var r=e.alternate;return r===null?(r=Gn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fh(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")Wv(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case $s:return zo(r.children,i,a,t);case dv:s=8,i|=8;break;case Nm:return e=Gn(12,r,t,i|2),e.elementType=Nm,e.lanes=a,e;case km:return e=Gn(13,r,t,i),e.elementType=km,e.lanes=a,e;case jm:return e=Gn(19,r,t,i),e.elementType=jm,e.lanes=a,e;case W_:return vf(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G_:s=10;break e;case H_:s=9;break e;case hv:s=11;break e;case fv:s=14;break e;case Ca:s=16,n=null;break e}throw Error(Be(130,e==null?e:typeof e,""))}return t=Gn(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function zo(e,t,r,n){return e=Gn(7,e,n,t),e.lanes=r,e}function vf(e,t,r,n){return e=Gn(22,e,n,t),e.elementType=W_,e.lanes=r,e.stateNode={isHidden:!1},e}function jp(e,t,r){return e=Gn(6,e,null,t),e.lanes=r,e}function Dp(e,t,r){return t=Gn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dN(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dp(0),this.expirationTimes=dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zv(e,t,r,n,i,a,s,u,d){return e=new dN(e,t,r,u,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Gn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dv(a),e}function hN(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function B2(e){if(!e)return Wa;e=e._reactInternals;e:{if(Qo(e)!==e||e.tag!==1)throw Error(Be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Be(171))}if(e.tag===1){var r=e.type;if(yn(r))return Bw(e,r,t)}return t}function F2(e,t,r,n,i,a,s,u,d){return e=Zv(r,n,!0,e,i,a,s,u,d),e.context=B2(null),r=e.current,n=tn(),i=za(r),a=ea(n,i),a.callback=t??null,Ba(r,a,i),e.current.lanes=i,Rc(e,i,n),xn(e,n),e}function yf(e,t,r,n){var i=t.current,a=tn(),s=za(i);return r=B2(r),t.context===null?t.context=r:t.pendingContext=r,t=ea(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ba(i,t,s),e!==null&&(pi(e,i,s,a),sh(e,i,s)),s}function Fh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _x(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Kv(e,t){_x(e,t),(e=e.alternate)&&_x(e,t)}function fN(){return null}var z2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xv(e){this._internalRoot=e}xf.prototype.render=Xv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Be(409));yf(e,t,null,null)};xf.prototype.unmount=Xv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wo(function(){yf(null,e,null,null)}),t[na]=null}};function xf(e){this._internalRoot=e}xf.prototype.unstable_scheduleHydration=function(e){if(e){var t=vw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ta.length&&t!==0&&t<Ta[r].priority;r++);Ta.splice(r,0,e),r===0&&xw(e)}};function Jv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wx(){}function pN(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var h=Fh(s);a.call(h)}}var s=F2(t,n,e,0,null,!1,!1,"",wx);return e._reactRootContainer=s,e[na]=s.current,nc(e.nodeType===8?e.parentNode:e),Wo(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var u=n;n=function(){var h=Fh(d);u.call(h)}}var d=Zv(e,0,!1,null,null,!1,!1,"",wx);return e._reactRootContainer=d,e[na]=d.current,nc(e.nodeType===8?e.parentNode:e),Wo(function(){yf(t,d,r,n)}),d}function _f(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var u=i;i=function(){var d=Fh(s);u.call(d)}}yf(t,s,e,i)}else s=pN(r,t,e,i,n);return Fh(s)}mw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ju(t.pendingLanes);r!==0&&(gv(t,r|1),xn(t,dr()),!(Ot&6)&&(yl=dr()+500,to()))}break;case 13:Wo(function(){var n=ia(e,1);if(n!==null){var i=tn();pi(n,e,1,i)}}),Kv(e,1)}};vv=function(e){if(e.tag===13){var t=ia(e,134217728);if(t!==null){var r=tn();pi(t,e,134217728,r)}Kv(e,134217728)}};gw=function(e){if(e.tag===13){var t=za(e),r=ia(e,t);if(r!==null){var n=tn();pi(r,e,t,n)}Kv(e,t)}};vw=function(){return Bt};yw=function(e,t){var r=Bt;try{return Bt=e,t()}finally{Bt=r}};zm=function(e,t,r){switch(t){case"input":if(Rm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=df(n);if(!i)throw Error(Be(90));K_(n),Rm(n,i)}}}break;case"textarea":J_(e,r);break;case"select":t=r.value,t!=null&&il(e,!!r.multiple,t,!1)}};iw=$v;aw=Wo;var mN={usingClientEntryPoint:!1,Events:[Lc,Zs,df,rw,nw,$v]},bu={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gN={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lw(e),e===null?null:e.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||fN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{sf=Ud.inject(gN),Ii=Ud}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mN;Mn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jv(t))throw Error(Be(200));return hN(e,t,null,r)};Mn.createRoot=function(e,t){if(!Jv(e))throw Error(Be(299));var r=!1,n="",i=z2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Zv(e,1,!1,null,null,r,!1,n,i),e[na]=t.current,nc(e.nodeType===8?e.parentNode:e),new Xv(t)};Mn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Be(188)):(e=Object.keys(e).join(","),Error(Be(268,e)));return e=lw(t),e=e===null?null:e.stateNode,e};Mn.flushSync=function(e){return Wo(e)};Mn.hydrate=function(e,t,r){if(!bf(t))throw Error(Be(200));return _f(null,e,t,!0,r)};Mn.hydrateRoot=function(e,t,r){if(!Jv(e))throw Error(Be(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=z2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=F2(t,null,e,1,r??null,i,!1,a,s),e[na]=t.current,nc(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new xf(t)};Mn.render=function(e,t,r){if(!bf(t))throw Error(Be(200));return _f(null,e,t,!1,r)};Mn.unmountComponentAtNode=function(e){if(!bf(e))throw Error(Be(40));return e._reactRootContainer?(Wo(function(){_f(null,null,e,!1,function(){e._reactRootContainer=null,e[na]=null})}),!0):!1};Mn.unstable_batchedUpdates=$v;Mn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bf(r))throw Error(Be(200));if(e==null||e._reactInternals===void 0)throw Error(Be(38));return _f(e,t,r,!1,n)};Mn.version="18.3.1-next-f1338f8080-20240426";function U2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U2)}catch(e){console.error(e)}}U2(),U_.exports=Mn;var vN=U_.exports,q2,Ex=vN;q2=Ex.createRoot,Ex.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hc.apply(this,arguments)}var Oa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Oa||(Oa={}));const Cx="popstate";function yN(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:u}=n.location;return xg("",{pathname:a,search:s,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:zh(i)}return bN(t,r,null,e)}function hr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function V2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xN(){return Math.random().toString(36).substr(2,8)}function Sx(e,t){return{usr:e.state,key:e.key,idx:t}}function xg(e,t,r,n){return r===void 0&&(r=null),hc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Il(t):t,{state:r,key:t&&t.key||n||xN()})}function zh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Il(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function bN(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,u=Oa.Pop,d=null,h=f();h==null&&(h=0,s.replaceState(hc({},s.state,{idx:h}),""));function f(){return(s.state||{idx:null}).idx}function p(){u=Oa.Pop;let T=f(),y=T==null?null:T-h;h=T,d&&d({action:u,location:S.location,delta:y})}function v(T,y){u=Oa.Push;let _=xg(S.location,T,y);h=f()+1;let w=Sx(_,h),E=S.createHref(_);try{s.pushState(w,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(E)}a&&d&&d({action:u,location:S.location,delta:1})}function b(T,y){u=Oa.Replace;let _=xg(S.location,T,y);h=f();let w=Sx(_,h),E=S.createHref(_);s.replaceState(w,"",E),a&&d&&d({action:u,location:S.location,delta:0})}function k(T){let y=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof T=="string"?T:zh(T);return _=_.replace(/ $/,"%20"),hr(y,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,y)}let S={get action(){return u},get location(){return e(i,s)},listen(T){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Cx,p),d=T,()=>{i.removeEventListener(Cx,p),d=null}},createHref(T){return t(i,T)},createURL:k,encodeLocation(T){let y=k(T);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:v,replace:b,go(T){return s.go(T)}};return S}var Ax;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ax||(Ax={}));function _N(e,t,r){return r===void 0&&(r="/"),wN(e,t,r)}function wN(e,t,r,n){let i=typeof t=="string"?Il(t):t,a=Yv(i.pathname||"/",r);if(a==null)return null;let s=$2(e);EN(s);let u=null;for(let d=0;u==null&&d<s.length;++d){let h=LN(a);u=ON(s[d],h)}return u}function $2(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};d.relativePath.startsWith("/")&&(hr(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let h=qa([n,d.relativePath]),f=r.concat(d);a.children&&a.children.length>0&&(hr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),$2(a.children,t,f,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:jN(h,a.index),routesMeta:f})};return e.forEach((a,s)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,s);else for(let d of G2(a.path))i(a,s,d)}),t}function G2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=G2(n.join("/")),u=[];return u.push(...s.map(d=>d===""?a:[a,d].join("/"))),i&&u.push(...s),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function EN(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:DN(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const CN=/^:[\w-]+$/,SN=3,AN=2,TN=1,NN=10,kN=-2,Tx=e=>e==="*";function jN(e,t){let r=e.split("/"),n=r.length;return r.some(Tx)&&(n+=kN),t&&(n+=AN),r.filter(i=>!Tx(i)).reduce((i,a)=>i+(CN.test(a)?SN:a===""?TN:NN),n)}function DN(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function ON(e,t,r){let{routesMeta:n}=e,i={},a="/",s=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=RN({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),v=d.route;if(!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:qa([a,p.pathname]),pathnameBase:FN(qa([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=qa([a,p.pathnameBase]))}return s}function RN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=IN(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,f,p)=>{let{paramName:v,isOptional:b}=f;if(v==="*"){let S=u[p]||"";s=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const k=u[p];return b&&!k?h[v]=void 0:h[v]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:s,pattern:e}}function IN(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),V2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function LN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return V2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Yv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function PN(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Il(e):e;return{pathname:r?r.startsWith("/")?r:MN(r,t):t,search:zN(n),hash:UN(i)}}function MN(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Op(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BN(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Qv(e,t){let r=BN(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function e0(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Il(e):(i=hc({},e),hr(!i.pathname||!i.pathname.includes("?"),Op("?","pathname","search",i)),hr(!i.pathname||!i.pathname.includes("#"),Op("#","pathname","hash",i)),hr(!i.search||!i.search.includes("#"),Op("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,u;if(s==null)u=r;else{let p=t.length-1;if(!n&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}u=p>=0?t[p]:"/"}let d=PN(i,u),h=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const qa=e=>e.join("/").replace(/\/\/+/g,"/"),FN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const H2=["post","put","patch","delete"];new Set(H2);const VN=["get",...H2];new Set(VN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fc.apply(this,arguments)}const t0=ge.createContext(null),$N=ge.createContext(null),ro=ge.createContext(null),wf=ge.createContext(null),no=ge.createContext({outlet:null,matches:[],isDataRoute:!1}),W2=ge.createContext(null);function GN(e,t){let{relative:r}=t===void 0?{}:t;Ll()||hr(!1);let{basename:n,navigator:i}=ge.useContext(ro),{hash:a,pathname:s,search:u}=K2(e,{relative:r}),d=s;return n!=="/"&&(d=s==="/"?n:qa([n,s])),i.createHref({pathname:d,search:u,hash:a})}function Ll(){return ge.useContext(wf)!=null}function es(){return Ll()||hr(!1),ge.useContext(wf).location}function Z2(e){ge.useContext(ro).static||ge.useLayoutEffect(e)}function ts(){let{isDataRoute:e}=ge.useContext(no);return e?ik():HN()}function HN(){Ll()||hr(!1);let e=ge.useContext(t0),{basename:t,future:r,navigator:n}=ge.useContext(ro),{matches:i}=ge.useContext(no),{pathname:a}=es(),s=JSON.stringify(Qv(i,r.v7_relativeSplatPath)),u=ge.useRef(!1);return Z2(()=>{u.current=!0}),ge.useCallback(function(h,f){if(f===void 0&&(f={}),!u.current)return;if(typeof h=="number"){n.go(h);return}let p=e0(h,JSON.parse(s),a,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:qa([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,s,a,e])}function K2(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=ge.useContext(ro),{matches:i}=ge.useContext(no),{pathname:a}=es(),s=JSON.stringify(Qv(i,n.v7_relativeSplatPath));return ge.useMemo(()=>e0(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function WN(e,t){return ZN(e,t)}function ZN(e,t,r,n){Ll()||hr(!1);let{navigator:i}=ge.useContext(ro),{matches:a}=ge.useContext(no),s=a[a.length-1],u=s?s.params:{};s&&s.pathname;let d=s?s.pathnameBase:"/";s&&s.route;let h=es(),f;if(t){var p;let T=typeof t=="string"?Il(t):t;d==="/"||(p=T.pathname)!=null&&p.startsWith(d)||hr(!1),f=T}else f=h;let v=f.pathname||"/",b=v;if(d!=="/"){let T=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(T.length).join("/")}let k=_N(e,{pathname:b}),S=QN(k&&k.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:qa([d,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?d:qa([d,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,r,n);return t&&S?ge.createElement(wf.Provider,{value:{location:fc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Oa.Pop}},S):S}function KN(){let e=nk(),t=qN(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},t),r?ge.createElement("pre",{style:i},r):null,null)}const XN=ge.createElement(KN,null);class JN extends ge.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?ge.createElement(no.Provider,{value:this.props.routeContext},ge.createElement(W2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YN(e){let{routeContext:t,match:r,children:n}=e,i=ge.useContext(t0);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),ge.createElement(no.Provider,{value:t},n)}function QN(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,u=(i=r)==null?void 0:i.errors;if(u!=null){let f=s.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);f>=0||hr(!1),s=s.slice(0,Math.min(s.length,f+1))}let d=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:b}=r,k=p.route.loader&&v[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||k){d=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,v)=>{let b,k=!1,S=null,T=null;r&&(b=u&&p.route.id?u[p.route.id]:void 0,S=p.route.errorElement||XN,d&&(h<0&&v===0?(ak("route-fallback"),k=!0,T=null):h===v&&(k=!0,T=p.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,v+1)),_=()=>{let w;return b?w=S:k?w=T:p.route.Component?w=ge.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=f,ge.createElement(YN,{match:p,routeContext:{outlet:f,matches:y,isDataRoute:r!=null},children:w})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?ge.createElement(JN,{location:r.location,revalidation:r.revalidation,component:S,error:b,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}var X2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(X2||{}),J2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(J2||{});function ek(e){let t=ge.useContext(t0);return t||hr(!1),t}function tk(e){let t=ge.useContext($N);return t||hr(!1),t}function rk(e){let t=ge.useContext(no);return t||hr(!1),t}function Y2(e){let t=rk(),r=t.matches[t.matches.length-1];return r.route.id||hr(!1),r.route.id}function nk(){var e;let t=ge.useContext(W2),r=tk(),n=Y2();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ik(){let{router:e}=ek(X2.UseNavigateStable),t=Y2(J2.UseNavigateStable),r=ge.useRef(!1);return Z2(()=>{r.current=!0}),ge.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,fc({fromRouteId:t},a)))},[e,t])}const Nx={};function ak(e,t,r){Nx[e]||(Nx[e]=!0)}function ok(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Q2(e){let{to:t,replace:r,state:n,relative:i}=e;Ll()||hr(!1);let{future:a,static:s}=ge.useContext(ro),{matches:u}=ge.useContext(no),{pathname:d}=es(),h=ts(),f=e0(t,Qv(u,a.v7_relativeSplatPath),d,i==="path"),p=JSON.stringify(f);return ge.useEffect(()=>h(JSON.parse(p),{replace:r,state:n,relative:i}),[h,p,i,r,n]),null}function _a(e){hr(!1)}function sk(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Oa.Pop,navigator:a,static:s=!1,future:u}=e;Ll()&&hr(!1);let d=t.replace(/^\/*/,"/"),h=ge.useMemo(()=>({basename:d,navigator:a,static:s,future:fc({v7_relativeSplatPath:!1},u)}),[d,u,a,s]);typeof n=="string"&&(n=Il(n));let{pathname:f="/",search:p="",hash:v="",state:b=null,key:k="default"}=n,S=ge.useMemo(()=>{let T=Yv(f,d);return T==null?null:{location:{pathname:T,search:p,hash:v,state:b,key:k},navigationType:i}},[d,f,p,v,b,k,i]);return S==null?null:ge.createElement(ro.Provider,{value:h},ge.createElement(wf.Provider,{children:r,value:S}))}function lk(e){let{children:t,location:r}=e;return WN(bg(t),r)}new Promise(()=>{});function bg(e,t){t===void 0&&(t=[]);let r=[];return ge.Children.forEach(e,(n,i)=>{if(!ge.isValidElement(n))return;let a=[...t,i];if(n.type===ge.Fragment){r.push.apply(r,bg(n.props.children,a));return}n.type!==_a&&hr(!1),!n.props.index||!n.props.children||hr(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=bg(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_g.apply(this,arguments)}function uk(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function ck(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dk(e,t){return e.button===0&&(!t||t==="_self")&&!ck(e)}const hk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fk="6";try{window.__reactRouterVersion=fk}catch{}const pk="startTransition",kx=oA[pk];function mk(e){let{basename:t,children:r,future:n,window:i}=e,a=ge.useRef();a.current==null&&(a.current=yN({window:i,v5Compat:!0}));let s=a.current,[u,d]=ge.useState({action:s.action,location:s.location}),{v7_startTransition:h}=n||{},f=ge.useCallback(p=>{h&&kx?kx(()=>d(p)):d(p)},[d,h]);return ge.useLayoutEffect(()=>s.listen(f),[s,f]),ge.useEffect(()=>ok(n),[n]),ge.createElement(sk,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:s,future:n})}const gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wg=ge.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:u,target:d,to:h,preventScrollReset:f,viewTransition:p}=t,v=uk(t,hk),{basename:b}=ge.useContext(ro),k,S=!1;if(typeof h=="string"&&vk.test(h)&&(k=h,gk))try{let w=new URL(window.location.href),E=h.startsWith("//")?new URL(w.protocol+h):new URL(h),N=Yv(E.pathname,b);E.origin===w.origin&&N!=null?h=N+E.search+E.hash:S=!0}catch{}let T=GN(h,{relative:i}),y=yk(h,{replace:s,state:u,target:d,preventScrollReset:f,relative:i,viewTransition:p});function _(w){n&&n(w),w.defaultPrevented||y(w)}return ge.createElement("a",_g({},v,{href:k||T,onClick:S||a?n:_,ref:r,target:d}))});var jx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jx||(jx={}));var Dx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dx||(Dx={}));function yk(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:u}=t===void 0?{}:t,d=ts(),h=es(),f=K2(e,{relative:s});return ge.useCallback(p=>{if(dk(p,r)){p.preventDefault();let v=n!==void 0?n:zh(h)===zh(f);d(e,{replace:v,state:i,preventScrollReset:a,relative:s,viewTransition:u})}},[h,d,f,n,i,r,e,a,s,u])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Er=(e,t)=>{const r=ge.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:u="",children:d,...h},f)=>ge.createElement("svg",{ref:f,...xk,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${bk(e)}`,u].join(" "),...h},[...t.map(([p,v])=>ge.createElement(p,v)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Er("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Er("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Er("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Er("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=Er("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Er("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=Er("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Er("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Er("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=Er("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Er("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=Er("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=Er("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Er("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=Er("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=Er("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=Er("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=Er("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=Er("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Dk({isOpen:e,onClose:t,onSubmit:r}){const[n,i]=ge.useState("");if(!e)return null;const a=s=>{s.preventDefault(),n.trim()&&(r(n.trim()),i(""),t())};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Nouvelle tude SORA"}),l.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:l.jsx(r0,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:a,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'tude"}),l.jsx("input",{type:"text",value:n,onChange:s=>i(s.target.value),className:"w-full p-2 border rounded-md",placeholder:"Entrez le nom de l'tude",autoFocus:!0,required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Crer"})]})]})]})})}function Ok({isOpen:e,studyName:t,onClose:r,onConfirm:n}){return e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Supprimer l'valuation"}),l.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:l.jsx(r0,{className:"w-5 h-5"})})]}),l.jsxs("p",{className:"mb-6 text-gray-600",children:[`tes-vous sr de vouloir supprimer l'valuation "`,t,'" ? Cette action est irrversible.']}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Supprimer"})]})]})}):null}const Rk=[{id:"M1",name:"Dfinition d'une zone tampon",description:"tablissement d'une zone tampon pour rduire le risque au sol",implemented:!1,robustnessLevel:"Low"},{id:"M2",name:"Rduction de la zone d'impact au sol",description:"Mesures techniques pour rduire la zone d'impact en cas de dfaillance",implemented:!1,robustnessLevel:"Faible"}],Ik=[{id:"OSO1",number:"01",description:"Oprateur UAS comptent et/ou approuv",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO2",number:"02",description:"Constructeur UAS comptent et/ou approuv",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO3",number:"03",description:"Maintenance UAS assure par une entit comptente et/ou approuve",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO4",number:"04",description:"UAS dvelopp selon des standards reconnus par lautorit",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO5",number:"05",description:"UAS conu selon des standards de fiabilit et de scurit",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO6",number:"06",description:"Performances du Lien C3 appropries pour la mission",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO7",number:"07",description:"Inspections de lUAS pour assurer la validit du ConOps",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO8",number:"08",description:"Procdures oprationnelles dfinies, valides et appliques",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO9",number:"09",description:"Equipage form, entrain rgulirement et capable de faire face aux situations anormales",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO10",number:"10",description:"Retour  la normale en toute scurit aprs un problme technique",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO11",number:"11",description:"Des procdures sont en place pour supporter la dtrioration des systmes externes de soutien  lopration",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO12",number:"12",description:"LUAS est conu pour supporter la dtrioration des systmes externes de soutien",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO13",number:"13",description:"Les systmes externes de soutien sont adquats pour lopration",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO14",number:"14",description:"Procdures oprationnelles dfinies, valides et appliques",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO15",number:"15",description:"Equipage form, entrain rgulirement et capable de faire face aux situations anormales",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO16",number:"16",description:"Coordination intra-quipage",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO17",number:"17",description:"Equipage en capacit dexploiter",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO18",number:"18",description:"Protection automatique de lenveloppe de vol, rsistance  lerreur humaine",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO19",number:"19",description:"Retour  la normale en toute scurit aprs une erreur humaine",requiredLevel:"Faible",status:"Faible",evidence:"",tooltip:""},{id:"OSO20",number:"20",description:"Une valuation des facteurs humains a t ralise et l'interface homme-machine (IHM) a t juge approprie pour la mission.",requiredLevel:"Non Requis",status:"Faible",evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO21",number:"21",description:"Removed from SORA2.0",requiredLevel:"Non Requis",status:"Faible",evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO22",number:"22",description:"Removed from SORA2.0",requiredLevel:"Non Requis",status:"Faible",evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO23",number:"23",description:"Conditions environnementales pour des oprations sres dfinies, mesurables et respectes.",requiredLevel:"Non Requis",status:"Faible",evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO24",number:"24",description:"UAS conu et qualifi pour des conditions environnementales dfavorables.",requiredLevel:"Non Requis",status:"Faible",evidence:"",tooltip:"Elment de rponse attendu : "}],Rp={operator:{name:"",managerName:"",operationalContact:"",registrationNumber:"",address:"",phone:"",email:""},drone:{manufacturer:"",model:"",uasType:null,serialNumber:"",typeCertificateNumber:"",airworthinessCertificateNumber:"",acousticCertificateNumber:"",technicalDocuments:[],MTOW:0,CruiseSpeed:0,VCruise:0,maxSpeed:0,minSpeed:0,maxCharacteristicDimension:0,classIdentification:null,dimensions:{length:0,width:0,height:0},materials:"",payloads:"",propulsionType:"",fuelType:"",modifications:"",groundStation:"",locationMeans:"",maxClimbRate:0,maxDescentRate:0,turnRate:0,maxEndurance:0,propellerCount:0,kineticEnergy:0,environmentalLimitations:{maxWindSpeedTakeoff:0,maxGustSpeed:0,minTemperature:-999,maxTemperature:999,visibility:-999,ipRating:"",otherLimitations:""}},operation:{adjacentAreaExtent:0,operationType:null,visualObserversCount:0,dangerousGoods:null,dangerousGoodsDescription:"",droppingMaterials:null,droppingMaterialsDescription:"",controlMultipleDrones:null,controlMultipleDronesNumber:0,controlMultipleDronesDescription:"",maxOperationHeight:0,dayNightOperation:null,operationStartTime:"",operationEndTime:"",maxDistanceFromPilot:0,confinementLevel:"Basic",pilotCompetency:"",SimpleDescription:"",otherPersonnelCompetency:"",reportableEvents:"",geoFiles:[]},mitigationMeasures:Rk,osos:Ik,ARCInitial:{airspaceClasses:["Classe A"],uspaceProvider:"",otherDetails:"",OperationalVolumeLevel:"",AdjacentVolumeLevel:"",detectAndAvoid:"",trafficDetection:"",additionalDetails:""},RiskAssessment:{assessmentTypeHauteurVol:"Hauteur de vol suivant trajectoire(s)",assessmentCriticalArea:"Calcul selon les Modles JARUS",followTerrainHeight:0,PopulationDensityModulation:"NON",assessmentStartTime:"",CriticalArea:0,maxDistanceFromPilot:0,confinementLevel:"Basic",pilotCompetency:"",otherPersonnelCompetency:"",reportableEvents:"",intrinsicGroundRisk:1,finalGroundRisk:1,airRisk:1,sailLevel:"I",trajgeoFiles:[],mitigationStrategiqueM1A:"Non",mitigationStrategiqueM1B:"Non",mitigationTactiqueM1C:"Non",reduceImpactAttenuationM2:"Non",OperationalVolumeLevel:"ARC-a",AdjacentVolumeLevel:"ARC-a",detectAndAvoid:"",trafficDetection:"",additionalDetails:"",operationalScenario:"VLOS",populationDensity:"Zone Contrle",necessaryToReduceRisk:"NON",planInterventionUrgence:"Non",confinementRequirements:"Basiques",additionalRemarks:"",airspaceClasses:"Classe A",uspaceProvider:"",otherDetails:"",StrategicMitigationOperationalRestrictionsAvailable:"NON",StrategicMitigationOperationalRestrictionsJustification:"",StrategicMitigationCommonStructuresAvailable:"NON",StrategicMitigationCommonStructuresJustification:"",OperationalVolumeLevelMitigated:"ARC-a",TacticalMitigationAvailable:"NON",TacticalMitigationJustification:"",iGRC:"",GRC_Final:"",SAILJustification:""}},t1=ge.createContext(void 0);function Lk({children:e}){const[t,r]=ge.useState(null),[n,i]=ge.useState(""),[a,s]=ge.useState({...Rp,operation:{...Rp.operation,operationStartTime:""},RiskAssessment:{...Rp.RiskAssessment,assessmentStartTime:"",uasType:"Avion",mitigationStrategiqueM1A:"Non",mitigationStrategiqueM1B:"Non",mitigationTactiqueM1C:"Non"}}),[u,d]=ge.useState(!1);return l.jsx(t1.Provider,{value:{studyId:t,setStudyId:r,studyName:n,setStudyName:i,formData:a,setFormData:s,saving:u,setSaving:d},children:e})}function Ef(){const e=ge.useContext(t1);if(e===void 0)throw new Error("useStudyContext must be used within a StudyProvider");return e}const Pk="modulepreload",Mk=function(e){return"/"+e},Ix={},Pl=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(d=>{if(d=Mk(d),d in Ix)return;Ix[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Pk,h||(p.as="script"),p.crossOrigin="",p.href=d,u&&p.setAttribute("nonce",u),document.head.appendChild(p),h)return new Promise((v,b)=>{p.addEventListener("load",v),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return i.then(s=>{for(const u of s||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},Bk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Pl(async()=>{const{default:n}=await Promise.resolve().then(()=>Ml);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class n0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Lx extends n0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Px extends n0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Mx extends n0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cg||(Cg={}));var Fk=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};class zk{constructor(t,{headers:r={},customFetch:n,region:i=Cg.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=Bk(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fk(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:a,method:s,body:u,signal:d}=n;let h={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let v;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)));const b=yield this.fetch(p.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:v,signal:d}).catch(y=>{throw y.name==="AbortError"?y:new Lx(y)}),k=b.headers.get("x-relay-error");if(k&&k==="true")throw new Px(b);if(!b.ok)throw new Mx(b);let S=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return S==="application/json"?T=yield b.json():S==="application/octet-stream"?T=yield b.blob():S==="text/event-stream"?T=b:S==="multipart/form-data"?T=yield b.formData():T=yield b.text(),{data:T,error:null,response:b}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Lx(a)}:{data:null,error:a,response:a instanceof Mx||a instanceof Px?a.context:void 0}}})}}var fn={},i0={},Cf={},Mc={},Sf={},Af={},Uk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xl=Uk();const qk=xl.fetch,r1=xl.fetch.bind(xl),n1=xl.Headers,Vk=xl.Request,$k=xl.Response,Ml=Object.freeze(Object.defineProperty({__proto__:null,Headers:n1,Request:Vk,Response:$k,default:r1,fetch:qk},Symbol.toStringTag,{value:"Module"})),Gk=k_(Ml);var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});let Hk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Tf.default=Hk;var i1=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Af,"__esModule",{value:!0});const Wk=i1(Gk),Zk=i1(Tf);let Kk=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Wk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var s,u,d,h;let f=null,p=null,v=null,b=a.status,k=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _=await a.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?p=_:p=JSON.parse(_))}const T=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),y=(d=a.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");T&&y&&y.length>1&&(v=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,b=406,k="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const T=await a.text();try{f=JSON.parse(T),Array.isArray(f)&&a.status===404&&(p=[],f=null,b=200,k="OK")}catch{a.status===404&&T===""?(b=204,k="No Content"):f={message:T}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,b=200,k="OK"),f&&this.shouldThrowOnError)throw new Zk.default(f)}return{error:f,data:p,count:v,status:b,statusText:k}});return this.shouldThrowOnError||(i=i.catch(a=>{var s,u,d;return{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(u=a==null?void 0:a.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=a==null?void 0:a.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};Af.default=Kk;var Xk=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const Jk=Xk(Af);let Yk=class extends Jk.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const s=a?`${a}.order`:"order",u=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${u?`${u},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(s,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:s="text"}={}){var u;const d=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${h}"; options=${d};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Sf.default=Yk;var Qk=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mc,"__esModule",{value:!0});const ej=Qk(Sf);let tj=class extends ej.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${s}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Mc.default=tj;var rj=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});const _u=rj(Mc);let nj=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(t,r){const{head:n=!1,count:i}=r??{},a=n?"HEAD":"GET";let s=!1;const u=(t??"*").split("").map(d=>/\s/.test(d)&&!s?"":(d==='"'&&(s=!s),d)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new _u.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(s.length>0){const u=[...new Set(s)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new _u.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var s;const u="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new _u.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new _u.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new _u.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Cf.default=nj;var a1=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i0,"__esModule",{value:!0});const ij=a1(Cf),aj=a1(Mc);let oj=class o1{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new ij.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new o1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var s;let u;const d=new URL(`${this.url}/rpc/${t}`);let h;n||i?(u=n?"HEAD":"GET",Object.entries(r).filter(([p,v])=>v!==void 0).map(([p,v])=>[p,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([p,v])=>{d.searchParams.append(p,v)})):(u="POST",h=r);const f=new Headers(this.headers);return a&&f.set("Prefer",`count=${a}`),new aj.default({method:u,url:d,headers:f,schema:this.schemaName,body:h,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};i0.default=oj;var Bl=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fn,"__esModule",{value:!0});fn.PostgrestError=fn.PostgrestBuilder=fn.PostgrestTransformBuilder=fn.PostgrestFilterBuilder=fn.PostgrestQueryBuilder=fn.PostgrestClient=void 0;const s1=Bl(i0);fn.PostgrestClient=s1.default;const l1=Bl(Cf);fn.PostgrestQueryBuilder=l1.default;const u1=Bl(Mc);fn.PostgrestFilterBuilder=u1.default;const c1=Bl(Sf);fn.PostgrestTransformBuilder=c1.default;const d1=Bl(Af);fn.PostgrestBuilder=d1.default;const h1=Bl(Tf);fn.PostgrestError=h1.default;var sj=fn.default={PostgrestClient:s1.default,PostgrestQueryBuilder:l1.default,PostgrestFilterBuilder:u1.default,PostgrestTransformBuilder:c1.default,PostgrestBuilder:d1.default,PostgrestError:h1.default};const{PostgrestClient:lj,PostgrestQueryBuilder:AM,PostgrestFilterBuilder:TM,PostgrestTransformBuilder:NM,PostgrestBuilder:kM,PostgrestError:jM}=sj;class uj{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const cj="2.75.1",dj=`realtime-js/${cj}`,hj="1.0.0",Sg=1e4,fj=1e3,pj=100;var $u;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($u||($u={}));var xr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xr||(xr={}));var li;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(li||(li={}));var Ag;(function(e){e.websocket="websocket"})(Ag||(Ag={}));var Do;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Do||(Do={}));class mj{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let s=this.HEADER_LENGTH+2;const u=n.decode(t.slice(s,s+i));s=s+i;const d=n.decode(t.slice(s,s+a));s=s+a;const h=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{ref:null,topic:u,event:d,payload:h}}}class f1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ut;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ut||(Ut={}));const Bx=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=gj(s,e,t,i),a),{}):{}},gj=(e,t,r,n)=>{const i=t.find(u=>u.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?p1(a,s):Tg(s)},p1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return bj(t,r)}switch(e){case Ut.bool:return vj(t);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return yj(t);case Ut.json:case Ut.jsonb:return xj(t);case Ut.timestamp:return _j(t);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return Tg(t);default:return Tg(t)}},Tg=e=>e,vj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},bj=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(u=>p1(t,u))}return e},_j=e=>typeof e=="string"?e.replace(" ","T"):e,m1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Ip{constructor(t,r,n={},i=Sg){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Fx||(Fx={}));class Gu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gu.syncState(this.state,i,a,s),this.pendingDiffs.forEach(d=>{this.state=Gu.syncDiff(this.state,d,a,s)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gu.syncDiff(this.state,i,a,s),u())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),u={},d={};return this.map(a,(h,f)=>{s[h]||(d[h]=f)}),this.map(s,(h,f)=>{const p=a[h];if(p){const v=f.map(T=>T.presence_ref),b=p.map(T=>T.presence_ref),k=f.filter(T=>b.indexOf(T.presence_ref)<0),S=p.filter(T=>v.indexOf(T.presence_ref)<0);k.length>0&&(u[h]=k),S.length>0&&(d[h]=S)}else u[h]=f}),this.syncDiff(a,{joins:u,leaves:d},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(u,d)=>{var h;const f=(h=t[u])!==null&&h!==void 0?h:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(b=>b.presence_ref),v=f.filter(b=>p.indexOf(b.presence_ref)<0);t[u].unshift(...v)}n(u,f,d)}),this.map(s,(u,d)=>{let h=t[u];if(!h)return;const f=d.map(p=>p.presence_ref);h=h.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=h,i(u,h,d),h.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zx||(zx={}));var Hu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Hu||(Hu={}));var Xi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xi||(Xi={}));class a0{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ip(this,li.join,this.params,this.timeout),this.rejoinTimer=new f1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(li.reply,{},(s,u)=>{this._trigger(this._replyEventName(u),s)}),this.presence=new Gu(this),this.broadcastEndpointURL=m1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==xr.closed){const{config:{broadcast:s,presence:u,private:d}}=this.params,h=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[Hu.PRESENCE]&&this.bindings[Hu.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},v={broadcast:s,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(Xi.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(Xi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var k;if(this.socket.setAuth(),b===void 0){t==null||t(Xi.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,T=(k=S==null?void 0:S.length)!==null&&k!==void 0?k:0,y=[];for(let _=0;_<T;_++){const w=S[_],{filter:{event:E,schema:N,table:M,filter:B}}=w,D=b&&b[_];if(D&&D.event===E&&D.schema===N&&D.table===M&&D.filter===B)y.push(Object.assign(Object.assign({},w),{id:D.id}));else{this.unsubscribe(),this.state=xr.errored,t==null||t(Xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Xi.SUBSCRIBED);return}}).receive("error",b=>{this.state=xr.errored,t==null||t(Xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xr.joined&&t===Hu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:s}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,u,d;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(s=this.params)===null||s===void 0?void 0:s.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(li.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Ip(this,li.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ip(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>pj){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:u,error:d,leave:h,join:f}=li;if(n&&[u,d,h,f].indexOf(s)>=0&&n!==this._joinRef())return;let v=this._onMessage(s,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var k,S,T;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((T=(S=b.filter)===null||S===void 0?void 0:S.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===s}).map(b=>b.callback(v,n)):(a=this.bindings[s])===null||a===void 0||a.filter(b=>{var k,S,T,y,_,w;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in b){const E=b.id,N=(k=b.filter)===null||k===void 0?void 0:k.event;return E&&((S=r.ids)===null||S===void 0?void 0:S.includes(E))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const E=(_=(y=b==null?void 0:b.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return E==="*"||E===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===s}).map(b=>{if(typeof v=="object"&&"ids"in v){const k=v.data,{schema:S,table:T,commit_timestamp:y,type:_,errors:w}=k;v=Object.assign(Object.assign({},{schema:S,table:T,commit_timestamp:y,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(k))}b.callback(v,n)})}_isClosed(){return this.state===xr.closed}_isJoined(){return this.state===xr.joined}_isJoining(){return this.state===xr.joining}_isLeaving(){return this.state===xr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&a0.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(li.close,{},t)}_onError(t){this._on(li.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Bx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Bx(t.columns,t.old_record)),r}}const Lp=()=>{},qd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wj=[1e3,2e3,5e3,1e4],Ej=1e4,Cj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sj{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sg,this.transport=null,this.heartbeatIntervalMs=qd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lp,this.ref=0,this.reconnectTimer=null,this.logger=Lp,this.conn=null,this.sendBuffer=[],this.serializer=new mj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...s)=>Pl(async()=>{const{default:u}=await Promise.resolve().then(()=>Ml);return{default:u}},void 0).then(({default:u})=>u(...s)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...s)=>a(...s)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ag.websocket}`,this.httpEndpoint=m1(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uj.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hj}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $u.connecting:return Do.Connecting;case $u.open:return Do.Open;case $u.closing:return Do.Closing;default:return Do.Closed}}isConnected(){return this.connectionState()===Do.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new a0(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(fj,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},qd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:s}=r,u=s?`(${s})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${i} ${u}`.trim(),a),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(li.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Cj],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:dj};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(li.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new f1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,u,d,h,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Sg,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:qd.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Lp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:p=>wj[p-1]||Ej,this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(p,v)=>v(JSON.stringify(p)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class o0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function vr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Aj extends o0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ng extends o0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Tj=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};const g1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Pl(async()=>{const{default:n}=await Promise.resolve().then(()=>Ml);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Nj=()=>Tj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pl(()=>Promise.resolve().then(()=>Ml),void 0)).Response:Response}),kg=e=>{if(Array.isArray(e))return e.map(r=>kg(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=kg(n)}),t},kj=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var rs=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};const Pp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jj=(e,t,r)=>rs(void 0,void 0,void 0,function*(){const n=yield Nj();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,s=(i==null?void 0:i.statusCode)||a+"";t(new Aj(Pp(i),a,s))}).catch(i=>{t(new Ng(Pp(i),i))}):t(new Ng(Pp(e),e))}),Dj=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(kj(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Bc(e,t,r,n,i,a){return rs(this,void 0,void 0,function*(){return new Promise((s,u)=>{e(r,Dj(t,n,i,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>s(d)).catch(d=>jj(d,u,n))})})}function Vh(e,t,r,n){return rs(this,void 0,void 0,function*(){return Bc(e,"GET",t,r,n)})}function ji(e,t,r,n,i){return rs(this,void 0,void 0,function*(){return Bc(e,"POST",t,n,i,r)})}function jg(e,t,r,n,i){return rs(this,void 0,void 0,function*(){return Bc(e,"PUT",t,n,i,r)})}function Oj(e,t,r,n){return rs(this,void 0,void 0,function*(){return Bc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function v1(e,t,r,n,i){return rs(this,void 0,void 0,function*(){return Bc(e,"DELETE",t,n,i,r)})}var Rj=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};class Ij{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Rj(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}}var Lj=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})},y1;class Pj{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[y1]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ij(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Lj(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}}y1=Symbol.toStringTag;var cn=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};const Mj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ux={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bj{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=g1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return cn(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Ux),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const d=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",s.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${s.cacheControl}`,u["content-type"]=s.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const h=this._removeEmptyFolders(r),f=this._getFinalPath(h),p=yield(t=="PUT"?jg:ji)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:u},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(vr(a))return{data:null,error:a};throw a}})}upload(t,r,n){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return cn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${s}`);u.searchParams.set("token",r);try{let d;const h=Object.assign({upsert:Ux.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const p=yield jg(this.fetch,u.toString(),d,{headers:f});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(vr(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return cn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield ji(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(this.url+a.url),u=s.searchParams.get("token");if(!u)throw new o0("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}update(t,r,n){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return cn(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vr(i))return{data:null,error:i};throw i}})}copy(t,r,n){return cn(this,void 0,void 0,function*(){try{return{data:{path:(yield ji(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return cn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield ji(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return cn(this,void 0,void 0,function*(){try{const i=yield ji(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vr(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=a?`?${a}`:"",u=this._getFinalPath(t),d=()=>Vh(this.fetch,`${this.url}/${i}/${u}${s}`,{headers:this.headers,noResolveJson:!0});return new Pj(d,this.shouldThrowOnError)}info(t){return cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Vh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:kg(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}exists(t){return cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Oj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n)&&n instanceof Ng){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&i.push(d);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${h}`)}}}remove(t){return cn(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}list(t,r,n){return cn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Mj),r),{prefix:t||""});return{data:yield ji(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vr(i))return{data:null,error:i};throw i}})}listV2(t,r){return cn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ji(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Fj="2.75.1",zj={"X-Client-Info":`storage-js/${Fj}`};var Es=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};class Uj{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zj),r),this.fetch=g1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Es(this,void 0,void 0,function*(){try{return{data:yield Vh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(vr(t))return{data:null,error:t};throw t}})}getBucket(t){return Es(this,void 0,void 0,function*(){try{return{data:yield Vh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}createBucket(t){return Es(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ji(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(vr(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return Es(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Es(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Es(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}}class qj extends Uj{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new Bj(this.url,this.headers,t,this.fetch)}}const Vj="2.75.1";let Ou="";typeof Deno<"u"?Ou="deno":typeof document<"u"?Ou="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ou="react-native":Ou="node";const $j={"X-Client-Info":`supabase-js-${Ou}/${Vj}`},Gj={headers:$j},Hj={schema:"public"},Wj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zj={};var Kj=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};const Xj=e=>{let t;return e?t=e:typeof fetch>"u"?t=r1:t=fetch,(...r)=>t(...r)},Jj=()=>typeof Headers>"u"?n1:Headers,Yj=(e,t,r)=>{const n=Xj(r),i=Jj();return(a,s)=>Kj(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let h=new i(s==null?void 0:s.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},s),{headers:h}))})};var Qj=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};function eD(e){return e.endsWith("/")?e:e+"/"}function tD(e,t){var r,n;const{db:i,auth:a,realtime:s,global:u}=e,{db:d,auth:h,realtime:f,global:p}=t,v={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},h),a),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Qj(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function rD(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eD(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const x1="2.75.1",zs=30*1e3,Dg=3,Mp=Dg*zs,nD="http://localhost:9999",iD="supabase.auth.token",aD={"X-Client-Info":`gotrue-js/${x1}`},Og="X-Supabase-Api-Version",b1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sD=10*60*1e3;class pc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lD extends pc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function uD(e){return nt(e)&&e.name==="AuthApiError"}class Oo extends pc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class io extends pc{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class wa extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cD(e){return nt(e)&&e.name==="AuthSessionMissingError"}class Cs extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vd extends io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $d extends io{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dD(e){return nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class qx extends io{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rg extends io{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Bp(e){return nt(e)&&e.name==="AuthRetryableFetchError"}class Vx extends io{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ig extends io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$x=` 	
\r=`.split(""),hD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$x.length;t+=1)e[$x[t].charCodeAt(0)]=-2;for(let t=0;t<$h.length;t+=1)e[$h[t].charCodeAt(0)]=t;return e})();function Gx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r($h[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r($h[n]),t.queuedBits-=6}}function _1(e,t,r){const n=hD[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hx(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{mD(s,n,r)};for(let s=0;s<e.length;s+=1)_1(e.charCodeAt(s),i,a);return t.join("")}function fD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}fD(n,t)}}function mD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function cl(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)_1(e.charCodeAt(i),r,n);return new Uint8Array(t)}function gD(e){const t=[];return pD(e,r=>t.push(r)),new Uint8Array(t)}function Mo(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Gx(i,r,n)),Gx(null,r,n),t.join("")}function vD(e){return Math.round(Date.now()/1e3)+e}function yD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const kn=()=>typeof window<"u"&&typeof document<"u",So={tested:!1,writable:!1},w1=()=>{if(!kn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(So.tested)return So.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),So.tested=!0,So.writable=!0}catch{So.tested=!0,So.writable=!1}return So.writable};function xD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const E1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Pl(async()=>{const{default:n}=await Promise.resolve().then(()=>Ml);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Us=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ao=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},va=async(e,t)=>{await e.removeItem(t)};class Nf{constructor(){this.promise=new Nf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Nf.promiseConstructor=Promise;function Fp(e){const t=e.split(".");if(t.length!==3)throw new Ig("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!oD.test(t[n]))throw new Ig("JWT not in base64url format");return{header:JSON.parse(Hx(t[0])),payload:JSON.parse(Hx(t[1])),signature:cl(t[2]),raw:{header:t[0],payload:t[1]}}}async function _D(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wD(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function ED(e){return("0"+e.toString(16)).substr(-2)}function CD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,ED).join("")}async function SD(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function AD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await SD(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ss(e,t,r=!1){const n=CD();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Us(e,`${t}-code-verifier`,i);const a=await AD(n);return[a,n===a?"plain":"s256"]}const TD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ND(e){const t=e.headers.get(Og);if(!t||!t.match(TD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function As(e){if(!DD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zp(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wx(e){return JSON.parse(JSON.stringify(e))}var OD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const jo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RD=[502,503,504];async function Zx(e){var t;if(!bD(e))throw new Rg(jo(e),0);if(RD.includes(e.status))throw new Rg(jo(e),e.status);let r;try{r=await e.json()}catch(a){throw new Oo(jo(a),a)}let n;const i=ND(e);if(i&&i.getTime()>=b1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Vx(jo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new wa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Vx(jo(r),e.status,r.weak_password.reasons);throw new lD(jo(r),e.status||500,n)}const ID=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function mt(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Og]||(a[Og]=b1["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const u=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",d=await LD(e,t,r+u,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function LD(e,t,r,n,i,a){const s=ID(t,n,i,a);let u;try{u=await e(r,Object.assign({},s))}catch(d){throw console.error(d),new Rg(jo(d),0)}if(u.ok||await Zx(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Zx(d)}}function ai(e){var t;let r=null;BD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Kx(e){const t=ai(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ka(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function PD(e){return{data:e,error:null}}function MD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=OD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},s);return{data:{properties:u,user:d},error:null}}function Xx(e){return e}function BD(e){return e.access_token&&e.refresh_token&&e.expires_in}const Up=["global","local","others"];var FD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class zD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=E1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Up[0]){if(Up.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Up.join(", ")}`);try{return await mt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ka})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=FD(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:MD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ka})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,u,d;try{const h={nextPage:null,lastPage:0,total:0},f=await mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Xx});if(f.error)throw f.error;const p=await f.json(),v=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,b=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(k.split(";")[1].split("=")[1]);h[`${T}Page`]=S}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(nt(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){As(t);try{return await mt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ka})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){As(t);try{return await mt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ka})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){As(t);try{return await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ka})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){As(t.userId);try{const{data:r,error:n}=await mt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){As(t.userId),As(t.id);try{return{data:await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,u,d;try{const h={nextPage:null,lastPage:0,total:0},f=await mt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Xx});if(f.error)throw f.error;const p=await f.json(),v=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,b=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(k.split(";")[1].split("=")[1]);h[`${T}Page`]=S}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(nt(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await mt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await mt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function Jx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ts={debug:!!(globalThis&&w1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class C1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class UD extends C1{}async function qD(e,t,r){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new UD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ts.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function VD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function S1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $D(e){return parseInt(e,16)}function GD(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function HD(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:u,requestId:d,resources:h,scheme:f,uri:p,version:v}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=S1(e.address),k=f?`${f}://${n}`:n,S=e.statement?`${e.statement}
`:"",T=`${k} wants you to sign in with your Ethereum account:
${b}

${S}`;let y=`URI: ${p}
Version: ${v}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),u&&(y+=`
Not Before: ${u.toISOString()}`),d&&(y+=`
Request ID: ${d}`),h){let _=`
Resources:`;for(const w of h){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);_+=`
- ${w}`}y+=_}return`${T}
${y}`}class gr extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Gh extends gr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function WD({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new gr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new gr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new gr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new gr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new gr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new gr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new gr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(T1(s)){if(a.rp.id!==s)return new gr({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new gr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new gr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new gr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new gr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ZD({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new gr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(T1(n)){if(r.rpId!==n)return new gr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new gr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new gr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new gr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var A1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class KD{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const XD=new KD;function JD(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=A1(e,["challenge","user","excludeCredentials"]),a=cl(t).buffer,s=Object.assign(Object.assign({},r),{id:cl(r.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const h=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:cl(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function YD(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=A1(e,["challenge","allowCredentials"]),i=cl(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const u=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},u),{id:cl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function QD(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Mo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Mo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eO(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Mo(new Uint8Array(i.authenticatorData)),clientDataJSON:Mo(new Uint8Array(i.clientDataJSON)),signature:Mo(new Uint8Array(i.signature)),userHandle:i.userHandle?Mo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function T1(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Yx(){var e,t;return!!(kn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function tO(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",t)}:{data:null,error:new Gh("Empty credential response",t)}}catch(t){return{data:null,error:WD({error:t,options:e})}}}async function rO(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",t)}:{data:null,error:new Gh("Empty credential response",t)}}catch(t){return{data:null,error:ZD({error:t,options:e})}}}const nO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},iO={userVerification:"preferred",hints:["security-key"]};function Hh(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const u=n[a];t(u)?n[a]=Hh(u,s):n[a]=Hh(s)}else n[a]=s}return n}function aO(e,t){return Hh(nO,e,t||{})}function oO(e,t){return Hh(iO,e,t||{})}class sO{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:s,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:u};const d=i??XD.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:h}=s.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${n}`),h.displayName||(h.displayName=h.name)}switch(s.webauthn.type){case"create":{const h=aO(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:p}=await tO({publicKey:h,signal:d});return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const h=oO(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:p}=await rO(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:h,signal:d}));return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new Oo("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!r)return{data:null,error:new pc("rpId is required for WebAuthn authentication")};try{if(!Yx())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:s,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:u};const{webauthn:d}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new Oo("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!r)return{data:null,error:new pc("rpId is required for WebAuthn registration")};try{if(!Yx())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:s,error:u}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:h}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return d?this._verify({factorId:s.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(s){return nt(s)?{data:null,error:s}:{data:null,error:new Oo("Unexpected error in register",s)}}}}VD();const lO={url:nD,storageKey:iD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qx(e,t,r){return await r()}const Ns={};class mc{get jwks(){var t,r;return(r=(t=Ns[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ns[this.storageKey]=Object.assign(Object.assign({},Ns[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ns[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ns[this.storageKey]=Object.assign(Object.assign({},Ns[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mc.nextInstanceID,mc.nextInstanceID+=1,this.instanceID>0&&kn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},lO),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new zD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=E1(i.fetch),this.lock=i.lock||Qx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:kn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qD:this.lock=Qx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sO(this)},this.persistSession?(i.storage?this.storage=i.storage:w1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Jx(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${x1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=xD(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),kn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dD(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",u),await this._saveSession(s),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?{error:r}:{error:new Oo("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ai}),{data:s,error:u}=a;if(u||!s)return{data:{user:null,session:null},error:u};const d=s.session,h=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:f,password:p,options:v}=t;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await Ss(this.storage,this.storageKey)),a=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:f,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:k},xform:ai})}else if("phone"in t){const{phone:f,password:p,options:v}=t;a=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:ai})}else throw new Vd("You must provide either an email or phone number and a password");const{data:s,error:u}=a;if(u||!s)return{data:{user:null,session:null},error:u};const d=s.session,h=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:u}=t;r=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Kx})}else if("phone"in t){const{phone:a,password:s,options:u}=t;r=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Kx})}else throw new Vd("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Cs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,u,d,h,f,p,v;let b,k;if("message"in t)b=t.message,k=t.signature;else{const{chain:S,wallet:T,statement:y,options:_}=t;let w;if(kn())if(typeof T=="object")w=T;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")w=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=T}const E=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href),N=await w.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=S1(N[0]);let B=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!B){const A=await w.request({method:"eth_chainId"});B=$D(A)}const D={domain:E.host,address:M,statement:y,uri:E.href,version:"1",chainId:B,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.resources};b=HD(D),k=await w.request({method:"personal_sign",params:[GD(b),M]})}try{const{data:S,error:T}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:k},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ai});if(T)throw T;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Cs}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:T})}catch(S){if(nt(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(t){var r,n,i,a,s,u,d,h,f,p,v,b;let k,S;if("message"in t)k=t.message,S=t.signature;else{const{chain:T,wallet:y,statement:_,options:w}=t;let E;if(kn())if(typeof y=="object")E=y;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))E=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const M=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),_?{statement:_}:null));let B;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")B=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)B=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)k=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),S=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${N.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((h=w==null?void 0:w.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const M=await E.signMessage(new TextEncoder().encode(k),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=M}}try{const{data:T,error:y}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Mo(S)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ai});if(y)throw y;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Cs}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:y})}catch(T){if(nt(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(t){const r=await Ao(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:s}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ai});if(await va(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Cs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(nt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,u=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ai}),{data:d,error:h}=u;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Cs}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:u,options:d}=t;let h=null,f=null;this.flowType==="pkce"&&([h,f]=await Ss(this.storage,this.storageKey));const{error:p}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:h,error:f}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f}}throw new Vd("You must provide either an email or phone number.")}catch(u){if(nt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:u}=await mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ai});if(u)throw u;if(!s)throw new Error("An error occurred on token verification.");const d=s.session,h=s.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await Ss(this.storage,this.storageKey)),await mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:PD})}catch(a){if(nt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new wa;const{error:i}=await mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(nt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await mt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:u}=await mt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:u}}throw new Vd("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ao(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Mp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await Ao(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=zp()}if(this.storage.isServer&&t.user){let s=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,h,f)=>(!s&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,f))})}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ka}):await this._useSession(async r=>{var n,i,a;const{data:s,error:u}=r;if(u)throw u;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wa}:await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ka})})}catch(r){if(nt(r))return cD(r)&&(await this._removeSession(),await va(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new wa;const s=i.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Ss(this.storage,this.storageKey));const{data:h,error:f}=await mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:s.access_token,xform:ka});if(f)throw f;return s.user=h.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new wa;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=Fp(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(nt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:u}=r;if(u)throw u;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new wa;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!kn())throw new $d("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $d(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $d("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qx("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:u,expires_at:d,token_type:h}=t;if(!a||!u||!s||!h)throw new $d("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let v=f+p;d&&(v=parseInt(d));const b=v-f;b*1e3<=zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const k=v-p;f-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,v,f):f-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,v,f);const{data:S,error:T}=await this._getUser(a);if(T)throw T;const y={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:p,expires_at:v,refresh_token:s,token_type:h,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(nt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ao(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:u}=await this.admin.signOut(s,t);if(u&&!(uD(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await va(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=yD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Ss(this.storage,this.storageKey,!0));try{return await mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(nt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,u,d,h,f;const{data:p,error:v}=a;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,"GET",b,{headers:this.headers,jwt:(f=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return kn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(nt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:u,token:d,access_token:h,nonce:f}=t,p=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ai}),{data:v,error:b}=p;return b?{data:{user:null,session:null},error:b}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Cs}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:b})}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await mt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await wD(async i=>(i>0&&await _D(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ai})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Bp(a)&&Date.now()+s-n<zs})}catch(n){if(this._debug(r,"error",n),nt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),kn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Ao(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Ao(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Us(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:zp()}else if(i&&!i.user&&!i.user){const s=await Ao(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await va(this.storage,this.storageKey+"-user"),await Us(this.storage,this.storageKey,i)):i.user=zp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Mp;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Mp}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Bp(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:u}=await this._getUser(i.access_token);!u&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new wa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Nf;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new wa;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(i,"error",a),nt(a)){const s={data:null,error:a};return Bp(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(s),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Us(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Wx(i);await Us(this.storage,this.storageKey,a)}else{const i=Wx(r);await Us(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await va(this.storage,this.storageKey),await va(this.storage,this.storageKey+"-code-verifier"),await va(this.storage,this.storageKey+"-user"),this.userStorage&&await va(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),zs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${zs}ms, refresh threshold is ${Dg} ticks`),i<=Dg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof C1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await Ss(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(u.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await mt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return{data:null,error:s};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:h}=await mt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?QD(t.webauthn.credential_response):eO(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const s=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:u}=s;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:JD(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:YD(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Fp(i.access_token);let u=null;s.aal&&(u=s.aal);let d=u;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=s.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+sD>i)return n;const{data:a,error:s}=await mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};n=b.session.access_token}const{header:i,payload:a,signature:s,raw:{header:u,payload:d}}=Fp(n);r!=null&&r.allowExpired||kD(a.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:a,header:i,signature:s},error:null}}const f=jD(i.alg),p=await crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,s,gD(`${u}.${d}`)))throw new Ig("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}mc.nextInstanceID=0;const uO=mc;class cO extends uO{constructor(t){super(t)}}var dO=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})};class hO{constructor(t,r,n){var i,a,s;this.supabaseUrl=t,this.supabaseKey=r;const u=rD(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:Hj,realtime:Zj,auth:Object.assign(Object.assign({},Wj),{storageKey:d}),global:Gj},f=tD(n??{},h);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=Yj(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new lj(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new qj(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new zk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return dO(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:s,flowType:u,lock:d,debug:h},f,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cO({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:u,lock:d,debug:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Sj(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fO=(e,t,r)=>new hO(e,t,r);function pO(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}pO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mO="https://ommguheoknrziixzkxqe.supabase.co",gO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9tbWd1aGVva25yemlpeHpreHFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzcyOTc2NjEsImV4cCI6MjA1Mjg3MzY2MX0._sdSmNhf3DV4_P_Px2owvygbvDeIDWaxaUo4HHkK0Kw",Qt=fO(mO,gO),N1=ge.createContext(void 0);function vO({children:e}){const[t,r]=ge.useState(null),[n,i]=ge.useState("user"),[a,s]=ge.useState(!0),u=async b=>{try{const{data:k,error:S}=await Qt.from("user_roles").select("role").eq("user_id",b).single();return S&&S.code!=="PGRST116"?(console.error("Error fetching user role:",S),"user"):(k==null?void 0:k.role)||"user"}catch(k){return console.error("Error fetching user role:",k),"user"}};ge.useEffect(()=>{Qt.auth.getSession().then(async({data:{session:k}})=>{if(r((k==null?void 0:k.user)??null),k!=null&&k.user){const S=await u(k.user.id);i(S)}else i("user");s(!1)});const{data:{subscription:b}}=Qt.auth.onAuthStateChange((k,S)=>{(async()=>{if(r((S==null?void 0:S.user)??null),S!=null&&S.user){const y=await u(S.user.id);i(y)}else i("user");s(!1)})()});return()=>b.unsubscribe()},[]);const d=async(b,k)=>{const{error:S}=await Qt.auth.signInWithPassword({email:b,password:k});if(S)throw S},h=async(b,k)=>{const{error:S}=await Qt.auth.signUp({email:b,password:k,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(S)throw S},f=async()=>{const{error:b}=await Qt.auth.signOut();if(b)throw b;i("user")},p=n==="super_agent"||n==="admin",v=n==="admin";return l.jsx(N1.Provider,{value:{user:t,userRole:n,loading:a,signIn:d,signUp:h,signOut:f,isSuperAgent:p,isAdmin:v},children:e})}function ao(){const e=ge.useContext(N1);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function yO(){const{signOut:e}=ao(),t=ts(),r=async()=>{try{await e(),t("/login")}catch(n){console.error("Error logging out:",n)}};return l.jsx("button",{onClick:r,className:"fixed top-4 left-4 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors",title:"Log Out",children:l.jsx(Ck,{className:"w-6 h-6 text-gray-600"})})}const k1="/assets/LOGO_CED_FRANCE-SuudBazJ.png";function xO(){const e=ts(),{setStudyName:t,setFormData:r,setStudyId:n}=Ef(),{user:i,isAdmin:a,isSuperAgent:s,loading:u}=ao(),[d,h]=ge.useState(!1),[f,p]=ge.useState(!1),[v,b]=ge.useState(null),[k,S]=ge.useState([]),[T,y]=ge.useState(null),[_,w]=ge.useState(!0),[E,N]=ge.useState(null),[M,B]=ge.useState(null),[D,A]=ge.useState(!1);ge.useEffect(()=>{u||(console.log("isSuperAgent:",s),H(),w(!1))},[u,s]),ge.useEffect(()=>{_||te()},[i,s,_]);const H=async()=>{A(!0);try{const{data:re,error:ue}=await Qt.auth.getUser();ue&&(console.error("supabase.auth.getUser error:",ue),N(G=>G??JSON.stringify({userError:ue},null,2)));const O=(re==null?void 0:re.user)??i,{data:ne,error:J}=await Qt.from("user_roles").select("*").eq("user_id",O==null?void 0:O.id).maybeSingle();J&&(console.error("Erreur en rcuprant user_roles pour current user:",J),N(G=>G??JSON.stringify({roleError:J},null,2))),B({user:O??null,roleRow:ne??null,derivedIsAdmin:(O==null?void 0:O.id)&&(ne==null?void 0:ne.role)==="admin"||!!a})}catch(re){console.error("fetchCurrentUserInfo:",re),N(ue=>ue??(typeof re=="object"?JSON.stringify(re,Object.getOwnPropertyNames(re),2):String(re)))}finally{A(!1)}},te=async()=>{if(!i)return;console.log("isSuperAgent in loadStudies:",s);let re=Qt.from("sora_studies").select("*").order("updated_at",{ascending:!1});s||(re=re.eq("user_id",i.id));const{data:ue,error:O}=await re;if(O)console.error("Erreur lors du chargement des tudes:",O),y("Erreur lors du chargement des tudes");else{if(s&&ue&&ue.length>0)try{const{data:ne,error:J}=await Qt.rpc("get_user_emails");if(J){console.error("Erreur lors du chargement des utilisateurs:",J),y("Erreur lors du chargement des utilisateurs");return}console.log("Users Data:",ne);const G=new Map((ne||[]).map(de=>[de.id,de.email]));console.log("User Email Map:",G);const ve=ue.map(de=>({...de,user_email:G.get(de.user_id)||"Email non disponible"}));console.log("Transformed Data:",ve),S(ve)}catch(ne){console.error("Erreur lors du chargement des utilisateurs:",ne),y("Erreur lors du chargement des utilisateurs")}else S(ue||[]);y(null)}},z=()=>{h(!0)},ae=re=>{t(re),n(null),e("/evaluation/new")},P=re=>{t(re.name),r(re.data),n(re.id),e(`/evaluation/${re.id}`)},ce=re=>{b(re),p(!0)},fe=async()=>{if(!(!v||!i))try{const{error:re}=await Qt.from("sora_studies").delete().eq("id",v.id).eq("user_id",s?v.user_id:i.id);if(re)throw re;S(k.filter(ue=>ue.id!==v.id)),p(!1),b(null)}catch(re){console.error("Erreur lors de la suppression:",re),y("Erreur lors de la suppression de l'valuation")}};return l.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[l.jsx(yO,{}),l.jsxs("div",{className:"flex flex-col items-center mb-8",children:[l.jsx("img",{src:k1,alt:"Centres d'Essais Drones France",className:"w-64 h-auto mb-6"}),i&&l.jsxs("p",{className:"text-gray-600 mb-4",children:["Bonjour ",i.email,", heureux de vous revoir parmi nous."]}),l.jsxs("div",{className:"flex items-center justify-between w-full",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Sk,{className:"w-8 h-8 text-blue-600"}),l.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["valuation SORA",s?l.jsx("span",{className:"text-lg text-blue-600 ml-2",children:"(Mode Super Agent)"}):l.jsx("span",{className:"text-lg text-blue-600 ml-2",children:"(Mode Utilisateur)"})]})]}),l.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-800 transition-colors",children:[l.jsx(e1,{className:"w-5 h-5"}),"Administrateur"]}),l.jsxs("button",{onClick:z,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:[l.jsx(Ak,{className:"w-5 h-5"}),"Nouvelle valuation"]})]})]}),T&&l.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg",children:T}),l.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:s?"Toutes les valuations SORA":"Mes valuations SORA"}),l.jsx("div",{className:"space-y-4",children:k.length>0?k.map(re=>l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:re.name}),s&&l.jsxs("p",{className:"text-sm text-blue-600",children:["Utilisateur : ",re.user_email]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Dernire modification : ",new Date(re.updated_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>P(re),className:"p-2 text-gray-600 hover:text-blue-600 transition-colors",title:s?"Voir l'valuation":"Modifier l'valuation",children:l.jsx(Nk,{className:"w-5 h-5"})}),(re.user_id===i.id||s)&&l.jsx("button",{onClick:()=>ce(re),className:"p-2 text-gray-600 hover:text-red-600 transition-colors",title:"Supprimer l'valuation",children:l.jsx(kk,{className:"w-5 h-5"})})]})]},re.id)):l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx("p",{children:s?"Aucune valuation dans le systme":"Aucune valuation sauvegarde"}),l.jsx("p",{className:"text-sm mt-2",children:s?"Les utilisateurs peuvent crer des valuations":'Cliquez sur "Nouvelle valuation" pour commencer'})]})})]}),l.jsx(Dk,{isOpen:d,onClose:()=>h(!1),onSubmit:ae}),l.jsx(Ok,{isOpen:f,studyName:(v==null?void 0:v.name)||"",onClose:()=>{p(!1),b(null)},onConfirm:fe})]})}const ks=[{id:"operator-info",title:"Informations sur l'exploitant",subtitle:"Operator Information",description:"Renseignez les informations concernant l'exploitant du drone"},{id:"conops",title:"tape 1 : Concept d'oprations / ConOps",subtitle:"Step #1  Documentation of the proposed operation(s)",description:"Dfinissez les caractristiques du drone et de l'opration"},{id:"initial-grc",title:"tape 2 : Dtermination du GRC Initial",subtitle:"Step #2  Determination of the intrinsic Ground Risk Class (iGRC)",description:"valuez le risque sol intrinsque"},{id:"final-grc",title:"tape 3 : Attnuation du risque sol et GRC Final",subtitle:"Step #3  Final Ground Risk Class (GRC) determination (optional)",description:"Dterminez le risque sol final aprs attnuation (Optionel)"},{id:"initial-arc",title:"tape 4 : Dtermination de l'ARC Initial",subtitle:"Step #4  Determination of the initial Air Risk Class (ARC)",description:"valuez le risque air initial"},{id:"final-arc",title:"tape 5 : Attnuation du risque air et ARC Rsiduel",subtitle:"Step #5  Application of strategic mitigations to determine residual ARC (optional)",description:"Dterminez le risque air rsiduel aprs attnuation par Mitigation Strategique (Optionel)"},{id:"tactical-mitigation",title:"tape 6 : Attnuation tactique du risque  air ",subtitle:"Step #6  Tactical Mitigation Performance Requirement (TMPR) and robustness levels",description:"Dfinissez les mesures tactiques d'attnuation du risque Air"},{id:"sail",title:"tape 7 : Dtermination du SAIL",subtitle:"Step #7  Specific Assurance and Integrity Levels (SAIL) determination",description:"Dterminez le niveau SAIL"},{id:"adjacent-areas",title:"tape 8 : Identification des exigences de confinement",subtitle:"Step #8  Determination of Containment requirements",description:"Les exigences de confinement garantissent que le niveau de scurit vis peut tre atteint tant pour les risques au sol que risques airs dans la zone adjacente et l'Airspace adjacent."},{id:"oso",title:"tape 9 : Objectifs de scurit oprationnels (OSO)",subtitle:"Step #9  Identification of Operational Safety Objectives (OSO)",description:"Dfinissez les objectifs de scurit"},{id:"summary",title:"Rsum",subtitle:"Summary",description:"Rcapitulatif de votre dossier SORA"}];var j1={exports:{}},bO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_O=bO,wO=_O;function D1(){}function O1(){}O1.resetWarningCache=D1;var EO=function(){function e(n,i,a,s,u,d){if(d!==wO){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:O1,resetWarningCache:D1};return r.PropTypes=r,r};j1.exports=EO();var Re=j1.exports,Lg=function(){return Lg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Lg.apply(this,arguments)},R1={onActivate:Re.func,onAddUndo:Re.func,onBeforeAddUndo:Re.func,onBeforeExecCommand:Re.func,onBeforeGetContent:Re.func,onBeforeRenderUI:Re.func,onBeforeSetContent:Re.func,onBeforePaste:Re.func,onBlur:Re.func,onChange:Re.func,onClearUndos:Re.func,onClick:Re.func,onContextMenu:Re.func,onCommentChange:Re.func,onCompositionEnd:Re.func,onCompositionStart:Re.func,onCompositionUpdate:Re.func,onCopy:Re.func,onCut:Re.func,onDblclick:Re.func,onDeactivate:Re.func,onDirty:Re.func,onDrag:Re.func,onDragDrop:Re.func,onDragEnd:Re.func,onDragGesture:Re.func,onDragOver:Re.func,onDrop:Re.func,onExecCommand:Re.func,onFocus:Re.func,onFocusIn:Re.func,onFocusOut:Re.func,onGetContent:Re.func,onHide:Re.func,onInit:Re.func,onInput:Re.func,onKeyDown:Re.func,onKeyPress:Re.func,onKeyUp:Re.func,onLoadContent:Re.func,onMouseDown:Re.func,onMouseEnter:Re.func,onMouseLeave:Re.func,onMouseMove:Re.func,onMouseOut:Re.func,onMouseOver:Re.func,onMouseUp:Re.func,onNodeChange:Re.func,onObjectResizeStart:Re.func,onObjectResized:Re.func,onObjectSelected:Re.func,onPaste:Re.func,onPostProcess:Re.func,onPostRender:Re.func,onPreProcess:Re.func,onProgressState:Re.func,onRedo:Re.func,onRemove:Re.func,onReset:Re.func,onSaveContent:Re.func,onSelectionChange:Re.func,onSetAttrib:Re.func,onSetContent:Re.func,onShow:Re.func,onSubmit:Re.func,onUndo:Re.func,onVisualAid:Re.func,onSkinLoadError:Re.func,onThemeLoadError:Re.func,onModelLoadError:Re.func,onPluginLoadError:Re.func,onIconsLoadError:Re.func,onLanguageLoadError:Re.func,onScriptsLoad:Re.func,onScriptsLoadError:Re.func},CO=Lg({apiKey:Re.string,licenseKey:Re.string,id:Re.string,inline:Re.bool,init:Re.object,initialValue:Re.string,onEditorChange:Re.func,value:Re.string,tagName:Re.string,tabIndex:Re.number,cloudChannel:Re.string,plugins:Re.oneOfType([Re.string,Re.array]),toolbar:Re.oneOfType([Re.string,Re.array]),disabled:Re.bool,readonly:Re.bool,textareaName:Re.string,tinymceScriptSrc:Re.oneOfType([Re.string,Re.arrayOf(Re.string),Re.arrayOf(Re.shape({src:Re.string,async:Re.bool,defer:Re.bool}))]),rollback:Re.oneOfType([Re.number,Re.oneOf([!1])]),scriptLoading:Re.shape({async:Re.bool,defer:Re.bool,delay:Re.number})},R1),I1=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},qp=function(e){return typeof e=="function"},eb=function(e){return e in R1},tb=function(e){return e.substr(2)},SO=function(e,t,r,n,i,a,s){var u=Object.keys(i).filter(eb),d=Object.keys(a).filter(eb),h=u.filter(function(p){return a[p]===void 0}),f=d.filter(function(p){return i[p]===void 0});h.forEach(function(p){var v=tb(p),b=s[v];r(v,b),delete s[v]}),f.forEach(function(p){var v=n(e,p),b=tb(p);s[b]=v,t(b,v)})},AO=function(e,t,r,n,i){return SO(i,e.on.bind(e),e.off.bind(e),function(a,s){return function(u){var d;return(d=a(s))===null||d===void 0?void 0:d(u,e)}},t,r,n)},rb=0,L1=function(e){var t=Date.now(),r=Math.floor(Math.random()*1e9);return rb++,e+"_"+r+rb+String(t)},nb=function(e){return e!==null&&(e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input")},ib=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},TO=function(e,t){return ib(e).concat(ib(t))},NO=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},kO=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,r=e.parentNode;r!=null;)t=r,r=t.parentNode;return t===e.ownerDocument}return e.isConnected},ab=function(e,t){e!==void 0&&(e.mode!=null&&typeof e.mode=="object"&&typeof e.mode.set=="function"?e.mode.set(t):e.setMode(t))},jO=function(e){var t=I1(e);if(!t)throw new Error("tinymce should have been loaded into global scope");return t},ob=function(e){return e.options&&e.options.isRegistered("disabled")},Pg=function(){return Pg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pg.apply(this,arguments)},DO=function(e,t,r){var n,i,a=e.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=t.id,a.src=t.src,a.async=(n=t.async)!==null&&n!==void 0?n:!1,a.defer=(i=t.defer)!==null&&i!==void 0?i:!1;var s=function(){a.removeEventListener("load",s),a.removeEventListener("error",u),r(t.src)},u=function(d){a.removeEventListener("load",s),a.removeEventListener("error",u),r(t.src,d)};a.addEventListener("load",s),a.addEventListener("error",u),e.head&&e.head.appendChild(a)},OO=function(e){var t={},r=function(s,u){var d=t[s];d.done=!0,d.error=u;for(var h=0,f=d.handlers;h<f.length;h++){var p=f[h];p(s,u)}d.handlers=[]},n=function(s,u,d){var h=function(_){return d!==void 0?d(_):console.error(_)};if(s.length===0){h(new Error("At least one script must be provided"));return}for(var f=0,p=!1,v=function(_,w){p||(w?(p=!0,h(w)):++f===s.length&&u())},b=0,k=s;b<k.length;b++){var S=k[b],T=t[S.src];if(T)T.done?v(S.src,T.error):T.handlers.push(v);else{var y=L1("tiny-");t[S.src]={id:y,src:S.src,done:!1,error:null,handlers:[v]},DO(e,Pg({id:y},S),r)}}},i=function(){for(var s,u=0,d=Object.values(t);u<d.length;u++){var h=d[u],f=e.getElementById(h.id);f!=null&&f.tagName==="SCRIPT"&&((s=f.parentNode)===null||s===void 0||s.removeChild(f))}t={}},a=function(){return e};return{loadScripts:n,deleteScripts:i,getDocument:a}},RO=function(){var e=[],t=function(i){var a=e.find(function(s){return s.getDocument()===i});return a===void 0&&(a=OO(i),e.push(a)),a},r=function(i,a,s,u,d){var h=function(){return t(i).loadScripts(a,u,d)};s>0?setTimeout(h,s):h()},n=function(){for(var i=e.pop();i!=null;i=e.pop())i.deleteScripts()};return{loadList:r,reinitialize:n}},IO=RO(),LO=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tl=function(){return tl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tl.apply(this,arguments)},Vp="change keyup compositionend setcontent CommentChange",Ru=function(e){LO(t,e);function t(r){var n,i,a,s=e.call(this,r)||this;return s.rollbackTimer=void 0,s.valueCursor=void 0,s.rollbackChange=function(){var u=s.editor,d=s.props.value;u&&d&&d!==s.currentContent&&u.undoManager.ignore(function(){if(u.setContent(d),s.valueCursor&&(!s.inline||u.hasFocus()))try{u.selection.moveToBookmark(s.valueCursor)}catch{}}),s.rollbackTimer=void 0},s.handleBeforeInput=function(u){if(s.props.value!==void 0&&s.props.value===s.currentContent&&s.editor&&(!s.inline||s.editor.hasFocus()))try{s.valueCursor=s.editor.selection.getBookmark(3)}catch{}},s.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&s.handleBeforeInput(u)},s.handleEditorChange=function(u){var d=s.editor;if(d&&d.initialized){var h=d.getContent();s.props.value!==void 0&&s.props.value!==h&&s.props.rollback!==!1&&(s.rollbackTimer||(s.rollbackTimer=window.setTimeout(s.rollbackChange,typeof s.props.rollback=="number"?s.props.rollback:200))),h!==s.currentContent&&(s.currentContent=h,qp(s.props.onEditorChange)&&s.props.onEditorChange(h,d))}},s.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&s.handleEditorChange(u)},s.initialise=function(u){var d,h,f;u===void 0&&(u=0);var p=s.elementRef.current;if(p){if(!kO(p)){if(u===0)setTimeout(function(){return s.initialise(1)},1);else if(u<100)setTimeout(function(){return s.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var v=jO(s.view),b=tl(tl(tl(tl({},s.props.init),{selector:void 0,target:p,disabled:s.props.disabled,readonly:s.props.readonly,inline:s.inline,plugins:TO((d=s.props.init)===null||d===void 0?void 0:d.plugins,s.props.plugins),toolbar:(h=s.props.toolbar)!==null&&h!==void 0?h:(f=s.props.init)===null||f===void 0?void 0:f.toolbar}),s.props.licenseKey?{license_key:s.props.licenseKey}:{}),{setup:function(k){s.editor=k,s.bindHandlers({}),s.inline&&!nb(p)&&k.once("PostRender",function(S){k.setContent(s.getInitialValue(),{no_events:!0})}),s.props.init&&qp(s.props.init.setup)&&s.props.init.setup(k),s.props.disabled&&(ob(s.editor)?s.editor.options.set("disabled",s.props.disabled):s.editor.mode.set("readonly"))},init_instance_callback:function(k){var S,T=s.getInitialValue();s.currentContent=(S=s.currentContent)!==null&&S!==void 0?S:k.getContent(),s.currentContent!==T&&(s.currentContent=T,k.setContent(T),k.undoManager.clear(),k.undoManager.add(),k.setDirty(!1)),s.props.init&&qp(s.props.init.init_instance_callback)&&s.props.init.init_instance_callback(k)}});s.inline||(p.style.visibility=""),nb(p)&&(p.value=s.getInitialValue()),v.init(b)}},s.id=s.props.id||L1("tiny-react"),s.elementRef=ge.createRef(),s.inline=(a=(n=s.props.inline)!==null&&n!==void 0?n:(i=s.props.init)===null||i===void 0?void 0:i.inline)!==null&&a!==void 0?a:!1,s.boundHandlers={},s}return Object.defineProperty(t.prototype,"view",{get:function(){var r,n;return(n=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&n!==void 0?n:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(r){var n=this,i,a;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var s=this.editor;s.undoManager.transact(function(){var d;if(!n.inline||s.hasFocus())try{d=s.selection.getBookmark(3)}catch{}var h=n.valueCursor;if(s.setContent(n.props.value),!n.inline||s.hasFocus())for(var f=0,p=[d,h];f<p.length;f++){var v=p[f];if(v)try{s.selection.moveToBookmark(v),n.valueCursor=v;break}catch{}}})}if(this.props.readonly!==r.readonly){var u=(a=this.props.readonly)!==null&&a!==void 0?a:!1;ab(this.editor,u?"readonly":"design")}this.props.disabled!==r.disabled&&(ob(this.editor)?this.editor.options.set("disabled",this.props.disabled):ab(this.editor,this.props.disabled?"readonly":"design"))}},t.prototype.componentDidMount=function(){var r=this,n,i,a,s,u;if(I1(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(n=this.props).onScriptsLoadError)===null||i===void 0||i.call(n,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((a=this.elementRef.current)===null||a===void 0)&&a.ownerDocument){var d=function(){var f,p;(p=(f=r.props).onScriptsLoad)===null||p===void 0||p.call(f),r.initialise()},h=function(f){var p,v;(v=(p=r.props).onScriptsLoadError)===null||v===void 0||v.call(p,f)};IO.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.delay)!==null&&u!==void 0?u:0,d,h)}},t.prototype.componentWillUnmount=function(){var r=this,n=this.editor;n&&(n.off(Vp,this.handleEditorChange),n.off(this.beforeInputEvent(),this.handleBeforeInput),n.off("keypress",this.handleEditorChangeSpecial),n.off("keydown",this.handleBeforeInputSpecial),n.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){n.off(i,r.boundHandlers[i])}),this.boundHandlers={},n.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.beforeInputEvent=function(){return NO()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var r=this.props.tagName,n=r===void 0?"div":r;return ge.createElement(n,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return ge.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var r,n,i=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,a=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:a}]:this.props.tinymceScriptSrc.map(function(h){return typeof h=="string"?{src:h,async:i,defer:a}:h});var s=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",d="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(s,"/tinymce.min.js");return[{src:d,async:i,defer:a}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(r){var n=this;if(this.editor!==void 0){AO(this.editor,r,this.props,this.boundHandlers,function(u){return n.props[u]});var i=function(u){return u.onEditorChange!==void 0||u.value!==void 0},a=i(r),s=i(this.props);!a&&s?(this.editor.on(Vp,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):a&&!s&&(this.editor.off(Vp,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=CO,t.defaultProps={cloudChannel:"8"},t}(ge.Component);function Ee({text:e,children:t}){const[r,n]=ge.useState(!1);return l.jsxs("div",{className:"relative inline-block w-full",children:[l.jsx("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:t}),r&&l.jsx("div",{className:"absolute z-10 w-80 p-2 mt-1 text-sm text-white bg-gray-800 rounded-lg shadow-lg",children:e})]})}var PO={REACT_APP_TINYMCE_KEY:"vbikzojy6tlatfe84lh5akvxbm6l9h5n4texf7bnfnz4y9y3"};function MO({operator:e,onChange:t}){const r=ge.useMemo(()=>{var a;return{name:!e.name.trim(),registrationNumber:!e.registrationNumber.trim(),managerName:!e.managerName.trim(),operationalContact:!e.operationalContact.trim(),address:!e.address.trim(),phone:!e.phone.trim(),email:!e.email.trim(),startDate:!e.startDate,endDate:!e.endDate,locations:!((a=e.locations)!=null&&a.trim())}},[e]),n=a=>`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${r[a]?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,i=a=>`block text-sm font-medium ${r[a]?"text-red-600":"text-gray-700"}`;return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Informations sur l'exploitant"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:i("name"),children:"Nom de l'oprateur *"}),l.jsx(Ee,{text:"Nom de l'oprateur de l'UAS tel qu'il a t dclar au cours de la procdure d'enregistrement.",children:l.jsx("input",{type:"text",value:e.name,onChange:a=>t({...e,name:a.target.value}),className:n("name")})})]}),l.jsxs("div",{children:[l.jsx("label",{className:i("registrationNumber"),children:"Numro d'enregistrement *"}),l.jsx(Ee,{text:"Numro d'enregistrement de l'oprateur UAS conformment  l'article 14 du rglement (UE) 219/947.",children:l.jsx("input",{type:"text",value:e.registrationNumber,onChange:a=>t({...e,registrationNumber:a.target.value}),className:n("registrationNumber")})})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:i("managerName"),children:"Nom du gestionnaire responsable *"}),l.jsx(Ee,{text:"Nom du dirigeant responsable ou, dans le cas d'une personne physique, nom de l'oprateur de l'UAS.",children:l.jsx("input",{type:"text",value:e.managerName,onChange:a=>t({...e,managerName:a.target.value}),className:n("managerName")})})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:i("operationalContact"),children:"Point de contact oprationnel *"}),l.jsx(Ee,{text:"Coordonnes de la personne responsable de l'opration.",children:l.jsx("input",{type:"text",value:e.operationalContact,onChange:a=>t({...e,operationalContact:a.target.value}),className:n("operationalContact")})})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:i("address"),children:"Adresse *"}),l.jsx("textarea",{value:e.address,onChange:a=>t({...e,address:a.target.value}),rows:2,className:n("address")})]}),l.jsxs("div",{children:[l.jsx("label",{className:i("phone"),children:"Tlphone *"}),l.jsx("input",{type:"tel",value:e.phone,onChange:a=>t({...e,phone:a.target.value}),className:n("phone")})]}),l.jsxs("div",{children:[l.jsx("label",{className:i("email"),children:"Email *"}),l.jsx("input",{type:"email",value:e.email,onChange:a=>t({...e,email:a.target.value}),className:n("email")})]})]}),Object.values(r).some(Boolean)&&l.jsx("p",{className:"text-sm text-red-600 mt-2",children:"* Veuillez remplir tous les champs obligatoires"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Rsum de l'opration UAS"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:i("startDate"),children:"Date prvue pour le dbut de l'opration *"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"date",value:e.startDate||"",onChange:a=>t({...e,startDate:a.target.value}),className:`${n("startDate")} pr-10`}),l.jsx(Rx,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:i("endDate"),children:"Date de fin prvue"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"date",value:e.endDate||"",onChange:a=>t({...e,endDate:a.target.value}),className:`${n("endDate")} pr-10`}),l.jsx(Rx,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:i("locations"),children:"Lieu(x) prvu(s) pour l'opration"}),l.jsx(Ru,{apiKey:PO.REACT_APP_TINYMCE_KEY,init:{menubar:!1,toolbar:"undo redo | bold italic strikethrough | bullist numlist | alignleft aligncenter alignright outdent indent",height:300},value:e.locations||"",onEditorChange:a=>t({...e,locations:a}),className:n("locations"),placeholder:"Saisissez les lieux prvus pour l'opration..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rfrence et rvision de l'valuation des risques"}),l.jsx("select",{value:e.riskAssessmentVersion||"SORA 2.5",onChange:a=>t({...e,riskAssessmentVersion:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:l.jsx("option",{value:"SORA 2.5",children:"SORA 2.5"})})]})]})]})]})}const BO=["Sans","C1","C2","C3","C4","C5","C6","Prototype","Specifique","Certifie"],FO=["Avion","Hlicoptre","Multirotor","Hybride/VTOL","Plus lger que l'air","Autre"],zO=({file:e})=>{const[t,r]=ge.useState(null);return ge.useEffect(()=>{if(!e.type.startsWith("image/")){r(null);return}const n=URL.createObjectURL(e);return r(n),()=>URL.revokeObjectURL(n)},[e]),t?l.jsx("div",{className:"flex justify-center bg-gray-100 rounded-lg p-2 mb-2",children:l.jsx("img",{src:t,alt:e.name,className:"max-h-40 object-contain rounded"})}):null};function UO({drone:e,onChange:t}){const r=ge.useRef(null),[n,i]=ge.useState(!1),a=ge.useMemo(()=>({manufacturer:!e.manufacturer.trim(),model:!e.model.trim(),uasType:e.uasType===null,serialNumber:!e.serialNumber.trim(),classIdentification:e.classIdentification===null,maxCharacteristicDimension:e.maxCharacteristicDimension<=0,VCruise:e.VCruise<=0,maxSpeed:e.maxSpeed<=0,MTOW:e.MTOW<=0,maxWindSpeedTakeoff:e.environmentalLimitations.maxWindSpeedTakeoff<=0,maxGustSpeed:e.environmentalLimitations.maxGustSpeed<=0,minTemperature:e.environmentalLimitations.minTemperature===-999,maxTemperature:e.environmentalLimitations.maxTemperature===999,visibility:e.environmentalLimitations.visibility===-999}),[e]),s=f=>`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${a[f]?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,u=f=>`block text-sm font-medium ${a[f]?"text-red-600":"text-gray-700"}`,d=f=>{const p=f.target.files;if(p){const v=Array.from(p),b=[],k=[];v.forEach(S=>{S.size<=500*1024?b.push(S):k.push(S.name)}),k.length>0&&alert(`Les fichiers suivants dpassent la taille limite de 500 Ko et n'ont pas t ajouts :
${k.join(`
`)}`),b.length>0&&t({...e,technicalDocuments:[...e.technicalDocuments||[],...b]}),f.target.value=""}},h=f=>{const p=[...e.technicalDocuments||[]];p.splice(f,1),t({...e,technicalDocuments:p})};return l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Informations sur le drone"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Fabricant de l'UAS tel qu'il a t dclar au cours de la procdure d'enregistrement. (Design Organisation)",children:l.jsx("label",{className:u("manufacturer"),children:"Fabricant *"})}),l.jsx("input",{type:"text",value:e.manufacturer,onChange:f=>t({...e,manufacturer:f.target.value}),className:s("manufacturer")})]}),l.jsxs("div",{children:[l.jsx("label",{className:u("model"),children:"Modle *"}),l.jsx("input",{type:"text",value:e.model,onChange:f=>t({...e,model:f.target.value}),className:s("model")})]}),l.jsxs("div",{children:[l.jsx("label",{className:u("uasType"),children:"Type d'UAS *"}),l.jsxs("select",{value:e.uasType,onChange:f=>t({...e,uasType:f.target.value||null}),className:s("uasType"),children:[l.jsx("option",{value:"",children:"Slectionner un type d'UAS"}),FO.map(f=>l.jsx("option",{value:f,children:f},f))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:u("serialNumber"),children:"Numro de srie *"}),l.jsx("input",{type:"text",value:e.serialNumber,onChange:f=>t({...e,serialNumber:f.target.value}),className:s("serialNumber")})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Si requis",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Numro de Certificat de Type (TC) ou de DVR"})}),l.jsx("input",{type:"text",value:e.typeCertificateNumber,onChange:f=>t({...e,typeCertificateNumber:f.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Si requis",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Numro de Certificat de Navigabilit (CofA)"})}),l.jsx("input",{type:"text",value:e.airworthinessCertificateNumber,onChange:f=>t({...e,airworthinessCertificateNumber:f.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Si requis",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Numro de Certificat Acoustique"})}),l.jsx("input",{type:"text",value:e.acousticCertificateNumber,onChange:f=>t({...e,acousticCertificateNumber:f.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Si une classe est appose sur le drone",children:l.jsx("label",{className:u("classIdentification"),children:"Identification de Classe *"})}),l.jsxs("select",{value:e.classIdentification||"",onChange:f=>t({...e,classIdentification:f.target.value||null}),className:s("classIdentification"),children:[l.jsx("option",{value:"",children:"Slectionner une classe"}),BO.map(f=>l.jsxs("option",{value:f,children:["Classe ",f]},f))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos et description schmatique du systme UAS"}),l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-500 transition-colors",children:[l.jsx("input",{ref:r,type:"file",accept:".png, .jpg, .jpeg",onChange:d,className:"hidden",multiple:!0}),l.jsxs("div",{onClick:()=>{var f;return(f=r.current)==null?void 0:f.click()},className:"flex items-center justify-center gap-2 cursor-pointer",children:[l.jsx(qh,{className:"w-5 h-5 text-gray-400"}),l.jsx("span",{className:"text-gray-600",children:"Tlcharger des fichiers image(.png, .jpg, .jpeg) ici ou cliquer pour parcourir (taille limite de 500 Ko)"})]})]}),e.technicalDocuments&&e.technicalDocuments.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:e.technicalDocuments.map((f,p)=>l.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200",children:[l.jsx(zO,{file:f}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[200px]",children:f.name}),l.jsx("button",{onClick:()=>h(p),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Supprimer"})]})]},p))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Dimensions"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Longueur (m)"}),l.jsx("input",{type:"number",value:e.dimensions.length,min:0,onChange:f=>t({...e,dimensions:{...e.dimensions,length:parseFloat(f.target.value)}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Largeur (m)"}),l.jsx("input",{type:"number",value:e.dimensions.width,min:0,onChange:f=>t({...e,dimensions:{...e.dimensions,width:parseFloat(f.target.value)}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hauteur (m)"}),l.jsx("input",{type:"number",value:e.dimensions.height,min:0,onChange:f=>t({...e,dimensions:{...e.dimensions,height:parseFloat(f.target.value)}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Exemples de dimensions caractristiques maximales de l'UA :",l.jsx("br",{}),"i. Envergure d'une aile fixe,",l.jsx("br",{}),"ii. Diamtre des pales pour les giravions,",l.jsx("br",{}),"iii. Distance maximale entre les extrmits des pales pour les multicoptres."]}),children:l.jsx("label",{className:u("maxCharacteristicDimension"),children:"Dimensions caractristiques maximales (m) *"})}),l.jsx("input",{type:"number",value:e.maxCharacteristicDimension,min:0,onChange:f=>t({...e,maxCharacteristicDimension:parseFloat(f.target.value)}),step:"0.1",className:s("maxCharacteristicDimension")})]}),l.jsx("div",{children:" "}),l.jsx("h3",{className:"text-lg font-medium",children:"Vitesses Caractristiques"}),l.jsx("div",{children:" "}),l.jsxs("div",{children:[l.jsx("label",{className:u("VCruise"),children:"Vitesse de Croisire (m/s) *"}),l.jsx("input",{type:"number",value:e.VCruise,step:"0.1",min:0,onChange:f=>t({...e,VCruise:parseFloat(f.target.value)}),className:s("VCruise")})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vitesse Sol maximale du drone en (m/s) ",children:l.jsx("label",{className:u("maxSpeed"),children:"Vitesse maximale (m/s) *"})}),l.jsx("input",{type:"number",value:e.maxSpeed,step:"0.1",min:0,onChange:f=>t({...e,maxSpeed:parseFloat(f.target.value)}),className:s("maxSpeed")})]}),l.jsx("h3",{className:"text-lg font-medium",children:"Masses Caractristiques"}),l.jsx("div",{children:" "}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Masse Maximale au dcolage MTOM (kg) ",children:l.jsx("label",{className:u("MTOW"),children:"MTOM (kg) *"})}),l.jsx("input",{type:"number",value:e.MTOW,min:0,step:"0.1",onChange:f=>t({...e,MTOW:parseFloat(f.target.value)}),className:s("MTOW")})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"text-lg font-medium",children:"Limitations environnementales"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Vitesse ne pouvant excder la vitesse maximale du drone ",children:l.jsx("label",{className:u("maxWindSpeedTakeoff"),children:"Vitesse maximale du vent au dcollage (m/s) *"})}),l.jsx("input",{type:"number",value:e.environmentalLimitations.maxWindSpeedTakeoff,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,maxWindSpeedTakeoff:parseFloat(f.target.value)}}),min:0,max:e.maxSpeed,className:s("maxWindSpeedTakeoff")})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vitesse ne pouvant excder la vitesse maximale du drone  et ne pouvant tre infrieure  la vitesse maximale du vent au dcollage",children:l.jsx("label",{className:u("maxGustSpeed"),children:"Vitesse maximale de tenue  la rafale en volution (m/s) *"})}),l.jsx("input",{type:"number",value:e.environmentalLimitations.maxGustSpeed,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,maxGustSpeed:parseFloat(f.target.value)}}),min:e.environmentalLimitations.maxWindSpeedTakeoff,max:e.maxSpeed,className:s("maxGustSpeed")})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Temprature minimale pour l'opration du drone",children:l.jsx("label",{className:u("minTemperature"),children:"Temprature [Min] (C) *"})}),l.jsx("input",{type:"number",value:e.environmentalLimitations.minTemperature,min:-100,max:25,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,minTemperature:parseFloat(f.target.value)}}),className:s("minTemperature")})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Temprature maximale pour l'opration du drone",children:l.jsx("label",{className:u("maxTemperature"),children:"Temprature [Max] (C) *"})}),l.jsx("input",{type:"number",value:e.environmentalLimitations.maxTemperature,min:-100,max:100,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,maxTemperature:parseFloat(f.target.value)}}),className:s("maxTemperature")})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Visibilit minimale pour l'opration du drone exprime en mtres",children:l.jsx("label",{className:u("visibility"),children:"Visibilit [m]*"})}),l.jsx("input",{type:"number",value:e.environmentalLimitations.visibility,min:0,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,visibility:parseFloat(f.target.value)}}),className:s("visibility")})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:"Autres limitations environnementales inscrites au manuel de l'UAS",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Autres limitations"})}),l.jsx("textarea",{value:e.environmentalLimitations.otherLimitations,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,otherLimitations:f.target.value}}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i(!n),children:[l.jsx("h3",{className:"text-lg font-medium",children:"Exigences techniques supplmentaires (Optionel)"}),l.jsx("button",{type:"button",className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:n?l.jsx(wk,{className:"w-5 h-5 text-gray-500"}):l.jsx(_k,{className:"w-5 h-5 text-gray-500"})})]}),n&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Matriaux utiliss"}),l.jsx("textarea",{value:e.materials,onChange:f=>t({...e,materials:f.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description des charges utiles avec les masses associes en (kg)"}),l.jsx("textarea",{value:e.payloads,onChange:f=>t({...e,payloads:f.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:l.jsxs("div",{children:['text="Type de propulsion et moteur utiliss :',l.jsx("br",{}),l.jsx("li",{children:"Electrique"}),l.jsx("li",{children:"Combustion"}),l.jsx("li",{children:"Hybride, prciser le type"}),l.jsx("li",{children:"Autre, veuillez prciser"})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type de propulsion/moteur"})}),l.jsx("textarea",{value:e.propulsionType,onChange:f=>t({...e,propulsionType:f.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type de carburant"}),l.jsx("textarea",{value:e.fuelType,onChange:f=>t({...e,fuelType:f.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modifications apportes au modle de rfrence"}),l.jsx("textarea",{value:e.modifications,onChange:f=>t({...e,modifications:f.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Station de contrle au sol, logiciels et frquences utiliss"}),l.jsx("textarea",{value:e.groundStation,onChange:f=>t({...e,groundStation:f.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Moyens de localisation"}),l.jsx("textarea",{value:e.locationMeans,onChange:f=>t({...e,locationMeans:f.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vitesse minimale (m/s) : 0 pour un drone VTOL / vitesse de dcrochage pour un drone Avion",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse minimale (m/s)"})}),l.jsx("input",{type:"number",value:e.minSpeed,step:"0.1",min:0,onChange:f=>t({...e,minSpeed:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Taux de monte maximal (m/s)"}),l.jsx("input",{type:"number",value:e.maxClimbRate,onChange:f=>t({...e,maxClimbRate:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Taux de descente maximal (m/s)"}),l.jsx("input",{type:"number",value:e.maxDescentRate,onChange:f=>t({...e,maxDescentRate:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Taux de virage (deg/s)"}),l.jsx("input",{type:"number",value:e.turnRate,onChange:f=>t({...e,turnRate:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Endurance maximale (h)"}),l.jsx("input",{type:"number",value:e.maxEndurance,onChange:f=>t({...e,maxEndurance:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre d'hlices"}),l.jsx("input",{type:"number",value:e.propellerCount,onChange:f=>t({...e,propellerCount:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"nergie cintique"}),l.jsx("input",{type:"number",value:e.kineticEnergy,onChange:f=>t({...e,kineticEnergy:parseFloat(f.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Indice de Protection (IP)"}),l.jsx("input",{type:"text",value:e.environmentalLimitations.ipRating,onChange:f=>t({...e,environmentalLimitations:{...e.environmentalLimitations,ipRating:f.target.value}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]})]})}function qO(e,t){const r=ge.useRef(t);ge.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}const VO=1;function $O(e){return Object.freeze({__version:VO,map:e})}function kf(e,t){return Object.freeze({...e,...t})}const P1=ge.createContext(null),s0=P1.Provider;function jf(){const e=ge.useContext(P1);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function l0(e){function t(r,n){const{instance:i,context:a}=e(r).current;return ge.useImperativeHandle(n,()=>i),r.children==null?null:qo.createElement(s0,{value:a},r.children)}return ge.forwardRef(t)}function GO(e){function t(r,n){const{instance:i}=e(r).current;return ge.useImperativeHandle(n,()=>i),null}return ge.forwardRef(t)}function HO(e){return function(r){const n=jf(),i=e(r,n),{instance:a}=i.current,s=ge.useRef(r.position),{position:u}=r;return ge.useEffect(function(){return a.addTo(n.map),function(){a.remove()}},[n.map,a]),ge.useEffect(function(){u!=null&&u!==s.current&&(a.setPosition(u),s.current=u)},[a,u]),i}}function M1(e,t){const r=ge.useRef();ge.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function u0(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}var Mg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,n){n(t)})(Qe,function(r){var n="1.9.4";function i(o){var c,m,C,R;for(m=1,C=arguments.length;m<C;m++){R=arguments[m];for(c in R)o[c]=R[c]}return o}var a=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function s(o,c){var m=Array.prototype.slice;if(o.bind)return o.bind.apply(o,m.call(arguments,1));var C=m.call(arguments,2);return function(){return o.apply(c,C.length?C.concat(m.call(arguments)):arguments)}}var u=0;function d(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function h(o,c,m){var C,R,$,le;return le=function(){C=!1,R&&($.apply(m,R),R=!1)},$=function(){C?R=arguments:(o.apply(m,arguments),setTimeout(le,c),C=!0)},$}function f(o,c,m){var C=c[1],R=c[0],$=C-R;return o===C&&m?o:((o-R)%$+$)%$+R}function p(){return!1}function v(o,c){if(c===!1)return o;var m=Math.pow(10,c===void 0?6:c);return Math.round(o*m)/m}function b(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function k(o){return b(o).split(/\s+/)}function S(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?a(o.options):{});for(var m in c)o.options[m]=c[m];return o.options}function T(o,c,m){var C=[];for(var R in o)C.push(encodeURIComponent(m?R.toUpperCase():R)+"="+encodeURIComponent(o[R]));return(!c||c.indexOf("?")===-1?"?":"&")+C.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function _(o,c){return o.replace(y,function(m,C){var R=c[C];if(R===void 0)throw new Error("No value provided for variable "+m);return typeof R=="function"&&(R=R(c)),R})}var w=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function E(o,c){for(var m=0;m<o.length;m++)if(o[m]===c)return m;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var B=0;function D(o){var c=+new Date,m=Math.max(0,16-(c-B));return B=c+m,window.setTimeout(o,m)}var A=window.requestAnimationFrame||M("RequestAnimationFrame")||D,H=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function te(o,c,m){if(m&&A===D)o.call(c);else return A.call(window,s(o,c))}function z(o){o&&H.call(window,o)}var ae={__proto__:null,extend:i,create:a,bind:s,get lastId(){return u},stamp:d,throttle:h,wrapNum:f,falseFn:p,formatNum:v,trim:b,splitWords:k,setOptions:S,getParamString:T,template:_,isArray:w,indexOf:E,emptyImageUrl:N,requestFn:A,cancelFn:H,requestAnimFrame:te,cancelAnimFrame:z};function P(){}P.extend=function(o){var c=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,C=a(m);C.constructor=c,c.prototype=C;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(c[R]=this[R]);return o.statics&&i(c,o.statics),o.includes&&(ce(o.includes),i.apply(null,[C].concat(o.includes))),i(C,o),delete C.statics,delete C.includes,C.options&&(C.options=m.options?a(m.options):{},i(C.options,o.options)),C._initHooks=[],C.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,le=C._initHooks.length;$<le;$++)C._initHooks[$].call(this)}},c},P.include=function(o){var c=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},P.mergeOptions=function(o){return i(this.prototype.options,o),this},P.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),m=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function ce(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=w(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var fe={on:function(o,c,m){if(typeof o=="object")for(var C in o)this._on(C,o[C],c);else{o=k(o);for(var R=0,$=o.length;R<$;R++)this._on(o[R],c,m)}return this},off:function(o,c,m){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var C in o)this._off(C,o[C],c);else{o=k(o);for(var R=arguments.length===1,$=0,le=o.length;$<le;$++)R?this._off(o[$]):this._off(o[$],c,m)}return this},_on:function(o,c,m,C){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,m)===!1){m===this&&(m=void 0);var R={fn:c,ctx:m};C&&(R.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(R)}},_off:function(o,c,m){var C,R,$;if(this._events&&(C=this._events[o],!!C)){if(arguments.length===1){if(this._firingCount)for(R=0,$=C.length;R<$;R++)C[R].fn=p;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var le=this._listens(o,c,m);if(le!==!1){var _e=C[le];this._firingCount&&(_e.fn=p,this._events[o]=C=C.slice()),C.splice(le,1)}}},fire:function(o,c,m){if(!this.listens(o,m))return this;var C=i({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var R=this._events[o];if(R){this._firingCount=this._firingCount+1||1;for(var $=0,le=R.length;$<le;$++){var _e=R[$],Se=_e.fn;_e.once&&this.off(o,Se,_e.ctx),Se.call(_e.ctx||this,C)}this._firingCount--}}return m&&this._propagateEvent(C),this},listens:function(o,c,m,C){typeof o!="string"&&console.warn('"string" type argument expected');var R=c;typeof c!="function"&&(C=!!c,R=void 0,m=void 0);var $=this._events&&this._events[o];if($&&$.length&&this._listens(o,R,m)!==!1)return!0;if(C){for(var le in this._eventParents)if(this._eventParents[le].listens(o,c,m,C))return!0}return!1},_listens:function(o,c,m){if(!this._events)return!1;var C=this._events[o]||[];if(!c)return!!C.length;m===this&&(m=void 0);for(var R=0,$=C.length;R<$;R++)if(C[R].fn===c&&C[R].ctx===m)return R;return!1},once:function(o,c,m){if(typeof o=="object")for(var C in o)this._on(C,o[C],c,!0);else{o=k(o);for(var R=0,$=o.length;R<$;R++)this._on(o[R],c,m,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[d(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[d(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};fe.addEventListener=fe.on,fe.removeEventListener=fe.clearAllEventListeners=fe.off,fe.addOneTimeEventListener=fe.once,fe.fireEvent=fe.fire,fe.hasEventListeners=fe.listens;var re=P.extend(fe);function ue(o,c,m){this.x=m?Math.round(o):o,this.y=m?Math.round(c):c}var O=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ue.prototype={clone:function(){return new ue(this.x,this.y)},add:function(o){return this.clone()._add(ne(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ne(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ue(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ue(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(o){o=ne(o);var c=o.x-this.x,m=o.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(o){return o=ne(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ne(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ne(o,c,m){return o instanceof ue?o:w(o)?new ue(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ue(o.x,o.y):new ue(o,c,m)}function J(o,c){if(o)for(var m=c?[o,c]:o,C=0,R=m.length;C<R;C++)this.extend(m[C])}J.prototype={extend:function(o){var c,m;if(!o)return this;if(o instanceof ue||typeof o[0]=="number"||"x"in o)c=m=ne(o);else if(o=G(o),c=o.min,m=o.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(o){return ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ne(this.min.x,this.max.y)},getTopRight:function(){return ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,m;return typeof o[0]=="number"||o instanceof ue?o=ne(o):o=G(o),o instanceof J?(c=o.min,m=o.max):c=m=o,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(o){o=G(o);var c=this.min,m=this.max,C=o.min,R=o.max,$=R.x>=c.x&&C.x<=m.x,le=R.y>=c.y&&C.y<=m.y;return $&&le},overlaps:function(o){o=G(o);var c=this.min,m=this.max,C=o.min,R=o.max,$=R.x>c.x&&C.x<m.x,le=R.y>c.y&&C.y<m.y;return $&&le},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,m=this.max,C=Math.abs(c.x-m.x)*o,R=Math.abs(c.y-m.y)*o;return G(ne(c.x-C,c.y-R),ne(m.x+C,m.y+R))},equals:function(o){return o?(o=G(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function G(o,c){return!o||o instanceof J?o:new J(o,c)}function ve(o,c){if(o)for(var m=c?[o,c]:o,C=0,R=m.length;C<R;C++)this.extend(m[C])}ve.prototype={extend:function(o){var c=this._southWest,m=this._northEast,C,R;if(o instanceof Z)C=o,R=o;else if(o instanceof ve){if(C=o._southWest,R=o._northEast,!C||!R)return this}else return o?this.extend(se(o)||de(o)):this;return!c&&!m?(this._southWest=new Z(C.lat,C.lng),this._northEast=new Z(R.lat,R.lng)):(c.lat=Math.min(C.lat,c.lat),c.lng=Math.min(C.lng,c.lng),m.lat=Math.max(R.lat,m.lat),m.lng=Math.max(R.lng,m.lng)),this},pad:function(o){var c=this._southWest,m=this._northEast,C=Math.abs(c.lat-m.lat)*o,R=Math.abs(c.lng-m.lng)*o;return new ve(new Z(c.lat-C,c.lng-R),new Z(m.lat+C,m.lng+R))},getCenter:function(){return new Z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Z(this.getNorth(),this.getWest())},getSouthEast:function(){return new Z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Z||"lat"in o?o=se(o):o=de(o);var c=this._southWest,m=this._northEast,C,R;return o instanceof ve?(C=o.getSouthWest(),R=o.getNorthEast()):C=R=o,C.lat>=c.lat&&R.lat<=m.lat&&C.lng>=c.lng&&R.lng<=m.lng},intersects:function(o){o=de(o);var c=this._southWest,m=this._northEast,C=o.getSouthWest(),R=o.getNorthEast(),$=R.lat>=c.lat&&C.lat<=m.lat,le=R.lng>=c.lng&&C.lng<=m.lng;return $&&le},overlaps:function(o){o=de(o);var c=this._southWest,m=this._northEast,C=o.getSouthWest(),R=o.getNorthEast(),$=R.lat>c.lat&&C.lat<m.lat,le=R.lng>c.lng&&C.lng<m.lng;return $&&le},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=de(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(o,c){return o instanceof ve?o:new ve(o,c)}function Z(o,c,m){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,m!==void 0&&(this.alt=+m)}Z.prototype={equals:function(o,c){if(!o)return!1;o=se(o);var m=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return m<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+v(this.lat,o)+", "+v(this.lng,o)+")"},distanceTo:function(o){return I.distance(this,se(o))},wrap:function(){return I.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,m=c/Math.cos(Math.PI/180*this.lat);return de([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new Z(this.lat,this.lng,this.alt)}};function se(o,c,m){return o instanceof Z?o:w(o)&&typeof o[0]!="object"?o.length===3?new Z(o[0],o[1],o[2]):o.length===2?new Z(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Z(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new Z(o,c,m)}var F={latLngToPoint:function(o,c){var m=this.projection.project(o),C=this.scale(c);return this.transformation._transform(m,C)},pointToLatLng:function(o,c){var m=this.scale(c),C=this.transformation.untransform(o,m);return this.projection.unproject(C)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(o),C=this.transformation.transform(c.min,m),R=this.transformation.transform(c.max,m);return new J(C,R)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?f(o.lng,this.wrapLng,!0):o.lng,m=this.wrapLat?f(o.lat,this.wrapLat,!0):o.lat,C=o.alt;return new Z(m,c,C)},wrapLatLngBounds:function(o){var c=o.getCenter(),m=this.wrapLatLng(c),C=c.lat-m.lat,R=c.lng-m.lng;if(C===0&&R===0)return o;var $=o.getSouthWest(),le=o.getNorthEast(),_e=new Z($.lat-C,$.lng-R),Se=new Z(le.lat-C,le.lng-R);return new ve(_e,Se)}},I=i({},F,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var m=Math.PI/180,C=o.lat*m,R=c.lat*m,$=Math.sin((c.lat-o.lat)*m/2),le=Math.sin((c.lng-o.lng)*m/2),_e=$*$+Math.cos(C)*Math.cos(R)*le*le,Se=2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e));return this.R*Se}}),X=6378137,Y={R:X,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,m=this.MAX_LATITUDE,C=Math.max(Math.min(m,o.lat),-m),R=Math.sin(C*c);return new ue(this.R*o.lng*c,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(o){var c=180/Math.PI;return new Z((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=X*Math.PI;return new J([-o,-o],[o,o])}()};function Ne(o,c,m,C){if(w(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=m,this._d=C}Ne.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new ue((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function Le(o,c,m,C){return new Ne(o,c,m,C)}var Me=i({},I,{code:"EPSG:3857",projection:Y,transformation:function(){var o=.5/(Math.PI*Y.R);return Le(o,.5,-o,.5)}()}),j=i({},Me,{code:"EPSG:900913"});function K(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function W(o,c){var m="",C,R,$,le,_e,Se;for(C=0,$=o.length;C<$;C++){for(_e=o[C],R=0,le=_e.length;R<le;R++)Se=_e[R],m+=(R?"L":"M")+Se.x+" "+Se.y;m+=c?Xe.svg?"z":"x":""}return m||"M0 0"}var V=document.documentElement.style,q="ActiveXObject"in window,ie=q&&!document.addEventListener,ye="msLaunchUri"in navigator&&!("documentMode"in document),we=ur("webkit"),he=ur("android"),je=ur("android 2")||ur("android 3"),Pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Oe=he&&ur("Google")&&Pe<537&&!("AudioNode"in window),Ue=!!window.opera,Ye=!ye&&ur("chrome"),et=ur("gecko")&&!we&&!Ue&&!q,Wt=!Ye&&ur("safari"),Ar=ur("phantom"),fr="OTransition"in V,Kt=navigator.platform.indexOf("Win")===0,Ae=q&&"transition"in V,Te="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,xe="MozPerspective"in V,Ce=!window.L_DISABLE_3D&&(Ae||Te||xe)&&!fr&&!Ar,Ve=typeof orientation<"u"||ur("mobile"),He=Ve&&we,ct=Ve&&Te,Ke=!window.PointerEvent&&window.MSPointerEvent,vt=!!(window.PointerEvent||Ke),wt="ontouchstart"in window||!!window.TouchEvent,Ct=!window.L_NO_TOUCH&&(wt||vt),Rt=Ve&&Ue,pt=Ve&&et,Mr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fn=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",p,c),window.removeEventListener("testPassiveEventSupport",p,c)}catch{}return o}(),xi=function(){return!!document.createElement("canvas").getContext}(),Dr=!!(document.createElementNS&&K("svg").createSVGRect),bi=!!Dr&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zn=!Dr&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Wr=navigator.platform.indexOf("Mac")===0,Or=navigator.platform.indexOf("Linux")===0;function ur(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Xe={ie:q,ielt9:ie,edge:ye,webkit:we,android:he,android23:je,androidStock:Oe,opera:Ue,chrome:Ye,gecko:et,safari:Wt,phantom:Ar,opera12:fr,win:Kt,ie3d:Ae,webkit3d:Te,gecko3d:xe,any3d:Ce,mobile:Ve,mobileWebkit:He,mobileWebkit3d:ct,msPointer:Ke,pointer:vt,touch:Ct,touchNative:wt,mobileOpera:Rt,mobileGecko:pt,retina:Mr,passiveEvents:Fn,canvas:xi,svg:Dr,vml:zn,inlineSvg:bi,mac:Wr,linux:Or},_i=Xe.msPointer?"MSPointerDown":"pointerdown",Wl=Xe.msPointer?"MSPointerMove":"pointermove",Zl=Xe.msPointer?"MSPointerUp":"pointerup",Kl=Xe.msPointer?"MSPointerCancel":"pointercancel",Vi={touchstart:_i,touchmove:Wl,touchend:Zl,touchcancel:Kl},ss={touchstart:td,touchmove:us,touchend:us,touchcancel:us},la={},Xl=!1;function Qc(o,c,m){return c==="touchstart"&&Jf(),ss[c]?(m=ss[c].bind(this,m),o.addEventListener(Vi[c],m,!1),m):(console.warn("wrong event specified:",c),p)}function ed(o,c,m){if(!Vi[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(Vi[c],m,!1)}function ho(o){la[o.pointerId]=o}function wi(o){la[o.pointerId]&&(la[o.pointerId]=o)}function ls(o){delete la[o.pointerId]}function Jf(){Xl||(document.addEventListener(_i,ho,!0),document.addEventListener(Wl,wi,!0),document.addEventListener(Zl,ls,!0),document.addEventListener(Kl,ls,!0),Xl=!0)}function us(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in la)c.touches.push(la[m]);c.changedTouches=[c],o(c)}}function td(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&pr(c),us(o,c)}function rd(o){var c={},m,C;for(C in o)m=o[C],c[C]=m&&m.bind?m.bind(o):m;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Yf=200;function Qf(o,c){o.addEventListener("dblclick",c);var m=0,C;function R($){if($.detail!==1){C=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var le=nu($);if(!(le.some(function(Se){return Se instanceof HTMLLabelElement&&Se.attributes.for})&&!le.some(function(Se){return Se instanceof HTMLInputElement||Se instanceof HTMLSelectElement}))){var _e=Date.now();_e-m<=Yf?(C++,C===2&&c(rd($))):C=1,m=_e}}}return o.addEventListener("click",R),{dblclick:c,simDblclick:R}}function ep(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var Jl=mo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ei=mo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),nd=Ei==="webkitTransition"||Ei==="OTransition"?Ei+"End":"transitionend";function id(o){return typeof o=="string"?document.getElementById(o):o}function fo(o,c){var m=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var C=document.defaultView.getComputedStyle(o,null);m=C?C[c]:null}return m==="auto"?null:m}function kt(o,c,m){var C=document.createElement(o);return C.className=c||"",m&&m.appendChild(C),C}function Pt(o){var c=o.parentNode;c&&c.removeChild(o)}function ua(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Qn(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function ei(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function Yl(o,c){if(o.classList!==void 0)return o.classList.contains(c);var m=cs(o);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function ft(o,c){if(o.classList!==void 0)for(var m=k(c),C=0,R=m.length;C<R;C++)o.classList.add(m[C]);else if(!Yl(o,c)){var $=cs(o);Ql(o,($?$+" ":"")+c)}}function Xt(o,c){o.classList!==void 0?o.classList.remove(c):Ql(o,b((" "+cs(o)+" ").replace(" "+c+" "," ")))}function Ql(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function cs(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function an(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&po(o,c)}function po(o,c){var m=!1,C="DXImageTransform.Microsoft.Alpha";try{m=o.filters.item(C)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):o.style.filter+=" progid:"+C+"(opacity="+c+")"}function mo(o){for(var c=document.documentElement.style,m=0;m<o.length;m++)if(o[m]in c)return o[m];return!1}function $i(o,c,m){var C=c||new ue(0,0);o.style[Jl]=(Xe.ie3d?"translate("+C.x+"px,"+C.y+"px)":"translate3d("+C.x+"px,"+C.y+"px,0)")+(m?" scale("+m+")":"")}function $t(o,c){o._leaflet_pos=c,Xe.any3d?$i(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Zr(o){return o._leaflet_pos||new ue(0,0)}var go,vo,Kr;if("onselectstart"in document)go=function(){ut(window,"selectstart",pr)},vo=function(){it(window,"selectstart",pr)};else{var ca=mo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);go=function(){if(ca){var o=document.documentElement.style;Kr=o[ca],o[ca]="none"}},vo=function(){ca&&(document.documentElement.style[ca]=Kr,Kr=void 0)}}function ds(){ut(window,"dragstart",pr)}function eu(){it(window,"dragstart",pr)}var yo,da;function ha(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(on(),yo=o,da=o.style.outlineStyle,o.style.outlineStyle="none",ut(window,"keydown",on))}function on(){yo&&(yo.style.outlineStyle=da,yo=void 0,da=void 0,it(window,"keydown",on))}function hs(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function xo(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var fs={__proto__:null,TRANSFORM:Jl,TRANSITION:Ei,TRANSITION_END:nd,get:id,getStyle:fo,create:kt,remove:Pt,empty:ua,toFront:Qn,toBack:ei,hasClass:Yl,addClass:ft,removeClass:Xt,setClass:Ql,getClass:cs,setOpacity:an,testProp:mo,setTransform:$i,setPosition:$t,getPosition:Zr,get disableTextSelection(){return go},get enableTextSelection(){return vo},disableImageDrag:ds,enableImageDrag:eu,preventOutline:ha,restoreOutline:on,getSizedParentNode:hs,getScale:xo};function ut(o,c,m,C){if(c&&typeof c=="object")for(var R in c)bo(o,R,c[R],m);else{c=k(c);for(var $=0,le=c.length;$<le;$++)bo(o,c[$],m,C)}return this}var sn="_leaflet_events";function it(o,c,m,C){if(arguments.length===1)tu(o),delete o[sn];else if(c&&typeof c=="object")for(var R in c)_o(o,R,c[R],m);else if(c=k(c),arguments.length===2)tu(o,function(_e){return E(c,_e)!==-1});else for(var $=0,le=c.length;$<le;$++)_o(o,c[$],m,C);return this}function tu(o,c){for(var m in o[sn]){var C=m.split(/\d/)[0];(!c||c(C))&&_o(o,C,null,null,m)}}var ru={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bo(o,c,m,C){var R=c+d(m)+(C?"_"+d(C):"");if(o[sn]&&o[sn][R])return this;var $=function(_e){return m.call(C||o,_e||window.event)},le=$;!Xe.touchNative&&Xe.pointer&&c.indexOf("touch")===0?$=Qc(o,c,$):Xe.touch&&c==="dblclick"?$=Qf(o,$):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(ru[c]||c,$,Xe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?($=function(_e){_e=_e||window.event,iu(o,_e)&&le(_e)},o.addEventListener(ru[c],$,!1)):o.addEventListener(c,le,!1):o.attachEvent("on"+c,$),o[sn]=o[sn]||{},o[sn][R]=$}function _o(o,c,m,C,R){R=R||c+d(m)+(C?"_"+d(C):"");var $=o[sn]&&o[sn][R];if(!$)return this;!Xe.touchNative&&Xe.pointer&&c.indexOf("touch")===0?ed(o,c,$):Xe.touch&&c==="dblclick"?ep(o,$):"removeEventListener"in o?o.removeEventListener(ru[c]||c,$,!1):o.detachEvent("on"+c,$),o[sn][R]=null}function Xr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function ps(o){return bo(o,"wheel",Xr),this}function fa(o){return ut(o,"mousedown touchstart dblclick contextmenu",Xr),o._leaflet_disable_click=!0,this}function pr(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Ci(o){return pr(o),Xr(o),this}function nu(o){if(o.composedPath)return o.composedPath();for(var c=[],m=o.target;m;)c.push(m),m=m.parentNode;return c}function ad(o,c){if(!c)return new ue(o.clientX,o.clientY);var m=xo(c),C=m.boundingClientRect;return new ue((o.clientX-C.left)/m.x-c.clientLeft,(o.clientY-C.top)/m.y-c.clientTop)}var od=Xe.linux&&Xe.chrome?window.devicePixelRatio:Xe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Un(o){return Xe.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/od:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function iu(o,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==o;)m=m.parentNode}catch{return!1}return m!==o}var sd={__proto__:null,on:ut,off:it,stopPropagation:Xr,disableScrollPropagation:ps,disableClickPropagation:fa,preventDefault:pr,stop:Ci,getPropagationPath:nu,getMousePosition:ad,getWheelDelta:Un,isExternalTarget:iu,addListener:ut,removeListener:it},ld=re.extend({run:function(o,c,m,C){this.stop(),this._el=o,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(C||.5,.2),this._startPos=Zr(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var m=this._startPos.add(this._offset.multiplyBy(o));c&&m._round(),$t(this._el,m),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Nt=re.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=S(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(se(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ei&&Xe.any3d&&!Xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ut(this._proxy,nd,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(se(o),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=i({animate:m.animate},m.zoom),m.pan=i({animate:m.animate,duration:m.duration},m.pan));var C=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,m.zoom):this._tryAnimatedPan(o,m.pan);if(C)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(Xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(Xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,m){var C=this.getZoomScale(c),R=this.getSize().divideBy(2),$=o instanceof ue?o:this.latLngToContainerPoint(o),le=$.subtract(R).multiplyBy(1-1/C),_e=this.containerPointToLatLng(R.add(le));return this.setView(_e,c,{zoom:m})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():de(o);var m=ne(c.paddingTopLeft||c.padding||[0,0]),C=ne(c.paddingBottomRight||c.padding||[0,0]),R=this.getBoundsZoom(o,!1,m.add(C));if(R=typeof c.maxZoom=="number"?Math.min(c.maxZoom,R):R,R===1/0)return{center:o.getCenter(),zoom:R};var $=C.subtract(m).divideBy(2),le=this.project(o.getSouthWest(),R),_e=this.project(o.getNorthEast(),R),Se=this.unproject(le.add(_e).divideBy(2).add($),R);return{center:Se,zoom:R}},fitBounds:function(o,c){if(o=de(o),!o.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(o,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=ne(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ld,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){ft(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,m){if(m=m||{},m.animate===!1||!Xe.any3d)return this.setView(o,c,m);this._stop();var C=this.project(this.getCenter()),R=this.project(o),$=this.getSize(),le=this._zoom;o=se(o),c=c===void 0?le:c;var _e=Math.max($.x,$.y),Se=_e*this.getZoomScale(le,c),Ie=R.distanceTo(C)||1,We=1.42,st=We*We;function St(mr){var Cd=mr?-1:1,zS=mr?Se:_e,US=Se*Se-_e*_e+Cd*st*st*Ie*Ie,qS=2*zS*st*Ie,ap=US/qS,py=Math.sqrt(ap*ap+1)-ap,VS=py<1e-9?-18:Math.log(py);return VS}function Yr(mr){return(Math.exp(mr)-Math.exp(-mr))/2}function Tr(mr){return(Math.exp(mr)+Math.exp(-mr))/2}function qn(mr){return Yr(mr)/Tr(mr)}var un=St(0);function _s(mr){return _e*(Tr(un)/Tr(un+We*mr))}function PS(mr){return _e*(Tr(un)*qn(un+We*mr)-Yr(un))/st}function MS(mr){return 1-Math.pow(1-mr,1.5)}var BS=Date.now(),hy=(St(1)-un)/We,FS=m.duration?1e3*m.duration:1e3*hy*.8;function fy(){var mr=(Date.now()-BS)/FS,Cd=MS(mr)*hy;mr<=1?(this._flyToFrame=te(fy,this),this._move(this.unproject(C.add(R.subtract(C).multiplyBy(PS(Cd)/Ie)),le),this.getScaleZoom(_e/_s(Cd),le),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),fy.call(this),this},flyToBounds:function(o,c){var m=this._getBoundsCenterZoom(o,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(o){return o=de(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var m=this.getCenter(),C=this._limitCenter(m,this._zoom,de(o));return m.equals(C)||this.panTo(C,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var m=ne(c.paddingTopLeft||c.padding||[0,0]),C=ne(c.paddingBottomRight||c.padding||[0,0]),R=this.project(this.getCenter()),$=this.project(o),le=this.getPixelBounds(),_e=G([le.min.add(m),le.max.subtract(C)]),Se=_e.getSize();if(!_e.contains($)){this._enforcingBounds=!0;var Ie=$.subtract(_e.getCenter()),We=_e.extend($).getSize().subtract(Se);R.x+=Ie.x<0?-We.x:We.x,R.y+=Ie.y<0?-We.y:We.y,this.panTo(this.unproject(R),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),C=c.divideBy(2).round(),R=m.divideBy(2).round(),$=C.subtract(R);return!$.x&&!$.y?this:(o.animate&&o.pan?this.panBy($):(o.pan&&this._rawPanBy($),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=s(this._handleGeolocationResponse,this),m=s(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,o):navigator.geolocation.getCurrentPosition(c,m,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,m=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,m=o.coords.longitude,C=new Z(c,m),R=C.toBounds(o.coords.accuracy*2),$=this._locateOptions;if($.setView){var le=this.getBoundsZoom(R);this.setView(C,$.maxZoom?Math.min(le,$.maxZoom):le)}var _e={latlng:C,bounds:R,timestamp:o.timestamp};for(var Se in o.coords)typeof o.coords[Se]=="number"&&(_e[Se]=o.coords[Se]);this.fire("locationfound",_e)}},addHandler:function(o,c){if(!c)return this;var m=this[o]=new c(this);return this._handlers.push(m),this.options[o]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Pt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var m="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),C=kt("div",m,c||this._mapPane);return o&&(this._panes[o]=C),C},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),m=this.unproject(o.getTopRight());return new ve(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,m){o=de(o),m=ne(m||[0,0]);var C=this.getZoom()||0,R=this.getMinZoom(),$=this.getMaxZoom(),le=o.getNorthWest(),_e=o.getSouthEast(),Se=this.getSize().subtract(m),Ie=G(this.project(_e,C),this.project(le,C)).getSize(),We=Xe.any3d?this.options.zoomSnap:1,st=Se.x/Ie.x,St=Se.y/Ie.y,Yr=c?Math.max(st,St):Math.min(st,St);return C=this.getScaleZoom(Yr,C),We&&(C=Math.round(C/(We/100))*(We/100),C=c?Math.ceil(C/We)*We:Math.floor(C/We)*We),Math.max(R,Math.min($,C))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ue(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var m=this._getTopLeftPoint(o,c);return new J(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(o)/m.scale(c)},getScaleZoom:function(o,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var C=m.zoom(o*m.scale(c));return isNaN(C)?1/0:C},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(se(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ne(o),c)},layerPointToLatLng:function(o){var c=ne(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(se(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(se(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(de(o))},distance:function(o,c){return this.options.crs.distance(se(o),se(c))},containerPointToLayerPoint:function(o){return ne(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ne(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(ne(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(o)))},mouseEventToContainerPoint:function(o){return ad(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=id(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ut(c,"scroll",this._onScroll,this),this._containerId=d(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xe.any3d,ft(o,"leaflet-container"+(Xe.touch?" leaflet-touch":"")+(Xe.retina?" leaflet-retina":"")+(Xe.ielt9?" leaflet-oldie":"")+(Xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=fo(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$t(this._mapPane,new ue(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ft(o.markerPane,"leaflet-zoom-hide"),ft(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,m){$t(this._mapPane,new ue(0,0));var C=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var R=this._zoom!==c;this._moveStart(R,m)._move(o,c)._moveEnd(R),this.fire("viewreset"),C&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,m,C){c===void 0&&(c=this._zoom);var R=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),C?m&&m.pinch&&this.fire("zoom",m):((R||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){$t(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[d(this._container)]=this;var c=o?it:ut;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Xe.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var m=[],C,R=c==="mouseout"||c==="mouseover",$=o.target||o.srcElement,le=!1;$;){if(C=this._targets[d($)],C&&(c==="click"||c==="preclick")&&this._draggableMoved(C)){le=!0;break}if(C&&C.listens(c,!0)&&(R&&!iu($,o)||(m.push(C),R))||$===this._container)break;$=$.parentNode}return!m.length&&!le&&!R&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var m=o.type;m==="mousedown"&&ha(c),this._fireDOMEvent(o,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,m){if(o.type==="click"){var C=i({},o);C.type="preclick",this._fireDOMEvent(C,C.type,m)}var R=this._findEventTargets(o,c);if(m){for(var $=[],le=0;le<m.length;le++)m[le].listens(c,!0)&&$.push(m[le]);R=$.concat(R)}if(R.length){c==="contextmenu"&&pr(o);var _e=R[0],Se={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Ie=_e.getLatLng&&(!_e._radius||_e._radius<=10);Se.containerPoint=Ie?this.latLngToContainerPoint(_e.getLatLng()):this.mouseEventToContainerPoint(o),Se.layerPoint=this.containerPointToLayerPoint(Se.containerPoint),Se.latlng=Ie?_e.getLatLng():this.layerPointToLatLng(Se.layerPoint)}for(le=0;le<R.length;le++)if(R[le].fire(c,Se,!0),Se.originalEvent._stopped||R[le].options.bubblingMouseEvents===!1&&E(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Zr(this._mapPane)||new ue(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var m=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var m=this.getSize()._divideBy(2);return this.project(o,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,m){var C=this._getNewPixelOrigin(m,c);return this.project(o,c)._subtract(C)},_latLngBoundsToNewLayerBounds:function(o,c,m){var C=this._getNewPixelOrigin(m,c);return G([this.project(o.getSouthWest(),c)._subtract(C),this.project(o.getNorthWest(),c)._subtract(C),this.project(o.getSouthEast(),c)._subtract(C),this.project(o.getNorthEast(),c)._subtract(C)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,m){if(!m)return o;var C=this.project(o,c),R=this.getSize().divideBy(2),$=new J(C.subtract(R),C.add(R)),le=this._getBoundsOffset($,m,c);return Math.abs(le.x)<=1&&Math.abs(le.y)<=1?o:this.unproject(C.add(le),c)},_limitOffset:function(o,c){if(!c)return o;var m=this.getPixelBounds(),C=new J(m.min.add(o),m.max.add(o));return o.add(this._getBoundsOffset(C,c))},_getBoundsOffset:function(o,c,m){var C=G(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),R=C.min.subtract(o.min),$=C.max.subtract(o.max),le=this._rebound(R.x,-$.x),_e=this._rebound(R.y,-$.y);return new ue(le,_e)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),m=this.getMaxZoom(),C=Xe.any3d?this.options.zoomSnap:1;return C&&(o=Math.round(o/C)*C),Math.max(c,Math.min(m,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var m=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var o=this._proxy=kt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var m=Jl,C=this._proxy.style[m];$i(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),C===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();$i(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var C=this.getZoomScale(c),R=this._getCenterOffset(o)._divideBy(1-1/C);return m.animate!==!0&&!this.getSize().contains(R)?!1:(te(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,m,C){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,ft(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:C}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function wo(o,c){return new Nt(o,c)}var Jr=P.extend({options:{position:"topright"},initialize:function(o){S(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),m=this.getPosition(),C=o._controlCorners[m];return ft(c,"leaflet-control"),m.indexOf("bottom")!==-1?C.insertBefore(c,C.firstChild):C.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Gi=function(o){return new Jr(o)};Nt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",m=this._controlContainer=kt("div",c+"control-container",this._container);function C(R,$){var le=c+R+" "+c+$;o[R+$]=kt("div",le,m)}C("top","left"),C("top","right"),C("bottom","left"),C("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Pt(this._controlCorners[o]);Pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ud=Jr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,m,C){return m<C?-1:C<m?1:0}},initialize:function(o,c,m){S(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var C in o)this._addLayer(o[C],C);for(C in c)this._addLayer(c[C],C,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Jr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(d(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){ft(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ft(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=kt("div",o),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),fa(c),ps(c);var C=this._section=kt("section",o+"-list");m&&(this._map.on("click",this.collapse,this),ut(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=kt("a",o+"-toggle",c);R.href="#",R.title="Layers",R.setAttribute("role","button"),ut(R,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){pr($),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=kt("div",o+"-base",C),this._separator=kt("div",o+"-separator",C),this._overlaysList=kt("div",o+"-overlays",C),c.appendChild(C)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&d(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,m){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(s(function(C,R){return this.options.sortFunction(C.layer,R.layer,C.name,R.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ua(this._baseLayersList),ua(this._overlaysList),this._layerControlInputs=[];var o,c,m,C,R=0;for(m=0;m<this._layers.length;m++)C=this._layers[m],this._addItem(C),c=c||C.overlay,o=o||!C.overlay,R+=C.overlay?0:1;return this.options.hideSingleBase&&(o=o&&R>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(d(o.target)),m=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(o,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",C=document.createElement("div");return C.innerHTML=m,C.firstChild},_addItem:function(o){var c=document.createElement("label"),m=this._map.hasLayer(o.layer),C;o.overlay?(C=document.createElement("input"),C.type="checkbox",C.className="leaflet-control-layers-selector",C.defaultChecked=m):C=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(C),C.layerId=d(o.layer),ut(C,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+o.name;var $=document.createElement("span");c.appendChild($),$.appendChild(C),$.appendChild(R);var le=o.overlay?this._overlaysList:this._baseLayersList;return le.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,m,C=[],R=[];this._handlingClick=!0;for(var $=o.length-1;$>=0;$--)c=o[$],m=this._getLayer(c.layerId).layer,c.checked?C.push(m):c.checked||R.push(m);for($=0;$<R.length;$++)this._map.hasLayer(R[$])&&this._map.removeLayer(R[$]);for($=0;$<C.length;$++)this._map.hasLayer(C[$])||this._map.addLayer(C[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,m,C=this._map.getZoom(),R=o.length-1;R>=0;R--)c=o[R],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&C<m.options.minZoom||m.options.maxZoom!==void 0&&C>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ut(o,"click",pr),this.expand();var c=this;setTimeout(function(){it(o,"click",pr),c._preventClick=!1})}}),cd=function(o,c,m){return new ud(o,c,m)},au=Jr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",m=kt("div",c+" leaflet-bar"),C=this.options;return this._zoomInButton=this._createButton(C.zoomInText,C.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(C.zoomOutText,C.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,m,C,R){var $=kt("a",m,C);return $.innerHTML=o,$.href="#",$.title=c,$.setAttribute("role","button"),$.setAttribute("aria-label",c),fa($),ut($,"click",Ci),ut($,"click",R,this),ut($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Xt(this._zoomInButton,c),Xt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ft(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ft(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nt.mergeOptions({zoomControl:!0}),Nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new au,this.addControl(this.zoomControl))});var Eo=function(o){return new au(o)},ms=Jr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",m=kt("div",c),C=this.options;return this._addScales(C,c+"-line",m),o.on(C.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),m},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,m){o.metric&&(this._mScale=kt("div",c,m)),o.imperial&&(this._iScale=kt("div",c,m))},_update:function(){var o=this._map,c=o.getSize().y/2,m=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/o)},_updateImperial:function(o){var c=o*3.2808399,m,C,R;c>5280?(m=c/5280,C=this._getRoundNum(m),this._updateScale(this._iScale,C+" mi",C/m)):(R=this._getRoundNum(c),this._updateScale(this._iScale,R+" ft",R/c))},_updateScale:function(o,c,m){o.style.width=Math.round(this.options.maxWidth*m)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),m=o/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),gs=function(o){return new ms(o)},dd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vs=Jr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Xe.inlineSvg?dd+" ":"")+"Leaflet</a>"},initialize:function(o){S(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=kt("div","leaflet-control-attribution"),fa(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),o.length&&m.push(o.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Nt.mergeOptions({attributionControl:!0}),Nt.addInitHook(function(){this.options.attributionControl&&new vs().addTo(this)});var hd=function(o){return new vs(o)};Jr.Layers=ud,Jr.Zoom=au,Jr.Scale=ms,Jr.Attribution=vs,Gi.layers=cd,Gi.zoom=Eo,Gi.scale=gs,Gi.attribution=hd;var Tn=P.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(o,c){return o.addHandler(c,this),this};var fd={Events:fe},ou=Xe.touch?"touchstart mousedown":"mousedown",ti=re.extend({options:{clickTolerance:3},initialize:function(o,c,m,C){S(this,C),this._element=o,this._dragStartTarget=c||o,this._preventOutline=m},enable:function(){this._enabled||(ut(this._dragStartTarget,ou,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ti._dragging===this&&this.finishDrag(!0),it(this._dragStartTarget,ou,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Yl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ti._dragging===this&&this.finishDrag();return}if(!(ti._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ti._dragging=this,this._preventOutline&&ha(this._element),ds(),go(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,m=hs(this._element);this._startPoint=new ue(c.clientX,c.clientY),this._startPos=Zr(this._element),this._parentScale=xo(m);var C=o.type==="mousedown";ut(document,C?"mousemove":"touchmove",this._onMove,this),ut(document,C?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,m=new ue(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,pr(o),this._moved||(this.fire("dragstart"),this._moved=!0,ft(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ft(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),$t(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),it(document,"mousemove touchmove",this._onMove,this),it(document,"mouseup touchend touchcancel",this._onUp,this),eu(),vo();var c=this._moved&&this._moving;this._moving=!1,ti._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function su(o,c,m){var C,R=[1,4,2,8],$,le,_e,Se,Ie,We,st,St;for($=0,We=o.length;$<We;$++)o[$]._code=be(o[$],c);for(_e=0;_e<4;_e++){for(st=R[_e],C=[],$=0,We=o.length,le=We-1;$<We;le=$++)Se=o[$],Ie=o[le],Se._code&st?Ie._code&st||(St=me(Ie,Se,st,c,m),St._code=be(St,c),C.push(St)):(Ie._code&st&&(St=me(Ie,Se,st,c,m),St._code=be(St,c),C.push(St)),C.push(Se));o=C}return o}function lu(o,c){var m,C,R,$,le,_e,Se,Ie,We;if(!o||o.length===0)throw new Error("latlngs not passed");De(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var st=se([0,0]),St=de(o),Yr=St.getNorthWest().distanceTo(St.getSouthWest())*St.getNorthEast().distanceTo(St.getNorthWest());Yr<1700&&(st=uu(o));var Tr=o.length,qn=[];for(m=0;m<Tr;m++){var un=se(o[m]);qn.push(c.project(se([un.lat-st.lat,un.lng-st.lng])))}for(_e=Se=Ie=0,m=0,C=Tr-1;m<Tr;C=m++)R=qn[m],$=qn[C],le=R.y*$.x-$.y*R.x,Se+=(R.x+$.x)*le,Ie+=(R.y+$.y)*le,_e+=le*3;_e===0?We=qn[0]:We=[Se/_e,Ie/_e];var _s=c.unproject(ne(We));return se([_s.lat+st.lat,_s.lng+st.lng])}function uu(o){for(var c=0,m=0,C=0,R=0;R<o.length;R++){var $=se(o[R]);c+=$.lat,m+=$.lng,C++}return se([c/C,m/C])}var g={__proto__:null,clipPolygon:su,polygonCenter:lu,centroid:uu};function U(o,c){if(!c||!o.length)return o.slice();var m=c*c;return o=ke(o,m),o=ee(o,m),o}function x(o,c,m){return Math.sqrt(Ge(o,c,m,!0))}function Q(o,c,m){return Ge(o,c,m)}function ee(o,c){var m=o.length,C=typeof Uint8Array<"u"?Uint8Array:Array,R=new C(m);R[0]=R[m-1]=1,oe(o,R,c,0,m-1);var $,le=[];for($=0;$<m;$++)R[$]&&le.push(o[$]);return le}function oe(o,c,m,C,R){var $=0,le,_e,Se;for(_e=C+1;_e<=R-1;_e++)Se=Ge(o[_e],o[C],o[R],!0),Se>$&&(le=_e,$=Se);$>m&&(c[le]=1,oe(o,c,m,C,le),oe(o,c,m,le,R))}function ke(o,c){for(var m=[o[0]],C=1,R=0,$=o.length;C<$;C++)Et(o[C],o[R])>c&&(m.push(o[C]),R=C);return R<$-1&&m.push(o[$-1]),m}var pe;function Fe(o,c,m,C,R){var $=C?pe:be(o,m),le=be(c,m),_e,Se,Ie;for(pe=le;;){if(!($|le))return[o,c];if($&le)return!1;_e=$||le,Se=me(o,c,_e,m,R),Ie=be(Se,m),_e===$?(o=Se,$=Ie):(c=Se,le=Ie)}}function me(o,c,m,C,R){var $=c.x-o.x,le=c.y-o.y,_e=C.min,Se=C.max,Ie,We;return m&8?(Ie=o.x+$*(Se.y-o.y)/le,We=Se.y):m&4?(Ie=o.x+$*(_e.y-o.y)/le,We=_e.y):m&2?(Ie=Se.x,We=o.y+le*(Se.x-o.x)/$):m&1&&(Ie=_e.x,We=o.y+le*(_e.x-o.x)/$),new ue(Ie,We,R)}function be(o,c){var m=0;return o.x<c.min.x?m|=1:o.x>c.max.x&&(m|=2),o.y<c.min.y?m|=4:o.y>c.max.y&&(m|=8),m}function Et(o,c){var m=c.x-o.x,C=c.y-o.y;return m*m+C*C}function Ge(o,c,m,C){var R=c.x,$=c.y,le=m.x-R,_e=m.y-$,Se=le*le+_e*_e,Ie;return Se>0&&(Ie=((o.x-R)*le+(o.y-$)*_e)/Se,Ie>1?(R=m.x,$=m.y):Ie>0&&(R+=le*Ie,$+=_e*Ie)),le=o.x-R,_e=o.y-$,C?le*le+_e*_e:new ue(R,$)}function De(o){return!w(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function $e(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),De(o)}function gt(o,c){var m,C,R,$,le,_e,Se,Ie;if(!o||o.length===0)throw new Error("latlngs not passed");De(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var We=se([0,0]),st=de(o),St=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());St<1700&&(We=uu(o));var Yr=o.length,Tr=[];for(m=0;m<Yr;m++){var qn=se(o[m]);Tr.push(c.project(se([qn.lat-We.lat,qn.lng-We.lng])))}for(m=0,C=0;m<Yr-1;m++)C+=Tr[m].distanceTo(Tr[m+1])/2;if(C===0)Ie=Tr[0];else for(m=0,$=0;m<Yr-1;m++)if(le=Tr[m],_e=Tr[m+1],R=le.distanceTo(_e),$+=R,$>C){Se=($-C)/R,Ie=[_e.x-Se*(_e.x-le.x),_e.y-Se*(_e.y-le.y)];break}var un=c.unproject(ne(Ie));return se([un.lat+We.lat,un.lng+We.lng])}var dt={__proto__:null,simplify:U,pointToSegmentDistance:x,closestPointOnSegment:Q,clipSegment:Fe,_getEdgeIntersection:me,_getBitCode:be,_sqClosestPointOnSegment:Ge,isFlat:De,_flat:$e,polylineCenter:gt},bt={project:function(o){return new ue(o.lng,o.lat)},unproject:function(o){return new Z(o.y,o.x)},bounds:new J([-180,-90],[180,90])},qe={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,m=this.R,C=o.lat*c,R=this.R_MINOR/m,$=Math.sqrt(1-R*R),le=$*Math.sin(C),_e=Math.tan(Math.PI/4-C/2)/Math.pow((1-le)/(1+le),$/2);return C=-m*Math.log(Math.max(_e,1e-10)),new ue(o.lng*c*m,C)},unproject:function(o){for(var c=180/Math.PI,m=this.R,C=this.R_MINOR/m,R=Math.sqrt(1-C*C),$=Math.exp(-o.y/m),le=Math.PI/2-2*Math.atan($),_e=0,Se=.1,Ie;_e<15&&Math.abs(Se)>1e-7;_e++)Ie=R*Math.sin(le),Ie=Math.pow((1-Ie)/(1+Ie),R/2),Se=Math.PI/2-2*Math.atan($*Ie)-le,le+=Se;return new Z(le*c,o.x*c/m)}},ze={__proto__:null,LonLat:bt,Mercator:qe,SphericalMercator:Y},tt=i({},I,{code:"EPSG:3395",projection:qe,transformation:function(){var o=.5/(Math.PI*qe.R);return Le(o,.5,-o,.5)}()}),It=i({},I,{code:"EPSG:4326",projection:bt,transformation:Le(1/180,1,-1/180,.5)}),Je=i({},F,{projection:bt,transformation:Le(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var m=c.lng-o.lng,C=c.lat-o.lat;return Math.sqrt(m*m+C*C)},infinite:!0});F.Earth=I,F.EPSG3395=tt,F.EPSG3857=Me,F.EPSG900913=j,F.EPSG4326=It,F.Simple=Je;var ht=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[d(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[d(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Nt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=d(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=d(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return d(o)in this._layers},eachLayer:function(o,c){for(var m in this._layers)o.call(c,this._layers[m]);return this},_addLayers:function(o){o=o?w(o)?o:[o]:[];for(var c=0,m=o.length;c<m;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[d(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=d(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,m=this._getZoomSpan();for(var C in this._zoomBoundLayers){var R=this._zoomBoundLayers[C].options;o=R.minZoom===void 0?o:Math.min(o,R.minZoom),c=R.maxZoom===void 0?c:Math.max(c,R.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yt=ht.extend({initialize:function(o,c){S(this,c),this._layers={};var m,C;if(o)for(m=0,C=o.length;m<C;m++)this.addLayer(o[m])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),m,C;for(m in this._layers)C=this._layers[m],C[o]&&C[o].apply(C,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var m in this._layers)o.call(c,this._layers[m]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return d(o)}}),ot=function(o,c){return new yt(o,c)},rt=yt.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),yt.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),yt.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ve;for(var c in this._layers){var m=this._layers[c];o.extend(m.getBounds?m.getBounds():m.getLatLng())}return o}}),Lt=function(o,c){return new rt(o,c)},ln=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){S(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var m=this._getIconUrl(o);if(!m){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var C=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(C,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),C},_setIconStyles:function(o,c){var m=this.options,C=m[c+"Size"];typeof C=="number"&&(C=[C,C]);var R=ne(C),$=ne(c==="shadow"&&m.shadowAnchor||m.iconAnchor||R&&R.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(m.className||""),$&&(o.style.marginLeft=-$.x+"px",o.style.marginTop=-$.y+"px"),R&&(o.style.width=R.x+"px",o.style.height=R.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return Xe.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Si(o){return new ln(o)}var Ai=ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Ai.imagePath!="string"&&(Ai.imagePath=this._detectIconPath()),(this.options.imagePath||Ai.imagePath)+ln.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(m,C,R){var $=C.exec(m);return $&&$[R]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=kt("div","leaflet-default-icon-path",document.body),c=fo(o,"background-image")||fo(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Co=Tn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ti(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ft(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,m=c._map,C=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,$=Zr(c._icon),le=m.getPixelBounds(),_e=m.getPixelOrigin(),Se=G(le.min._subtract(_e).add(R),le.max._subtract(_e).subtract(R));if(!Se.contains($)){var Ie=ne((Math.max(Se.max.x,$.x)-Se.max.x)/(le.max.x-Se.max.x)-(Math.min(Se.min.x,$.x)-Se.min.x)/(le.min.x-Se.min.x),(Math.max(Se.max.y,$.y)-Se.max.y)/(le.max.y-Se.max.y)-(Math.min(Se.min.y,$.y)-Se.min.y)/(le.min.y-Se.min.y)).multiplyBy(C);m.panBy(Ie,{animate:!1}),this._draggable._newPos._add(Ie),this._draggable._startPos._add(Ie),$t(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=te(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,m=c._shadow,C=Zr(c._icon),R=c._map.layerPointToLatLng(C);m&&$t(m,C),c._latlng=R,o.latlng=R,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),pd=ht.extend({options:{icon:new Ai,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){S(this,c),this._latlng=se(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=se(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=o.icon.createIcon(this._icon),C=!1;m!==this._icon&&(this._icon&&this._removeIcon(),C=!0,o.title&&(m.title=o.title),m.tagName==="IMG"&&(m.alt=o.alt||"")),ft(m,c),o.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(m,"focus",this._panOnFocus,this);var R=o.icon.createShadow(this._shadow),$=!1;R!==this._shadow&&(this._removeShadow(),$=!0),R&&(ft(R,c),R.alt=""),this._shadow=R,o.opacity<1&&this._updateOpacity(),C&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&$&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(this._icon,"focus",this._panOnFocus,this),Pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&$t(this._icon,o),this._shadow&&$t(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(ft(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Co)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Co(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&an(this._icon,o),this._shadow&&an(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,m=c.iconSize?ne(c.iconSize):ne(0,0),C=c.iconAnchor?ne(c.iconAnchor):ne(0,0);o.panInside(this._latlng,{paddingTopLeft:C,paddingBottomRight:m.subtract(C)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yS(o,c){return new pd(o,c)}var pa=ht.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return S(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),md=pa.extend({options:{fill:!0,radius:10},initialize:function(o,c){S(this,c),this._latlng=se(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=se(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return pa.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,m=this._clickTolerance(),C=[o+m,c+m];this._pxBounds=new J(this._point.subtract(C),this._point.add(C))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xS(o,c){return new md(o,c)}var tp=md.extend({initialize:function(o,c,m){if(typeof c=="number"&&(c=i({},m,{radius:c})),S(this,c),this._latlng=se(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:pa.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,m=this._map,C=m.options.crs;if(C.distance===I.distance){var R=Math.PI/180,$=this._mRadius/I.R/R,le=m.project([c+$,o]),_e=m.project([c-$,o]),Se=le.add(_e).divideBy(2),Ie=m.unproject(Se).lat,We=Math.acos((Math.cos($*R)-Math.sin(c*R)*Math.sin(Ie*R))/(Math.cos(c*R)*Math.cos(Ie*R)))/R;(isNaN(We)||We===0)&&(We=$/Math.cos(Math.PI/180*c)),this._point=Se.subtract(m.getPixelOrigin()),this._radius=isNaN(We)?0:Se.x-m.project([Ie,o-We]).x,this._radiusY=Se.y-le.y}else{var st=C.unproject(C.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(st).x}this._updateBounds()}});function bS(o,c,m){return new tp(o,c,m)}var Hi=pa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){S(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,m=null,C=Ge,R,$,le=0,_e=this._parts.length;le<_e;le++)for(var Se=this._parts[le],Ie=1,We=Se.length;Ie<We;Ie++){R=Se[Ie-1],$=Se[Ie];var st=C(o,R,$,!0);st<c&&(c=st,m=C(o,R,$))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=se(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ve,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return De(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],m=De(o),C=0,R=o.length;C<R;C++)m?(c[C]=se(o[C]),this._bounds.extend(c[C])):c[C]=this._convertLatLngs(o[C]);return c},_project:function(){var o=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new ue(o,o);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,m){var C=o[0]instanceof Z,R=o.length,$,le;if(C){for(le=[],$=0;$<R;$++)le[$]=this._map.latLngToLayerPoint(o[$]),m.extend(le[$]);c.push(le)}else for($=0;$<R;$++)this._projectLatlngs(o[$],c,m)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,C,R,$,le,_e,Se;for(m=0,R=0,$=this._rings.length;m<$;m++)for(Se=this._rings[m],C=0,le=Se.length;C<le-1;C++)_e=Fe(Se[C],Se[C+1],o,C,!0),_e&&(c[R]=c[R]||[],c[R].push(_e[0]),(_e[1]!==Se[C+1]||C===le-2)&&(c[R].push(_e[1]),R++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,m=0,C=o.length;m<C;m++)o[m]=U(o[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var m,C,R,$,le,_e,Se=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(m=0,$=this._parts.length;m<$;m++)for(_e=this._parts[m],C=0,le=_e.length,R=le-1;C<le;R=C++)if(!(!c&&C===0)&&x(o,_e[R],_e[C])<=Se)return!0;return!1}});function _S(o,c){return new Hi(o,c)}Hi._flat=$e;var ys=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Hi.prototype._convertLatLngs.call(this,o),m=c.length;return m>=2&&c[0]instanceof Z&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(o){Hi.prototype._setLatLngs.call(this,o),De(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return De(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,m=new ue(c,c);if(o=new J(o.min.subtract(m),o.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var C=0,R=this._rings.length,$;C<R;C++)$=su(this._rings[C],o,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,m,C,R,$,le,_e,Se,Ie;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for($=0,Se=this._parts.length;$<Se;$++)for(m=this._parts[$],le=0,Ie=m.length,_e=Ie-1;le<Ie;_e=le++)C=m[le],R=m[_e],C.y>o.y!=R.y>o.y&&o.x<(R.x-C.x)*(o.y-C.y)/(R.y-C.y)+C.x&&(c=!c);return c||Hi.prototype._containsPoint.call(this,o,!0)}});function wS(o,c){return new ys(o,c)}var Wi=rt.extend({initialize:function(o,c){S(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=w(o)?o:o.features,m,C,R;if(c){for(m=0,C=c.length;m<C;m++)R=c[m],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var $=this.options;if($.filter&&!$.filter(o))return this;var le=gd(o,$);return le?(le.feature=xd(o),le.defaultOptions=le.options,this.resetStyle(le),$.onEachFeature&&$.onEachFeature(o,le),this.addLayer(le)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function gd(o,c){var m=o.type==="Feature"?o.geometry:o,C=m?m.coordinates:null,R=[],$=c&&c.pointToLayer,le=c&&c.coordsToLatLng||rp,_e,Se,Ie,We;if(!C&&!m)return null;switch(m.type){case"Point":return _e=le(C),Z0($,o,_e,c);case"MultiPoint":for(Ie=0,We=C.length;Ie<We;Ie++)_e=le(C[Ie]),R.push(Z0($,o,_e,c));return new rt(R);case"LineString":case"MultiLineString":return Se=vd(C,m.type==="LineString"?0:1,le),new Hi(Se,c);case"Polygon":case"MultiPolygon":return Se=vd(C,m.type==="Polygon"?1:2,le),new ys(Se,c);case"GeometryCollection":for(Ie=0,We=m.geometries.length;Ie<We;Ie++){var st=gd({geometry:m.geometries[Ie],type:"Feature",properties:o.properties},c);st&&R.push(st)}return new rt(R);case"FeatureCollection":for(Ie=0,We=m.features.length;Ie<We;Ie++){var St=gd(m.features[Ie],c);St&&R.push(St)}return new rt(R);default:throw new Error("Invalid GeoJSON object.")}}function Z0(o,c,m,C){return o?o(c,m):new pd(m,C&&C.markersInheritOptions&&C)}function rp(o){return new Z(o[1],o[0],o[2])}function vd(o,c,m){for(var C=[],R=0,$=o.length,le;R<$;R++)le=c?vd(o[R],c-1,m):(m||rp)(o[R]),C.push(le);return C}function np(o,c){return o=se(o),o.alt!==void 0?[v(o.lng,c),v(o.lat,c),v(o.alt,c)]:[v(o.lng,c),v(o.lat,c)]}function yd(o,c,m,C){for(var R=[],$=0,le=o.length;$<le;$++)R.push(c?yd(o[$],De(o[$])?0:c-1,m,C):np(o[$],C));return!c&&m&&R.length>0&&R.push(R[0].slice()),R}function xs(o,c){return o.feature?i({},o.feature,{geometry:c}):xd(c)}function xd(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var ip={toGeoJSON:function(o){return xs(this,{type:"Point",coordinates:np(this.getLatLng(),o)})}};pd.include(ip),tp.include(ip),md.include(ip),Hi.include({toGeoJSON:function(o){var c=!De(this._latlngs),m=yd(this._latlngs,c?1:0,!1,o);return xs(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),ys.include({toGeoJSON:function(o){var c=!De(this._latlngs),m=c&&!De(this._latlngs[0]),C=yd(this._latlngs,m?2:c?1:0,!0,o);return c||(C=[C]),xs(this,{type:(m?"Multi":"")+"Polygon",coordinates:C})}}),yt.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(o).geometry.coordinates)}),xs(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var m=c==="GeometryCollection",C=[];return this.eachLayer(function(R){if(R.toGeoJSON){var $=R.toGeoJSON(o);if(m)C.push($.geometry);else{var le=xd($);le.type==="FeatureCollection"?C.push.apply(C,le.features):C.push(le)}}}),m?xs(this,{geometries:C,type:"GeometryCollection"}):{type:"FeatureCollection",features:C}}});function K0(o,c){return new Wi(o,c)}var ES=K0,bd=ht.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,m){this._url=o,this._bounds=de(c),S(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ft(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Qn(this._image),this},bringToBack:function(){return this._map&&ei(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=de(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:kt("img");if(ft(c,"leaflet-image-layer"),this._zoomAnimated&&ft(c,"leaflet-zoom-animated"),this.options.className&&ft(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onload=s(this.fire,this,"load"),c.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;$i(this._image,m,c)},_reset:function(){var o=this._image,c=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();$t(o,c.min),o.style.width=m.x+"px",o.style.height=m.y+"px"},_updateOpacity:function(){an(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),CS=function(o,c,m){return new bd(o,c,m)},X0=bd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:kt("video");if(ft(c,"leaflet-image-layer"),this._zoomAnimated&&ft(c,"leaflet-zoom-animated"),this.options.className&&ft(c,this.options.className),c.onselectstart=p,c.onmousemove=p,c.onloadeddata=s(this.fire,this,"load"),o){for(var m=c.getElementsByTagName("source"),C=[],R=0;R<m.length;R++)C.push(m[R].src);this._url=m.length>0?C:[c.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var le=kt("source");le.src=this._url[$],c.appendChild(le)}}});function SS(o,c,m){return new X0(o,c,m)}var J0=bd.extend({_initImage:function(){var o=this._image=this._url;ft(o,"leaflet-image-layer"),this._zoomAnimated&&ft(o,"leaflet-zoom-animated"),this.options.className&&ft(o,this.options.className),o.onselectstart=p,o.onmousemove=p}});function AS(o,c,m){return new J0(o,c,m)}var Ti=ht.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof Z||w(o))?(this._latlng=se(o),S(this,c)):(S(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&an(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&an(this._container,1),this.bringToFront(),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(an(this._container,0),this._removeTimeout=setTimeout(s(Pt,void 0,this._container),200)):Pt(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=se(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qn(this._container),this},bringToBack:function(){return this._map&&ei(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof rt){c=null;var m=this._source._layers;for(var C in m)if(m[C]._map){c=m[C];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=ne(this.options.offset),m=this._getAnchor();this._zoomAnimated?$t(this._container,o.add(m)):c=c.add(o).add(m);var C=this._containerBottom=-c.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=C+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});Nt.include({_initOverlay:function(o,c,m,C){var R=c;return R instanceof o||(R=new o(C).setContent(c)),m&&R.setLatLng(m),R}}),ht.include({_initOverlay:function(o,c,m,C){var R=m;return R instanceof o?(S(R,C),R._source=this):(R=c&&!C?c:new o(C,this),R.setContent(m)),R}});var _d=Ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Ti.prototype.openOn.call(this,o)},onAdd:function(o){Ti.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pa||this._source.on("preclick",Xr))},onRemove:function(o){Ti.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pa||this._source.off("preclick",Xr))},getEvents:function(){var o=Ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=kt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=kt("div",o+"-content-wrapper",c);if(this._contentNode=kt("div",o+"-content",m),fa(c),ps(this._contentNode),ut(c,"contextmenu",Xr),this._tipContainer=kt("div",o+"-tip-container",c),this._tip=kt("div",o+"-tip",this._tipContainer),this.options.closeButton){var C=this._closeButton=kt("a",o+"-close-button",c);C.setAttribute("role","button"),C.setAttribute("aria-label","Close popup"),C.href="#close",C.innerHTML='<span aria-hidden="true">&#215;</span>',ut(C,"click",function(R){pr(R),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var m=o.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var C=o.offsetHeight,R=this.options.maxHeight,$="leaflet-popup-scrolled";R&&C>R?(c.height=R+"px",ft(o,$)):Xt(o,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),m=this._getAnchor();$t(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(fo(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,C=this._containerWidth,R=new ue(this._containerLeft,-m-this._containerBottom);R._add(Zr(this._container));var $=o.layerPointToContainerPoint(R),le=ne(this.options.autoPanPadding),_e=ne(this.options.autoPanPaddingTopLeft||le),Se=ne(this.options.autoPanPaddingBottomRight||le),Ie=o.getSize(),We=0,st=0;$.x+C+Se.x>Ie.x&&(We=$.x+C-Ie.x+Se.x),$.x-We-_e.x<0&&(We=$.x-_e.x),$.y+m+Se.y>Ie.y&&(st=$.y+m-Ie.y+Se.y),$.y-st-_e.y<0&&(st=$.y-_e.y),(We||st)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([We,st]))}},_getAnchor:function(){return ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),TS=function(o,c){return new _d(o,c)};Nt.mergeOptions({closePopupOnClick:!0}),Nt.include({openPopup:function(o,c,m){return this._initOverlay(_d,o,c,m).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ht.include({bindPopup:function(o,c){return this._popup=this._initOverlay(_d,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof rt||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Ci(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof pa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var wd=Ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Ti.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Ti.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Ti.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=kt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,m,C=this._map,R=this._container,$=C.latLngToContainerPoint(C.getCenter()),le=C.layerPointToContainerPoint(o),_e=this.options.direction,Se=R.offsetWidth,Ie=R.offsetHeight,We=ne(this.options.offset),st=this._getAnchor();_e==="top"?(c=Se/2,m=Ie):_e==="bottom"?(c=Se/2,m=0):_e==="center"?(c=Se/2,m=Ie/2):_e==="right"?(c=0,m=Ie/2):_e==="left"?(c=Se,m=Ie/2):le.x<$.x?(_e="right",c=0,m=Ie/2):(_e="left",c=Se+(We.x+st.x)*2,m=Ie/2),o=o.subtract(ne(c,m,!0)).add(We).add(st),Xt(R,"leaflet-tooltip-right"),Xt(R,"leaflet-tooltip-left"),Xt(R,"leaflet-tooltip-top"),Xt(R,"leaflet-tooltip-bottom"),ft(R,"leaflet-tooltip-"+_e),$t(R,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&an(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),NS=function(o,c){return new wd(o,c)};Nt.include({openTooltip:function(o,c,m){return this._initOverlay(wd,o,c,m).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ht.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wd,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof rt||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ut(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ut(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,m,C;this._tooltip.options.sticky&&o.originalEvent&&(m=this._map.mouseEventToContainerPoint(o.originalEvent),C=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(C)),this._tooltip.setLatLng(c)}});var Y0=ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ua(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var C=ne(m.bgPos);c.style.backgroundPosition=-C.x+"px "+-C.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function kS(o){return new Y0(o)}ln.Default=Ai;var cu=ht.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){S(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Pt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ei(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ue?o:new ue(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,m=-o(-1/0,1/0),C=0,R=c.length,$;C<R;C++)$=c[C].style.zIndex,c[C]!==this._container&&$&&(m=o(m,+$));isFinite(m)&&(this.options.zIndex=m+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Xe.ielt9){an(this._container,this.options.opacity);var o=+new Date,c=!1,m=!1;for(var C in this._tiles){var R=this._tiles[C];if(!(!R.current||!R.loaded)){var $=Math.min(1,(o-R.loaded)/200);an(R.el,$),$<1?c=!0:(R.active?m=!0:this._onOpaqueTile(R),R.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(z(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=kt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===o?(this._levels[m].el.style.zIndex=c-Math.abs(o-m),this._onUpdateLevel(m)):(Pt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var C=this._levels[o],R=this._map;return C||(C=this._levels[o]={},C.el=kt("div","leaflet-tile-container leaflet-zoom-animated",this._container),C.el.style.zIndex=c,C.origin=R.project(R.unproject(R.getPixelOrigin()),o).round(),C.zoom=o,this._setZoomTransform(C,R.getCenter(),R.getZoom()),p(C.el.offsetWidth),this._onCreateLevel(C)),this._level=C,C}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var o,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var C=c.coords;this._retainParent(C.x,C.y,C.z,C.z-5)||this._retainChildren(C.x,C.y,C.z,C.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Pt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,m,C){var R=Math.floor(o/2),$=Math.floor(c/2),le=m-1,_e=new ue(+R,+$);_e.z=+le;var Se=this._tileCoordsToKey(_e),Ie=this._tiles[Se];return Ie&&Ie.active?(Ie.retain=!0,!0):(Ie&&Ie.loaded&&(Ie.retain=!0),le>C?this._retainParent(R,$,le,C):!1)},_retainChildren:function(o,c,m,C){for(var R=2*o;R<2*o+2;R++)for(var $=2*c;$<2*c+2;$++){var le=new ue(R,$);le.z=m+1;var _e=this._tileCoordsToKey(le),Se=this._tiles[_e];if(Se&&Se.active){Se.retain=!0;continue}else Se&&Se.loaded&&(Se.retain=!0);m+1<C&&this._retainChildren(R,$,m+1,C)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,m,C){var R=Math.round(c);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var $=this.options.updateWhenZooming&&R!==this._tileZoom;(!C||$)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(o),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],o,c)},_setZoomTransform:function(o,c,m){var C=this._map.getZoomScale(m,o.zoom),R=o.origin.multiplyBy(C).subtract(this._map._getNewPixelOrigin(c,m)).round();Xe.any3d?$i(o.el,R,C):$t(o.el,R)},_resetGrid:function(){var o=this._map,c=o.options.crs,m=this._tileSize=this.getTileSize(),C=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],C).x/m.x),Math.ceil(o.project([0,c.wrapLng[1]],C).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],C).y/m.x),Math.ceil(o.project([c.wrapLat[1],0],C).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),C=c.getZoomScale(m,this._tileZoom),R=c.project(o,this._tileZoom).floor(),$=c.getSize().divideBy(C*2);return new J(R.subtract($),R.add($))},_update:function(o){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var C=this._getTiledPixelBounds(o),R=this._pxBoundsToTileRange(C),$=R.getCenter(),le=[],_e=this.options.keepBuffer,Se=new J(R.getBottomLeft().subtract([_e,-_e]),R.getTopRight().add([_e,-_e]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ie in this._tiles){var We=this._tiles[Ie].coords;(We.z!==this._tileZoom||!Se.contains(new ue(We.x,We.y)))&&(this._tiles[Ie].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(o,m);return}for(var st=R.min.y;st<=R.max.y;st++)for(var St=R.min.x;St<=R.max.x;St++){var Yr=new ue(St,st);if(Yr.z=this._tileZoom,!!this._isValidTile(Yr)){var Tr=this._tiles[this._tileCoordsToKey(Yr)];Tr?Tr.current=!0:le.push(Yr)}}if(le.sort(function(un,_s){return un.distanceTo($)-_s.distanceTo($)}),le.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var qn=document.createDocumentFragment();for(St=0;St<le.length;St++)this._addTile(le[St],qn);this._level.el.appendChild(qn)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(o.x<m.min.x||o.x>m.max.x)||!c.wrapLat&&(o.y<m.min.y||o.y>m.max.y))return!1}if(!this.options.bounds)return!0;var C=this._tileCoordsToBounds(o);return de(this.options.bounds).overlaps(C)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,m=this.getTileSize(),C=o.scaleBy(m),R=C.add(m),$=c.unproject(C,o.z),le=c.unproject(R,o.z);return[$,le]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),m=new ve(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),m=new ue(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(o){var c=this._tiles[o];c&&(Pt(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ft(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=p,o.onmousemove=p,Xe.ielt9&&this.options.opacity<1&&an(o,this.options.opacity)},_addTile:function(o,c){var m=this._getTilePos(o),C=this._tileCoordsToKey(o),R=this.createTile(this._wrapCoords(o),s(this._tileReady,this,o));this._initTile(R),this.createTile.length<2&&te(s(this._tileReady,this,o,null,R)),$t(R,m),this._tiles[C]={el:R,coords:o,current:!0},c.appendChild(R),this.fire("tileloadstart",{tile:R,coords:o})},_tileReady:function(o,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:o});var C=this._tileCoordsToKey(o);m=this._tiles[C],m&&(m.loaded=+new Date,this._map._fadeAnimated?(an(m.el,0),z(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(ft(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Xe.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new ue(this._wrapX?f(o.x,this._wrapX):o.x,this._wrapY?f(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new J(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function jS(o){return new cu(o)}var bs=cu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=S(this,c),c.detectRetina&&Xe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var m=document.createElement("img");return ut(m,"load",s(this._tileOnLoad,this,c,m)),ut(m,"error",s(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(o),m},getTileUrl:function(o){var c={r:Xe.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=m),c["-y"]=m}return _(this._url,i(c,this.options))},_tileOnLoad:function(o,c){Xe.ielt9?setTimeout(s(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,m){var C=this.options.errorTileUrl;C&&c.getAttribute("src")!==C&&(c.src=C),o(m,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,C=this.options.zoomOffset;return m&&(o=c-o),o+C},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=p,c.onerror=p,!c.complete)){c.src=N;var m=this._tiles[o].coords;Pt(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",N),cu.prototype._removeTile.call(this,o)},_tileReady:function(o,c,m){if(!(!this._map||m&&m.getAttribute("src")===N))return cu.prototype._tileReady.call(this,o,c,m)}});function Q0(o,c){return new bs(o,c)}var ey=bs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var m=i({},this.defaultWmsParams);for(var C in c)C in this.options||(m[C]=c[C]);c=S(this,c);var R=c.detectRetina&&Xe.retina?2:1,$=this.getTileSize();m.width=$.x*R,m.height=$.y*R,this.wmsParams=m},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,bs.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),m=this._crs,C=G(m.project(c[0]),m.project(c[1])),R=C.min,$=C.max,le=(this._wmsVersion>=1.3&&this._crs===It?[R.y,R.x,$.y,$.x]:[R.x,R.y,$.x,$.y]).join(","),_e=bs.prototype.getTileUrl.call(this,o);return _e+T(this.wmsParams,_e,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+le},setParams:function(o,c){return i(this.wmsParams,o),c||this.redraw(),this}});function DS(o,c){return new ey(o,c)}bs.WMS=ey,Q0.wms=DS;var Zi=ht.extend({options:{padding:.1},initialize:function(o){S(this,o),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ft(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var m=this._map.getZoomScale(c,this._zoom),C=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,c),$=C.multiplyBy(-m).add(R).subtract(this._map._getNewPixelOrigin(o,c));Xe.any3d?$i(this._container,$,m):$t(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new J(m,m.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ty=Zi.extend({options:{tolerance:0},getEvents:function(){var o=Zi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ut(o,"mousemove",this._onMouseMove,this),ut(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ut(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Pt(this._container),it(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zi.prototype._update.call(this);var o=this._bounds,c=this._container,m=o.getSize(),C=Xe.retina?2:1;$t(c,o.min),c.width=C*m.x,c.height=C*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",Xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[d(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,m=c.next,C=c.prev;m?m.prev=C:this._drawLast=C,C?C.next=m:this._drawFirst=m,delete o._order,delete this._layers[d(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),m=[],C,R;for(R=0;R<c.length;R++){if(C=Number(c[R]),isNaN(C))return;m.push(C)}o.options._dashArray=m}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var C=this._drawFirst;C;C=C.next)o=C.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var m,C,R,$,le=o._parts,_e=le.length,Se=this._ctx;if(_e){for(Se.beginPath(),m=0;m<_e;m++){for(C=0,R=le[m].length;C<R;C++)$=le[m][C],Se[C?"lineTo":"moveTo"]($.x,$.y);c&&Se.closePath()}this._fillStroke(Se,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,m=this._ctx,C=Math.max(Math.round(o._radius),1),R=(Math.max(Math.round(o._radiusY),1)||C)/C;R!==1&&(m.save(),m.scale(1,R)),m.beginPath(),m.arc(c.x,c.y/R,C,0,Math.PI*2,!1),R!==1&&m.restore(),this._fillStroke(m,o)}},_fillStroke:function(o,c){var m=c.options;m.fill&&(o.globalAlpha=m.fillOpacity,o.fillStyle=m.fillColor||m.color,o.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=m.opacity,o.lineWidth=m.weight,o.strokeStyle=m.color,o.lineCap=m.lineCap,o.lineJoin=m.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),m,C,R=this._drawFirst;R;R=R.next)m=R.layer,m.options.interactive&&m._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(m))&&(C=m);this._fireEvent(C?[C]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var m,C,R=this._drawFirst;R;R=R.next)m=R.layer,m.options.interactive&&m._containsPoint(c)&&(C=m);C!==this._hoveredLayer&&(this._handleMouseOut(o),C&&(ft(this._container,"leaflet-interactive"),this._fireEvent([C],o,"mouseover"),this._hoveredLayer=C)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,m){this._map._fireDOMEvent(c,m||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var m=c.next,C=c.prev;if(m)m.prev=C;else return;C?C.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var m=c.next,C=c.prev;if(C)C.next=m;else return;m?m.prev=C:C&&(this._drawLast=C),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function ry(o){return Xe.canvas?new ty(o):null}var du=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),OS={_initContainer:function(){this._container=kt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=du("shape");ft(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=du("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;Pt(c),o.removeInteractiveTarget(c),delete this._layers[d(o)]},_updateStyle:function(o){var c=o._stroke,m=o._fill,C=o.options,R=o._container;R.stroked=!!C.stroke,R.filled=!!C.fill,C.stroke?(c||(c=o._stroke=du("stroke")),R.appendChild(c),c.weight=C.weight+"px",c.color=C.color,c.opacity=C.opacity,C.dashArray?c.dashStyle=w(C.dashArray)?C.dashArray.join(" "):C.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=C.lineCap.replace("butt","flat"),c.joinstyle=C.lineJoin):c&&(R.removeChild(c),o._stroke=null),C.fill?(m||(m=o._fill=du("fill")),R.appendChild(m),m.color=C.fillColor||C.color,m.opacity=C.fillOpacity):m&&(R.removeChild(m),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),m=Math.round(o._radius),C=Math.round(o._radiusY||m);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+C+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){Qn(o._container)},_bringToBack:function(o){ei(o._container)}},Ed=Xe.vml?du:K,hu=Zi.extend({_initContainer:function(){this._container=Ed("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ed("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pt(this._container),it(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zi.prototype._update.call(this);var o=this._bounds,c=o.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),$t(m,o.min),m.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=Ed("path");o.options.className&&ft(c,o.options.className),o.options.interactive&&ft(c,"leaflet-interactive"),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Pt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[d(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,m=o.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,W(o._parts,c))},_updateCircle:function(o){var c=o._point,m=Math.max(Math.round(o._radius),1),C=Math.max(Math.round(o._radiusY),1)||m,R="a"+m+","+C+" 0 1,0 ",$=o._empty()?"M0 0":"M"+(c.x-m)+","+c.y+R+m*2+",0 "+R+-m*2+",0 ";this._setPath(o,$)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){Qn(o._path)},_bringToBack:function(o){ei(o._path)}});Xe.vml&&hu.include(OS);function ny(o){return Xe.svg||Xe.vml?new hu(o):null}Nt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&ry(o)||ny(o)}});var iy=ys.extend({initialize:function(o,c){ys.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=de(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function RS(o,c){return new iy(o,c)}hu.create=Ed,hu.pointsToPath=W,Wi.geometryToLayer=gd,Wi.coordsToLatLng=rp,Wi.coordsToLatLngs=vd,Wi.latLngToCoords=np,Wi.latLngsToCoords=yd,Wi.getFeature=xs,Wi.asFeature=xd,Nt.mergeOptions({boxZoom:!0});var ay=Tn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),go(),ds(),this._startPoint=this._map.mouseEventToContainerPoint(o),ut(document,{contextmenu:Ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=kt("div","leaflet-zoom-box",this._container),ft(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new J(this._point,this._startPoint),m=c.getSize();$t(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Pt(this._box),Xt(this._container,"leaflet-crosshair")),vo(),eu(),it(document,{contextmenu:Ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var c=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nt.addInitHook("addHandler","boxZoom",ay),Nt.mergeOptions({doubleClickZoom:!0});var oy=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,m=c.getZoom(),C=c.options.zoomDelta,R=o.originalEvent.shiftKey?m-C:m+C;c.options.doubleClickZoom==="center"?c.setZoom(R):c.setZoomAround(o.containerPoint,R)}});Nt.addInitHook("addHandler","doubleClickZoom",oy),Nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sy=Tn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ti(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ft(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=de(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),m=this._initialWorldOffset,C=this._draggable._newPos.x,R=(C-c+m)%o+c-m,$=(C+c+m)%o-c-m,le=Math.abs(R+m)<Math.abs($+m)?R:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=le},_onDragEnd:function(o){var c=this._map,m=c.options,C=!m.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),C)c.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,le=m.easeLinearity,_e=R.multiplyBy(le/$),Se=_e.distanceTo([0,0]),Ie=Math.min(m.inertiaMaxSpeed,Se),We=_e.multiplyBy(Ie/Se),st=Ie/(m.inertiaDeceleration*le),St=We.multiplyBy(-st/2).round();!St.x&&!St.y?c.fire("moveend"):(St=c._limitOffset(St,c.options.maxBounds),te(function(){c.panBy(St,{duration:st,easeLinearity:le,noMoveStart:!0,animate:!0})}))}}});Nt.addInitHook("addHandler","dragging",sy),Nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ly=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ut(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),it(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,m=o.scrollTop||c.scrollTop,C=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(C,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},m=this.keyCodes,C,R;for(C=0,R=m.left.length;C<R;C++)c[m.left[C]]=[-1*o,0];for(C=0,R=m.right.length;C<R;C++)c[m.right[C]]=[o,0];for(C=0,R=m.down.length;C<R;C++)c[m.down[C]]=[0,o];for(C=0,R=m.up.length;C<R;C++)c[m.up[C]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},m=this.keyCodes,C,R;for(C=0,R=m.zoomIn.length;C<R;C++)c[m.zoomIn[C]]=o;for(C=0,R=m.zoomOut.length;C<R;C++)c[m.zoomOut[C]]=-o},_addHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){it(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,m=this._map,C;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(C=this._panKeys[c],o.shiftKey&&(C=ne(C).multiplyBy(3)),m.options.maxBounds&&(C=m._limitOffset(ne(C),m.options.maxBounds)),m.options.worldCopyJump){var R=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(C)));m.panTo(R)}else m.panBy(C)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Ci(o)}}});Nt.addInitHook("addHandler","keyboard",ly),Nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var uy=Tn.extend({addHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=Un(o),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var C=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),C),Ci(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),m=this._map.options.zoomSnap||0;o._stop();var C=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(C))))/Math.LN2,$=m?Math.ceil(R/m)*m:R,le=o._limitZoom(c+(this._delta>0?$:-$))-c;this._delta=0,this._startTime=null,le&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+le):o.setZoomAround(this._lastMousePos,c+le))}});Nt.addInitHook("addHandler","scrollWheelZoom",uy);var IS=600;Nt.mergeOptions({tapHold:Xe.touchNative&&Xe.safari&&Xe.mobile,tapTolerance:15});var cy=Tn.extend({addHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new ue(c.clientX,c.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(ut(document,"touchend",pr),ut(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),IS),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){it(document,"touchend",pr),it(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new ue(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var m=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});Nt.addInitHook("addHandler","tapHold",cy),Nt.mergeOptions({touchZoom:Xe.touch,bounceAtZoomLimits:!0});var dy=Tn.extend({addHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(o.touches[0]),C=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(C)._divideBy(2))),this._startDist=m.distanceTo(C),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),pr(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(o.touches[0]),C=c.mouseEventToContainerPoint(o.touches[1]),R=m.distanceTo(C)/this._startDist;if(this._zoom=c.getScaleZoom(R,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&R<1||this._zoom>c.getMaxZoom()&&R>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var $=m._add(C)._divideBy(2)._subtract(this._centerPoint);if(R===1&&$.x===0&&$.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var le=s(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(le,this,!0),pr(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nt.addInitHook("addHandler","touchZoom",dy),Nt.BoxZoom=ay,Nt.DoubleClickZoom=oy,Nt.Drag=sy,Nt.Keyboard=ly,Nt.ScrollWheelZoom=uy,Nt.TapHold=cy,Nt.TouchZoom=dy,r.Bounds=J,r.Browser=Xe,r.CRS=F,r.Canvas=ty,r.Circle=tp,r.CircleMarker=md,r.Class=P,r.Control=Jr,r.DivIcon=Y0,r.DivOverlay=Ti,r.DomEvent=sd,r.DomUtil=fs,r.Draggable=ti,r.Evented=re,r.FeatureGroup=rt,r.GeoJSON=Wi,r.GridLayer=cu,r.Handler=Tn,r.Icon=ln,r.ImageOverlay=bd,r.LatLng=Z,r.LatLngBounds=ve,r.Layer=ht,r.LayerGroup=yt,r.LineUtil=dt,r.Map=Nt,r.Marker=pd,r.Mixin=fd,r.Path=pa,r.Point=ue,r.PolyUtil=g,r.Polygon=ys,r.Polyline=Hi,r.Popup=_d,r.PosAnimation=ld,r.Projection=ze,r.Rectangle=iy,r.Renderer=Zi,r.SVG=hu,r.SVGOverlay=J0,r.TileLayer=bs,r.Tooltip=wd,r.Transformation=Ne,r.Util=ae,r.VideoOverlay=X0,r.bind=s,r.bounds=G,r.canvas=ry,r.circle=bS,r.circleMarker=xS,r.control=Gi,r.divIcon=kS,r.extend=i,r.featureGroup=Lt,r.geoJSON=K0,r.geoJson=ES,r.gridLayer=jS,r.icon=Si,r.imageOverlay=CS,r.latLng=se,r.latLngBounds=de,r.layerGroup=ot,r.map=wo,r.marker=yS,r.point=ne,r.polygon=wS,r.polyline=_S,r.popup=TS,r.rectangle=RS,r.setOptions=S,r.stamp=d,r.svg=ny,r.svgOverlay=AS,r.tileLayer=Q0,r.tooltip=NS,r.transformation=Le,r.version=n,r.videoOverlay=SS;var LS=window.L;r.noConflict=function(){return window.L=LS,this},window.L=r})})(Mg,Mg.exports);var Va=Mg.exports;function Df(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function Of(e,t){return t==null?function(n,i){const a=ge.useRef();return a.current||(a.current=e(n,i)),a}:function(n,i){const a=ge.useRef();a.current||(a.current=e(n,i));const s=ge.useRef(n),{instance:u}=a.current;return ge.useEffect(function(){s.current!==n&&(t(u,n,s.current),s.current=n)},[u,n,i]),a}}function B1(e,t){ge.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function F1(e){return function(r){const n=jf(),i=e(u0(r,n),n);return qO(n.map,r.attribution),M1(i.current,r.eventHandlers),B1(i.current,n),i}}function WO(e,t){const r=ge.useRef();ge.useEffect(function(){if(t.pathOptions!==r.current){const i=t.pathOptions??{};e.instance.setStyle(i),r.current=i}},[e,t])}function ZO(e){return function(r){const n=jf(),i=e(u0(r,n),n);return M1(i.current,r.eventHandlers),B1(i.current,n),WO(i.current,r),i}}function KO(e,t){const r=Of(e,t),n=F1(r);return l0(n)}function XO(e,t){const r=Of(e,t),n=ZO(r);return l0(n)}function JO(e,t){const r=Of(e,t),n=F1(r);return GO(n)}function YO(e,t,r){const{opacity:n,zIndex:i}=t;n!=null&&n!==r.opacity&&e.setOpacity(n),i!=null&&i!==r.zIndex&&e.setZIndex(i)}function QO(e,t,r){t.bounds instanceof Va.LatLngBounds&&t.bounds!==r.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==r.zIndex&&e.setZIndex(t.zIndex)}const z1=XO(function({data:t,...r},n){const i=new Va.GeoJSON(t,r);return Df(i,kf(n,{overlayContainer:i}))},function(t,r,n){r.style!==n.style&&(r.style==null?t.resetStyle():t.setStyle(r.style))}),U1=KO(function({bounds:t,url:r,...n},i){const a=new Va.ImageOverlay(r,t,n);return Df(a,kf(i,{overlayContainer:a}))},function(t,r,n){if(QO(t,r,n),r.bounds!==n.bounds){const i=r.bounds instanceof Va.LatLngBounds?r.bounds:new Va.LatLngBounds(r.bounds);t.setBounds(i)}r.url!==n.url&&t.setUrl(r.url)}),e3=Of(function({children:t,...r},n){const i=new Va.Control.Layers(void 0,void 0,r);return Df(i,kf(n,{layersControl:i}))},function(t,r,n){r.collapsed!==n.collapsed&&(r.collapsed===!0?t.collapse():t.expand())}),t3=HO(e3),$a=l0(t3);function q1(e){return function(r){const n=jf(),i=ge.useRef(r),[a,s]=ge.useState(null),{layersControl:u,map:d}=n,h=ge.useCallback(v=>{u!=null&&(i.current.checked&&d.addLayer(v),e(u,v,i.current.name),s(v))},[u,d]),f=ge.useCallback(v=>{u==null||u.removeLayer(v),s(null)},[u]),p=ge.useMemo(()=>kf(n,{layerContainer:{addLayer:h,removeLayer:f}}),[n,h,f]);return ge.useEffect(()=>{a!==null&&i.current!==r&&(r.checked===!0&&(i.current.checked==null||i.current.checked===!1)?d.addLayer(a):i.current.checked===!0&&(r.checked==null||r.checked===!1)&&d.removeLayer(a),i.current=r)}),r.children?qo.createElement(s0,{value:p},r.children):null}}$a.BaseLayer=q1(function(t,r,n){t.addBaseLayer(r,n)});$a.Overlay=q1(function(t,r,n){t.addOverlay(r,n)});function Bg(){return Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bg.apply(this,arguments)}function r3({bounds:e,boundsOptions:t,center:r,children:n,className:i,id:a,placeholder:s,style:u,whenReady:d,zoom:h,...f},p){const[v]=ge.useState({className:i,id:a,style:u}),[b,k]=ge.useState(null);ge.useImperativeHandle(p,()=>(b==null?void 0:b.map)??null,[b]);const S=ge.useCallback(y=>{if(y!==null&&b===null){const _=new Va.Map(y,f);r!=null&&h!=null?_.setView(r,h):e!=null&&_.fitBounds(e,t),d!=null&&_.whenReady(d),k($O(_))}},[]);ge.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const T=b?qo.createElement(s0,{value:b},n):s??null;return qo.createElement("div",Bg({},v,{ref:S}),T)}const V1=ge.forwardRef(r3),$1=JO(function({url:t,...r},n){const i=new Va.TileLayer(t,u0(r,n));return Df(i,n)},function(t,r,n){YO(t,r,n);const{url:i}=r;i!=null&&i!==n.url&&t.setUrl(i)});function Gd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var G1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,a){function s(h,f){if(!i[h]){if(!n[h]){var p=typeof Gd=="function"&&Gd;if(!f&&p)return p(h,!0);if(u)return u(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var b=i[h]={exports:{}};n[h][0].call(b.exports,function(k){var S=n[h][1][k];return s(S||k)},b,b.exports,r,n,i,a)}return i[h].exports}for(var u=typeof Gd=="function"&&Gd,d=0;d<a.length;d++)s(a[d]);return s}({1:[function(r,n,i){var a=r("./utils"),s=r("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(d){for(var h,f,p,v,b,k,S,T=[],y=0,_=d.length,w=_,E=a.getTypeOf(d)!=="string";y<d.length;)w=_-y,p=E?(h=d[y++],f=y<_?d[y++]:0,y<_?d[y++]:0):(h=d.charCodeAt(y++),f=y<_?d.charCodeAt(y++):0,y<_?d.charCodeAt(y++):0),v=h>>2,b=(3&h)<<4|f>>4,k=1<w?(15&f)<<2|p>>6:64,S=2<w?63&p:64,T.push(u.charAt(v)+u.charAt(b)+u.charAt(k)+u.charAt(S));return T.join("")},i.decode=function(d){var h,f,p,v,b,k,S=0,T=0,y="data:";if(d.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var _,w=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&w--,d.charAt(d.length-2)===u.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|w):new Array(0|w);S<d.length;)h=u.indexOf(d.charAt(S++))<<2|(v=u.indexOf(d.charAt(S++)))>>4,f=(15&v)<<4|(b=u.indexOf(d.charAt(S++)))>>2,p=(3&b)<<6|(k=u.indexOf(d.charAt(S++))),_[T++]=h,b!==64&&(_[T++]=f),k!==64&&(_[T++]=p);return _}},{"./support":30,"./utils":32}],2:[function(r,n,i){var a=r("./external"),s=r("./stream/DataWorker"),u=r("./stream/Crc32Probe"),d=r("./stream/DataLengthProbe");function h(f,p,v,b,k){this.compressedSize=f,this.uncompressedSize=p,this.crc32=v,this.compression=b,this.compressedContent=k}h.prototype={getContentWorker:function(){var f=new s(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new s(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(f,p,v){return f.pipe(new u).pipe(new d("uncompressedSize")).pipe(p.compressWorker(v)).pipe(new d("compressedSize")).withStreamInfo("compression",p)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var a=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var a=r("./utils"),s=function(){for(var u,d=[],h=0;h<256;h++){u=h;for(var f=0;f<8;f++)u=1&u?3988292384^u>>>1:u>>>1;d[h]=u}return d}();n.exports=function(u,d){return u!==void 0&&u.length?a.getTypeOf(u)!=="string"?function(h,f,p,v){var b=s,k=v+p;h^=-1;for(var S=v;S<k;S++)h=h>>>8^b[255&(h^f[S])];return-1^h}(0|d,u,u.length,0):function(h,f,p,v){var b=s,k=v+p;h^=-1;for(var S=v;S<k;S++)h=h>>>8^b[255&(h^f.charCodeAt(S))];return-1^h}(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var a=null;a=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:a}},{lie:37}],7:[function(r,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=r("pako"),u=r("./utils"),d=r("./stream/GenericWorker"),h=a?"uint8array":"array";function f(p,v){d.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=v,this.meta={}}i.magic="\b\0",u.inherits(f,d),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(h,p.data),!1)},f.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(v){p.push({data:v,meta:p.meta})}},i.compressWorker=function(p){return new f("Deflate",p)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function a(b,k){var S,T="";for(S=0;S<k;S++)T+=String.fromCharCode(255&b),b>>>=8;return T}function s(b,k,S,T,y,_){var w,E,N=b.file,M=b.compression,B=_!==h.utf8encode,D=u.transformTo("string",_(N.name)),A=u.transformTo("string",h.utf8encode(N.name)),H=N.comment,te=u.transformTo("string",_(H)),z=u.transformTo("string",h.utf8encode(H)),ae=A.length!==N.name.length,P=z.length!==H.length,ce="",fe="",re="",ue=N.dir,O=N.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};k&&!S||(ne.crc32=b.crc32,ne.compressedSize=b.compressedSize,ne.uncompressedSize=b.uncompressedSize);var J=0;k&&(J|=8),B||!ae&&!P||(J|=2048);var G=0,ve=0;ue&&(G|=16),y==="UNIX"?(ve=798,G|=function(Z,se){var F=Z;return Z||(F=se?16893:33204),(65535&F)<<16}(N.unixPermissions,ue)):(ve=20,G|=function(Z){return 63&(Z||0)}(N.dosPermissions)),w=O.getUTCHours(),w<<=6,w|=O.getUTCMinutes(),w<<=5,w|=O.getUTCSeconds()/2,E=O.getUTCFullYear()-1980,E<<=4,E|=O.getUTCMonth()+1,E<<=5,E|=O.getUTCDate(),ae&&(fe=a(1,1)+a(f(D),4)+A,ce+="up"+a(fe.length,2)+fe),P&&(re=a(1,1)+a(f(te),4)+z,ce+="uc"+a(re.length,2)+re);var de="";return de+=`
\0`,de+=a(J,2),de+=M.magic,de+=a(w,2),de+=a(E,2),de+=a(ne.crc32,4),de+=a(ne.compressedSize,4),de+=a(ne.uncompressedSize,4),de+=a(D.length,2),de+=a(ce.length,2),{fileRecord:p.LOCAL_FILE_HEADER+de+D+ce,dirRecord:p.CENTRAL_FILE_HEADER+a(ve,2)+de+a(te.length,2)+"\0\0\0\0"+a(G,4)+a(T,4)+D+ce+te}}var u=r("../utils"),d=r("../stream/GenericWorker"),h=r("../utf8"),f=r("../crc32"),p=r("../signature");function v(b,k,S,T){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=S,this.encodeFileName=T,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(v,d),v.prototype.push=function(b){var k=b.meta.percent||0,S=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,d.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:S?(k+100*(S-T-1))/S:100}}))},v.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var k=this.streamFiles&&!b.file.dir;if(k){var S=s(b,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:S.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(b){this.accumulate=!1;var k=this.streamFiles&&!b.file.dir,S=s(b,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(S.dirRecord),k)this.push({data:function(T){return p.DATA_DESCRIPTOR+a(T.crc32,4)+a(T.compressedSize,4)+a(T.uncompressedSize,4)}(b),meta:{percent:100}});else for(this.push({data:S.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var b=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var S=this.bytesWritten-b,T=function(y,_,w,E,N){var M=u.transformTo("string",N(E));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(y,2)+a(y,2)+a(_,4)+a(w,4)+a(M.length,2)+M}(this.dirRecords.length,S,b,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(b){this._sources.push(b);var k=this;return b.on("data",function(S){k.processChunk(S)}),b.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),b.on("error",function(S){k.error(S)}),this},v.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(b){var k=this._sources;if(!d.prototype.error.call(this,b))return!1;for(var S=0;S<k.length;S++)try{k[S].error(b)}catch{}return!0},v.prototype.lock=function(){d.prototype.lock.call(this);for(var b=this._sources,k=0;k<b.length;k++)b[k].lock()},n.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var a=r("../compressions"),s=r("./ZipFileWorker");i.generateWorker=function(u,d,h){var f=new s(d.streamFiles,h,d.platform,d.encodeFileName),p=0;try{u.forEach(function(v,b){p++;var k=function(_,w){var E=_||w,N=a[E];if(!N)throw new Error(E+" is not a valid compression method !");return N}(b.options.compression,d.compression),S=b.options.compressionOptions||d.compressionOptions||{},T=b.dir,y=b.date;b._compressWorker(k,S).withStreamInfo("file",{name:v,dir:T,date:y,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(v){f.error(v)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new a;for(var u in this)typeof this[u]!="function"&&(s[u]=this[u]);return s}}(a.prototype=r("./object")).loadAsync=r("./load"),a.support=r("./support"),a.defaults=r("./defaults"),a.version="3.10.1",a.loadAsync=function(s,u){return new a().loadAsync(s,u)},a.external=r("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var a=r("./utils"),s=r("./external"),u=r("./utf8"),d=r("./zipEntries"),h=r("./stream/Crc32Probe"),f=r("./nodejsUtils");function p(v){return new s.Promise(function(b,k){var S=v.decompressed.getContentWorker().pipe(new h);S.on("error",function(T){k(T)}).on("end",function(){S.streamInfo.crc32!==v.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}n.exports=function(v,b){var k=this;return b=a.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),f.isNode&&f.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,b.optimizedBinaryString,b.base64).then(function(S){var T=new d(b);return T.load(S),T}).then(function(S){var T=[s.Promise.resolve(S)],y=S.files;if(b.checkCRC32)for(var _=0;_<y.length;_++)T.push(p(y[_]));return s.Promise.all(T)}).then(function(S){for(var T=S.shift(),y=T.files,_=0;_<y.length;_++){var w=y[_],E=w.fileNameStr,N=a.resolve(w.fileNameStr);k.file(N,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:b.createFolders}),w.dir||(k.file(N).unsafeOriginalName=E)}return T.zipComment.length&&(k.comment=T.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var a=r("../utils"),s=r("../stream/GenericWorker");function u(d,h){s.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(h)}a.inherits(u,s),u.prototype._bindStream=function(d){var h=this;(this._stream=d).pause(),d.on("data",function(f){h.push({data:f,meta:{percent:0}})}).on("error",function(f){h.isPaused?this.generatedError=f:h.error(f)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},u.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var a=r("readable-stream").Readable;function s(u,d,h){a.call(this,d),this._helper=u;var f=this;u.on("data",function(p,v){f.push(p)||f._helper.pause(),h&&h(v)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}r("../utils").inherits(s,a),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,s);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,s)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var s=new Buffer(a);return s.fill(0),s},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(r,n,i){function a(N,M,B){var D,A=u.getTypeOf(M),H=u.extend(B||{},f);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(N=y(N)),H.createFolders&&(D=T(N))&&_.call(this,D,!0);var te=A==="string"&&H.binary===!1&&H.base64===!1;B&&B.binary!==void 0||(H.binary=!te),(M instanceof p&&M.uncompressedSize===0||H.dir||!M||M.length===0)&&(H.base64=!1,H.binary=!0,M="",H.compression="STORE",A="string");var z=null;z=M instanceof p||M instanceof d?M:k.isNode&&k.isStream(M)?new S(N,M):u.prepareContent(N,M,H.binary,H.optimizedBinaryString,H.base64);var ae=new v(N,z,H);this.files[N]=ae}var s=r("./utf8"),u=r("./utils"),d=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),f=r("./defaults"),p=r("./compressedObject"),v=r("./zipObject"),b=r("./generate"),k=r("./nodejsUtils"),S=r("./nodejs/NodejsStreamInputAdapter"),T=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var M=N.lastIndexOf("/");return 0<M?N.substring(0,M):""},y=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},_=function(N,M){return M=M!==void 0?M:f.createFolders,N=y(N),this.files[N]||a.call(this,N,null,{dir:!0,createFolders:M}),this.files[N]};function w(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var M,B,D;for(M in this.files)D=this.files[M],(B=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&N(B,D)},filter:function(N){var M=[];return this.forEach(function(B,D){N(B,D)&&M.push(D)}),M},file:function(N,M,B){if(arguments.length!==1)return N=this.root+N,a.call(this,N,M,B),this;if(w(N)){var D=N;return this.filter(function(H,te){return!te.dir&&D.test(H)})}var A=this.files[this.root+N];return A&&!A.dir?A:null},folder:function(N){if(!N)return this;if(w(N))return this.filter(function(A,H){return H.dir&&N.test(A)});var M=this.root+N,B=_.call(this,M),D=this.clone();return D.root=B.name,D},remove:function(N){N=this.root+N;var M=this.files[N];if(M||(N.slice(-1)!=="/"&&(N+="/"),M=this.files[N]),M&&!M.dir)delete this.files[N];else for(var B=this.filter(function(A,H){return H.name.slice(0,N.length)===N}),D=0;D<B.length;D++)delete this.files[B[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var M,B={};try{if((B=u.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");u.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var D=B.comment||this.comment||"";M=b.generateWorker(this,B,D)}catch(A){(M=new d("error")).error(A)}return new h(M,B.type||"string",B.mimeType)},generateAsync:function(N,M){return this.generateInternalStream(N).accumulate(M)},generateNodeStream:function(N,M){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(M)}};n.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var a=r("./DataReader");function s(u){a.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}r("../utils").inherits(s,a),s.prototype.byteAt=function(u){return this.data[this.zero+u]},s.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),h=u.charCodeAt(1),f=u.charCodeAt(2),p=u.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===d&&this.data[v+1]===h&&this.data[v+2]===f&&this.data[v+3]===p)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),h=u.charCodeAt(1),f=u.charCodeAt(2),p=u.charCodeAt(3),v=this.readData(4);return d===v[0]&&h===v[1]&&f===v[2]&&p===v[3]},s.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var a=r("../utils");function s(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,h=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)h=(h<<8)+this.byteAt(d);return this.index+=u,h},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=s},{"../utils":32}],19:[function(r,n,i){var a=r("./Uint8ArrayReader");function s(u){a.call(this,u)}r("../utils").inherits(s,a),s.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var a=r("./DataReader");function s(u){a.call(this,u)}r("../utils").inherits(s,a),s.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},s.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},s.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},s.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var a=r("./ArrayReader");function s(u){a.call(this,u)}r("../utils").inherits(s,a),s.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var a=r("../utils"),s=r("../support"),u=r("./ArrayReader"),d=r("./StringReader"),h=r("./NodeBufferReader"),f=r("./Uint8ArrayReader");n.exports=function(p){var v=a.getTypeOf(p);return a.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new h(p):s.uint8array?new f(a.transformTo("uint8array",p)):new u(a.transformTo("array",p)):new d(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var a=r("./GenericWorker"),s=r("../utils");function u(d){a.call(this,"ConvertWorker to "+d),this.destType=d}s.inherits(u,a),u.prototype.processChunk=function(d){this.push({data:s.transformTo(this.destType,d.data),meta:d.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var a=r("./GenericWorker"),s=r("../crc32");function u(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(u,a),u.prototype.processChunk=function(d){this.streamInfo.crc32=s(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var a=r("../utils"),s=r("./GenericWorker");function u(d){s.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}a.inherits(u,s),u.prototype.processChunk=function(d){if(d){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+d.data.length}s.prototype.processChunk.call(this,d)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var a=r("../utils"),s=r("./GenericWorker");function u(d){s.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(f){h.dataIsReady=!0,h.data=f,h.max=f&&f.length||0,h.type=a.getTypeOf(f),h.isPaused||h._tickAndRepeat()},function(f){h.error(f)})}a.inherits(u,s),u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,h);break;case"uint8array":d=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":d=this.data.slice(this.index,h)}return this.index=h,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function a(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,u){return this._listeners[s].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,u){if(this._listeners[s])for(var d=0;d<this._listeners[s].length;d++)this._listeners[s][d].call(this,u)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var u=this;return s.on("data",function(d){u.processChunk(d)}),s.on("end",function(){u.end()}),s.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,u){return this.extraStreamInfo[s]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=a},{}],29:[function(r,n,i){var a=r("../utils"),s=r("./ConvertWorker"),u=r("./GenericWorker"),d=r("../base64"),h=r("../support"),f=r("../external"),p=null;if(h.nodestream)try{p=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(k,S){return new f.Promise(function(T,y){var _=[],w=k._internalType,E=k._outputType,N=k._mimeType;k.on("data",function(M,B){_.push(M),S&&S(B)}).on("error",function(M){_=[],y(M)}).on("end",function(){try{var M=function(B,D,A){switch(B){case"blob":return a.newBlob(a.transformTo("arraybuffer",D),A);case"base64":return d.encode(D);default:return a.transformTo(B,D)}}(E,function(B,D){var A,H=0,te=null,z=0;for(A=0;A<D.length;A++)z+=D[A].length;switch(B){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(te=new Uint8Array(z),A=0;A<D.length;A++)te.set(D[A],H),H+=D[A].length;return te;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+B+"'")}}(w,_),N);T(M)}catch(B){y(B)}_=[]}).resume()})}function b(k,S,T){var y=S;switch(S){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=S,this._mimeType=T,a.checkSupport(y),this._worker=k.pipe(new s(y)),k.lock()}catch(_){this._worker=new u("error"),this._worker.error(_)}}b.prototype={accumulate:function(k){return v(this,k)},on:function(k,S){var T=this;return k==="data"?this._worker.on(k,function(y){S.call(T,y.data,y.meta)}):this._worker.on(k,function(){a.delay(S,arguments,T)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},k)}},n.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var a=r("./utils"),s=r("./support"),u=r("./nodejsUtils"),d=r("./stream/GenericWorker"),h=new Array(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;h[254]=h[254]=1;function p(){d.call(this,"utf-8 decode"),this.leftOver=null}function v(){d.call(this,"utf-8 encode")}i.utf8encode=function(b){return s.nodebuffer?u.newBufferFrom(b,"utf-8"):function(k){var S,T,y,_,w,E=k.length,N=0;for(_=0;_<E;_++)(64512&(T=k.charCodeAt(_)))==55296&&_+1<E&&(64512&(y=k.charCodeAt(_+1)))==56320&&(T=65536+(T-55296<<10)+(y-56320),_++),N+=T<128?1:T<2048?2:T<65536?3:4;for(S=s.uint8array?new Uint8Array(N):new Array(N),_=w=0;w<N;_++)(64512&(T=k.charCodeAt(_)))==55296&&_+1<E&&(64512&(y=k.charCodeAt(_+1)))==56320&&(T=65536+(T-55296<<10)+(y-56320),_++),T<128?S[w++]=T:(T<2048?S[w++]=192|T>>>6:(T<65536?S[w++]=224|T>>>12:(S[w++]=240|T>>>18,S[w++]=128|T>>>12&63),S[w++]=128|T>>>6&63),S[w++]=128|63&T);return S}(b)},i.utf8decode=function(b){return s.nodebuffer?a.transformTo("nodebuffer",b).toString("utf-8"):function(k){var S,T,y,_,w=k.length,E=new Array(2*w);for(S=T=0;S<w;)if((y=k[S++])<128)E[T++]=y;else if(4<(_=h[y]))E[T++]=65533,S+=_-1;else{for(y&=_===2?31:_===3?15:7;1<_&&S<w;)y=y<<6|63&k[S++],_--;1<_?E[T++]=65533:y<65536?E[T++]=y:(y-=65536,E[T++]=55296|y>>10&1023,E[T++]=56320|1023&y)}return E.length!==T&&(E.subarray?E=E.subarray(0,T):E.length=T),a.applyFromCharCode(E)}(b=a.transformTo(s.uint8array?"uint8array":"array",b))},a.inherits(p,d),p.prototype.processChunk=function(b){var k=a.transformTo(s.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var S=k;(k=new Uint8Array(S.length+this.leftOver.length)).set(this.leftOver,0),k.set(S,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var T=function(_,w){var E;for((w=w||_.length)>_.length&&(w=_.length),E=w-1;0<=E&&(192&_[E])==128;)E--;return E<0||E===0?w:E+h[_[E]]>w?E:w}(k),y=k;T!==k.length&&(s.uint8array?(y=k.subarray(0,T),this.leftOver=k.subarray(T,k.length)):(y=k.slice(0,T),this.leftOver=k.slice(T,k.length))),this.push({data:i.utf8decode(y),meta:b.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,a.inherits(v,d),v.prototype.processChunk=function(b){this.push({data:i.utf8encode(b.data),meta:b.meta})},i.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var a=r("./support"),s=r("./base64"),u=r("./nodejsUtils"),d=r("./external");function h(S){return S}function f(S,T){for(var y=0;y<S.length;++y)T[y]=255&S.charCodeAt(y);return T}r("setimmediate"),i.newBlob=function(S,T){i.checkSupport("blob");try{return new Blob([S],{type:T})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(S),y.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(S,T,y){var _=[],w=0,E=S.length;if(E<=y)return String.fromCharCode.apply(null,S);for(;w<E;)T==="array"||T==="nodebuffer"?_.push(String.fromCharCode.apply(null,S.slice(w,Math.min(w+y,E)))):_.push(String.fromCharCode.apply(null,S.subarray(w,Math.min(w+y,E)))),w+=y;return _.join("")},stringifyByChar:function(S){for(var T="",y=0;y<S.length;y++)T+=String.fromCharCode(S[y]);return T},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}}()}};function v(S){var T=65536,y=i.getTypeOf(S),_=!0;if(y==="uint8array"?_=p.applyCanBeUsed.uint8array:y==="nodebuffer"&&(_=p.applyCanBeUsed.nodebuffer),_)for(;1<T;)try{return p.stringifyByChunk(S,y,T)}catch{T=Math.floor(T/2)}return p.stringifyByChar(S)}function b(S,T){for(var y=0;y<S.length;y++)T[y]=S[y];return T}i.applyFromCharCode=v;var k={};k.string={string:h,array:function(S){return f(S,new Array(S.length))},arraybuffer:function(S){return k.string.uint8array(S).buffer},uint8array:function(S){return f(S,new Uint8Array(S.length))},nodebuffer:function(S){return f(S,u.allocBuffer(S.length))}},k.array={string:v,array:h,arraybuffer:function(S){return new Uint8Array(S).buffer},uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return u.newBufferFrom(S)}},k.arraybuffer={string:function(S){return v(new Uint8Array(S))},array:function(S){return b(new Uint8Array(S),new Array(S.byteLength))},arraybuffer:h,uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return u.newBufferFrom(new Uint8Array(S))}},k.uint8array={string:v,array:function(S){return b(S,new Array(S.length))},arraybuffer:function(S){return S.buffer},uint8array:h,nodebuffer:function(S){return u.newBufferFrom(S)}},k.nodebuffer={string:v,array:function(S){return b(S,new Array(S.length))},arraybuffer:function(S){return k.nodebuffer.uint8array(S).buffer},uint8array:function(S){return b(S,new Uint8Array(S.length))},nodebuffer:h},i.transformTo=function(S,T){if(T=T||"",!S)return T;i.checkSupport(S);var y=i.getTypeOf(T);return k[y][S](T)},i.resolve=function(S){for(var T=S.split("/"),y=[],_=0;_<T.length;_++){var w=T[_];w==="."||w===""&&_!==0&&_!==T.length-1||(w===".."?y.pop():y.push(w))}return y.join("/")},i.getTypeOf=function(S){return typeof S=="string"?"string":Object.prototype.toString.call(S)==="[object Array]"?"array":a.nodebuffer&&u.isBuffer(S)?"nodebuffer":a.uint8array&&S instanceof Uint8Array?"uint8array":a.arraybuffer&&S instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(S){if(!a[S.toLowerCase()])throw new Error(S+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(S){var T,y,_="";for(y=0;y<(S||"").length;y++)_+="\\x"+((T=S.charCodeAt(y))<16?"0":"")+T.toString(16).toUpperCase();return _},i.delay=function(S,T,y){setImmediate(function(){S.apply(y||null,T||[])})},i.inherits=function(S,T){function y(){}y.prototype=T.prototype,S.prototype=new y},i.extend=function(){var S,T,y={};for(S=0;S<arguments.length;S++)for(T in arguments[S])Object.prototype.hasOwnProperty.call(arguments[S],T)&&y[T]===void 0&&(y[T]=arguments[S][T]);return y},i.prepareContent=function(S,T,y,_,w){return d.Promise.resolve(T).then(function(E){return a.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new d.Promise(function(N,M){var B=new FileReader;B.onload=function(D){N(D.target.result)},B.onerror=function(D){M(D.target.error)},B.readAsArrayBuffer(E)}):E}).then(function(E){var N=i.getTypeOf(E);return N?(N==="arraybuffer"?E=i.transformTo("uint8array",E):N==="string"&&(w?E=s.decode(E):y&&_!==!0&&(E=function(M){return f(M,a.uint8array?new Uint8Array(M.length):new Array(M.length))}(E))),E):d.Promise.reject(new Error("Can't read the data of '"+S+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var a=r("./reader/readerFor"),s=r("./utils"),u=r("./signature"),d=r("./zipEntry"),h=r("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(p)+")")}},isSignature:function(p,v){var b=this.reader.index;this.reader.setIndex(p);var k=this.reader.readString(4)===v;return this.reader.setIndex(b),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),v=h.uint8array?"uint8array":"array",b=s.transformTo(v,p);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,v,b,k=this.zip64EndOfCentralSize-44;0<k;)p=this.reader.readInt(2),v=this.reader.readInt(4),b=this.reader.readData(v),this.zip64ExtensibleData[p]={id:p,length:v,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,v;for(p=0;p<this.files.length;p++)v=this.files[p],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(p=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var v=p;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var k=v-b;if(0<k)this.isSignature(v,u.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(p){this.reader=a(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var a=r("./reader/readerFor"),s=r("./utils"),u=r("./compressedObject"),d=r("./crc32"),h=r("./utf8"),f=r("./compressions"),p=r("./support");function v(b,k){this.options=b,this.loadOptions=k}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var k,S;if(b.skip(22),this.fileNameLength=b.readInt(2),S=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(S),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=function(T){for(var y in f)if(Object.prototype.hasOwnProperty.call(f,y)&&f[y].magic===T)return f[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,k,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var k=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(k),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=a(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var k,S,T,y=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<y;)k=b.readInt(2),S=b.readInt(2),T=b.readData(S),this.extraFields[k]={id:k,length:S,value:T};b.setIndex(y)},handleUTF8:function(){var b=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var S=s.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(S)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var y=s.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var k=a(b.value);return k.readInt(1)!==1||d(this.fileName)!==k.readInt(4)?null:h.utf8decode(k.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var k=a(b.value);return k.readInt(1)!==1||d(this.fileComment)!==k.readInt(4)?null:h.utf8decode(k.readData(b.length-5))}return null}},n.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function a(k,S,T){this.name=k,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=S,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var s=r("./stream/StreamHelper"),u=r("./stream/DataWorker"),d=r("./utf8"),h=r("./compressedObject"),f=r("./stream/GenericWorker");a.prototype={internalStream:function(k){var S=null,T="string";try{if(!k)throw new Error("No output type specified.");var y=(T=k.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),S=this._decompressWorker();var _=!this._dataBinary;_&&!y&&(S=S.pipe(new d.Utf8EncodeWorker)),!_&&y&&(S=S.pipe(new d.Utf8DecodeWorker))}catch(w){(S=new f("error")).error(w)}return new s(S,T,"")},async:function(k,S){return this.internalStream(k).accumulate(S)},nodeStream:function(k,S){return this.internalStream(k||"nodebuffer").toNodejsStream(S)},_compressWorker:function(k,S){if(this._data instanceof h&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new d.Utf8EncodeWorker)),h.createWorkerFrom(T,k,S)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof f?this._data:new u(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<p.length;b++)a.prototype[p[b]]=v;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(a){var s,u,d=a.MutationObserver||a.WebKitMutationObserver;if(d){var h=0,f=new d(k),p=a.document.createTextNode("");f.observe(p,{characterData:!0}),s=function(){p.data=h=++h%2}}else if(a.setImmediate||a.MessageChannel===void 0)s="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var S=a.document.createElement("script");S.onreadystatechange=function(){k(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},a.document.documentElement.appendChild(S)}:function(){setTimeout(k,0)};else{var v=new a.MessageChannel;v.port1.onmessage=k,s=function(){v.port2.postMessage(0)}}var b=[];function k(){var S,T;u=!0;for(var y=b.length;y;){for(T=b,b=[],S=-1;++S<y;)T[S]();y=b.length}u=!1}n.exports=function(S){b.push(S)!==1||u||s()}}).call(this,typeof Qe<"u"?Qe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var a=r("immediate");function s(){}var u={},d=["REJECTED"],h=["FULFILLED"],f=["PENDING"];function p(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,y!==s&&S(this,y)}function v(y,_,w){this.promise=y,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function b(y,_,w){a(function(){var E;try{E=_(w)}catch(N){return u.reject(y,N)}E===y?u.reject(y,new TypeError("Cannot resolve promise with itself")):u.resolve(y,E)})}function k(y){var _=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof _=="function")return function(){_.apply(y,arguments)}}function S(y,_){var w=!1;function E(B){w||(w=!0,u.reject(y,B))}function N(B){w||(w=!0,u.resolve(y,B))}var M=T(function(){_(N,E)});M.status==="error"&&E(M.value)}function T(y,_){var w={};try{w.value=y(_),w.status="success"}catch(E){w.status="error",w.value=E}return w}(n.exports=p).prototype.finally=function(y){if(typeof y!="function")return this;var _=this.constructor;return this.then(function(w){return _.resolve(y()).then(function(){return w})},function(w){return _.resolve(y()).then(function(){throw w})})},p.prototype.catch=function(y){return this.then(null,y)},p.prototype.then=function(y,_){if(typeof y!="function"&&this.state===h||typeof _!="function"&&this.state===d)return this;var w=new this.constructor(s);return this.state!==f?b(w,this.state===h?y:_,this.outcome):this.queue.push(new v(w,y,_)),w},v.prototype.callFulfilled=function(y){u.resolve(this.promise,y)},v.prototype.otherCallFulfilled=function(y){b(this.promise,this.onFulfilled,y)},v.prototype.callRejected=function(y){u.reject(this.promise,y)},v.prototype.otherCallRejected=function(y){b(this.promise,this.onRejected,y)},u.resolve=function(y,_){var w=T(k,_);if(w.status==="error")return u.reject(y,w.value);var E=w.value;if(E)S(y,E);else{y.state=h,y.outcome=_;for(var N=-1,M=y.queue.length;++N<M;)y.queue[N].callFulfilled(_)}return y},u.reject=function(y,_){y.state=d,y.outcome=_;for(var w=-1,E=y.queue.length;++w<E;)y.queue[w].callRejected(_);return y},p.resolve=function(y){return y instanceof this?y:u.resolve(new this(s),y)},p.reject=function(y){var _=new this(s);return u.reject(_,y)},p.all=function(y){var _=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,E=!1;if(!w)return this.resolve([]);for(var N=new Array(w),M=0,B=-1,D=new this(s);++B<w;)A(y[B],B);return D;function A(H,te){_.resolve(H).then(function(z){N[te]=z,++M!==w||E||(E=!0,u.resolve(D,N))},function(z){E||(E=!0,u.reject(D,z))})}},p.race=function(y){var _=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,E=!1;if(!w)return this.resolve([]);for(var N=-1,M=new this(s);++N<w;)B=y[N],_.resolve(B).then(function(D){E||(E=!0,u.resolve(M,D))},function(D){E||(E=!0,u.reject(M,D))});var B;return M}},{immediate:36}],38:[function(r,n,i){var a={};(0,r("./lib/utils/common").assign)(a,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var a=r("./zlib/deflate"),s=r("./utils/common"),u=r("./utils/strings"),d=r("./zlib/messages"),h=r("./zlib/zstream"),f=Object.prototype.toString,p=0,v=-1,b=0,k=8;function S(y){if(!(this instanceof S))return new S(y);this.options=s.assign({level:v,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},y||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var w=a.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(w!==p)throw new Error(d[w]);if(_.header&&a.deflateSetHeader(this.strm,_.header),_.dictionary){var E;if(E=typeof _.dictionary=="string"?u.string2buf(_.dictionary):f.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(w=a.deflateSetDictionary(this.strm,E))!==p)throw new Error(d[w]);this._dict_set=!0}}function T(y,_){var w=new S(_);if(w.push(y,!0),w.err)throw w.msg||d[w.err];return w.result}S.prototype.push=function(y,_){var w,E,N=this.strm,M=this.options.chunkSize;if(this.ended)return!1;E=_===~~_?_:_===!0?4:0,typeof y=="string"?N.input=u.string2buf(y):f.call(y)==="[object ArrayBuffer]"?N.input=new Uint8Array(y):N.input=y,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new s.Buf8(M),N.next_out=0,N.avail_out=M),(w=a.deflate(N,E))!==1&&w!==p)return this.onEnd(w),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(s.shrinkBuf(N.output,N.next_out))):this.onData(s.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&w!==1);return E===4?(w=a.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===p):E!==2||(this.onEnd(p),!(N.avail_out=0))},S.prototype.onData=function(y){this.chunks.push(y)},S.prototype.onEnd=function(y){y===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=S,i.deflate=T,i.deflateRaw=function(y,_){return(_=_||{}).raw=!0,T(y,_)},i.gzip=function(y,_){return(_=_||{}).gzip=!0,T(y,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var a=r("./zlib/inflate"),s=r("./utils/common"),u=r("./utils/strings"),d=r("./zlib/constants"),h=r("./zlib/messages"),f=r("./zlib/zstream"),p=r("./zlib/gzheader"),v=Object.prototype.toString;function b(S){if(!(this instanceof b))return new b(S);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},S||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||S&&S.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var y=a.inflateInit2(this.strm,T.windowBits);if(y!==d.Z_OK)throw new Error(h[y]);this.header=new p,a.inflateGetHeader(this.strm,this.header)}function k(S,T){var y=new b(T);if(y.push(S,!0),y.err)throw y.msg||h[y.err];return y.result}b.prototype.push=function(S,T){var y,_,w,E,N,M,B=this.strm,D=this.options.chunkSize,A=this.options.dictionary,H=!1;if(this.ended)return!1;_=T===~~T?T:T===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof S=="string"?B.input=u.binstring2buf(S):v.call(S)==="[object ArrayBuffer]"?B.input=new Uint8Array(S):B.input=S,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8(D),B.next_out=0,B.avail_out=D),(y=a.inflate(B,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&A&&(M=typeof A=="string"?u.string2buf(A):v.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,y=a.inflateSetDictionary(this.strm,M)),y===d.Z_BUF_ERROR&&H===!0&&(y=d.Z_OK,H=!1),y!==d.Z_STREAM_END&&y!==d.Z_OK)return this.onEnd(y),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&y!==d.Z_STREAM_END&&(B.avail_in!==0||_!==d.Z_FINISH&&_!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=u.utf8border(B.output,B.next_out),E=B.next_out-w,N=u.buf2string(B.output,w),B.next_out=E,B.avail_out=D-E,E&&s.arraySet(B.output,B.output,w,E,0),this.onData(N)):this.onData(s.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(H=!0)}while((0<B.avail_in||B.avail_out===0)&&y!==d.Z_STREAM_END);return y===d.Z_STREAM_END&&(_=d.Z_FINISH),_===d.Z_FINISH?(y=a.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===d.Z_OK):_!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(B.avail_out=0))},b.prototype.onData=function(S){this.chunks.push(S)},b.prototype.onEnd=function(S){S===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},i.Inflate=b,i.inflate=k,i.inflateRaw=function(S,T){return(T=T||{}).raw=!0,k(S,T)},i.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(d){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var f=h.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(d[p]=f[p])}}return d},i.shrinkBuf=function(d,h){return d.length===h?d:d.subarray?d.subarray(0,h):(d.length=h,d)};var s={arraySet:function(d,h,f,p,v){if(h.subarray&&d.subarray)d.set(h.subarray(f,f+p),v);else for(var b=0;b<p;b++)d[v+b]=h[f+b]},flattenChunks:function(d){var h,f,p,v,b,k;for(h=p=0,f=d.length;h<f;h++)p+=d[h].length;for(k=new Uint8Array(p),h=v=0,f=d.length;h<f;h++)b=d[h],k.set(b,v),v+=b.length;return k}},u={arraySet:function(d,h,f,p,v){for(var b=0;b<p;b++)d[v+b]=h[f+b]},flattenChunks:function(d){return[].concat.apply([],d)}};i.setTyped=function(d){d?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,u))},i.setTyped(a)},{}],42:[function(r,n,i){var a=r("./common"),s=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new a.Buf8(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function f(p,v){if(v<65537&&(p.subarray&&u||!p.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(p,v));for(var b="",k=0;k<v;k++)b+=String.fromCharCode(p[k]);return b}d[254]=d[254]=1,i.string2buf=function(p){var v,b,k,S,T,y=p.length,_=0;for(S=0;S<y;S++)(64512&(b=p.charCodeAt(S)))==55296&&S+1<y&&(64512&(k=p.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(k-56320),S++),_+=b<128?1:b<2048?2:b<65536?3:4;for(v=new a.Buf8(_),S=T=0;T<_;S++)(64512&(b=p.charCodeAt(S)))==55296&&S+1<y&&(64512&(k=p.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(k-56320),S++),b<128?v[T++]=b:(b<2048?v[T++]=192|b>>>6:(b<65536?v[T++]=224|b>>>12:(v[T++]=240|b>>>18,v[T++]=128|b>>>12&63),v[T++]=128|b>>>6&63),v[T++]=128|63&b);return v},i.buf2binstring=function(p){return f(p,p.length)},i.binstring2buf=function(p){for(var v=new a.Buf8(p.length),b=0,k=v.length;b<k;b++)v[b]=p.charCodeAt(b);return v},i.buf2string=function(p,v){var b,k,S,T,y=v||p.length,_=new Array(2*y);for(b=k=0;b<y;)if((S=p[b++])<128)_[k++]=S;else if(4<(T=d[S]))_[k++]=65533,b+=T-1;else{for(S&=T===2?31:T===3?15:7;1<T&&b<y;)S=S<<6|63&p[b++],T--;1<T?_[k++]=65533:S<65536?_[k++]=S:(S-=65536,_[k++]=55296|S>>10&1023,_[k++]=56320|1023&S)}return f(_,k)},i.utf8border=function(p,v){var b;for((v=v||p.length)>p.length&&(v=p.length),b=v-1;0<=b&&(192&p[b])==128;)b--;return b<0||b===0?v:b+d[p[b]]>v?b:v}},{"./common":41}],43:[function(r,n,i){n.exports=function(a,s,u,d){for(var h=65535&a|0,f=a>>>16&65535|0,p=0;u!==0;){for(u-=p=2e3<u?2e3:u;f=f+(h=h+s[d++]|0)|0,--p;);h%=65521,f%=65521}return h|f<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var a=function(){for(var s,u=[],d=0;d<256;d++){s=d;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;u[d]=s}return u}();n.exports=function(s,u,d,h){var f=a,p=h+d;s^=-1;for(var v=h;v<p;v++)s=s>>>8^f[255&(s^u[v])];return-1^s}},{}],46:[function(r,n,i){var a,s=r("../utils/common"),u=r("./trees"),d=r("./adler32"),h=r("./crc32"),f=r("./messages"),p=0,v=4,b=0,k=-2,S=-1,T=4,y=2,_=8,w=9,E=286,N=30,M=19,B=2*E+1,D=15,A=3,H=258,te=H+A+1,z=42,ae=113,P=1,ce=2,fe=3,re=4;function ue(j,K){return j.msg=f[K],K}function O(j){return(j<<1)-(4<j?9:0)}function ne(j){for(var K=j.length;0<=--K;)j[K]=0}function J(j){var K=j.state,W=K.pending;W>j.avail_out&&(W=j.avail_out),W!==0&&(s.arraySet(j.output,K.pending_buf,K.pending_out,W,j.next_out),j.next_out+=W,K.pending_out+=W,j.total_out+=W,j.avail_out-=W,K.pending-=W,K.pending===0&&(K.pending_out=0))}function G(j,K){u._tr_flush_block(j,0<=j.block_start?j.block_start:-1,j.strstart-j.block_start,K),j.block_start=j.strstart,J(j.strm)}function ve(j,K){j.pending_buf[j.pending++]=K}function de(j,K){j.pending_buf[j.pending++]=K>>>8&255,j.pending_buf[j.pending++]=255&K}function Z(j,K){var W,V,q=j.max_chain_length,ie=j.strstart,ye=j.prev_length,we=j.nice_match,he=j.strstart>j.w_size-te?j.strstart-(j.w_size-te):0,je=j.window,Pe=j.w_mask,Oe=j.prev,Ue=j.strstart+H,Ye=je[ie+ye-1],et=je[ie+ye];j.prev_length>=j.good_match&&(q>>=2),we>j.lookahead&&(we=j.lookahead);do if(je[(W=K)+ye]===et&&je[W+ye-1]===Ye&&je[W]===je[ie]&&je[++W]===je[ie+1]){ie+=2,W++;do;while(je[++ie]===je[++W]&&je[++ie]===je[++W]&&je[++ie]===je[++W]&&je[++ie]===je[++W]&&je[++ie]===je[++W]&&je[++ie]===je[++W]&&je[++ie]===je[++W]&&je[++ie]===je[++W]&&ie<Ue);if(V=H-(Ue-ie),ie=Ue-H,ye<V){if(j.match_start=K,we<=(ye=V))break;Ye=je[ie+ye-1],et=je[ie+ye]}}while((K=Oe[K&Pe])>he&&--q!=0);return ye<=j.lookahead?ye:j.lookahead}function se(j){var K,W,V,q,ie,ye,we,he,je,Pe,Oe=j.w_size;do{if(q=j.window_size-j.lookahead-j.strstart,j.strstart>=Oe+(Oe-te)){for(s.arraySet(j.window,j.window,Oe,Oe,0),j.match_start-=Oe,j.strstart-=Oe,j.block_start-=Oe,K=W=j.hash_size;V=j.head[--K],j.head[K]=Oe<=V?V-Oe:0,--W;);for(K=W=Oe;V=j.prev[--K],j.prev[K]=Oe<=V?V-Oe:0,--W;);q+=Oe}if(j.strm.avail_in===0)break;if(ye=j.strm,we=j.window,he=j.strstart+j.lookahead,je=q,Pe=void 0,Pe=ye.avail_in,je<Pe&&(Pe=je),W=Pe===0?0:(ye.avail_in-=Pe,s.arraySet(we,ye.input,ye.next_in,Pe,he),ye.state.wrap===1?ye.adler=d(ye.adler,we,Pe,he):ye.state.wrap===2&&(ye.adler=h(ye.adler,we,Pe,he)),ye.next_in+=Pe,ye.total_in+=Pe,Pe),j.lookahead+=W,j.lookahead+j.insert>=A)for(ie=j.strstart-j.insert,j.ins_h=j.window[ie],j.ins_h=(j.ins_h<<j.hash_shift^j.window[ie+1])&j.hash_mask;j.insert&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[ie+A-1])&j.hash_mask,j.prev[ie&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=ie,ie++,j.insert--,!(j.lookahead+j.insert<A)););}while(j.lookahead<te&&j.strm.avail_in!==0)}function F(j,K){for(var W,V;;){if(j.lookahead<te){if(se(j),j.lookahead<te&&K===p)return P;if(j.lookahead===0)break}if(W=0,j.lookahead>=A&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+A-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),W!==0&&j.strstart-W<=j.w_size-te&&(j.match_length=Z(j,W)),j.match_length>=A)if(V=u._tr_tally(j,j.strstart-j.match_start,j.match_length-A),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=A){for(j.match_length--;j.strstart++,j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+A-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart,--j.match_length!=0;);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+1])&j.hash_mask;else V=u._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(V&&(G(j,!1),j.strm.avail_out===0))return P}return j.insert=j.strstart<A-1?j.strstart:A-1,K===v?(G(j,!0),j.strm.avail_out===0?fe:re):j.last_lit&&(G(j,!1),j.strm.avail_out===0)?P:ce}function I(j,K){for(var W,V,q;;){if(j.lookahead<te){if(se(j),j.lookahead<te&&K===p)return P;if(j.lookahead===0)break}if(W=0,j.lookahead>=A&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+A-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=A-1,W!==0&&j.prev_length<j.max_lazy_match&&j.strstart-W<=j.w_size-te&&(j.match_length=Z(j,W),j.match_length<=5&&(j.strategy===1||j.match_length===A&&4096<j.strstart-j.match_start)&&(j.match_length=A-1)),j.prev_length>=A&&j.match_length<=j.prev_length){for(q=j.strstart+j.lookahead-A,V=u._tr_tally(j,j.strstart-1-j.prev_match,j.prev_length-A),j.lookahead-=j.prev_length-1,j.prev_length-=2;++j.strstart<=q&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+A-1])&j.hash_mask,W=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),--j.prev_length!=0;);if(j.match_available=0,j.match_length=A-1,j.strstart++,V&&(G(j,!1),j.strm.avail_out===0))return P}else if(j.match_available){if((V=u._tr_tally(j,0,j.window[j.strstart-1]))&&G(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return P}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(V=u._tr_tally(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<A-1?j.strstart:A-1,K===v?(G(j,!0),j.strm.avail_out===0?fe:re):j.last_lit&&(G(j,!1),j.strm.avail_out===0)?P:ce}function X(j,K,W,V,q){this.good_length=j,this.max_lazy=K,this.nice_length=W,this.max_chain=V,this.func=q}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*B),this.dyn_dtree=new s.Buf16(2*(2*N+1)),this.bl_tree=new s.Buf16(2*(2*M+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(D+1),this.heap=new s.Buf16(2*E+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ne(j){var K;return j&&j.state?(j.total_in=j.total_out=0,j.data_type=y,(K=j.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?z:ae,j.adler=K.wrap===2?0:1,K.last_flush=p,u._tr_init(K),b):ue(j,k)}function Le(j){var K=Ne(j);return K===b&&function(W){W.window_size=2*W.w_size,ne(W.head),W.max_lazy_match=a[W.level].max_lazy,W.good_match=a[W.level].good_length,W.nice_match=a[W.level].nice_length,W.max_chain_length=a[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=A-1,W.match_available=0,W.ins_h=0}(j.state),K}function Me(j,K,W,V,q,ie){if(!j)return k;var ye=1;if(K===S&&(K=6),V<0?(ye=0,V=-V):15<V&&(ye=2,V-=16),q<1||w<q||W!==_||V<8||15<V||K<0||9<K||ie<0||T<ie)return ue(j,k);V===8&&(V=9);var we=new Y;return(j.state=we).strm=j,we.wrap=ye,we.gzhead=null,we.w_bits=V,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=q+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+A-1)/A),we.window=new s.Buf8(2*we.w_size),we.head=new s.Buf16(we.hash_size),we.prev=new s.Buf16(we.w_size),we.lit_bufsize=1<<q+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new s.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=K,we.strategy=ie,we.method=W,Le(j)}a=[new X(0,0,0,0,function(j,K){var W=65535;for(W>j.pending_buf_size-5&&(W=j.pending_buf_size-5);;){if(j.lookahead<=1){if(se(j),j.lookahead===0&&K===p)return P;if(j.lookahead===0)break}j.strstart+=j.lookahead,j.lookahead=0;var V=j.block_start+W;if((j.strstart===0||j.strstart>=V)&&(j.lookahead=j.strstart-V,j.strstart=V,G(j,!1),j.strm.avail_out===0)||j.strstart-j.block_start>=j.w_size-te&&(G(j,!1),j.strm.avail_out===0))return P}return j.insert=0,K===v?(G(j,!0),j.strm.avail_out===0?fe:re):(j.strstart>j.block_start&&(G(j,!1),j.strm.avail_out),P)}),new X(4,4,8,4,F),new X(4,5,16,8,F),new X(4,6,32,32,F),new X(4,4,16,16,I),new X(8,16,32,32,I),new X(8,16,128,128,I),new X(8,32,128,256,I),new X(32,128,258,1024,I),new X(32,258,258,4096,I)],i.deflateInit=function(j,K){return Me(j,K,_,15,8,0)},i.deflateInit2=Me,i.deflateReset=Le,i.deflateResetKeep=Ne,i.deflateSetHeader=function(j,K){return j&&j.state?j.state.wrap!==2?k:(j.state.gzhead=K,b):k},i.deflate=function(j,K){var W,V,q,ie;if(!j||!j.state||5<K||K<0)return j?ue(j,k):k;if(V=j.state,!j.output||!j.input&&j.avail_in!==0||V.status===666&&K!==v)return ue(j,j.avail_out===0?-5:k);if(V.strm=j,W=V.last_flush,V.last_flush=K,V.status===z)if(V.wrap===2)j.adler=0,ve(V,31),ve(V,139),ve(V,8),V.gzhead?(ve(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),ve(V,255&V.gzhead.time),ve(V,V.gzhead.time>>8&255),ve(V,V.gzhead.time>>16&255),ve(V,V.gzhead.time>>24&255),ve(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),ve(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(ve(V,255&V.gzhead.extra.length),ve(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(j.adler=h(j.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(ve(V,0),ve(V,0),ve(V,0),ve(V,0),ve(V,0),ve(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),ve(V,3),V.status=ae);else{var ye=_+(V.w_bits-8<<4)<<8;ye|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(ye|=32),ye+=31-ye%31,V.status=ae,de(V,ye),V.strstart!==0&&(de(V,j.adler>>>16),de(V,65535&j.adler)),j.adler=1}if(V.status===69)if(V.gzhead.extra){for(q=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>q&&(j.adler=h(j.adler,V.pending_buf,V.pending-q,q)),J(j),q=V.pending,V.pending!==V.pending_buf_size));)ve(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>q&&(j.adler=h(j.adler,V.pending_buf,V.pending-q,q)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){q=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>q&&(j.adler=h(j.adler,V.pending_buf,V.pending-q,q)),J(j),q=V.pending,V.pending===V.pending_buf_size)){ie=1;break}ie=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,ve(V,ie)}while(ie!==0);V.gzhead.hcrc&&V.pending>q&&(j.adler=h(j.adler,V.pending_buf,V.pending-q,q)),ie===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){q=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>q&&(j.adler=h(j.adler,V.pending_buf,V.pending-q,q)),J(j),q=V.pending,V.pending===V.pending_buf_size)){ie=1;break}ie=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,ve(V,ie)}while(ie!==0);V.gzhead.hcrc&&V.pending>q&&(j.adler=h(j.adler,V.pending_buf,V.pending-q,q)),ie===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&J(j),V.pending+2<=V.pending_buf_size&&(ve(V,255&j.adler),ve(V,j.adler>>8&255),j.adler=0,V.status=ae)):V.status=ae),V.pending!==0){if(J(j),j.avail_out===0)return V.last_flush=-1,b}else if(j.avail_in===0&&O(K)<=O(W)&&K!==v)return ue(j,-5);if(V.status===666&&j.avail_in!==0)return ue(j,-5);if(j.avail_in!==0||V.lookahead!==0||K!==p&&V.status!==666){var we=V.strategy===2?function(he,je){for(var Pe;;){if(he.lookahead===0&&(se(he),he.lookahead===0)){if(je===p)return P;break}if(he.match_length=0,Pe=u._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++,Pe&&(G(he,!1),he.strm.avail_out===0))return P}return he.insert=0,je===v?(G(he,!0),he.strm.avail_out===0?fe:re):he.last_lit&&(G(he,!1),he.strm.avail_out===0)?P:ce}(V,K):V.strategy===3?function(he,je){for(var Pe,Oe,Ue,Ye,et=he.window;;){if(he.lookahead<=H){if(se(he),he.lookahead<=H&&je===p)return P;if(he.lookahead===0)break}if(he.match_length=0,he.lookahead>=A&&0<he.strstart&&(Oe=et[Ue=he.strstart-1])===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]){Ye=he.strstart+H;do;while(Oe===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]&&Oe===et[++Ue]&&Ue<Ye);he.match_length=H-(Ye-Ue),he.match_length>he.lookahead&&(he.match_length=he.lookahead)}if(he.match_length>=A?(Pe=u._tr_tally(he,1,he.match_length-A),he.lookahead-=he.match_length,he.strstart+=he.match_length,he.match_length=0):(Pe=u._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++),Pe&&(G(he,!1),he.strm.avail_out===0))return P}return he.insert=0,je===v?(G(he,!0),he.strm.avail_out===0?fe:re):he.last_lit&&(G(he,!1),he.strm.avail_out===0)?P:ce}(V,K):a[V.level].func(V,K);if(we!==fe&&we!==re||(V.status=666),we===P||we===fe)return j.avail_out===0&&(V.last_flush=-1),b;if(we===ce&&(K===1?u._tr_align(V):K!==5&&(u._tr_stored_block(V,0,0,!1),K===3&&(ne(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),J(j),j.avail_out===0))return V.last_flush=-1,b}return K!==v?b:V.wrap<=0?1:(V.wrap===2?(ve(V,255&j.adler),ve(V,j.adler>>8&255),ve(V,j.adler>>16&255),ve(V,j.adler>>24&255),ve(V,255&j.total_in),ve(V,j.total_in>>8&255),ve(V,j.total_in>>16&255),ve(V,j.total_in>>24&255)):(de(V,j.adler>>>16),de(V,65535&j.adler)),J(j),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?b:1)},i.deflateEnd=function(j){var K;return j&&j.state?(K=j.state.status)!==z&&K!==69&&K!==73&&K!==91&&K!==103&&K!==ae&&K!==666?ue(j,k):(j.state=null,K===ae?ue(j,-3):b):k},i.deflateSetDictionary=function(j,K){var W,V,q,ie,ye,we,he,je,Pe=K.length;if(!j||!j.state||(ie=(W=j.state).wrap)===2||ie===1&&W.status!==z||W.lookahead)return k;for(ie===1&&(j.adler=d(j.adler,K,Pe,0)),W.wrap=0,Pe>=W.w_size&&(ie===0&&(ne(W.head),W.strstart=0,W.block_start=0,W.insert=0),je=new s.Buf8(W.w_size),s.arraySet(je,K,Pe-W.w_size,W.w_size,0),K=je,Pe=W.w_size),ye=j.avail_in,we=j.next_in,he=j.input,j.avail_in=Pe,j.next_in=0,j.input=K,se(W);W.lookahead>=A;){for(V=W.strstart,q=W.lookahead-(A-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[V+A-1])&W.hash_mask,W.prev[V&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=V,V++,--q;);W.strstart=V,W.lookahead=A-1,se(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=A-1,W.match_available=0,j.next_in=we,j.input=he,j.avail_in=ye,W.wrap=ie,b},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(a,s){var u,d,h,f,p,v,b,k,S,T,y,_,w,E,N,M,B,D,A,H,te,z,ae,P,ce;u=a.state,d=a.next_in,P=a.input,h=d+(a.avail_in-5),f=a.next_out,ce=a.output,p=f-(s-a.avail_out),v=f+(a.avail_out-257),b=u.dmax,k=u.wsize,S=u.whave,T=u.wnext,y=u.window,_=u.hold,w=u.bits,E=u.lencode,N=u.distcode,M=(1<<u.lenbits)-1,B=(1<<u.distbits)-1;e:do{w<15&&(_+=P[d++]<<w,w+=8,_+=P[d++]<<w,w+=8),D=E[_&M];t:for(;;){if(_>>>=A=D>>>24,w-=A,(A=D>>>16&255)===0)ce[f++]=65535&D;else{if(!(16&A)){if(!(64&A)){D=E[(65535&D)+(_&(1<<A)-1)];continue t}if(32&A){u.mode=12;break e}a.msg="invalid literal/length code",u.mode=30;break e}H=65535&D,(A&=15)&&(w<A&&(_+=P[d++]<<w,w+=8),H+=_&(1<<A)-1,_>>>=A,w-=A),w<15&&(_+=P[d++]<<w,w+=8,_+=P[d++]<<w,w+=8),D=N[_&B];r:for(;;){if(_>>>=A=D>>>24,w-=A,!(16&(A=D>>>16&255))){if(!(64&A)){D=N[(65535&D)+(_&(1<<A)-1)];continue r}a.msg="invalid distance code",u.mode=30;break e}if(te=65535&D,w<(A&=15)&&(_+=P[d++]<<w,(w+=8)<A&&(_+=P[d++]<<w,w+=8)),b<(te+=_&(1<<A)-1)){a.msg="invalid distance too far back",u.mode=30;break e}if(_>>>=A,w-=A,(A=f-p)<te){if(S<(A=te-A)&&u.sane){a.msg="invalid distance too far back",u.mode=30;break e}if(ae=y,(z=0)===T){if(z+=k-A,A<H){for(H-=A;ce[f++]=y[z++],--A;);z=f-te,ae=ce}}else if(T<A){if(z+=k+T-A,(A-=T)<H){for(H-=A;ce[f++]=y[z++],--A;);if(z=0,T<H){for(H-=A=T;ce[f++]=y[z++],--A;);z=f-te,ae=ce}}}else if(z+=T-A,A<H){for(H-=A;ce[f++]=y[z++],--A;);z=f-te,ae=ce}for(;2<H;)ce[f++]=ae[z++],ce[f++]=ae[z++],ce[f++]=ae[z++],H-=3;H&&(ce[f++]=ae[z++],1<H&&(ce[f++]=ae[z++]))}else{for(z=f-te;ce[f++]=ce[z++],ce[f++]=ce[z++],ce[f++]=ce[z++],2<(H-=3););H&&(ce[f++]=ce[z++],1<H&&(ce[f++]=ce[z++]))}break}}break}}while(d<h&&f<v);d-=H=w>>3,_&=(1<<(w-=H<<3))-1,a.next_in=d,a.next_out=f,a.avail_in=d<h?h-d+5:5-(d-h),a.avail_out=f<v?v-f+257:257-(f-v),u.hold=_,u.bits=w}},{}],49:[function(r,n,i){var a=r("../utils/common"),s=r("./adler32"),u=r("./crc32"),d=r("./inffast"),h=r("./inftrees"),f=1,p=2,v=0,b=-2,k=1,S=852,T=592;function y(z){return(z>>>24&255)+(z>>>8&65280)+((65280&z)<<8)+((255&z)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(z){var ae;return z&&z.state?(ae=z.state,z.total_in=z.total_out=ae.total=0,z.msg="",ae.wrap&&(z.adler=1&ae.wrap),ae.mode=k,ae.last=0,ae.havedict=0,ae.dmax=32768,ae.head=null,ae.hold=0,ae.bits=0,ae.lencode=ae.lendyn=new a.Buf32(S),ae.distcode=ae.distdyn=new a.Buf32(T),ae.sane=1,ae.back=-1,v):b}function E(z){var ae;return z&&z.state?((ae=z.state).wsize=0,ae.whave=0,ae.wnext=0,w(z)):b}function N(z,ae){var P,ce;return z&&z.state?(ce=z.state,ae<0?(P=0,ae=-ae):(P=1+(ae>>4),ae<48&&(ae&=15)),ae&&(ae<8||15<ae)?b:(ce.window!==null&&ce.wbits!==ae&&(ce.window=null),ce.wrap=P,ce.wbits=ae,E(z))):b}function M(z,ae){var P,ce;return z?(ce=new _,(z.state=ce).window=null,(P=N(z,ae))!==v&&(z.state=null),P):b}var B,D,A=!0;function H(z){if(A){var ae;for(B=new a.Buf32(512),D=new a.Buf32(32),ae=0;ae<144;)z.lens[ae++]=8;for(;ae<256;)z.lens[ae++]=9;for(;ae<280;)z.lens[ae++]=7;for(;ae<288;)z.lens[ae++]=8;for(h(f,z.lens,0,288,B,0,z.work,{bits:9}),ae=0;ae<32;)z.lens[ae++]=5;h(p,z.lens,0,32,D,0,z.work,{bits:5}),A=!1}z.lencode=B,z.lenbits=9,z.distcode=D,z.distbits=5}function te(z,ae,P,ce){var fe,re=z.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new a.Buf8(re.wsize)),ce>=re.wsize?(a.arraySet(re.window,ae,P-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(ce<(fe=re.wsize-re.wnext)&&(fe=ce),a.arraySet(re.window,ae,P-ce,fe,re.wnext),(ce-=fe)?(a.arraySet(re.window,ae,P-ce,ce,0),re.wnext=ce,re.whave=re.wsize):(re.wnext+=fe,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=fe))),0}i.inflateReset=E,i.inflateReset2=N,i.inflateResetKeep=w,i.inflateInit=function(z){return M(z,15)},i.inflateInit2=M,i.inflate=function(z,ae){var P,ce,fe,re,ue,O,ne,J,G,ve,de,Z,se,F,I,X,Y,Ne,Le,Me,j,K,W,V,q=0,ie=new a.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return b;(P=z.state).mode===12&&(P.mode=13),ue=z.next_out,fe=z.output,ne=z.avail_out,re=z.next_in,ce=z.input,O=z.avail_in,J=P.hold,G=P.bits,ve=O,de=ne,K=v;e:for(;;)switch(P.mode){case k:if(P.wrap===0){P.mode=13;break}for(;G<16;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(2&P.wrap&&J===35615){ie[P.check=0]=255&J,ie[1]=J>>>8&255,P.check=u(P.check,ie,2,0),G=J=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&J)<<8)+(J>>8))%31){z.msg="incorrect header check",P.mode=30;break}if((15&J)!=8){z.msg="unknown compression method",P.mode=30;break}if(G-=4,j=8+(15&(J>>>=4)),P.wbits===0)P.wbits=j;else if(j>P.wbits){z.msg="invalid window size",P.mode=30;break}P.dmax=1<<j,z.adler=P.check=1,P.mode=512&J?10:12,G=J=0;break;case 2:for(;G<16;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(P.flags=J,(255&P.flags)!=8){z.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){z.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=J>>8&1),512&P.flags&&(ie[0]=255&J,ie[1]=J>>>8&255,P.check=u(P.check,ie,2,0)),G=J=0,P.mode=3;case 3:for(;G<32;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}P.head&&(P.head.time=J),512&P.flags&&(ie[0]=255&J,ie[1]=J>>>8&255,ie[2]=J>>>16&255,ie[3]=J>>>24&255,P.check=u(P.check,ie,4,0)),G=J=0,P.mode=4;case 4:for(;G<16;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}P.head&&(P.head.xflags=255&J,P.head.os=J>>8),512&P.flags&&(ie[0]=255&J,ie[1]=J>>>8&255,P.check=u(P.check,ie,2,0)),G=J=0,P.mode=5;case 5:if(1024&P.flags){for(;G<16;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}P.length=J,P.head&&(P.head.extra_len=J),512&P.flags&&(ie[0]=255&J,ie[1]=J>>>8&255,P.check=u(P.check,ie,2,0)),G=J=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(O<(Z=P.length)&&(Z=O),Z&&(P.head&&(j=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),a.arraySet(P.head.extra,ce,re,Z,j)),512&P.flags&&(P.check=u(P.check,ce,Z,re)),O-=Z,re+=Z,P.length-=Z),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(O===0)break e;for(Z=0;j=ce[re+Z++],P.head&&j&&P.length<65536&&(P.head.name+=String.fromCharCode(j)),j&&Z<O;);if(512&P.flags&&(P.check=u(P.check,ce,Z,re)),O-=Z,re+=Z,j)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(O===0)break e;for(Z=0;j=ce[re+Z++],P.head&&j&&P.length<65536&&(P.head.comment+=String.fromCharCode(j)),j&&Z<O;);if(512&P.flags&&(P.check=u(P.check,ce,Z,re)),O-=Z,re+=Z,j)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;G<16;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(J!==(65535&P.check)){z.msg="header crc mismatch",P.mode=30;break}G=J=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),z.adler=P.check=0,P.mode=12;break;case 10:for(;G<32;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}z.adler=P.check=y(J),G=J=0,P.mode=11;case 11:if(P.havedict===0)return z.next_out=ue,z.avail_out=ne,z.next_in=re,z.avail_in=O,P.hold=J,P.bits=G,2;z.adler=P.check=1,P.mode=12;case 12:if(ae===5||ae===6)break e;case 13:if(P.last){J>>>=7&G,G-=7&G,P.mode=27;break}for(;G<3;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}switch(P.last=1&J,G-=1,3&(J>>>=1)){case 0:P.mode=14;break;case 1:if(H(P),P.mode=20,ae!==6)break;J>>>=2,G-=2;break e;case 2:P.mode=17;break;case 3:z.msg="invalid block type",P.mode=30}J>>>=2,G-=2;break;case 14:for(J>>>=7&G,G-=7&G;G<32;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if((65535&J)!=(J>>>16^65535)){z.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&J,G=J=0,P.mode=15,ae===6)break e;case 15:P.mode=16;case 16:if(Z=P.length){if(O<Z&&(Z=O),ne<Z&&(Z=ne),Z===0)break e;a.arraySet(fe,ce,re,Z,ue),O-=Z,re+=Z,ne-=Z,ue+=Z,P.length-=Z;break}P.mode=12;break;case 17:for(;G<14;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(P.nlen=257+(31&J),J>>>=5,G-=5,P.ndist=1+(31&J),J>>>=5,G-=5,P.ncode=4+(15&J),J>>>=4,G-=4,286<P.nlen||30<P.ndist){z.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;G<3;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}P.lens[ye[P.have++]]=7&J,J>>>=3,G-=3}for(;P.have<19;)P.lens[ye[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,W={bits:P.lenbits},K=h(0,P.lens,0,19,P.lencode,0,P.work,W),P.lenbits=W.bits,K){z.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;X=(q=P.lencode[J&(1<<P.lenbits)-1])>>>16&255,Y=65535&q,!((I=q>>>24)<=G);){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(Y<16)J>>>=I,G-=I,P.lens[P.have++]=Y;else{if(Y===16){for(V=I+2;G<V;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(J>>>=I,G-=I,P.have===0){z.msg="invalid bit length repeat",P.mode=30;break}j=P.lens[P.have-1],Z=3+(3&J),J>>>=2,G-=2}else if(Y===17){for(V=I+3;G<V;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}G-=I,j=0,Z=3+(7&(J>>>=I)),J>>>=3,G-=3}else{for(V=I+7;G<V;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}G-=I,j=0,Z=11+(127&(J>>>=I)),J>>>=7,G-=7}if(P.have+Z>P.nlen+P.ndist){z.msg="invalid bit length repeat",P.mode=30;break}for(;Z--;)P.lens[P.have++]=j}}if(P.mode===30)break;if(P.lens[256]===0){z.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,W={bits:P.lenbits},K=h(f,P.lens,0,P.nlen,P.lencode,0,P.work,W),P.lenbits=W.bits,K){z.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,W={bits:P.distbits},K=h(p,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,W),P.distbits=W.bits,K){z.msg="invalid distances set",P.mode=30;break}if(P.mode=20,ae===6)break e;case 20:P.mode=21;case 21:if(6<=O&&258<=ne){z.next_out=ue,z.avail_out=ne,z.next_in=re,z.avail_in=O,P.hold=J,P.bits=G,d(z,de),ue=z.next_out,fe=z.output,ne=z.avail_out,re=z.next_in,ce=z.input,O=z.avail_in,J=P.hold,G=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;X=(q=P.lencode[J&(1<<P.lenbits)-1])>>>16&255,Y=65535&q,!((I=q>>>24)<=G);){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(X&&!(240&X)){for(Ne=I,Le=X,Me=Y;X=(q=P.lencode[Me+((J&(1<<Ne+Le)-1)>>Ne)])>>>16&255,Y=65535&q,!(Ne+(I=q>>>24)<=G);){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}J>>>=Ne,G-=Ne,P.back+=Ne}if(J>>>=I,G-=I,P.back+=I,P.length=Y,X===0){P.mode=26;break}if(32&X){P.back=-1,P.mode=12;break}if(64&X){z.msg="invalid literal/length code",P.mode=30;break}P.extra=15&X,P.mode=22;case 22:if(P.extra){for(V=P.extra;G<V;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}P.length+=J&(1<<P.extra)-1,J>>>=P.extra,G-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;X=(q=P.distcode[J&(1<<P.distbits)-1])>>>16&255,Y=65535&q,!((I=q>>>24)<=G);){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(!(240&X)){for(Ne=I,Le=X,Me=Y;X=(q=P.distcode[Me+((J&(1<<Ne+Le)-1)>>Ne)])>>>16&255,Y=65535&q,!(Ne+(I=q>>>24)<=G);){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}J>>>=Ne,G-=Ne,P.back+=Ne}if(J>>>=I,G-=I,P.back+=I,64&X){z.msg="invalid distance code",P.mode=30;break}P.offset=Y,P.extra=15&X,P.mode=24;case 24:if(P.extra){for(V=P.extra;G<V;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}P.offset+=J&(1<<P.extra)-1,J>>>=P.extra,G-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){z.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(ne===0)break e;if(Z=de-ne,P.offset>Z){if((Z=P.offset-Z)>P.whave&&P.sane){z.msg="invalid distance too far back",P.mode=30;break}se=Z>P.wnext?(Z-=P.wnext,P.wsize-Z):P.wnext-Z,Z>P.length&&(Z=P.length),F=P.window}else F=fe,se=ue-P.offset,Z=P.length;for(ne<Z&&(Z=ne),ne-=Z,P.length-=Z;fe[ue++]=F[se++],--Z;);P.length===0&&(P.mode=21);break;case 26:if(ne===0)break e;fe[ue++]=P.length,ne--,P.mode=21;break;case 27:if(P.wrap){for(;G<32;){if(O===0)break e;O--,J|=ce[re++]<<G,G+=8}if(de-=ne,z.total_out+=de,P.total+=de,de&&(z.adler=P.check=P.flags?u(P.check,fe,de,ue-de):s(P.check,fe,de,ue-de)),de=ne,(P.flags?J:y(J))!==P.check){z.msg="incorrect data check",P.mode=30;break}G=J=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;G<32;){if(O===0)break e;O--,J+=ce[re++]<<G,G+=8}if(J!==(4294967295&P.total)){z.msg="incorrect length check",P.mode=30;break}G=J=0}P.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return b}return z.next_out=ue,z.avail_out=ne,z.next_in=re,z.avail_in=O,P.hold=J,P.bits=G,(P.wsize||de!==z.avail_out&&P.mode<30&&(P.mode<27||ae!==4))&&te(z,z.output,z.next_out,de-z.avail_out)?(P.mode=31,-4):(ve-=z.avail_in,de-=z.avail_out,z.total_in+=ve,z.total_out+=de,P.total+=de,P.wrap&&de&&(z.adler=P.check=P.flags?u(P.check,fe,de,z.next_out-de):s(P.check,fe,de,z.next_out-de)),z.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(ve==0&&de===0||ae===4)&&K===v&&(K=-5),K)},i.inflateEnd=function(z){if(!z||!z.state)return b;var ae=z.state;return ae.window&&(ae.window=null),z.state=null,v},i.inflateGetHeader=function(z,ae){var P;return z&&z.state&&2&(P=z.state).wrap?((P.head=ae).done=!1,v):b},i.inflateSetDictionary=function(z,ae){var P,ce=ae.length;return z&&z.state?(P=z.state).wrap!==0&&P.mode!==11?b:P.mode===11&&s(1,ae,ce,0)!==P.check?-3:te(z,ae,ce,ce)?(P.mode=31,-4):(P.havedict=1,v):b},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var a=r("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,p,v,b,k,S,T,y){var _,w,E,N,M,B,D,A,H,te=y.bits,z=0,ae=0,P=0,ce=0,fe=0,re=0,ue=0,O=0,ne=0,J=0,G=null,ve=0,de=new a.Buf16(16),Z=new a.Buf16(16),se=null,F=0;for(z=0;z<=15;z++)de[z]=0;for(ae=0;ae<b;ae++)de[p[v+ae]]++;for(fe=te,ce=15;1<=ce&&de[ce]===0;ce--);if(ce<fe&&(fe=ce),ce===0)return k[S++]=20971520,k[S++]=20971520,y.bits=1,0;for(P=1;P<ce&&de[P]===0;P++);for(fe<P&&(fe=P),z=O=1;z<=15;z++)if(O<<=1,(O-=de[z])<0)return-1;if(0<O&&(f===0||ce!==1))return-1;for(Z[1]=0,z=1;z<15;z++)Z[z+1]=Z[z]+de[z];for(ae=0;ae<b;ae++)p[v+ae]!==0&&(T[Z[p[v+ae]]++]=ae);if(B=f===0?(G=se=T,19):f===1?(G=s,ve-=257,se=u,F-=257,256):(G=d,se=h,-1),z=P,M=S,ue=ae=J=0,E=-1,N=(ne=1<<(re=fe))-1,f===1&&852<ne||f===2&&592<ne)return 1;for(;;){for(D=z-ue,H=T[ae]<B?(A=0,T[ae]):T[ae]>B?(A=se[F+T[ae]],G[ve+T[ae]]):(A=96,0),_=1<<z-ue,P=w=1<<re;k[M+(J>>ue)+(w-=_)]=D<<24|A<<16|H|0,w!==0;);for(_=1<<z-1;J&_;)_>>=1;if(_!==0?(J&=_-1,J+=_):J=0,ae++,--de[z]==0){if(z===ce)break;z=p[v+T[ae]]}if(fe<z&&(J&N)!==E){for(ue===0&&(ue=fe),M+=P,O=1<<(re=z-ue);re+ue<ce&&!((O-=de[re+ue])<=0);)re++,O<<=1;if(ne+=1<<re,f===1&&852<ne||f===2&&592<ne)return 1;k[E=J&N]=fe<<24|re<<16|M-S|0}}return J!==0&&(k[M+J]=z-ue<<24|64<<16|0),y.bits=fe,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var a=r("../utils/common"),s=0,u=1;function d(q){for(var ie=q.length;0<=--ie;)q[ie]=0}var h=0,f=29,p=256,v=p+1+f,b=30,k=19,S=2*v+1,T=15,y=16,_=7,w=256,E=16,N=17,M=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=new Array(2*(v+2));d(te);var z=new Array(2*b);d(z);var ae=new Array(512);d(ae);var P=new Array(256);d(P);var ce=new Array(f);d(ce);var fe,re,ue,O=new Array(b);function ne(q,ie,ye,we,he){this.static_tree=q,this.extra_bits=ie,this.extra_base=ye,this.elems=we,this.max_length=he,this.has_stree=q&&q.length}function J(q,ie){this.dyn_tree=q,this.max_code=0,this.stat_desc=ie}function G(q){return q<256?ae[q]:ae[256+(q>>>7)]}function ve(q,ie){q.pending_buf[q.pending++]=255&ie,q.pending_buf[q.pending++]=ie>>>8&255}function de(q,ie,ye){q.bi_valid>y-ye?(q.bi_buf|=ie<<q.bi_valid&65535,ve(q,q.bi_buf),q.bi_buf=ie>>y-q.bi_valid,q.bi_valid+=ye-y):(q.bi_buf|=ie<<q.bi_valid&65535,q.bi_valid+=ye)}function Z(q,ie,ye){de(q,ye[2*ie],ye[2*ie+1])}function se(q,ie){for(var ye=0;ye|=1&q,q>>>=1,ye<<=1,0<--ie;);return ye>>>1}function F(q,ie,ye){var we,he,je=new Array(T+1),Pe=0;for(we=1;we<=T;we++)je[we]=Pe=Pe+ye[we-1]<<1;for(he=0;he<=ie;he++){var Oe=q[2*he+1];Oe!==0&&(q[2*he]=se(je[Oe]++,Oe))}}function I(q){var ie;for(ie=0;ie<v;ie++)q.dyn_ltree[2*ie]=0;for(ie=0;ie<b;ie++)q.dyn_dtree[2*ie]=0;for(ie=0;ie<k;ie++)q.bl_tree[2*ie]=0;q.dyn_ltree[2*w]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function X(q){8<q.bi_valid?ve(q,q.bi_buf):0<q.bi_valid&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function Y(q,ie,ye,we){var he=2*ie,je=2*ye;return q[he]<q[je]||q[he]===q[je]&&we[ie]<=we[ye]}function Ne(q,ie,ye){for(var we=q.heap[ye],he=ye<<1;he<=q.heap_len&&(he<q.heap_len&&Y(ie,q.heap[he+1],q.heap[he],q.depth)&&he++,!Y(ie,we,q.heap[he],q.depth));)q.heap[ye]=q.heap[he],ye=he,he<<=1;q.heap[ye]=we}function Le(q,ie,ye){var we,he,je,Pe,Oe=0;if(q.last_lit!==0)for(;we=q.pending_buf[q.d_buf+2*Oe]<<8|q.pending_buf[q.d_buf+2*Oe+1],he=q.pending_buf[q.l_buf+Oe],Oe++,we===0?Z(q,he,ie):(Z(q,(je=P[he])+p+1,ie),(Pe=B[je])!==0&&de(q,he-=ce[je],Pe),Z(q,je=G(--we),ye),(Pe=D[je])!==0&&de(q,we-=O[je],Pe)),Oe<q.last_lit;);Z(q,w,ie)}function Me(q,ie){var ye,we,he,je=ie.dyn_tree,Pe=ie.stat_desc.static_tree,Oe=ie.stat_desc.has_stree,Ue=ie.stat_desc.elems,Ye=-1;for(q.heap_len=0,q.heap_max=S,ye=0;ye<Ue;ye++)je[2*ye]!==0?(q.heap[++q.heap_len]=Ye=ye,q.depth[ye]=0):je[2*ye+1]=0;for(;q.heap_len<2;)je[2*(he=q.heap[++q.heap_len]=Ye<2?++Ye:0)]=1,q.depth[he]=0,q.opt_len--,Oe&&(q.static_len-=Pe[2*he+1]);for(ie.max_code=Ye,ye=q.heap_len>>1;1<=ye;ye--)Ne(q,je,ye);for(he=Ue;ye=q.heap[1],q.heap[1]=q.heap[q.heap_len--],Ne(q,je,1),we=q.heap[1],q.heap[--q.heap_max]=ye,q.heap[--q.heap_max]=we,je[2*he]=je[2*ye]+je[2*we],q.depth[he]=(q.depth[ye]>=q.depth[we]?q.depth[ye]:q.depth[we])+1,je[2*ye+1]=je[2*we+1]=he,q.heap[1]=he++,Ne(q,je,1),2<=q.heap_len;);q.heap[--q.heap_max]=q.heap[1],function(et,Wt){var Ar,fr,Kt,Ae,Te,xe,Ce=Wt.dyn_tree,Ve=Wt.max_code,He=Wt.stat_desc.static_tree,ct=Wt.stat_desc.has_stree,Ke=Wt.stat_desc.extra_bits,vt=Wt.stat_desc.extra_base,wt=Wt.stat_desc.max_length,Ct=0;for(Ae=0;Ae<=T;Ae++)et.bl_count[Ae]=0;for(Ce[2*et.heap[et.heap_max]+1]=0,Ar=et.heap_max+1;Ar<S;Ar++)wt<(Ae=Ce[2*Ce[2*(fr=et.heap[Ar])+1]+1]+1)&&(Ae=wt,Ct++),Ce[2*fr+1]=Ae,Ve<fr||(et.bl_count[Ae]++,Te=0,vt<=fr&&(Te=Ke[fr-vt]),xe=Ce[2*fr],et.opt_len+=xe*(Ae+Te),ct&&(et.static_len+=xe*(He[2*fr+1]+Te)));if(Ct!==0){do{for(Ae=wt-1;et.bl_count[Ae]===0;)Ae--;et.bl_count[Ae]--,et.bl_count[Ae+1]+=2,et.bl_count[wt]--,Ct-=2}while(0<Ct);for(Ae=wt;Ae!==0;Ae--)for(fr=et.bl_count[Ae];fr!==0;)Ve<(Kt=et.heap[--Ar])||(Ce[2*Kt+1]!==Ae&&(et.opt_len+=(Ae-Ce[2*Kt+1])*Ce[2*Kt],Ce[2*Kt+1]=Ae),fr--)}}(q,ie),F(je,Ye,q.bl_count)}function j(q,ie,ye){var we,he,je=-1,Pe=ie[1],Oe=0,Ue=7,Ye=4;for(Pe===0&&(Ue=138,Ye=3),ie[2*(ye+1)+1]=65535,we=0;we<=ye;we++)he=Pe,Pe=ie[2*(we+1)+1],++Oe<Ue&&he===Pe||(Oe<Ye?q.bl_tree[2*he]+=Oe:he!==0?(he!==je&&q.bl_tree[2*he]++,q.bl_tree[2*E]++):Oe<=10?q.bl_tree[2*N]++:q.bl_tree[2*M]++,je=he,Ye=(Oe=0)===Pe?(Ue=138,3):he===Pe?(Ue=6,3):(Ue=7,4))}function K(q,ie,ye){var we,he,je=-1,Pe=ie[1],Oe=0,Ue=7,Ye=4;for(Pe===0&&(Ue=138,Ye=3),we=0;we<=ye;we++)if(he=Pe,Pe=ie[2*(we+1)+1],!(++Oe<Ue&&he===Pe)){if(Oe<Ye)for(;Z(q,he,q.bl_tree),--Oe!=0;);else he!==0?(he!==je&&(Z(q,he,q.bl_tree),Oe--),Z(q,E,q.bl_tree),de(q,Oe-3,2)):Oe<=10?(Z(q,N,q.bl_tree),de(q,Oe-3,3)):(Z(q,M,q.bl_tree),de(q,Oe-11,7));je=he,Ye=(Oe=0)===Pe?(Ue=138,3):he===Pe?(Ue=6,3):(Ue=7,4)}}d(O);var W=!1;function V(q,ie,ye,we){de(q,(h<<1)+(we?1:0),3),function(he,je,Pe,Oe){X(he),ve(he,Pe),ve(he,~Pe),a.arraySet(he.pending_buf,he.window,je,Pe,he.pending),he.pending+=Pe}(q,ie,ye)}i._tr_init=function(q){W||(function(){var ie,ye,we,he,je,Pe=new Array(T+1);for(he=we=0;he<f-1;he++)for(ce[he]=we,ie=0;ie<1<<B[he];ie++)P[we++]=he;for(P[we-1]=he,he=je=0;he<16;he++)for(O[he]=je,ie=0;ie<1<<D[he];ie++)ae[je++]=he;for(je>>=7;he<b;he++)for(O[he]=je<<7,ie=0;ie<1<<D[he]-7;ie++)ae[256+je++]=he;for(ye=0;ye<=T;ye++)Pe[ye]=0;for(ie=0;ie<=143;)te[2*ie+1]=8,ie++,Pe[8]++;for(;ie<=255;)te[2*ie+1]=9,ie++,Pe[9]++;for(;ie<=279;)te[2*ie+1]=7,ie++,Pe[7]++;for(;ie<=287;)te[2*ie+1]=8,ie++,Pe[8]++;for(F(te,v+1,Pe),ie=0;ie<b;ie++)z[2*ie+1]=5,z[2*ie]=se(ie,5);fe=new ne(te,B,p+1,v,T),re=new ne(z,D,0,b,T),ue=new ne(new Array(0),A,0,k,_)}(),W=!0),q.l_desc=new J(q.dyn_ltree,fe),q.d_desc=new J(q.dyn_dtree,re),q.bl_desc=new J(q.bl_tree,ue),q.bi_buf=0,q.bi_valid=0,I(q)},i._tr_stored_block=V,i._tr_flush_block=function(q,ie,ye,we){var he,je,Pe=0;0<q.level?(q.strm.data_type===2&&(q.strm.data_type=function(Oe){var Ue,Ye=4093624447;for(Ue=0;Ue<=31;Ue++,Ye>>>=1)if(1&Ye&&Oe.dyn_ltree[2*Ue]!==0)return s;if(Oe.dyn_ltree[18]!==0||Oe.dyn_ltree[20]!==0||Oe.dyn_ltree[26]!==0)return u;for(Ue=32;Ue<p;Ue++)if(Oe.dyn_ltree[2*Ue]!==0)return u;return s}(q)),Me(q,q.l_desc),Me(q,q.d_desc),Pe=function(Oe){var Ue;for(j(Oe,Oe.dyn_ltree,Oe.l_desc.max_code),j(Oe,Oe.dyn_dtree,Oe.d_desc.max_code),Me(Oe,Oe.bl_desc),Ue=k-1;3<=Ue&&Oe.bl_tree[2*H[Ue]+1]===0;Ue--);return Oe.opt_len+=3*(Ue+1)+5+5+4,Ue}(q),he=q.opt_len+3+7>>>3,(je=q.static_len+3+7>>>3)<=he&&(he=je)):he=je=ye+5,ye+4<=he&&ie!==-1?V(q,ie,ye,we):q.strategy===4||je===he?(de(q,2+(we?1:0),3),Le(q,te,z)):(de(q,4+(we?1:0),3),function(Oe,Ue,Ye,et){var Wt;for(de(Oe,Ue-257,5),de(Oe,Ye-1,5),de(Oe,et-4,4),Wt=0;Wt<et;Wt++)de(Oe,Oe.bl_tree[2*H[Wt]+1],3);K(Oe,Oe.dyn_ltree,Ue-1),K(Oe,Oe.dyn_dtree,Ye-1)}(q,q.l_desc.max_code+1,q.d_desc.max_code+1,Pe+1),Le(q,q.dyn_ltree,q.dyn_dtree)),I(q),we&&X(q)},i._tr_tally=function(q,ie,ye){return q.pending_buf[q.d_buf+2*q.last_lit]=ie>>>8&255,q.pending_buf[q.d_buf+2*q.last_lit+1]=255&ie,q.pending_buf[q.l_buf+q.last_lit]=255&ye,q.last_lit++,ie===0?q.dyn_ltree[2*ye]++:(q.matches++,ie--,q.dyn_ltree[2*(P[ye]+p+1)]++,q.dyn_dtree[2*G(ie)]++),q.last_lit===q.lit_bufsize-1},i._tr_align=function(q){de(q,2,3),Z(q,w,te),function(ie){ie.bi_valid===16?(ve(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(q)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(a){(function(s,u){if(!s.setImmediate){var d,h,f,p,v=1,b={},k=!1,S=s.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(s);T=T&&T.setTimeout?T:s,d={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){_(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,N=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=N,E}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",w,!1):s.attachEvent("onmessage",w),function(E){s.postMessage(p+E,"*")}):s.MessageChannel?((f=new MessageChannel).port1.onmessage=function(E){_(E.data)},function(E){f.port2.postMessage(E)}):S&&"onreadystatechange"in S.createElement("script")?(h=S.documentElement,function(E){var N=S.createElement("script");N.onreadystatechange=function(){_(E),N.onreadystatechange=null,h.removeChild(N),N=null},h.appendChild(N)}):function(E){setTimeout(_,0,E)},T.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var N=new Array(arguments.length-1),M=0;M<N.length;M++)N[M]=arguments[M+1];var B={callback:E,args:N};return b[v]=B,d(v),v++},T.clearImmediate=y}function y(E){delete b[E]}function _(E){if(k)setTimeout(_,0,E);else{var N=b[E];if(N){k=!0;try{(function(M){var B=M.callback,D=M.args;switch(D.length){case 0:B();break;case 1:B(D[0]);break;case 2:B(D[0],D[1]);break;case 3:B(D[0],D[1],D[2]);break;default:B.apply(u,D)}})(N)}finally{y(E),k=!1}}}}function w(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(p)===0&&_(+E.data.slice(p.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Qe<"u"?Qe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(G1);var H1=G1.exports;const n3=Dc(H1);function Bi(e,t){return Array.from(e.getElementsByTagName(t))}function Wh(e){return e[0]==="#"?e:`#${e}`}function i3(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function In(e){return e==null||e.normalize(),e&&e.textContent||""}function Fi(e,t,r){const n=e.getElementsByTagName(t);return n.length?n[0]:null}function vi(e,t,r){const n={};if(!e)return n;const i=e.getElementsByTagName(t),a=i.length?i[0]:null;return a&&r?r(a,n):n}function bl(e,t,r){const n=In(Fi(e,t));return n&&r?r(n)||{}:{}}function qs(e,t,r){const n=parseFloat(In(Fi(e,t)));if(!isNaN(n))return r&&r(n),n}function W1(e,t){const r={};for(const n of t)bl(e,n,i=>{r[n]=i});return r}function Z1(e){return(e==null?void 0:e.nodeType)===1}function K1(e,t){const r={},n=t=="stroke"||t==="fill"?t:t+"-color";return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[n]="#"+e:e.length===8&&(r[t+"-opacity"]=parseInt(e.substring(0,2),16)/255,r[n]="#"+e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),r}function Zh(e,t,r){const n={};return qs(e,t,i=>{n[r]=i}),n}function c0(e,t){return vi(e,"color",r=>K1(In(r),t))}function X1(e){return vi(e,"Icon",(t,r)=>(bl(t,"href",n=>{r.icon=n}),r))}function a3(e){return vi(e,"IconStyle",t=>Object.assign(c0(t,"icon"),Zh(t,"scale","icon-scale"),Zh(t,"heading","icon-heading"),vi(t,"hotSpot",r=>{const n=parseFloat(r.getAttribute("x")||""),i=parseFloat(r.getAttribute("y")||""),a=r.getAttribute("xunits")||"",s=r.getAttribute("yunits")||"";return!isNaN(n)&&!isNaN(i)?{"icon-offset":[n,i],"icon-offset-units":[a,s]}:{}}),X1(t)))}function o3(e){return vi(e,"LabelStyle",t=>Object.assign(c0(t,"label"),Zh(t,"scale","label-scale")))}function s3(e){return vi(e,"LineStyle",t=>Object.assign(c0(t,"stroke"),Zh(t,"width","stroke-width")))}function l3(e){return vi(e,"PolyStyle",(t,r)=>Object.assign(r,vi(t,"color",n=>K1(In(n),"fill")),bl(t,"fill",n=>{if(n==="0")return{"fill-opacity":0}}),bl(t,"outline",n=>{if(n==="0")return{"stroke-opacity":0}})))}function d0(e){return Object.assign({},l3(e),s3(e),o3(e),a3(e))}const js=e=>Number(e),Fg={string:e=>e,int:js,uint:js,short:js,ushort:js,float:js,double:js,bool:e=>!!e};function J1(e,t){return vi(e,"ExtendedData",(r,n)=>{for(const i of Bi(r,"Data"))n[i.getAttribute("name")||""]=In(Fi(i,"value"));for(const i of Bi(r,"SimpleData")){const a=i.getAttribute("name")||"",s=t[a]||Fg.string;n[a]=s(In(i))}return n})}function Y1(e){const t=Fi(e,"description");for(const r of Array.from((t==null?void 0:t.childNodes)||[]))if(r.nodeType===4)return{description:{"@type":"html",value:In(r)}};return{}}function Q1(e){return vi(e,"TimeSpan",t=>({timespan:{begin:In(Fi(t,"begin")),end:In(Fi(t,"end"))}}))}function eE(e){return vi(e,"TimeStamp",t=>({timestamp:In(Fi(t,"when"))}))}function tE(e,t){return bl(e,"styleUrl",r=>(r=Wh(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}const u3=/\s*/g,c3=/^\s*|\s*$/g,d3=/\s+/;function rE(e){return e.replace(u3,"").split(",").map(parseFloat).filter(t=>!isNaN(t)).slice(0,3)}function zg(e){return e.replace(c3,"").split(d3).map(rE).filter(t=>t.length>=2)}function h3(e){let t=Bi(e,"coord");t.length===0&&(t=i3(e,"coord","*"));const r=t.map(n=>In(n).split(" ").map(parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:Bi(e,"when").map(n=>In(n))}}function nE(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let n=!0;for(let i=0;i<Math.max(t.length,r.length);i++)if(t[i]!==r[i]){n=!1;break}return n?e:e.concat([e[0]])}function ph(e){return In(Fi(e,"coordinates"))}function iE(e){let t=[],r=[];for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes.item(n);if(Z1(i))switch(i.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const a=iE(i);t=t.concat(a.geometries),r=r.concat(a.coordTimes);break}case"Point":{const a=rE(ph(i));a.length>=2&&t.push({type:"Point",coordinates:a});break}case"LinearRing":case"LineString":{const a=zg(ph(i));a.length>=2&&t.push({type:"LineString",coordinates:a});break}case"Polygon":{const a=[];for(const s of Bi(i,"LinearRing")){const u=nE(zg(ph(s)));u.length>=4&&a.push(u)}a.length&&t.push({type:"Polygon",coordinates:a});break}case"Track":case"gx:Track":{const a=h3(i);if(!a)break;const{times:s,geometry:u}=a;t.push(u),s.length&&r.push(s);break}}}return{geometries:t,coordTimes:r}}function f3(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function p3(e,t,r,n){var h;const{coordTimes:i,geometries:a}=iE(e),s=f3(a);if(!s&&n.skipNullGeometry)return null;const u={type:"Feature",geometry:s,properties:Object.assign(W1(e,["name","address","visibility","open","phoneNumber","description"]),Y1(e),tE(e,t),d0(e),J1(e,r),Q1(e),eE(e),i.length?{coordinateProperties:{times:i.length===1?i[0]:i}}:{})};((h=u.properties)==null?void 0:h.visibility)!==void 0&&(u.properties.visibility=u.properties.visibility!=="0");const d=e.getAttribute("id");return d!==null&&d!==""&&(u.id=d),u}function m3(e){return Fi(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[nE(zg(ph(e)))]}}:y3(e)}const g3=Math.PI/180;function v3(e,t,r){const n=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(i=>{const a=i[1]-n[1],s=i[0]-n[0],u=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)),d=Math.atan2(a,s)+r*g3;return[n[0]+Math.cos(d)*u,n[1]+Math.sin(d)*u]})]}function y3(e){const t=Fi(e,"LatLonBox");if(t){const r=qs(t,"north"),n=qs(t,"west"),i=qs(t,"east"),a=qs(t,"south"),s=qs(t,"rotation");if(typeof r=="number"&&typeof a=="number"&&typeof n=="number"&&typeof i=="number"){const u=[n,a,i,r];let d=[[[n,r],[i,r],[i,a],[n,a],[n,r]]];return typeof s=="number"&&(d=v3(u,d,s)),{bbox:u,geometry:{type:"Polygon",coordinates:d}}}}return null}function x3(e,t,r,n){var d;const i=m3(e),a=(i==null?void 0:i.geometry)||null;if(!a&&n.skipNullGeometry)return null;const s={type:"Feature",geometry:a,properties:Object.assign({"@geometry-type":"groundoverlay"},W1(e,["name","address","visibility","open","phoneNumber","description"]),Y1(e),tE(e,t),d0(e),X1(e),J1(e,r),Q1(e),eE(e))};i!=null&&i.bbox&&(s.bbox=i.bbox),((d=s.properties)==null?void 0:d.visibility)!==void 0&&(s.properties.visibility=s.properties.visibility!=="0");const u=e.getAttribute("id");return u!==null&&u!==""&&(s.id=u),s}function b3(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&Z1(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),Wh(t||"")}function _3(e){const t={};for(const r of Bi(e,"Style"))t[b3(r)]=d0(r);for(const r of Bi(e,"StyleMap")){const n=Wh(r.getAttribute("id")||"");bl(r,"styleUrl",i=>{i=Wh(i),t[i]&&(t[n]=t[i])})}return t}function w3(e){const t={};for(const r of Bi(e,"SimpleField"))t[r.getAttribute("name")||""]=Fg[r.getAttribute("type")||""]||Fg.string;return t}function*E3(e,t={skipNullGeometry:!1}){const r=_3(e),n=w3(e);for(const i of Bi(e,"Placemark")){const a=p3(i,r,n,t);a&&(yield a)}for(const i of Bi(e,"GroundOverlay")){const a=x3(i,r,n,t);a&&(yield a)}}function aE(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(E3(e,t))}}var oE={};oE.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""};var h0={},Ug=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,sb=new RegExp("[\\-\\.0-9"+Ug.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),lb=new RegExp("^"+Ug.source+sb.source+"*(?::"+Ug.source+sb.source+"*)?$"),wu=0,ya=1,Ds=2,Eu=3,Os=4,Rs=5,Cu=6,Hd=7;function _l(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,_l)}_l.prototype=new Error;_l.prototype.name=_l.name;function sE(){}sE.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),lE(t,t={}),C3(e,t,r,n,this.errorHandler),n.endDocument()}};function C3(e,t,r,n,i){function a(fe){if(fe>65535){fe-=65536;var re=55296+(fe>>10),ue=56320+(fe&1023);return String.fromCharCode(re,ue)}else return String.fromCharCode(fe)}function s(fe){var re=fe.slice(1,-1);return re in r?r[re]:re.charAt(0)==="#"?a(parseInt(re.substr(1).replace("x","0x"))):(i.error("entity not found:"+fe),fe)}function u(fe){if(fe>S){var re=e.substring(S,fe).replace(/&#?\w+;/g,s);v&&d(S),n.characters(re,0,fe-S),S=fe}}function d(fe,re){for(;fe>=f&&(re=p.exec(e));)h=re.index,f=h+re[0].length,v.lineNumber++;v.columnNumber=fe-h+1}for(var h=0,f=0,p=/.*(?:\r\n?|\n)|.*$/g,v=n.locator,b=[{currentNSMap:t}],k={},S=0;;){try{var T=e.indexOf("<",S);if(T<0){if(!e.substr(S).match(/^\s*$/)){var y=n.doc,_=y.createTextNode(e.substr(S));y.appendChild(_),n.currentElement=_}return}switch(T>S&&u(T),e.charAt(T+1)){case"/":var te=e.indexOf(">",T+3),w=e.substring(T+2,te),E=b.pop();te<0?(w=e.substring(T+2).replace(/[\s<].*/,""),i.error("end tag name: "+w+" is not complete:"+E.tagName),te=T+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),i.error("end tag name: "+w+" maybe not complete"),te=T+1+w.length);var N=E.localNSMap,M=E.tagName==w,B=M||E.tagName&&E.tagName.toLowerCase()==w.toLowerCase();if(B){if(n.endElement(E.uri,E.localName,w),N)for(var D in N)n.endPrefixMapping(D);M||i.fatalError("end tag name: "+w+" is not match the current start tagName:"+E.tagName)}else b.push(E);te++;break;case"?":v&&d(T),te=k3(e,T,n);break;case"!":v&&d(T),te=N3(e,T,n,i);break;default:v&&d(T);var A=new uE,H=b[b.length-1].currentNSMap,te=S3(e,T,A,H,s,i),z=A.length;if(!A.closed&&T3(e,te,A.tagName,k)&&(A.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),v&&z){for(var ae=ub(v,{}),P=0;P<z;P++){var ce=A[P];d(ce.offset),ce.locator=ub(v,{})}n.locator=ae,cb(A,n,H)&&b.push(A),n.locator=v}else cb(A,n,H)&&b.push(A);A.uri==="http://www.w3.org/1999/xhtml"&&!A.closed?te=A3(e,te,A.tagName,s,n):te++}}catch(fe){if(fe instanceof _l)throw fe;i.error("element parse error: "+fe),te=-1}te>S?S=te:u(Math.max(T,S)+1)}}function ub(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function S3(e,t,r,n,i,a){function s(v,b,k){v in r.attributeNames&&a.fatalError("Attribute "+v+" redefined"),r.addValue(v,b,k)}for(var u,d,h=++t,f=wu;;){var p=e.charAt(h);switch(p){case"=":if(f===ya)u=e.slice(t,h),f=Eu;else if(f===Ds)f=Eu;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===Eu||f===ya)if(f===ya&&(a.warning('attribute value must after "="'),u=e.slice(t,h)),t=h+1,h=e.indexOf(p,t),h>0)d=e.slice(t,h).replace(/&#?\w+;/g,i),s(u,d,t-1),f=Rs;else throw new Error("attribute value no end '"+p+"' match");else if(f==Os)d=e.slice(t,h).replace(/&#?\w+;/g,i),s(u,d,t),a.warning('attribute "'+u+'" missed start quot('+p+")!!"),t=h+1,f=Rs;else throw new Error('attribute value must after "="');break;case"/":switch(f){case wu:r.setTagName(e.slice(t,h));case Rs:case Cu:case Hd:f=Hd,r.closed=!0;case Os:case ya:case Ds:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),f==wu&&r.setTagName(e.slice(t,h)),h;case">":switch(f){case wu:r.setTagName(e.slice(t,h));case Rs:case Cu:case Hd:break;case Os:case ya:d=e.slice(t,h),d.slice(-1)==="/"&&(r.closed=!0,d=d.slice(0,-1));case Ds:f===Ds&&(d=u),f==Os?(a.warning('attribute "'+d+'" missed quot(")!'),s(u,d.replace(/&#?\w+;/g,i),t)):((n[""]!=="http://www.w3.org/1999/xhtml"||!d.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),s(d,d,t));break;case Eu:throw new Error("attribute value missed!!")}return h;case"":p=" ";default:if(p<=" ")switch(f){case wu:r.setTagName(e.slice(t,h)),f=Cu;break;case ya:u=e.slice(t,h),f=Ds;break;case Os:var d=e.slice(t,h).replace(/&#?\w+;/g,i);a.warning('attribute "'+d+'" missed quot(")!!'),s(u,d,t);case Rs:f=Cu;break}else switch(f){case Ds:r.tagName,(n[""]!=="http://www.w3.org/1999/xhtml"||!u.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+u+'" missed value!! "'+u+'" instead2!!'),s(u,u,t),t=h,f=ya;break;case Rs:a.warning('attribute space is required"'+u+'"!!');case Cu:f=ya,t=h;break;case Eu:f=Os,t=h;break;case Hd:throw new Error("elements closed character '/' and '>' must be connected to")}}h++}}function cb(e,t,r){for(var n=e.tagName,i=null,p=e.length;p--;){var a=e[p],s=a.qName,u=a.value,v=s.indexOf(":");if(v>0)var d=a.prefix=s.slice(0,v),h=s.slice(v+1),f=d==="xmlns"&&h;else h=s,d=null,f=s==="xmlns"&&"";a.localName=h,f!==!1&&(i==null&&(i={},lE(r,r={})),r[f]=i[f]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,u))}for(var p=e.length;p--;){a=e[p];var d=a.prefix;d&&(d==="xml"&&(a.uri="http://www.w3.org/XML/1998/namespace"),d!=="xmlns"&&(a.uri=r[d||""]))}var v=n.indexOf(":");v>0?(d=e.prefix=n.slice(0,v),h=e.localName=n.slice(v+1)):(d=null,h=e.localName=n);var b=e.uri=r[d||""];if(t.startElement(b,h,n,e),e.closed){if(t.endElement(b,h,n),i)for(d in i)t.endPrefixMapping(d)}else return e.currentNSMap=r,e.localNSMap=i,!0}function A3(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var a=e.indexOf("</"+r+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),a)}return t+1}function T3(e,t,r,n){var i=n[r];return i==null&&(i=e.lastIndexOf("</"+r+">"),i<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}function lE(e,t){for(var r in e)t[r]=e[r]}function N3(e,t,r,n){var i=e.charAt(t+2);switch(i){case"-":if(e.charAt(t+3)==="-"){var a=e.indexOf("-->",t+4);return a>t?(r.comment(e,t+4,a-t-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(e.substr(t+3,6)=="CDATA["){var a=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,a-t-9),r.endCDATA(),a+3}var s=j3(e,t),u=s.length;if(u>1&&/!doctype/i.test(s[0][0])){var d=s[1][0],h=!1,f=!1;u>3&&(/^public$/i.test(s[2][0])?(h=s[3][0],f=u>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var p=s[u-1];return r.startDTD(d,h,f),r.endDTD(),p.index+p[0].length}}return-1}function k3(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function uE(){this.attributeNames={}}uE.prototype={setTagName:function(e){if(!lb.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!lb.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function j3(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);r=i.exec(e);)if(n.push(r),r[1])return n}h0.XMLReader=sE;h0.ParseError=_l;var Fc={};function zc(e,t){for(var r in e)t[r]=e[r]}function _n(e,t){var r=e.prototype;if(!(r instanceof t)){let n=function(){};n.prototype=t.prototype,n=new n,zc(r,n),e.prototype=r=n}r.constructor!=e&&(typeof e!="function"&&console.error("unknow Class:"+e),r.constructor=e)}var D3="http://www.w3.org/1999/xhtml",wn={},mi=wn.ELEMENT_NODE=1,wl=wn.ATTRIBUTE_NODE=2,Kh=wn.TEXT_NODE=3,cE=wn.CDATA_SECTION_NODE=4,dE=wn.ENTITY_REFERENCE_NODE=5,O3=wn.ENTITY_NODE=6,hE=wn.PROCESSING_INSTRUCTION_NODE=7,fE=wn.COMMENT_NODE=8,pE=wn.DOCUMENT_NODE=9,mE=wn.DOCUMENT_TYPE_NODE=10,oa=wn.DOCUMENT_FRAGMENT_NODE=11,R3=wn.NOTATION_NODE=12,$r={},jr={};$r.INDEX_SIZE_ERR=(jr[1]="Index size error",1);$r.DOMSTRING_SIZE_ERR=(jr[2]="DOMString size error",2);var I3=$r.HIERARCHY_REQUEST_ERR=(jr[3]="Hierarchy request error",3);$r.WRONG_DOCUMENT_ERR=(jr[4]="Wrong document",4);$r.INVALID_CHARACTER_ERR=(jr[5]="Invalid character",5);$r.NO_DATA_ALLOWED_ERR=(jr[6]="No data allowed",6);$r.NO_MODIFICATION_ALLOWED_ERR=(jr[7]="No modification allowed",7);var L3=$r.NOT_FOUND_ERR=(jr[8]="Not found",8);$r.NOT_SUPPORTED_ERR=(jr[9]="Not supported",9);var db=$r.INUSE_ATTRIBUTE_ERR=(jr[10]="Attribute in use",10);$r.INVALID_STATE_ERR=(jr[11]="Invalid state",11);$r.SYNTAX_ERR=(jr[12]="Syntax error",12);$r.INVALID_MODIFICATION_ERR=(jr[13]="Invalid modification",13);$r.NAMESPACE_ERR=(jr[14]="Invalid namespace",14);$r.INVALID_ACCESS_ERR=(jr[15]="Invalid access",15);function Zo(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,jr[e]),this.message=jr[e],Error.captureStackTrace&&Error.captureStackTrace(this,Zo);return r.code=e,t&&(this.message=this.message+": "+t),r}Zo.prototype=Error.prototype;zc($r,Zo);function Ga(){}Ga.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)rl(this[n],r,e,t);return r.join("")}};function El(e,t){this._node=e,this._refresh=t,f0(this)}function f0(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);AE(e,"length",r.length),zc(r,e),e._inc=t}}El.prototype.item=function(e){return f0(this),this[e]};_n(El,Ga);function Xh(){}function gE(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function hb(e,t,r,n){if(n?t[gE(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&yE(i,e,n),P3(i,e,r))}}function fb(e,t,r){var n=gE(t,r);if(n>=0){for(var i=t.length-1;n<i;)t[n]=t[++n];if(t.length=i,e){var a=e.ownerDocument;a&&(yE(a,e,r),r.ownerElement=null)}}else throw Zo(L3,new Error(e.tagName+"@"+r))}Xh.prototype={length:0,item:Ga.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Zo(db);var r=this.getNamedItem(e.nodeName);return hb(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t=e.ownerElement,r;if(t&&t!=this._ownerElement)throw new Zo(db);return r=this.getNamedItemNS(e.namespaceURI,e.localName),hb(this._ownerElement,this,e,r),r},removeNamedItem:function(e){var t=this.getNamedItem(e);return fb(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return fb(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}};function vE(e){if(this._features={},e)for(var t in e)this._features=e[t]}vE.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!!(r&&(!t||t in r))},createDocument:function(e,t,r){var n=new Uc;if(n.implementation=this,n.childNodes=new Ga,n.doctype=r,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new y0;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}};function Gr(){}Gr.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return bE(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return xE(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return qg(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Kh&&e.nodeType==Kh?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r){for(var n in r)if(r[n]==e)return n}t=t.nodeType==wl?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==wl?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function pb(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}zc(wn,Gr);zc(wn,Gr.prototype);function gc(e,t){if(t(e))return!0;if(e=e.firstChild)do if(gc(e,t))return!0;while(e=e.nextSibling)}function Uc(){}function P3(e,t,r){e&&e._inc++;var n=r.namespaceURI;n=="http://www.w3.org/2000/xmlns/"&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function yE(e,t,r,n){e&&e._inc++;var i=r.namespaceURI;i=="http://www.w3.org/2000/xmlns/"&&delete t._nsMap[r.prefix?r.localName:""]}function p0(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,a=0;i;)n[a++]=i,i=i.nextSibling;n.length=a}}}function xE(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,p0(e.ownerDocument,e),t}function bE(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===oa){var i=t.firstChild;if(i==null)return t;var a=t.lastChild}else i=a=t;var s=r?r.previousSibling:e.lastChild;i.previousSibling=s,a.nextSibling=r,s?s.nextSibling=i:e.firstChild=i,r==null?e.lastChild=a:r.previousSibling=a;do i.parentNode=e;while(i!==a&&(i=i.nextSibling));return p0(e.ownerDocument||e,e),t.nodeType==oa&&(t.firstChild=t.lastChild=null),t}function M3(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t);var n=e.lastChild}var n=e.lastChild;return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,p0(e.ownerDocument,e,t),t}Uc.prototype={nodeName:"#document",nodeType:pE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==oa){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return this.documentElement==null&&e.nodeType==mi&&(this.documentElement=e),bE(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),xE(this,e)},importNode:function(e,t){return SE(this,e,t)},getElementById:function(e){var t=null;return gc(this.documentElement,function(r){if(r.nodeType==mi&&r.getAttribute("id")==e)return t=r,!0}),t},getElementsByClassName:function(e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return new El(this,function(r){var n=[];return gc(r.documentElement,function(i){i!==r&&i.nodeType==mi&&t.test(i.getAttribute("class"))&&n.push(i)}),n})},createElement:function(e){var t=new Cl;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new Ga;var r=t.attributes=new Xh;return r._ownerElement=t,t},createDocumentFragment:function(){var e=new Rf;return e.ownerDocument=this,e.childNodes=new Ga,e},createTextNode:function(e){var t=new m0;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new g0;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new v0;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new b0;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new Jh;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new x0;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new Cl,n=t.split(":"),i=r.attributes=new Xh;return r.childNodes=new Ga,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new Jh,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}};_n(Uc,Gr);function Cl(){this._nsMap={}}Cl.prototype={nodeType:mi,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===oa?this.insertBefore(e,null):M3(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new El(this,function(t){var r=[];return gc(t,function(n){n!==t&&n.nodeType==mi&&(e==="*"||n.tagName==e)&&r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new El(this,function(r){var n=[];return gc(r,function(i){i!==r&&i.nodeType===mi&&(e==="*"||i.namespaceURI===e)&&(t==="*"||i.localName==t)&&n.push(i)}),n})}};Uc.prototype.getElementsByTagName=Cl.prototype.getElementsByTagName;Uc.prototype.getElementsByTagNameNS=Cl.prototype.getElementsByTagNameNS;_n(Cl,Gr);function Jh(){}Jh.prototype.nodeType=wl;_n(Jh,Gr);function qc(){}qc.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(jr[I3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){var n=this.data.substring(0,e),i=this.data.substring(e+t);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};_n(qc,Gr);function m0(){}m0.prototype={nodeName:"#text",nodeType:Kh,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};_n(m0,qc);function g0(){}g0.prototype={nodeName:"#comment",nodeType:fE};_n(g0,qc);function v0(){}v0.prototype={nodeName:"#cdata-section",nodeType:cE};_n(v0,qc);function y0(){}y0.prototype.nodeType=mE;_n(y0,Gr);function _E(){}_E.prototype.nodeType=R3;_n(_E,Gr);function wE(){}wE.prototype.nodeType=O3;_n(wE,Gr);function x0(){}x0.prototype.nodeType=dE;_n(x0,Gr);function Rf(){}Rf.prototype.nodeName="#document-fragment";Rf.prototype.nodeType=oa;_n(Rf,Gr);function b0(){}b0.prototype.nodeType=hE;_n(b0,Gr);function EE(){}EE.prototype.serializeToString=function(e,t,r){return CE.call(e,t,r)};Gr.prototype.toString=CE;function CE(e,t){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,a=n.namespaceURI;if(a&&i==null){var i=n.lookupPrefix(a);if(i==null)var s=[{namespace:a,prefix:null}]}return rl(this,r,e,t,s),r.join("")}function mb(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!n&&!i||n==="xml"&&i==="http://www.w3.org/XML/1998/namespace"||i=="http://www.w3.org/2000/xmlns/")return!1;for(var a=r.length;a--;){var s=r[a];if(s.prefix==n)return s.namespace!=i}return!0}function rl(e,t,r,n,i){if(n)if(e=n(e),e){if(typeof e=="string"){t.push(e);return}}else return;switch(e.nodeType){case mi:i||(i=[]),i.length;var a=e.attributes,s=a.length,b=e.firstChild,u=e.tagName;r=D3===e.namespaceURI||r,t.push("<",u);for(var d=0;d<s;d++){var h=a.item(d);h.prefix=="xmlns"?i.push({prefix:h.localName,namespace:h.value}):h.nodeName=="xmlns"&&i.push({prefix:"",namespace:h.value})}for(var d=0;d<s;d++){var h=a.item(d);if(mb(h,r,i)){var f=h.prefix||"",p=h.namespaceURI,v=f?" xmlns:"+f:" xmlns";t.push(v,'="',p,'"'),i.push({prefix:f,namespace:p})}rl(h,t,r,n,i)}if(mb(e,r,i)){var f=e.prefix||"",p=e.namespaceURI;if(p){var v=f?" xmlns:"+f:" xmlns";t.push(v,'="',p,'"'),i.push({prefix:f,namespace:p})}}if(b||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),r&&/^script$/i.test(u))for(;b;)b.data?t.push(b.data):rl(b,t,r,n,i),b=b.nextSibling;else for(;b;)rl(b,t,r,n,i),b=b.nextSibling;t.push("</",u,">")}else t.push("/>");return;case pE:case oa:for(var b=e.firstChild;b;)rl(b,t,r,n,i),b=b.nextSibling;return;case wl:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,pb),'"');case Kh:return t.push(e.data.replace(/[<&]/g,pb).replace(/]]>/g,"]]&gt;"));case cE:return t.push("<![CDATA[",e.data,"]]>");case fE:return t.push("<!--",e.data,"-->");case mE:var k=e.publicId,S=e.systemId;if(t.push("<!DOCTYPE ",e.name),k)t.push(" PUBLIC ",k),S&&S!="."&&t.push(" ",S),t.push(">");else if(S&&S!=".")t.push(" SYSTEM ",S,">");else{var T=e.internalSubset;T&&t.push(" [",T,"]"),t.push(">")}return;case hE:return t.push("<?",e.target," ",e.data,"?>");case dE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function SE(e,t,r){var n;switch(t.nodeType){case mi:n=t.cloneNode(!1),n.ownerDocument=e;case oa:break;case wl:r=!0;break}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(SE(e,i,r)),i=i.nextSibling;return n}function qg(e,t,r){var n=new t.constructor;for(var i in t){var a=t[i];typeof a!="object"&&a!=n[i]&&(n[i]=a)}switch(t.childNodes&&(n.childNodes=new Ga),n.ownerDocument=e,n.nodeType){case mi:var s=t.attributes,u=n.attributes=new Xh,d=s.length;u._ownerElement=n;for(var h=0;h<d;h++)n.setAttributeNode(qg(e,s.item(h),!0));break;case wl:r=!0}if(r)for(var f=t.firstChild;f;)n.appendChild(qg(e,f,r)),f=f.nextSibling;return n}function AE(e,t,r){e[t]=r}try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case mi:case oa:var r=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}};Object.defineProperty(El.prototype,"length",{get:function(){return f0(this),this.$$length}}),Object.defineProperty(Gr.prototype,"textContent",{get:function(){return e(this)},set:function(t){switch(this.nodeType){case mi:case oa:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),AE=function(t,r,n){t["$$"+r]=n}}}catch{}Fc.Node=Gr;Fc.DOMException=Zo;Fc.DOMImplementation=vE;Fc.XMLSerializer=EE;function TE(e){this.options=e||{locator:{}}}TE.prototype.parseFromString=function(e,t){var r=this.options,n=new z3,i=r.domBuilder||new If,a=r.errorHandler,s=r.locator,u=r.xmlns||{},d=/\/x?html?$/.test(t),h=d?F3.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&i.setDocumentLocator(s),n.errorHandler=B3(a,i,s),n.domBuilder=r.domBuilder||i,d&&(u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e&&typeof e=="string"?n.parse(e,u,h):n.errorHandler.error("invalid doc source"),i.doc};function B3(e,t,r){if(!e){if(t instanceof If)return t;e=t}var n={},i=e instanceof Function;r=r||{};function a(s){var u=e[s];!u&&i&&(u=e.length==2?function(d){e(s,d)}:e),n[s]=u&&function(d){u("[xmldom "+s+"]	"+d+Vg(r))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function If(){this.cdata=!1}function Is(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}If.prototype={startDocument:function(){this.doc=new q3().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,a=i.createElementNS(e,r||t),s=n.length;Wd(this,a),this.currentElement=a,this.locator&&Is(this.locator,a);for(var u=0;u<s;u++){var e=n.getURI(u),d=n.getValue(u),r=n.getQName(u),h=i.createAttributeNS(e,r);this.locator&&Is(n.getLocator(u),h),h.value=h.nodeValue=d,a.setAttributeNode(h)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&Is(this.locator,r),Wd(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=gb.apply(this,arguments),e){if(this.cdata)var n=this.doc.createCDATASection(e);else var n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&Is(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=gb.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&Is(this.locator,n),Wd(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&Is(this.locator,i),Wd(this,i)}},warning:function(e){console.warn("[xmldom warning]	"+e,Vg(this.locator))},error:function(e){console.error("[xmldom error]	"+e,Vg(this.locator))},fatalError:function(e){throw new U3(e,this.locator)}};function Vg(e){if(e)return`
@`+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function gb(e,t,r){return typeof e=="string"?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){If.prototype[e]=function(){return null}});function Wd(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}var F3=oE,NE=h0,z3=NE.XMLReader,U3=NE.ParseError,q3=Fc.DOMImplementation,kE=TE;async function V3(e){const t=[],r=[".jpg",".jpeg",".png",".gif",".bmp",".tiff",".tif",".webp"];for(const[n,i]of Object.entries(e.files))if(!i.dir){const a=n.toLowerCase();if(r.some(u=>a.endsWith(u)))try{const u=await i.async("blob");let d="image/jpeg";a.endsWith(".png")?d="image/png":a.endsWith(".gif")?d="image/gif":a.endsWith(".bmp")?d="image/bmp":a.endsWith(".tiff")||a.endsWith(".tif")?d="image/tiff":a.endsWith(".webp")&&(d="image/webp");const h=new Blob([u],{type:d}),f=URL.createObjectURL(h);console.log(`Extracted image: ${n} (${d}) - URL: ${f}`),t.push({name:n,url:f,blob:h})}catch(u){console.warn(`Failed to extract image ${n}:`,u)}}return console.log(`Total images extracted: ${t.length}`),t.forEach(n=>console.log(`- ${n.name}: ${n.url}`)),t}function jE(e,t){const r=[],n=e.getElementsByTagName("GroundOverlay");console.log(`Found ${n.length} GroundOverlay elements`);for(let i=0;i<n.length;i++){const a=n[i];try{const s=Ea(a,"name")||`Ground Overlay ${i+1}`,u=Ea(a,"description")||"",d=a.getElementsByTagName("Icon");let h="";if(d.length>0){const _=d[0].getElementsByTagName("href");_.length>0&&(h=_[0].textContent||"")}if(console.log(`Extracted image: - URL: ${h}`),console.log(`KML : Processing overlay ${s} with image reference: ${h}`),h&&!h.startsWith("http")){const _=t.find(w=>w.name===h||w.name.endsWith(h)||w.name.toLowerCase()===h.toLowerCase()||w.name.toLowerCase().endsWith(h.toLowerCase())||w.name.replace(/\\/g,"/")===h.replace(/\\/g,"/")||w.name.replace(/\\/g,"/").endsWith(h.replace(/\\/g,"/")));if(_)h=_.url,console.log(`Matched image for overlay ${s}: ${h}`);else{console.warn(`No matching image found for overlay ${s} with reference ${h}`),console.log("Available images:",t.map(E=>E.name)),console.log("Looking for:",h);const w=t.find(E=>{var B,D;const N=((B=E.name.split("/").pop())==null?void 0:B.toLowerCase())||"",M=((D=h.split("/").pop())==null?void 0:D.toLowerCase())||"";return N===M});w&&(h=w.url,console.log(`Found flexible match for overlay ${s}: ${h}`))}}const f=Yh(a,"LatLonBox");if(!f){console.warn(`No LatLonBox found for overlay ${s}`);continue}if(!h){console.warn(`No image URL found for overlay ${s}`);continue}const p=parseFloat(Ea(f,"north")||"0"),v=parseFloat(Ea(f,"south")||"0"),b=parseFloat(Ea(f,"east")||"0"),k=parseFloat(Ea(f,"west")||"0"),S=parseFloat(Ea(f,"rotation")||"0");console.log(`Overlay ${s} bounds:`,{north:p,south:v,east:b,west:k});const T=Yh(a,"color");let y=1;if(T){const _=T.textContent;_&&_.length===8&&(y=parseInt(_.substring(0,2),16)/255)}r.push({id:`ground-overlay-${i}`,name:s,description:u,imageUrl:h,bounds:{north:p,south:v,east:b,west:k},rotation:S,opacity:y}),console.log(`Successfully added overlay ${s}`)}catch(s){console.warn(`Failed to parse ground overlay ${i}:`,s)}}return console.log(`Total ground overlays parsed: ${r.length}`),r}function Ea(e,t,r){const n=e.getElementsByTagName(t);if(n.length>0)return n[0].textContent}function Yh(e,t){const r=e.getElementsByTagName(t);if(r.length>0)return r[0]}async function $3(e){try{const r=await new n3().loadAsync(e),n=[],i=await V3(r);for(const[a,s]of Object.entries(r.files))if(a.toLowerCase().endsWith(".kml")&&!s.dir)try{const u=await s.async("text"),h=new kE().parseFromString(u,"text/xml"),f=Yh(h,"parsererror");if(f){console.warn(`Error parsing KML file ${a}:`,f.textContent);continue}const p=jE(h,i),v=aE(h);v&&v.features&&v.features.length>0?n.push({name:`${e.name}/${a}`,data:v,type:"kmz",images:i,groundOverlays:p}):p.length>0&&n.push({name:`${e.name}/${a}`,data:{type:"FeatureCollection",features:[]},type:"kmz",images:i,groundOverlays:p})}catch(u){console.error(`Error processing KML file ${a} from KMZ:`,u)}if(n.length===0)throw new Error("No valid KML files found in KMZ archive");return n}catch(t){throw console.error("Error processing KMZ file:",t),new Error(`Failed to process KMZ file: ${t instanceof Error?t.message:"Unknown error"}`)}}async function DE(e){if(!e)throw new Error("No file provided.");if(!e.name)throw new Error("File has no name property.");const t=e.name.toLowerCase();try{if(t.endsWith(".kmz"))return await $3(e);if(t.endsWith(".kml")){const r=await e.text(),i=new kE().parseFromString(r,"text/xml"),a=Yh(i,"parsererror");if(a)throw new Error(`Invalid KML file: ${a.textContent}`);const s=[],u=i.getElementsByTagName("Icon");for(let f=0;f<u.length;f++){const p=u[f],v=Ea(p,"href");v&&s.push({name:v,url:v,blob:new Blob})}const d=jE(i,s),h=aE(i);if((!h||!h.features||h.features.length===0)&&d.length===0)throw new Error("KML file contains no valid features or ground overlays");return[{name:e.name,data:h||{type:"FeatureCollection",features:[]},type:"kml",groundOverlays:d}]}else if(t.endsWith(".geojson")||t.endsWith(".json")){const r=await e.text(),n=JSON.parse(r);if(!n||typeof n!="object")throw new Error("Invalid GeoJSON format");if(!n.features&&n.type!=="Feature"&&n.type!=="FeatureCollection")throw new Error("File does not contain valid GeoJSON features");return[{name:e.name,data:n,type:"geojson"}]}else throw new Error("Unsupported file format. Please use KML, KMZ, or GeoJSON files.")}catch(r){throw console.error(`Error processing geo file ${e.name}:`,r),r}}function vb(e){const t=e.name.toLowerCase();return[".kml",".kmz",".geojson",".json"].some(n=>t.endsWith(n))}function G3(){return".kml,.kmz,.geojson,.json,application/vnd.google-earth.kml+xml,application/vnd.google-earth.kmz,application/geo+json"}function Qh(e){e.forEach(t=>{URL.revokeObjectURL(t.url)})}function OE({mapType:e,onChange:t}){return l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("span",{className:"text-sm font-medium",children:"Map Type:"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("label",{className:"flex items-center space-x-1",children:[l.jsx("input",{type:"radio",value:"standard",checked:e==="standard",onChange:()=>t("standard"),className:"form-radio text-blue-500"}),l.jsx("span",{className:"text-sm",children:"Standard"})]}),l.jsxs("label",{className:"flex items-center space-x-1",children:[l.jsx("input",{type:"radio",value:"satellite",checked:e==="satellite",onChange:()=>t("satellite"),className:"form-radio text-blue-500"}),l.jsx("span",{className:"text-sm",children:"Satellite"})]})]})]})}function H3(e){return e instanceof File}async function W3(e){if(H3(e))return e;try{const t=await fetch(e.url);if(!t.ok)throw new Error(`Failed to fetch file from ${e.url}: ${t.statusText}`);const r=await t.blob();return new File([r],e.name,{type:e.type})}catch(t){throw console.error("Error converting FileMetadata to File:",t),t}}async function RE(e){return Promise.all(e.map(t=>W3(t)))}function Z3({geoFiles:e}){const[t,r]=ge.useState([]),[n,i]=ge.useState([[46.227638,2.213749]]),[a,s]=ge.useState(5),[u,d]=ge.useState(!1),[h,f]=ge.useState(null),[p,v]=ge.useState([]),[b,k]=ge.useState("standard"),S=["#3388ff","#ff4444","#33cc33","#ff9900","#9933cc","#00ccff","#ff66b2","#99cc00","#ff8533","#6666ff"],T=ge.useCallback((E,N)=>{var M,B;(M=E.properties)!=null&&M.description?N.bindPopup(E.properties.description):(B=E.properties)!=null&&B.name&&N.bindPopup(E.properties.name)},[]),y=ge.useCallback(E=>{const N=[];return!E||!E.features||E.features.forEach(M=>{if(M.geometry&&M.geometry.coordinates){const B=M.geometry.coordinates;switch(M.geometry.type){case"Point":Array.isArray(B)&&B.length>=2&&N.push([B[1],B[0]]);break;case"LineString":Array.isArray(B)&&B.forEach(D=>{Array.isArray(D)&&D.length>=2&&N.push([D[1],D[0]])});break;case"Polygon":Array.isArray(B)&&B[0]&&B[0].forEach(D=>{Array.isArray(D)&&D.length>=2&&N.push([D[1],D[0]])});break;case"MultiPolygon":Array.isArray(B)&&B.forEach(D=>{Array.isArray(D)&&D[0]&&D[0].forEach(A=>{Array.isArray(A)&&A.length>=2&&N.push([A[1],A[0]])})});break}}}),N},[]),_=ge.useCallback(E=>{const N=[];return E.forEach(M=>{N.push([M.bounds.north,M.bounds.east]),N.push([M.bounds.south,M.bounds.west]),N.push([M.bounds.north,M.bounds.west]),N.push([M.bounds.south,M.bounds.east])}),N},[]);ge.useEffect(()=>()=>{p.forEach(E=>{E&&E.length>0&&Qh(E)})},[p]),ge.useEffect(()=>{(async()=>{if(e.length===0){r([]),i([[46.227638,2.213749]]),s(5),f(null),p.forEach(N=>{N&&N.length>0&&Qh(N)}),v([]);return}d(!0),f(null);try{const N=await RE(e),M=[],B=[];let D=[],A=0;for(const H of N)try{(await DE(H)).forEach(z=>{const ae=y(z.data);if(D=[...D,...ae],z.groundOverlays&&z.groundOverlays.length>0){const P=_(z.groundOverlays);D=[...D,...P]}M.push({id:`layer-${A}`,name:z.name,data:z.data,color:S[A%S.length],type:z.type,groundOverlays:z.groundOverlays}),z.images&&B.push(z.images),A++})}catch(te){console.error(`Error processing file ${H.name}:`,te),f(z=>z?`${z}
${H.name}: ${te}`:`${H.name}: ${te}`)}D.length>0&&(i(D),s(12)),r(M),v(B)}catch(N){console.error("Error loading geo files:",N),f("Erreur lors du chargement des fichiers gographiques")}finally{d(!1)}})()},[e,y,_]);const w=n.length>1?[n.reduce((E,N)=>E+N[0],0)/n.length,n.reduce((E,N)=>E+N[1],0)/n.length]:[46.227638,2.213749];return l.jsxs("div",{className:"space-y-4",children:[h&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:l.jsxs("div",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Erreurs de traitement :"}),l.jsx("pre",{className:"mt-1 whitespace-pre-wrap",children:h})]})}),u&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsxs("div",{className:"text-sm text-blue-700 flex items-center gap-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Traitement des fichiers gographiques..."]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(OE,{mapType:b,onChange:k}),l.jsx("div",{className:"h-96 w-full rounded-lg overflow-hidden border border-gray-300",children:l.jsxs(V1,{center:w,zoom:a,style:{height:"100%",width:"100%"},children:[l.jsx($1,{url:b==="standard"?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:b==="standard"?'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors':'&copy; <a href="https://www.arcgis.com/home/item.html?id=10df227921484f18b483e4ef61416222">Esri</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),l.jsx($a,{position:"topright",children:t.map(E=>l.jsxs(qo.Fragment,{children:[E.data.features&&E.data.features.length>0&&l.jsx($a.Overlay,{name:`${E.name} (${E.type.toUpperCase()})`,checked:!0,children:l.jsx(z1,{data:E.data,style:()=>({color:E.color,weight:3,opacity:1,fillColor:E.color,fillOpacity:.2}),onEachFeature:T})}),E.groundOverlays&&E.groundOverlays.map((N,M)=>l.jsx($a.Overlay,{name:`${N.name} (Ground Overlay)`,checked:!0,children:l.jsx(U1,{url:N.imageUrl,bounds:[[N.bounds.south,N.bounds.west],[N.bounds.north,N.bounds.east]],opacity:N.opacity||1})},`${E.id}-overlay-${M}`))]},E.id))})]})})]}),t.length>0&&l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("strong",{children:"Fichiers chargs :"}),l.jsx("ul",{className:"mt-1 space-y-1",children:t.map(E=>l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),l.jsxs("span",{children:[E.name," (",E.type.toUpperCase(),")"]}),E.groundOverlays&&E.groundOverlays.length>0&&l.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[E.groundOverlays.length," overlay",E.groundOverlays.length>1?"s":""]}),E.data.features&&E.data.features.length>0&&l.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[E.data.features.length," feature",E.data.features.length>1?"s":""]})]},E.id))}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:l.jsxs("details",{children:[l.jsx("summary",{children:"Debug Info"}),l.jsx("pre",{className:"mt-1 text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(t.map(E=>{var N,M,B;return{name:E.name,type:E.type,featuresCount:((N=E.data.features)==null?void 0:N.length)||0,overlaysCount:((M=E.groundOverlays)==null?void 0:M.length)||0,overlays:(B=E.groundOverlays)==null?void 0:B.map(D=>({name:D.name,hasImageUrl:!!D.imageUrl,imageUrl:D.imageUrl,bounds:D.bounds}))}}),null,2)})]})})]})]})}var Zd={REACT_APP_TINYMCE_KEY:"vbikzojy6tlatfe84lh5akvxbm6l9h5n4texf7bnfnz4y9y3"};const K3=["VLOS  Vol en vue","EVLOS  Vol en vue Etendue","BVLOS  Vol hors vue"];function X3({operation:e,onChange:t}){const r=async u=>{const d=u.target.files;if(d){const h=Array.from(d).filter(vb);if(h.length!==d.length){const f=Array.from(d).filter(p=>!vb(p));alert(`Fichiers non supports ignors: ${f.map(p=>p.name).join(", ")}
Formats supports: KML, KMZ, GeoJSON`)}h.length>0&&t({...e,geoFiles:[...e.geoFiles||[],...h]})}},n=u=>{const d=[...e.geoFiles||[]];d.splice(u,1),t({...e,geoFiles:d})},i=ge.useMemo(()=>({operationType:e.operationType===null,dangerousGoods:e.dangerousGoods===null,droppingMaterials:e.droppingMaterials===null,controlMultipleDrones:e.controlMultipleDrones===null&&e.controlMultipleDronesNumber<=0,dayNightOperation:e.dayNightOperation===null,operationStartTime:!e.operationStartTime.trim(),operationEndTime:!e.operationEndTime.trim(),maxDistanceFromPilot:e.maxDistanceFromPilot<=0,visualObserversCount:e.visualObserversCount<=0,pilotCompetency:!e.pilotCompetency.trim(),geoFiles:!e.geoFiles||e.geoFiles.length===0}),[e]),a=u=>`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${i[u]?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,s=u=>`block text-sm font-medium ${i[u]?"text-red-600":"text-gray-700"}`;return l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Informations sur l'opration"}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Informations gnrales"}),l.jsxs("div",{children:[l.jsx(Ee,{text:`Expliquez brivement le type d'opration prvu et donnez une description gnrale du lieu.
(par exemple,  inspection des lignes lectriques en zone rurale ,  livraison mdicale par drone en banlieue , etc.)`,children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description simple de l'opration"})}),l.jsx(Ru,{apiKey:Zd.REACT_APP_TINYMCE_KEY,init:{menubar:!1,toolbar:"undo redo | bold italic strikethrough | bullist numlist | alignleft aligncenter alignright outdent indent",height:300},value:e.SimpleDescription,onEditorChange:u=>t({...e,SimpleDescription:u})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:`VLOS : le tlpilote maintien une ligne de vue visuelle avec l'UAS  tout moment. 
            Les oprations EVLOS permettent le vol d'un UAS au-del de la vue visuelle du tlpilote en utilisant des ' observateurs entrans ' pour garder l'aronef dans leur champ de vision. 
            BVLOS : l'exploitation d'un UAS au-del d'une distance o le pilote  distance est en mesure de ragir ou d'viter d'autres utilisateurs de l'espace arien par des moyens visuels directs`,children:l.jsx("label",{className:s("operationType"),children:"Type d'opration *"})}),l.jsxs("select",{value:e.operationType,onChange:u=>t({...e,operationType:u.target.value||null,visualObserversCount:u.target.value==="EVLOS  Vol en vue Etendue"?e.visualObserversCount:0}),className:a("operationType"),children:[l.jsx("option",{value:"",children:"Slectionner un type d'opration"}),K3.map(u=>l.jsx("option",{value:u,children:u},u))]})]}),e.operationType==="EVLOS  Vol en vue Etendue"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Penser  prciser sur la cartographie un fichier kml prcisant la position des observateurs.",children:l.jsx("label",{className:s("visualObserversCount"),children:"Nombre d'observateurs visuels *"})}),l.jsx("input",{type:"number",value:e.visualObserversCount,min:0,onChange:u=>t({...e,visualObserversCount:parseInt(u.target.value)||0}),className:a("visualObserversCount")})]}):l.jsx("div",{children:""}),l.jsxs("div",{children:[l.jsx(Ee,{text:"GM1 Article 2 - Definitions (11)",children:l.jsx("label",{className:s("dangerousGoods"),children:"Transport de marchandises dangereuses *"})}),l.jsxs("select",{value:e.dangerousGoods,onChange:u=>t({...e,dangerousGoods:u.target.value||null}),className:a("dangerousGoods"),children:[l.jsx("option",{value:"",children:"Slectionner une rponse"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),e.dangerousGoods==="OUI"?l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:`Transport de marchandises dangereuses. Cochez cette case si l'UAS transporte des marchandises dangereuses (par exemple, des articles ou substances dangereux, des explosifs, des gaz, des substances inflammables, radioactives, toxiques ou corrosives, etc.).
                Si cette case est coche, dressez la liste des marchandises dangereuses transportes et fournissez les procdures relatives au transport de marchandises dangereuses, en expliquant comment vous vous assurez qu'aucun risque supplmentaire n'est pos  des tiers. Joignez les preuves ou les documents justificatifs (par exemple : autorisations, procdures de manutention, instructions).`,children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description des marchandises dangereuses transportes *"})}),l.jsx(Ru,{apiKey:Zd.REACT_APP_TINYMCE_KEY,init:{menubar:!1,toolbar:"undo redo | bold italic strikethrough | bullist numlist | alignleft aligncenter alignright outdent indent",height:300},value:e.dangerousGoodsDescription,onEditorChange:u=>t({...e,dangerousGoodsDescription:u})})]}):l.jsx("div",{children:""}),l.jsxs("div",{children:[l.jsx(Ee,{text:"GM1 Article 2 - Definitions (11)",children:l.jsx("label",{className:s("droppingMaterials"),children:"Largage *"})}),l.jsxs("select",{value:e.droppingMaterials,onChange:u=>t({...e,droppingMaterials:u.target.value||null}),className:a("droppingMaterials"),children:[l.jsx("option",{value:"",children:"Slectionner une rponse"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),e.droppingMaterials==="OUI"?l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:`Largage de matriels. Cochez cette case si l'opration comprend le largage ou le dversement de matriels/liquides depuis l'UA (par exemple, livraison de nourriture ou de colis, pulvrisation de produits chimiques).
              Si OUI, dcrivez les matriels largus et rfrencez les documents justificatifs (autorisations, procdures de manipulation, instructions) afin d'expliquer comment l'opration peut tre effectue en toute scurit.`,children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description des matriels largus *"})}),l.jsx(Ru,{apiKey:Zd.REACT_APP_TINYMCE_KEY,init:{menubar:!1,toolbar:"undo redo | bold italic strikethrough | bullist numlist | alignleft aligncenter alignright outdent indent",height:300},value:e.droppingMaterialsDescription,onEditorChange:u=>t({...e,droppingMaterialsDescription:u})})]}):l.jsx("div",{children:""}),l.jsxs("div",{children:[l.jsx(Ee,{text:"GM1 Article 2 - Definitions (11)",children:l.jsx("label",{className:s("controlMultipleDrones"),children:"Le pilote contrle-t-il plusieurs UA simultanment ? *"})}),l.jsxs("select",{value:e.controlMultipleDrones,onChange:u=>t({...e,controlMultipleDrones:u.target.value||null}),className:a("controlMultipleDrones"),children:[l.jsx("option",{value:"",children:"Slectionner une rponse"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),e.controlMultipleDrones==="OUI"?l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:"Nombre d'UA contrls par un seul pilote",children:l.jsx("label",{className:s("controlMultipleDronesNumber"),children:"Nombre d'UA contrls par un seul pilote *"})}),l.jsx("input",{type:"number",value:e.controlMultipleDronesNumber,min:0,onChange:u=>t({...e,controlMultipleDronesNumber:parseFloat(u.target.value)||0}),className:a("controlMultipleDronesNumber")}),l.jsx(Ee,{text:"Si cette option est slectionne, prcisez le nombre d'UA contrls par un seul pilote. Cette option n'est disponible que si le concepteur a indiqu que l'UAS a t conu avec un niveau d'automatisation rduisant l'intervention du pilote  distance.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pcisez le nombre d'UA contrls par un seul pilote *"})}),l.jsx(Ru,{apiKey:Zd.REACT_APP_TINYMCE_KEY,init:{menubar:!1,toolbar:"undo redo | bold italic strikethrough | bullist numlist | alignleft aligncenter alignright outdent indent",height:300},value:e.controlMultipleDronesDescription,onEditorChange:u=>t({...e,controlMultipleDronesDescription:u})})]}):l.jsx("div",{children:""}),l.jsxs("div",{children:[l.jsx("label",{className:s("dayNightOperation"),children:"Opration de jour ou de nuit *"}),l.jsxs("select",{value:e.dayNightOperation,onChange:u=>t({...e,dayNightOperation:u.target.value||null}),className:a("dayNightOperation"),children:[l.jsx("option",{value:"",children:"Slectionner une rponse"}),l.jsx("option",{value:"Jour",children:"Jour"}),l.jsx("option",{value:"Nuit",children:"Nuit"}),l.jsx("option",{value:"Jour & Nuit",children:"Jour & Nuit"})]})]}),l.jsx("div",{children:""}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Heure Locale",children:l.jsx("label",{className:s("operationStartTime"),children:"Heure de Dmarrage des oprations *"})}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{type:"time",value:e.operationStartTime,onChange:u=>t({...e,operationStartTime:u.target.value}),className:`block w-full pr-10 rounded-md shadow-sm focus:ring-blue-500 ${i.operationStartTime?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`}),l.jsx(Uh,{className:"absolute right-3 top-2 h-5 w-5 text-gray-400"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Heure Locale",children:l.jsx("label",{className:s("operationEndTime"),children:"Heure de Fin des oprations *"})}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{type:"time",value:e.operationEndTime,onChange:u=>t({...e,operationEndTime:u.target.value}),className:`block w-full pr-10 rounded-md shadow-sm focus:ring-blue-500 ${i.operationEndTime?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`}),l.jsx(Uh,{className:"absolute right-3 top-2 h-5 w-5 text-gray-400"})]})]})]}),l.jsx("h3",{className:"text-lg font-medium mt-8",children:"Cohrence des plans de vol et distance de scurit multi-oprateurs"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Indiquer la distance maximale en m  prendre en compte par rapport  la zone d'volution",children:l.jsx("label",{className:s("maxDistanceFromPilot"),children:"Distance maximale par rapport au tlpilote (m) *"})}),l.jsx("input",{type:"number",value:e.maxDistanceFromPilot,min:0,onChange:u=>t({...e,maxDistanceFromPilot:parseFloat(u.target.value)||0}),className:a("maxDistanceFromPilot")})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:'Prciser le type de certificat de tlpilote, si ncessaire ; sinon, indiquer "Dclar".',children:l.jsx("label",{className:s("pilotCompetency"),children:"Comptence du tlpilote *"})}),l.jsx("textarea",{value:e.pilotCompetency,onChange:u=>t({...e,pilotCompetency:u.target.value}),rows:3,className:a("pilotCompetency")})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx(Ee,{text:`Prciser le type de certificat pour le personnel, autre que le tlpilote, essentiel  la scurit de l'opration, si ncessaire ; sinon, indiquer "Rien  Dclar".`,children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comptence du personnel, autre que le tlpilote, essentielle  la scurit de l'opration"})}),l.jsx("textarea",{value:e.otherPersonnelCompetency,onChange:u=>t({...e,otherPersonnelCompetency:u.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lister les Types d'vnements  signaler  l'autorit comptente [en plus de ceux requis par le rglement (UE) no 376/2014]"}),l.jsx("textarea",{value:e.reportableEvents,onChange:u=>t({...e,reportableEvents:u.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs(Ee,{text:"Dposez des fichiers KML, KMZ ou GeoJSON dtaillant la mission",children:[l.jsx("label",{className:s("geoFiles"),children:"Zone Gographique *"}),l.jsxs("div",{className:`border-2 border-dashed rounded-lg p-4 transition-colors ${i.geoFiles?"border-red-300 bg-red-50 hover:border-red-500":"border-gray-300 hover:border-blue-500"}`,children:[l.jsx("input",{type:"file",accept:G3(),onChange:r,className:"hidden",id:"geo-upload",multiple:!0}),l.jsxs("label",{htmlFor:"geo-upload",className:"flex items-center justify-center gap-2 cursor-pointer",children:[l.jsx(qh,{className:"w-5 h-5 text-gray-400"}),l.jsx("span",{className:"text-gray-600",children:"Dposer des fichiers KML, KMZ ou GeoJSON ici"})]})]})]}),e.geoFiles&&e.geoFiles.length>0&&l.jsx("div",{className:"mt-4 space-y-2",children:e.geoFiles.map((u,d)=>{var h;return l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[l.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-2",children:[u.name,l.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:(h=u.name.split(".").pop())==null?void 0:h.toUpperCase()})]}),l.jsx("button",{onClick:()=>n(d),className:"text-red-500 hover:text-red-700",children:"Supprimer"})]},d)})}),l.jsx(Z3,{geoFiles:e.geoFiles||[]})]})]})}function J3({osos:e,assessment:t,onChange:r}){if(e){const a=["Non Requis","Faible","Moyen","lev"];let s=[];t.SAIL.toString().includes("SAIL 1")?s=[0,0,1,0,0,0,1,1,1,-1,-1,-1,1,-1,-1,1,1,0,0,0,-1,-1,1,0]:t.SAIL.toString().includes("SAIL 2")?s=[1,0,1,0,0,1,1,2,1,-1,-1,-1,1,-1,-1,1,1,0,0,1,-1,-1,1,0]:t.SAIL.toString().includes("SAIL 3")?s=[2,1,2,0,1,1,2,3,2,-1,-1,-1,2,-1,-1,2,2,1,1,1,-1,-1,2,2]:t.SAIL.toString().includes("SAIL 4")?s=[3,2,2,1,2,2,2,3,2,-1,-1,-1,3,-1,-1,2,2,2,2,2,-1,-1,2,3]:t.SAIL.toString().includes("SAIL 5")?s=[3,3,3,2,3,3,3,3,3,-1,-1,-1,3,-1,-1,3,3,3,2,2,-1,-1,3,3]:t.SAIL.toString().includes("SAIL 6")?s=[3,3,3,3,3,3,3,3,3,-1,-1,-1,3,-1,-1,3,3,3,3,3,-1,-1,3,3]:t.SAIL.toString().includes("Certifi")&&(s=[3,3,3,3,3,3,3,3,3,-1,-1,-1,3,-1,-1,3,3,3,3,3,-1,-1,3,3]);const u=s;e=[{id:"OSO1",number:"01",description:"Oprateur UAS comptent et/ou approuv",requiredLevel:a.at(u.at(0)),status:t.OSOS_Levels[0]||"Slectionner une valeur",evidence:"",tooltip:"<div>Elment de rponse attendu :<br /> (a) Plan de formation gnrale. <br /> (b) Formation de lquipage spcifique sur lUAS concern. <br />(c) Exprience de loprateur et prcdentes oprations. <br />(d) Checklist et manuel dentretien</div>"},{id:"OSO2",number:"02",description:"Constructeur UAS comptent et/ou approuv",requiredLevel:a.at(u.at(1)),status:t.OSOS_Levels[1],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO3",number:"03",description:"Maintenance UAS assure par une entit comptente et/ou approuve",requiredLevel:a.at(u.at(2)),status:t.OSOS_Levels[2],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO4",number:"04",description:"Les composants UAS essentiels aux oprations sres sont conus selon une norme de conception de navigabilit (ADS)",requiredLevel:a.at(u.at(3)),status:t.OSOS_Levels[3],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO5",number:"05",description:"UAS conu en tenant compte de la scurit et de la fiabilit du systme",requiredLevel:a.at(u.at(4)),status:t.OSOS_Levels[4],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO6",number:"06",description:"Performances du Lien C3 appropries pour la mission",requiredLevel:a.at(u.at(5)),status:t.OSOS_Levels[5],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO7",number:"07",description:"Vrification de conformit de la configuration du UAS",requiredLevel:a.at(u.at(6)),status:t.OSOS_Levels[6],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO8",number:"08",description:"Procdures oprationnelles dfinies, valides et respectes",requiredLevel:a.at(u.at(7)),status:t.OSOS_Levels[7],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO9",number:"09",description:"quipage  distance form et  jour. ",requiredLevel:a.at(u.at(8)),status:t.OSOS_Levels[8],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO10",number:"10",description:"Removed from SORA2.0 and merged with OSO #05",requiredLevel:a.at(u.at(9)),status:t.OSOS_Levels[9],evidence:"",tooltip:"OSO #10 was merged with OSO #05. This was possible by the probability to have a catastrophic event for SAIL I to OV operations are very low and no single failure criterion are either already covered in OSO #05 or in Annex B mitigations M2. "},{id:"OSO11",number:"11",description:"Removed from SORA2.0 redundant with OSO #08",requiredLevel:a.at(u.at(10)),status:t.OSOS_Levels[10],evidence:"",tooltip:""},{id:"OSO12",number:"12",description:"Removed from SORA2.0 and merged with OSO #05",requiredLevel:a.at(u.at(11)),status:t.OSOS_Levels[11],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO13",number:"13",description:"Les systmes externes de soutien sont adquats pour lopration",requiredLevel:a.at(u.at(12)),status:t.OSOS_Levels[12],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO14",number:"14",description:"Removed from SORA2.0 redundant with OSO #08",requiredLevel:a.at(u.at(13)),status:t.OSOS_Levels[13],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO15",number:"15",description:"Removed from SORA2.0",requiredLevel:a.at(u.at(14)),status:t.OSOS_Levels[14],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO16",number:"16",description:"Coordination multi-quipage",requiredLevel:a.at(u.at(15)),status:t.OSOS_Levels[15],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO17",number:"17",description:"Equipage en capacit doprer",requiredLevel:a.at(u.at(16)),status:t.OSOS_Levels[16],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO18",number:"18",description:"Protection automatique de lenveloppe de vol face  lerreur humaine",requiredLevel:a.at(u.at(17)),status:t.OSOS_Levels[17],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO19",number:"19",description:"Rcupration sre aprs une erreur humaine",requiredLevel:a.at(u.at(18)),status:t.OSOS_Levels[18],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO20",number:"20",description:"Une valuation des facteurs humains a t ralise et l'interface homme-machine (IHM) a t juge approprie pour la mission.",requiredLevel:"Non Requis",status:t.OSOS_Levels[19],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO21",number:"21",description:"Removed from SORA2.0",requiredLevel:"Non Requis",status:t.OSOS_Levels[20],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO22",number:"22",description:"Removed from SORA2.0",requiredLevel:"Non Requis",status:t.OSOS_Levels[21],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO23",number:"23",description:"Conditions environnementales pour des oprations sres dfinies, mesurables et respectes.",requiredLevel:"Non Requis",status:t.OSOS_Levels[22],evidence:"",tooltip:"Elment de rponse attendu : "},{id:"OSO24",number:"24",description:"UAS conu et qualifi pour des conditions environnementales dfavorables.",requiredLevel:"Non Requis",status:t.OSOS_Levels[23],evidence:"",tooltip:"Elment de rponse attendu : "}]}else return l.jsx("div",{children:"Loading..."});const n=(a,s)=>{const u={options:[{value:"Non Requis",label:"Non Requis"},{value:"Faible",label:"Faible"},{value:"Moyen",label:"Moyen"},{value:"lev",label:"lev"}]},d=u.options.findIndex(f=>f.value===a.requiredLevel);return u.options.findIndex(f=>f.value===s)-d},i=(a,s)=>{const u=e.map((d,h)=>h===a?{...d,...s}:d);r(u),t.OSOS_Levels=u.map(d=>d.status)};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Objectifs de Scurit Oprationnelle (OSO)"}),e.map((a,s)=>l.jsxs("div",{className:"space-y-4",children:[s===0?l.jsx("h3",{className:"text-xl ",children:"Problme technique avec l'UAS"}):s===9?l.jsx("h3",{className:"text-xl ",children:"Dtrioration des systmes externes soutenant les oprations de l'UAS"}):s===13?l.jsx("h3",{className:"text-xl ",children:"Erreur(s) Humaine(s)"}):s===20?l.jsx("h3",{className:"text-xl ",children:"Conditions d'exploitation dfavorables"}):"",a.description.startsWith("Removed")?l.jsx("div",{}):l.jsxs("div",{className:n(a,t.OSOS_Levels[s])>=0?"p-4 border bg-green-100 rounded-lg space-y-3":"p-4 border bg-red-100 rounded-lg space-y-3",children:[l.jsxs("h3",{className:"font-medium",children:["OSO #",a.number," - ",a.description]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Niveau de robustesse requis"}),l.jsx("div",{className:a.requiredLevel=="Faible"?"mt-1 p-2 bg-green-400 rounded-md":a.requiredLevel=="Moyen"?"mt-1 p-2 bg-yellow-400 rounded-md":a.requiredLevel=="lev"?"mt-1 p-2 bg-orange-400 rounded-md":"mt-1 p-2 bg-purple-200 rounded-md",children:a.requiredLevel})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Niveau de robustesse atteint"}),l.jsxs("select",{value:t.OSOS_Levels[s],onChange:u=>i(s,{status:u.target.value}),className:t.OSOS_Levels[s]=="Faible"?"mt-1 p-2 bg-green-400 rounded-md":t.OSOS_Levels[s]=="Moyen"?"mt-1 p-2 bg-yellow-400 rounded-md":t.OSOS_Levels[s]=="lev"?"mt-1 p-2 bg-orange-400 rounded-md":t.OSOS_Levels[s]=="Non Requis"?"mt-1 p-2 bg-purple-200 rounded-md":"mt-1 p-2 bg-white rounded-md",children:[l.jsx("option",{value:"Slectionner une valeur",children:"Slectionner une valeur"}),l.jsx("option",{value:"Non Requis",children:"Non Requis"}),l.jsx("option",{value:"Faible",children:"Faible"}),l.jsx("option",{value:"Moyen",children:"Moyen"}),l.jsx("option",{value:"lev",children:"lev"})]})]})]}),n(a,t.OSOS_Levels[s])==0?l.jsx("label",{className:"block text-sm font-medium text-green-700",children:"Niveau requis atteint "}):n(a,t.OSOS_Levels[s])>0?l.jsx("label",{className:"block text-sm font-medium text-green-700",children:"Niveau requis dpass "}):l.jsx("label",{className:"block text-sm font-medium text-red-700",children:"Niveau requis non atteint"}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsx("div",{dangerouslySetInnerHTML:{__html:a.tooltip}}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification / Preuves"})}),l.jsx("textarea",{value:a.evidence,onChange:u=>i(s,{evidence:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]},a.id)]}))]})}function Y3({geoFiles:e}){const[t,r]=ge.useState([]),[n,i]=ge.useState([[46.227638,2.213749]]),[a,s]=ge.useState(5),[u,d]=ge.useState(!1),[h,f]=ge.useState(null),[p,v]=ge.useState([]),[b,k]=ge.useState("standard"),S=["#3388ff","#ff4444","#33cc33","#ff9900","#9933cc","#00ccff","#ff66b2","#99cc00","#ff8533","#6666ff"],T=ge.useCallback((E,N)=>{var M,B;(M=E.properties)!=null&&M.description?N.bindPopup(E.properties.description):(B=E.properties)!=null&&B.name&&N.bindPopup(E.properties.name)},[]),y=ge.useCallback(E=>{const N=[];return!E||!E.features||E.features.forEach(M=>{if(M.geometry&&M.geometry.coordinates){const B=M.geometry.coordinates;switch(M.geometry.type){case"Point":Array.isArray(B)&&B.length>=2&&N.push([B[1],B[0]]);break;case"LineString":Array.isArray(B)&&B.forEach(D=>{Array.isArray(D)&&D.length>=2&&N.push([D[1],D[0]])});break;case"Polygon":Array.isArray(B)&&B[0]&&B[0].forEach(D=>{Array.isArray(D)&&D.length>=2&&N.push([D[1],D[0]])});break;case"MultiPolygon":Array.isArray(B)&&B.forEach(D=>{Array.isArray(D)&&D[0]&&D[0].forEach(A=>{Array.isArray(A)&&A.length>=2&&N.push([A[1],A[0]])})});break}}}),N},[]),_=ge.useCallback(E=>{const N=[];return E.forEach(M=>{N.push([M.bounds.north,M.bounds.east]),N.push([M.bounds.south,M.bounds.west]),N.push([M.bounds.north,M.bounds.west]),N.push([M.bounds.south,M.bounds.east])}),N},[]);ge.useEffect(()=>()=>{p.forEach(E=>{E&&E.length>0&&Qh(E)})},[p]),ge.useEffect(()=>{(async()=>{if(e.length===0){r([]),i([[46.227638,2.213749]]),s(5),f(null),p.forEach(N=>{N&&N.length>0&&Qh(N)}),v([]);return}d(!0),f(null);try{const N=await RE(e),M=[],B=[];let D=[],A=0;for(const H of N)try{(await DE(H)).forEach(z=>{const ae=y(z.data);if(D=[...D,...ae],z.groundOverlays&&z.groundOverlays.length>0){const P=_(z.groundOverlays);D=[...D,...P]}M.push({id:`layer-${A}`,name:z.name,data:z.data,color:S[A%S.length],type:z.type,groundOverlays:z.groundOverlays}),z.images&&B.push(z.images),A++})}catch(te){console.error(`Error processing file ${H.name}:`,te),f(z=>z?`${z}
${H.name}: ${te}`:`${H.name}: ${te}`)}D.length>0&&(i(D),s(12)),r(M),v(B)}catch(N){console.error("Error loading geo files:",N),f("Erreur lors du chargement des fichiers gographiques")}finally{d(!1)}})()},[e,y,_]);const w=n.length>1?[n.reduce((E,N)=>E+N[0],0)/n.length,n.reduce((E,N)=>E+N[1],0)/n.length]:[46.227638,2.213749];return l.jsxs("div",{className:"space-y-4",children:[h&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:l.jsxs("div",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Erreurs de traitement :"}),l.jsx("pre",{className:"mt-1 whitespace-pre-wrap",children:h})]})}),u&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsxs("div",{className:"text-sm text-blue-700 flex items-center gap-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Traitement des fichiers gographiques..."]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(OE,{mapType:b,onChange:k}),l.jsx("div",{className:"h-96 w-full rounded-lg overflow-hidden border border-gray-300",children:l.jsxs(V1,{center:w,zoom:a,style:{height:"100%",width:"100%"},children:[l.jsx($1,{url:b==="standard"?"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:b==="standard"?'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors':'&copy; <a href="https://www.arcgis.com/home/item.html?id=10df227921484f18b483e4ef61416222">Esri</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),l.jsx($a,{position:"topright",children:t.map(E=>l.jsxs(qo.Fragment,{children:[E.data.features&&E.data.features.length>0&&l.jsx($a.Overlay,{name:`${E.name} (${E.type.toUpperCase()})`,checked:!0,children:l.jsx(z1,{data:E.data,style:()=>({color:E.color,weight:3,opacity:1,fillColor:E.color,fillOpacity:.2}),onEachFeature:T})}),E.groundOverlays&&E.groundOverlays.map((N,M)=>l.jsx($a.Overlay,{name:`${N.name} (Ground Overlay)`,checked:!0,children:l.jsx(U1,{url:N.imageUrl,bounds:[[N.bounds.south,N.bounds.west],[N.bounds.north,N.bounds.east]],opacity:N.opacity||1})},`${E.id}-overlay-${M}`))]},E.id))})]})})]}),t.length>0&&l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("strong",{children:"Fichiers chargs :"}),l.jsx("ul",{className:"mt-1 space-y-1",children:t.map(E=>l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:E.color}}),l.jsxs("span",{children:[E.name," (",E.type.toUpperCase(),")"]}),E.groundOverlays&&E.groundOverlays.length>0&&l.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[E.groundOverlays.length," overlay",E.groundOverlays.length>1?"s":""]})]},E.id))})]})]})}const Q3="/assets/DefinitionOfVolumes-C9w7zZLj.png",eR="/assets/DefinitionOfFootprints-BwoC-ZWb.png",tR="/assets/JARUSorHIModel-cX_XzCxK.png",rR="/assets/JARUSorHIModel_AC-DGhx5KlN.png",nR="/assets/JARUSorHIModel_HC_High-jdKqAng_.png",iR="/assets/JARUSorHIModel_HC_Low-BdjR2L2K.png",IE="/assets/AdjacenteArea-D3Xgs1TM.png";function aR({assessment:e,drone:t,operation:r,onChange:n,showOnly:i}){var ue;const a=[{PopDensity:"Zone Contrle",MaxdimCS1:"1",MaxdimCS2:"1",MaxdimCS3:"2",MaxdimCS4:"3",MaxdimCS5:"3"},{PopDensity:"<5",MaxdimCS1:"2",MaxdimCS2:"3",MaxdimCS3:"4",MaxdimCS4:"5",MaxdimCS5:"6"},{PopDensity:"<50",MaxdimCS1:"3",MaxdimCS2:"4",MaxdimCS3:"5",MaxdimCS4:"6",MaxdimCS5:"7"},{PopDensity:"<500",MaxdimCS1:"4",MaxdimCS2:"5",MaxdimCS3:"6",MaxdimCS4:"7",MaxdimCS5:"8"},{PopDensity:"<5,000",MaxdimCS1:"5",MaxdimCS2:"6",MaxdimCS3:"7",MaxdimCS4:"8",MaxdimCS5:"9"},{PopDensity:"<50,000",MaxdimCS1:"6",MaxdimCS2:"7",MaxdimCS3:"8",MaxdimCS4:"9",MaxdimCS5:"10"},{PopDensity:">50,000",MaxdimCS1:"7",MaxdimCS2:"8",MaxdimCS3:"Not part of Sora",MaxdimCS4:"Not part of Sora",MaxdimCS5:"Not part of Sora"}],s=()=>{var G;let O=0,ne=e.maxCharacteristicDimension;e.UsemaxCharacteristicDimension==="OUI"&&(ne=e.maxCharacteristicDimensionClass),ne<=1?e.maxSpeed<=25?O=1:e.maxSpeed<=35?O=2:e.maxSpeed<=75?O=3:e.maxSpeed<=150?O=4:e.maxSpeed<=200?O=5:O=6:ne<=3?e.maxSpeed<=35?O=2:e.maxSpeed<=75?O=3:e.maxSpeed<=150?O=4:e.maxSpeed<=200?O=5:O=6:ne<=8?e.maxSpeed<=75?O=3:e.maxSpeed<=150?O=4:e.maxSpeed<=200?O=5:O=6:ne<=20?e.maxSpeed<=150?O=4:e.maxSpeed<=200?O=5:O=6:ne<=40&&e.maxSpeed<=200?O=5:O=6;let J=e.UsemaxCharacteristicDimension;return console.error({UsemaxCharacteristicDimension:J,iGRC_colIndex:O}),e.iGRC_colIndex=O,e.iGRCControledZone=parseInt((G=a.at(0))==null?void 0:G[`MaxdimCS${O}`]),O},u=()=>{let O=5,J=.3+e.maxCharacteristicDimension/2,G=1;return e.ObstaclesModulation==="OUI"?G=.6:G=1,e.maxCharacteristicDimension<=1?O=2*J*e.dGlide+Math.PI*Math.pow(J,2):e.maxCharacteristicDimension<8?O=G*(2*J*(e.dGlide+e.dSlideReduced)+Math.PI*J*J):e.maxCharacteristicDimension>=8&&(O=2*J*(e.dGlide+e.dSlideReduced)+Math.PI*J*J),e.CriticalArea=parseFloat(O.toFixed(2)),parseFloat(O.toFixed(2))},d=()=>e.maxCharacteristicDimension<=1?35:10,h=()=>{if(e.DetailedJarusModel=="OUI"){let ne=Math.sqrt(2*290/e.MTOW),J=.65,G=Math.abs(Math.cos(e.ThetaGlide*Math.PI/180))*e.maxSpeed,Z=.75*9.81,se=Math.max((J*G-ne)/Z,0),F=J*G*se-.5*Z*se*se;return e.dSlideReduced=parseFloat(F.toFixed(2)),e.vnonlethal=parseFloat(ne.toFixed(4)),e.vhorizontale=parseFloat(G.toFixed(4)),e.tsafe=parseFloat(se.toFixed(4)),e.dSlideReduced}else return 0},f=()=>{let O=1.8;return e.DetailedJarusModel=="OUI"?(e.dGlide=parseFloat((O/Math.tan(e.ThetaGlide*Math.PI/180)).toFixed(2)),parseFloat(e.dGlide.toFixed(2))):0},p=()=>{let O=1;return e.maxCharacteristicDimension<=1?O=.1:e.maxCharacteristicDimension<=3?O=.2*e.maxCharacteristicDimension-.1:e.maxCharacteristicDimension<=8?O=.4*e.maxCharacteristicDimension-.7:e.maxCharacteristicDimension<=20?O=.8333*e.maxCharacteristicDimension-4.1667:e.maxCharacteristicDimension<=40?O=.625*e.maxCharacteristicDimension:O=25,O},v=()=>{let O=1,ne=9.81,J=1.225,G=p(),de=Math.sqrt(2*e.MTOW*ne/(J*G*.8)),Z=.5*e.MTOW*Math.pow(de,2),se=1.4*Math.pow(Z,.2);Z<12e3?se=2.3:Z>3125e3&&(se=7);let I=.3+e.maxCharacteristicDimension/2;return O=se*Math.PI*Math.pow(I,2),e.CriticalArea=parseFloat(O.toFixed(2)),console.error({CA:O}),O},b=()=>{let O=e.MTOW,ne=0,J=0,G=0,ve=0,de=0,Z=0,se=0,F=e.maxSpeed,I=0,X=.1,Y=9.81,Ne=1.225,Le=.7,Me=.8,j=0,K=0,W=0,V=0,q=0,ie=0;const ye=[];for(let we=0;G>=-e.MinOperationalAltitude;we+=X)ie=Math.atan2(Z,F),ne=Math.sqrt(Math.pow(F,2)+Math.pow(Z,2)),j=-.5*Ne*Math.pow(ne,2)*Le*Me,K=Math.cos(ie)*j,W=Math.sin(ie)*j,V=ie*(180/Math.PI),q=.5*O*Math.pow(ne,2),ye.push({t:we,HV_t0:F,VV_t0:Z,Velocity_t0:ne,ThetaImpactDeg:V,HD_t0:ve,VD_t0:J,DragForce_t0:j,DragForceH_t0:K,DragForceV_t0:W,Ek:q}),I=F+K/O*X,se=Z-(Y-W/O)*X,G=J+.5*(Z+se)*X,de=ve+.5*(F+I)*X,J=G,ve=de,Z=se,F=I;return e.ThetaImpact=parseFloat(V.toFixed(2)),console.error({ThetaImpactDeg:V,results:ye}),[V,ye]},k=O=>{n({...e,GlidingCapability:O.target.value,assessmentGRB:O.target.value==="NON"?"Approche Simplifie, Rgle 1:1":e.assessmentGRB})},S=()=>{let O=1,ne=9.81,J=e.VwindParachute;return e.assessmentGRB==="Approche Simplifie, Rgle 1:1"?O=e.ContingencyVolumeHeight+.5*e.maxCharacteristicDimension:e.assessmentGRB==="Approche Balistique (Hlicoptre ou Multirotor)"?O=e.maxSpeed*Math.sqrt(2*e.ContingencyVolumeHeight/ne)+.5*e.maxCharacteristicDimension:e.assessmentGRB==="Terminaison Aile Fixe"?O=e.ContingencyVolumeHeight/Math.tan(e.ThetaGlide*Math.PI/180):e.assessmentGRB==="Terminaison avec parachute"?O=e.maxSpeed*e.ParachuteTime+J*e.ContingencyVolumeHeight/e.VzParachute:O=0,e.GRBWidth=parseFloat(O.toFixed(2)),parseFloat(O.toFixed(2))},T=O=>{const ne=O.target.checked;n({...e,GRB_FixedWingPowerOff:ne?"ACTIVATED":"NONACTIVE",assessmentGRB:"Approche Simplifie, Rgle 1:1"})},y=()=>(e.GRB_FixedWingPowerOff="ACTIVATED",!0),_=()=>{let O=1;return e.AdjacentVolumeWidthEqualMaxRange==="OUI"?O=3*60*e.maxSpeed*1:(O=Math.max(3*60*e.maxSpeed*1,5e3),O=Math.min(O,35e3)),e.AdjacentVolumeWidth=parseFloat(O.toFixed(1)),parseFloat(O.toFixed(1))},w=()=>{let O=1;return O=e.ContingencyVolumeHeight+150,e.AdjacentVolumeHeight=parseFloat(O.toFixed(1)),parseFloat(O.toFixed(1))},E=(O,ne,J,G,ve)=>{let de=1;return de=O+ne+J+G+ve,e.ContingencyVolumeWidth=parseFloat(de.toFixed(1)),parseFloat(de.toFixed(1))},N=(O,ne,J)=>{let G=1;return G=O+ne+J+e.FlightGeographyHeight,e.ContingencyVolumeHeight=parseFloat(G.toFixed(1)),parseFloat(G.toFixed(1))},M=()=>{let O=1,ne=1,J=9.81;if(e.ContingencyParachuteManeuver==="OUI")O=e.ParachuteTime*e.maxSpeed,ne=parseFloat((e.ParachuteTime*.7*e.maxSpeed).toFixed(2));else return e.uasType==="Avion"||e.uasType==="Hybride/VTOL"||e.uasType==="Plus lger que l'air"?(O=e.maxSpeed*e.maxSpeed/(J*Math.tan(e.PhiMaxPlane*Math.PI/180)),ne=.3*e.maxSpeed*e.maxSpeed/J):e.uasType==="Hlicoptre"||e.uasType==="Multirotor"?(O=.5*e.maxSpeed*e.maxSpeed/(J*Math.tan(e.ThetaStopCopter*Math.PI/180)),ne=.5*e.maxSpeed*e.maxSpeed/J):e.uasType==="Autre"?(O=.5*e.maxSpeed*(90/e.turnRate),ne=.3*e.maxSpeed*e.maxSpeed/J):O=NaN,e.ContingencyVolumeSCM=parseFloat(O.toFixed(2)),e.ContingencyVolumeHCM=parseFloat(ne.toFixed(2)),[O,ne]},B=()=>{let O=1;return e.CriticalArea<=6.5?O=1:e.CriticalArea<=65?O=3:e.CriticalArea<=650?O=8:e.CriticalArea<=6500?O=20:(e.CriticalArea<=65e3,O=40),e.maxCharacteristicDimensionClass=O,O},D=()=>{let O=6.5;return e.maxCharacteristicDimension<=1?O=6.5:e.maxCharacteristicDimension<=3?O=65:e.maxCharacteristicDimension<=8?O=650:e.maxCharacteristicDimension<=20?O=6500:(e.maxCharacteristicDimension<=40,O=65e3),e.NominalCriticalArea=O,O},[A,H]=ge.useState(null),te=ge.useRef(null),z=ge.useRef(null),ae=async O=>{const ne=O.target.files;if(ne){const J=ne[0],G=new FileReader;G.onload=ve=>{var X;const de=(X=ve.target)==null?void 0:X.result;console.log("File content:",de);const se=new DOMParser().parseFromString(de,"text/html");console.log("Parsed document:",se);const F=se.querySelectorAll("h2");let I=null;for(const Y of F)if(Y.textContent==="Population"){I=Y;break}if(I){const Y=I.nextElementSibling;if(Y&&Y.tagName==="TABLE"){const Ne=Y.outerHTML;e.droseraOutputResult=Ne;const j=new DOMParser().parseFromString(Ne,"text/html").querySelector("table"),K=j==null?void 0:j.querySelectorAll("tr"),W=[];K&&K.forEach(V=>{const q=V.querySelectorAll("td"),ie=[];q.forEach(ye=>{const we=parseFloat(ye.textContent||"");isNaN(we)||ie.push(we)}),ie.length>0&&W.push(ie)}),console.log("DroseraResTable:",W),e.DroseraResTable=W,n({...e,droseraOutputFile:[J],populationTable:Ne,DroseraResTable:W})}else console.error("No table found right after the <h2>Population</h2> title.")}else console.error("<h2>Population</h2> title not found.")},G.readAsText(J)}},P=O=>{const ne=[...e.droseraOutputFile||[]];ne.splice(O,1),n({...e,droseraOutputFile:ne})},ce=()=>{if(!e.trajgeoFiles){H("Veuillez slectionner un fichier de trajectoire ou de zone avant de gnrer le fichier d'entre Drosera.");return}const O=`<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="DroseraDataModel.xsl"?><DroseraDataModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="drosera.xsd">
<DroseraLite id="1">
  <mission id="2">
    ${e.trajgeoFiles[0].name.includes("Trajectoire_")&&e.trajgeoFiles.length>0?`<is_traj>true</is_traj>
         <is_zone>false</is_zone>
         <trajectory>%DRODIR%/share/drosera/Data/Trajectories/${e.trajgeoFiles[0].name}</trajectory>`:e.trajgeoFiles[0].name.includes("Zone_")&&e.trajgeoFiles.length>0?`<is_traj>false</is_traj>
         <is_zone>true</is_zone>
         <trajectory>drosera_dir/Data/Trajectories/${e.trajgeoFiles[0].name}</trajectory>`:""}
    ${e.assessmentTypeHauteurVol.includes("Hauteur de vol suivant trajectoire(s)")?`<compute_terrain_following>false</compute_terrain_following>
    <terrain_following unit="m">0</terrain_following>`:`<compute_terrain_following>true</compute_terrain_following>
    <terrain_following unit="m">${e.followTerrainHeight}</terrain_following>`}
    <cruise_speed unit="m/s">${e.VCruise}</cruise_speed>
    ${e.PopulationDensityModulation.includes("OUI")?"<compute_flight_start>true</compute_flight_start>":"<compute_flight_start>false</compute_flight_start>"}
    <flight_start>${e.assessmentStartTime}:00</flight_start>
    <flight_end>${e.assessmentEndTime}:00</flight_end>
  </mission>
  <iGRC id="3">
    ${e.assessmentCriticalArea.includes("JARUS")?"<compute_critical_area>true</compute_critical_area>":e.assessmentCriticalArea.includes("SORA")?"<compute_critical_area>false</compute_critical_area>":"<compute_critical_area>true</compute_critical_area>"}
    <critical_area unit="m">${e.CriticalArea}</critical_area>
    ${e.assessmentCriticalArea.includes("JARUS")?"<use_igrc_table>false</use_igrc_table>":e.assessmentCriticalArea.includes("SORA")?"<use_igrc_table>true</use_igrc_table>":"<use_igrc_table>false</use_igrc_table>"}    
    <max_dim unit="m">${e.maxCharacteristicDimension}</max_dim>
    <max_speed unit="m/s">${e.maxSpeed}</max_speed>
  </iGRC>
  <ground_risk_assessment id="4">
    <areas_to_check id="12">
      <flight_geography_width unit="m">${e.FlightGeographyWidth}</flight_geography_width>
      <contingency_volume_width unit="m">${e.ContingencyVolumeWidth}</contingency_volume_width>
      <grb_range unit="m">${e.GRBWidth}</grb_range>
      <adjacent_range unit="m">${e.AdjacentVolumeWidth}</adjacent_range>
    </areas_to_check>
    <third_parties id="10">
      <assess_population>true</assess_population>
      ${e.PopulationDensityDataBase.includes("INSEE")?'<population_database ref="19"/>':'<population_database ref="18"/>'}
      <assess_road>true</assess_road>
      <assess_railway>true</assess_railway>
      <assess_powerline>true</assess_powerline>
    </third_parties>
    <other_maps id="11">
      <assess_relief>false</assess_relief>
      <d_relief unit="m">50</d_relief>
      <assess_safecrash>false</assess_safecrash>
    </other_maps>
    <result_directory>%DRODIR%/share/drosera/Data/Results/</result_directory>
    <verbose>false</verbose>
    <zip_result>false</zip_result>
  </ground_risk_assessment>
  <helpers id="5">
    <mission id="9" xsi:type="MissionHelp"/>
    <critical_area id="6" xsi:type="CriticalAreaHelp">
      <critical_area_jarus_calc id="14">
        <uav_wingspan unit="m">${e.maxCharacteristicDimension}</uav_wingspan>
        <d_glide unit="m">${e.dGlide}</d_glide>
        <compute_d_glide>true</compute_d_glide>
        <dglide_calc id="17">
          <theta unit="deg">${e.ThetaGlide}</theta>
        </dglide_calc>
        <d_slide unit="m">${e.dSlideReduced}</d_slide>
        <compute_d_slide>true</compute_d_slide>
        ${e.ObstaclesModulation.includes("OUI")?"<reduce_for_obstacles>true</reduce_for_obstacles>":"<reduce_for_obstacles>false</reduce_for_obstacles>"}
        <dslide_calc id="16">
          <theta unit="deg">${e.ThetaGlide}</theta>
          <max_speed unit="m/s">${e.maxSpeed}</max_speed>
          <uav_mass unit="kg">${e.MTOW}</uav_mass>
        </dslide_calc>
      </critical_area_jarus_calc>
      <critical_area_hiam_calc id="13">
        <uav_wingspan unit="m">${e.maxCharacteristicDimension}</uav_wingspan>
        <max_speed unit="m/s">${e.maxSpeed}</max_speed>
        <uav_mass unit="kg">${e.MTOW}</uav_mass>
      </critical_area_hiam_calc>
    </critical_area>
    <ground_risk_assessment id="7" xsi:type="GroundRiskAssessmentHelp"/>
    <ground_risk_buffer id="8" xsi:type="GroundRiskBufferHelp">
      <grb_calc id="15">
        <x unit="m">0</x>
        <y unit="m">0</y>
        <z unit="m">0</z>
        <vx unit="m/s">0</vx>
        <vy unit="m/s">0</vy>
        <vz unit="m/s">0</vz>
        <vwind unit="m/s">0</vwind>
        <etapes/>
        <grb unit="m">${e.GRBWidth}</grb>
      </grb_calc>
    </ground_risk_buffer>
  </helpers>
</DroseraLite>
 ${e.PopulationDensityDataBase.includes("INSEE")?'<BDDPopu id="19">':'<BDDPopu id="18">'}
  <nom>${e.PopulationDensityDataBase}</nom>
</BDDPopu>
</DroseraDataModel>`,ne=new Blob([O],{type:"application/xml"}),J=URL.createObjectURL(ne),G=document.createElement("a");G.href=J,G.download="DroseraInputFile".concat(".dro"),document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(J)},fe=async O=>{const ne=O.target.files;if(ne){const J=Array.from(ne);if(J.filter(de=>!de.name.startsWith("Trajectoire_")&&!de.name.startsWith("Zone_")&&(de.name.endsWith(".kml")||de.name.endsWith(".geojson"))).length>0){H("ERREUR : votre fichier doit avoir un nom de la forme 'Trajectoire_Nom-de-la-trajectoire' ou 'Zone_Nom-de-la-zone'et tre un fichier .kml ou .geojson");return}H(null);const ve=await Promise.all(J.map(async de=>{const Z=await de.text();return new File([Z],de.name,{type:de.type})}));n({...e,trajgeoFiles:[...e.trajgeoFiles||[],...ve]})}},re=O=>{const ne=[...e.trajgeoFiles||[]];ne.splice(O,1),n({...e,trajgeoFiles:ne})};return l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"valuation des Risques"}),l.jsxs("section",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Mission"}),l.jsx("label",{className:"text-sm font-medium",children:"Vous devez ici fournir les lments de trajectoires et/ou zones dfinissant la mission."}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Option Hauteur de vol :",l.jsx("br",{}),l.jsx("li",{children:" * Hauteur de vol suivant trajectoire(s) = La trajectoire KML fournit la heuteur de vol"}),l.jsx("li",{children:" * Hauteur de vol en suivi de terrain = La trajectoire KML fournit seulement la projete de la trajectoire, la hauteur de vol sera prcise dans le champ annexe."})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hauteur de Vol"})}),l.jsxs("select",{value:e.assessmentTypeHauteurVol,onChange:O=>n({...e,assessmentTypeHauteurVol:O.target.value,followTerrainHeight:O.target.value==="Hauteur de vol en suivi de terrain"?e.followTerrainHeight:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"Hauteur de vol suivant trajectoire(s)",children:"Hauteur de vol suivant trajectoire(s)"}),l.jsx("option",{value:"Hauteur de vol en suivi de terrain",children:"Hauteur de vol en suivi de terrain"})]})]}),e.assessmentTypeHauteurVol==="Hauteur de vol en suivi de terrain"&&l.jsxs("div",{children:[l.jsx(Ee,{text:"Hauteur qui sera applique suivant la topographie terrain.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hauteur de la trajectoire"})}),l.jsx("input",{type:"number",value:e.followTerrainHeight,min:0,onChange:O=>n({...e,followTerrainHeight:parseInt(O.target.value)||0}),className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.followTerrainHeight===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.jsxs("div",{children:[l.jsx(Ee,{text:"Rappel de la vitesse de croisire du drone dclare  l'tape prcdente.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse de Croisire (m/s)"})}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.VCruise}),l.jsx("div",{})]})}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:[l.jsx("li",{children:"Un fichier par tajectoire nomm Trajectoire_Nom-de-la-trajectoire"}),l.jsx("li",{children:"Un fichier par Zone d'volution nomm Zone_Nom-de-la-zone"})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trajectoire ou Zone d'volution de l'UAS"})}),l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-500 transition-colors",children:[l.jsx("input",{ref:te,type:"file",accept:".kml,.geojson",onChange:fe,className:"hidden",multiple:!0}),l.jsxs("div",{onClick:()=>{var O;return(O=te.current)==null?void 0:O.click()},className:"flex items-center justify-center gap-2 cursor-pointer",children:[l.jsx(qh,{className:"w-5 h-5 text-gray-400"}),l.jsx("span",{className:"text-gray-600",children:"Dposer des fichiers KML ou GeoJSON ici"})]})]}),A&&l.jsx("div",{className:"mt-2 p-2 bg-red-50 text-red-600 rounded",children:A}),e.trajgeoFiles&&e.trajgeoFiles.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:e.trajgeoFiles.map((O,ne)=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded",children:[l.jsx("span",{className:"text-sm text-gray-600",children:O.name}),l.jsx("button",{onClick:()=>re(ne),className:"text-red-500 hover:text-red-700",children:"Supprimer"})]},ne))}),l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carte de visualisation des Trajectoires ou Zones d'volution de l'UAS"}),l.jsx(Y3,{geoFiles:e.trajgeoFiles||[]})]})]})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Determination de l'iGRC : Intrinsic Ground Risk Class"}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["Etape 1 : Determination de la surface critique de crash (Ac).",l.jsx("button",{type:"button",onClick:()=>window.open("https://www.easa.europa.eu/sites/default/files/dfu/d2_-_consolidated_gm-for_publication-02052024.pdf","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation EASA Final Guidelines for the Assessment of the Critical Area of an Unmanned Aircraft",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"En surlign bleu la valeur cortrespondant  la dimension caractristique maximale de l'UAS et en vert la valeur seuil associe  votre valeur de surface critique de crash.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valeur indicative du seuil de Surface Critique associe  la dimension caractristique maximale de l'UAS"})}),l.jsx("div",{children:l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-200",children:[l.jsx("th",{className:"bg-gray-200 py-2 px-4 border-b",children:"Dimension characteristique Max. (m)"}),l.jsx("th",{className:e.maxCharacteristicDimension<=1&&e.maxCharacteristicDimensionClass<=1?"bg-blue-200  text-white border-2 border-green-500":e.maxCharacteristicDimensionClass<=1?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"1"}),l.jsx("th",{className:e.maxCharacteristicDimension<=3&&e.maxCharacteristicDimension>1?e.maxCharacteristicDimensionClass<=3&&e.maxCharacteristicDimensionClass>1?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=3&&e.maxCharacteristicDimensionClass>1?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"3"}),l.jsx("th",{className:e.maxCharacteristicDimension<=8&&e.maxCharacteristicDimension>3?e.maxCharacteristicDimensionClass<=8&&e.maxCharacteristicDimensionClass>3?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=8&&e.maxCharacteristicDimensionClass>3?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"8"}),l.jsx("th",{className:e.maxCharacteristicDimension<=20&&e.maxCharacteristicDimension>8?e.maxCharacteristicDimensionClass<=20&&e.maxCharacteristicDimensionClass>8?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=20&&e.maxCharacteristicDimensionClass>8?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"20"}),l.jsx("th",{className:e.maxCharacteristicDimension<=40&&e.maxCharacteristicDimension>20?e.maxCharacteristicDimensionClass<=40&&e.maxCharacteristicDimensionClass>20?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=40&&e.maxCharacteristicDimensionClass>20?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"40"})]})}),l.jsx("tbody",{children:l.jsxs("tr",{className:"bg-gray-200",children:[l.jsx("th",{className:"bg-gray-200 py-2 px-4 border-b",children:"Valeur Seuil de la Surface Critique (m)"}),l.jsx("th",{className:e.maxCharacteristicDimension<=1&&e.maxCharacteristicDimensionClass<=1?"bg-blue-200  text-white border-2 border-green-500":e.maxCharacteristicDimensionClass<=1?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"6.5"}),l.jsx("th",{className:e.maxCharacteristicDimension<=3&&e.maxCharacteristicDimension>1?e.maxCharacteristicDimensionClass<=3&&e.maxCharacteristicDimensionClass>1?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=3&&e.maxCharacteristicDimensionClass>1?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"65"}),l.jsx("th",{className:e.maxCharacteristicDimension<=8&&e.maxCharacteristicDimension>3?e.maxCharacteristicDimensionClass<=8&&e.maxCharacteristicDimensionClass>3?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=8&&e.maxCharacteristicDimensionClass>3?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"650"}),l.jsx("th",{className:e.maxCharacteristicDimension<=20&&e.maxCharacteristicDimension>8?e.maxCharacteristicDimensionClass<=20&&e.maxCharacteristicDimensionClass>8?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=20&&e.maxCharacteristicDimensionClass>8?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"6500"}),l.jsx("th",{className:e.maxCharacteristicDimension<=40&&e.maxCharacteristicDimension>20?e.maxCharacteristicDimensionClass<=40&&e.maxCharacteristicDimensionClass>20?"bg-blue-500  text-white border-2 border-green-500":"bg-blue-500  text-white":e.maxCharacteristicDimensionClass<=40&&e.maxCharacteristicDimensionClass>20?"bg-white py-2 px-4 border-2 border-green-500":"bg-white py-2 px-4 border-b",children:"65000"})]})})]})}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Valeur Seuil de la Surface Critique (m) selon les tables SORA.",l.jsx("br",{}),"Cf. doc Guidelines for the Assessment of the Critical Area of an Unmanned Aircraft",l.jsx("br",{}),"Ces valeurs peuvent tre trop conservatrices pour certains cas d'utilisation, c'est pourquoi le modle JARUS et le modle  fort angle d'impact ciblent ces scnarios. Si votre valeur de surface critique est infrieure  ces valeurs, vous pourrez vous repporter dans la colonne de dimension maximale associe lors de l'tape d'valuation de votre iGRC."]}),children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Valeur ",l.jsx("b",{children:"Seuil"})," de Surface Critique selon les tables (m)."]})}),l.jsx("input",{type:"number",value:D(),onChange:O=>n({...e,ThresholdCriticalArea:parseInt(O.target.value)||0}),className:"mt-1 block w-full rounded-md border-black-500 text-gray-500 border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Critical Area ou Surface de Crash",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Surface Critique"})}),l.jsxs("select",{value:e.assessmentCriticalArea,onChange:O=>n({...e,assessmentCriticalArea:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"Calcul selon les Modles JARUS",children:"Calcul selon les Modles JARUS"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"D'aprs la valeur de la Surface Critique (m) le seuil applicable dans le tableau ci-dessus sera appliqu pour les calcul iGRC.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Classe de Dimension Caractristique Max. Applicable (m)"})}),l.jsx("div",{children:l.jsx("input",{type:"number",value:B(),onChange:O=>n({...e,maxCharacteristicDimensionClass:parseInt(O.target.value)||0}),className:"mt-1 block w-full rounded-md border-blue-500 text-blue-500 border-2 font-bold shadow-sm focus:border-blue-800 focus:ring-blue-800",disabled:!0})})]})]}),e.assessmentCriticalArea==="Spcifie par le dposant"?l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Valeur de la Surface Critique dclare (m) A justifier par l'oprateur en annexe ! ",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valeur de la Surface Critique dclare (m)"})}),l.jsx("input",{type:"number",value:e.CriticalArea,onChange:O=>n({...e,CriticalArea:parseInt(O.target.value)||0}),step:"1.0",className:"mt-1 block w-full rounded-md border-black border-2 font-bold  shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Si vous choisissez de dclarer votre propre valeur de surface critique, veuillez apporter une justification. Celle-ci doit tablir clairement le mode de calcul adopt. Vous devrez fournir en annexe un document dtaillant chaque tape de calcul et leur base de justification.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre surface Critique"})}),l.jsx("textarea",{value:e.UserCriticalArea_Justification,onChange:O=>n({...e,UserCriticalArea_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):e.assessmentCriticalArea==="Calcul selon les Modles JARUS"?l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valeur de la Surface Critique Calcule (m)"}),l.jsx("div",{className:"mt-1 block w-full rounded-md border-black border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",children:e.GlidingCapability==="OUI"||e.HighImpactAngle==="NON"?parseFloat(u().toFixed(2)):parseFloat(v().toFixed(2))}),l.jsx("div",{className:"text-gray-100",children:B()}),e.uasType==="Hlicoptre"||e.uasType==="Multirotor"?l.jsxs("div",{children:[l.jsx(Ee,{text:" ",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"L'appareil est-il capable de planer ?"})}),l.jsxs("select",{value:e.GlidingCapability,onChange:O=>n({...e,GlidingCapability:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]}),e.GlidingCapability==="NON"&&l.jsxs("div",{children:[l.jsx(Ee,{text:" ",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"L'angle d'impact serait-il suprieur  60 ?"})}),l.jsxs("select",{value:e.HighImpactAngle,onChange:O=>n({...e,HighImpactAngle:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),l.jsx("br",{})]}):l.jsxs(l.Fragment,{children:["Gliding Capability : ",e.GlidingCapability="OUI"]})]}),(e.uasType==="Avion"||e.uasType==="Hybride/VTOL")&&e.GlidingCapability=="OUI"?l.jsx("img",{src:rR,alt:"JARUSorHIModelAirplane",className:"w-auto h-auto mb-6 mx-auto"}):(e.uasType==="Hlicoptre"||e.uasType==="Multirotor")&&e.HighImpactAngle==="NON"?l.jsx("img",{src:iR,alt:"JARUModel",className:"w-auto h-auto mb-6 mx-auto"}):(e.uasType==="Hlicoptre"||e.uasType==="Multirotor")&&e.HighImpactAngle==="OUI"?l.jsx("img",{src:nR,alt:"JARUSorHIModel",className:"w-auto h-auto mb-6 mx-auto"}):l.jsx("img",{src:tR,alt:"JARUSorHIModel",className:"w-auto h-auto mb-6 mx-auto"}),e.GlidingCapability==="OUI"||e.HighImpactAngle==="NON"?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Jarus Model"}),e.maxCharacteristicDimension>=1&&e.maxCharacteristicDimension<8?l.jsxs("div",{children:[l.jsx(Ee,{text:" Activable si la Dimensions caractristiques maximales est comprise entre 1m et 8m (1m  w < 8m) et en prsence d'obstacles le justifiant.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Activer la rduction de 40% pour les obstacles"})}),l.jsxs("select",{value:e.ObstaclesModulation,onChange:O=>n({...e,ObstaclesModulation:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}):l.jsxs("div",{children:[l.jsx(Ee,{text:" Activable si la Dimensions caractristiques maximales est comprise entre 1m et 8m (1m  w < 8m) et en prsence d'obstacles le justifiant.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Activer la rduction de 40% pour les obstacles"})}),l.jsx("select",{value:e.ObstaclesModulation,onChange:O=>n({...e,ObstaclesModulation:O.target.value}),disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:l.jsx("option",{value:"NON",children:"NON"})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dimensions caractristiques maximales (m)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxCharacteristicDimension})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse maximales (m/s)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxSpeed})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Donnes personalises pour le modle Jarus",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Activer les fonctionnalits de calcul dtaill du modle"})}),l.jsxs("select",{value:e.DetailedJarusModel,onChange:O=>n({...e,DetailedJarusModel:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),l.jsx("h3",{className:"text-lg font-medium",children:"   "}),e.DetailedJarusModel==="OUI"&&l.jsxs("div",{children:[l.jsx(Ee,{text:"Angle d'impact (de plan/fauch.) NB: Si Dimensions caractristiques maximales  1m prendre 35, et pour les appareil plus grand prendre 10.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theta_Glide (deg)"})}),l.jsx("input",{type:"number",value:e.ThetaGlide,onChange:O=>n({...e,ThetaGlide:parseFloat(O.target.value)||0}),step:"0.1",min:e.HighImpactAngle==="OUI"?60:0,max:e.HighImpactAngle==="OUI"?90:60,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ThetaGlide===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:d().toString()}),l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mass maximale MTOW (kg)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.MTOW})]}),e.DetailedJarusModel==="OUI"&&l.jsxs("div",{children:[l.jsx(Ee,{text:"Si votre Angle d'impact ne respecte pas les consignes, apporter une justification. NB: Si Dimensions caractristiques maximales  1m prendre 35, et pour les appareil plus grand prendre 10.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theta_Glide Justification"})}),l.jsx("textarea",{value:e.Theta_Glide_Justification,onChange:O=>n({...e,Theta_Glide_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Distance de plan  hauteur d'homme.",l.jsx("br",{}),"d_Glide = hperson/tan "]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"d_Glide (m)"})}),l.jsx("input",{type:"number",value:e.dGlide,onChange:O=>n({...e,dGlide:parseFloat(O.target.value)||0}),step:"0.01",className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.dGlide===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:f().toString()})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Distance de glissement/friction.",l.jsx("br",{}),"d_Slide,reduced = evhorizontaltsafe  0,5Cgg(tsafe)"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"d_Slide,reduced (m)"})}),l.jsx("input",{type:"number",value:e.dSlideReduced,onChange:O=>n({...e,dSlideReduced:parseFloat(O.target.value)||0}),step:"0.01",className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.dSlideReduced===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:h().toString()})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vhorizointal (s)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.vhorizontale})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lethal Speed (m/s)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.vnonlethal})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Time to safe speed [s]",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"tsafe (s)"})}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.tsafe})]})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"High Impact Angle Model"}),l.jsxs("div",{className:"text-red-900 border-gray-300 rounded md:col-span-2",children:[l.jsx("b",{children:"Rappels"})," :",l.jsx("br",{}),l.jsx("b",{children:"Note 1 :"})," Pour valuer la surface critique  l'aide de ce modle, l'altitude minimale oprationnelle doit tre fixe comme limite dans le manuel de l'oprateur.",l.jsx("br",{}),l.jsx("b",{children:"Note 2 :"})," Si l'exploitant choisit d'utiliser les rsultats du modle d'angle d'impact lev, il doit procder par itration pour trouver l'altitude de vol minimale qui passe le seuil de l'outil d'valuation.",l.jsx("br",{}),"Si l'une des conditions ci-dessus n'est pas remplie, il convient d'appliquer le modle d'angle d'impact faible conformment  l'annexe F du JARUS.",l.jsx("br",{})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse maximales (m/s)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxSpeed})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Altitude minimale oprationnelle.",l.jsx("br",{}),"Telle que fixe comme limite dans le manuel de l'oprateur."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Altitude minimale oprationnelle (m)"})}),l.jsx("input",{type:"number",value:e.MinOperationalAltitude,onChange:O=>{const ne=parseFloat(O.target.value)||0;n({...e,MinOperationalAltitude:ne}),b()},step:"0.1",min:0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),l.jsx("div",{}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ThetaImpact (deg)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:b().at(0)})]})]})]}):l.jsx("div",{})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["Etape 2 : Determination des Volumes d'volution, de Contingence Zone Tampon et Adjacente  (Flight Geometry).",l.jsx("button",{type:"button",onClick:()=>window.open("https://www.lba.de/SharedDocs/Downloads/DE/B/B5_UAS/Leitfaden_FG_CV_GRB_eng.pdf?__blob=publicationFile&v=12","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Bas sur la documentation du Luftfahrt-Bundesamt (LBA) - Leitfaden zur Ermittlung des Fluggeometrie- und Kontingenzvolumens sowie der Ground Risk Buffer Zone",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsx("img",{src:Q3,alt:"Centres d'Essais Drones France",className:"w-auto h-auto mb-6 mx-auto"}),l.jsx("h2",{className:"text-lg font-medium",children:"Etape 2.1 : Determination du Volume d'volution (Flight Geometry)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur du Volume d'volution.",l.jsx("br",{}),"Attention : Des valeurs infrieures  3 fois la dimension caractristique maximale de l'appareil sont considres irrecevables.",l.jsx("br",{}),"S_FG 3.maxCharacteristicDimension  l'arrondis suprieur."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"S_FG : Largeur du Volume d'volution (m)"})}),l.jsx("input",{type:"number",value:e.FlightGeographyWidth,onChange:O=>n({...e,FlightGeographyWidth:Math.max(parseFloat(O.target.value),Math.round(3*e.maxCharacteristicDimension+.49))||0}),step:"1.0",className:"mt-1 block w-full rounded-md border-green-900 border-2 font-bold bg-green-50 text-green-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:Math.round(3*e.maxCharacteristicDimension+.49).toString()})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Hauteur du Volume d'volution.",l.jsx("br",{}),"Attention : Des valeurs infrieures  3 fois la dimension caractristique maximale de l'appareil sont considres irrecevables.",l.jsx("br",{}),"H_FG 3.maxCharacteristicDimension  l'arrondis suprieur"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"H_FG : Hauteur du Volume d'volution (m)"})}),l.jsx("input",{type:"number",value:e.FlightGeographyHeight,onChange:O=>n({...e,FlightGeographyHeight:Math.max(parseFloat(O.target.value),Math.round(3*e.maxCharacteristicDimension+.49))||0}),step:"1.0",min:3*e.maxCharacteristicDimension,className:"mt-1 block w-full rounded-md border-green-900 border-2 font-bold bg-green-50 text-green-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:Math.round(3*e.maxCharacteristicDimension+.49).toString()})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous pouvez si vous le souhaitez apporter des lments de justification de la dfinition de votre Volume d'volution.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Volume d'volution"})}),l.jsx("textarea",{value:e.FlightGeography_Justification,onChange:O=>n({...e,FlightGeography_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("h2",{className:"text-lg font-medium",children:"Etape 2.2 : Determination du volume de Contingence (S_CV : Contingency Volume)."}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Le Volume de Contingence : volume dans lequel le drone est considr comme tant dans une situation anormale et qui requiert lexcution des procdures de contingence approprie pour le faire revenir au-dessus de sa zone dvolution. A minima la taille du volume de contingence est calcule comme la distance parcourue par le drone  sa vitesse sol maximale durant le temps de raction du pilote pour sapercevoir quil est sorti du volume dvolution et de prendre les mesures adaptes.  La limite interne du volume de contingence doit correspondre  la limite externe du volume dvolution.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation du Volume de Contingence"})}),l.jsxs("select",{value:e.assessmentContingencyVolume,onChange:O=>n({...e,assessmentContingencyVolume:O.target.value,ContingencyVolume:O.target.value==="Spcifie par le dposant"?e.ContingencyVolume:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation du Volume",children:"Slectionner une mthode d'valuation du Volume"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"}),l.jsx("option",{value:"Calcul selon le Guide",children:"Calcul selon le Guide"})]})]})]}),e.assessmentContingencyVolume==="Calcul selon le Guide"?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur du Volume de Contingence.",l.jsx("br",{}),"Attention : Des valeurs infrieures  la Largeur du Volume d'volution sont considres irrecevables.",l.jsx("br",{}),"S_CV  S_FG"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"S_CV : Largeur du Volume de Contingence (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeWidth,className:"mt-1 block w-full rounded-md border-orange-900 border-2 font-bold bg-orange-50 text-orange-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM),disabled:!0})]}),l.jsx("div",{children:e.ContingencyVolumeSGPS===void 0||e.ContingencyVolumeSGPS===null||e.ContingencyVolumeSpos===void 0||e.ContingencyVolumeSpos===null||e.ContingencyVolumeSK===void 0||e.ContingencyVolumeSK===null||e.ContingencyVolumeSRZ===void 0||e.ContingencyVolumeSRZ===null||e.ContingencyVolumeSCM===void 0||e.ContingencyVolumeSCM===null?l.jsxs("div",{className:"mt-2 p-2 bg-red-50 text-red-600 rounded",children:["Attention : une donne est indfinie ou nulle. Les valeurs suivantes sont utilises pour le calcul de la largeur du volume de contingence. Vrifier la cohrence avec l'affichage.",l.jsx("br",{}),"GPS - Inaccuracy = ",e.ContingencyVolumeSGPS," m",l.jsx("br",{}),"Position Holding = ",e.ContingencyVolumeSpos," m",l.jsx("br",{}),"Map error = ",e.ContingencyVolumeSK," m",l.jsx("br",{}),"Temps de Raction = ",e.ContingencyTimeRZ," s",l.jsx("br",{}),"Distance de raction S_RZ = ",e.ContingencyVolumeSRZ," m",l.jsx("br",{}),"Manoeuvre de contigence S_CM = ",e.ContingencyVolumeSCM," m"]}):l.jsx(Ee,{text:l.jsxs("div",{children:["Les valeurs suivantes sont utilises pour le calcul de la largeur du volume de contingence. Vrifier la cohrence avec l'affichage.",l.jsx("br",{}),"GPS - Inaccuracy = ",e.ContingencyVolumeSGPS," m",l.jsx("br",{}),"Position Holding = ",e.ContingencyVolumeSpos," m",l.jsx("br",{}),"Map error = ",e.ContingencyVolumeSK," m",l.jsx("br",{}),"Temps de Raction = ",e.ContingencyTimeRZ," s",l.jsx("br",{}),"Distance de raction S_RZ = ",e.ContingencyVolumeSRZ," m",l.jsx("br",{}),"Manoeuvre de contigence S_CM = ",e.ContingencyVolumeSCM," m"]}),children:l.jsx("div",{children:l.jsx("button",{onClick:()=>E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM),className:"rounded-md border-green-200 border-2 font-bold text-green-500 hover:text-blue-200",children:"Calculer"})})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Hauteur du Volume de Contingence.",l.jsx("br",{}),"Attention : Des valeurs infrieures  la Hauteur du Volume d'volution sont considres irrecevables.",l.jsx("br",{}),"H_CV  H_FG"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"H_CV : Hauteur du Volume de Contingence (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeHeight,className:"mt-1 block w-full rounded-md border-orange-900 border-2 font-bold bg-orange-50 text-orange-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:e.FlightGeographyHeight,disabled:!0})]}),l.jsx("div",{children:l.jsx(Ee,{text:l.jsxs("div",{children:["Les valeurs suivantes sont utilises pour le calcul de la largeur du volume de contingence. Vrifier la cohrence avec l'affichage.",l.jsx("br",{}),"Erreur de mesure d'altitude = ",e.ContingencyVolumeHbaro," m",l.jsx("br",{}),"Position Holding = ",e.ContingencyVolumeSpos," m",l.jsx("br",{}),"Temps de Raction = ",e.ContingencyTimeRZ," s",l.jsx("br",{}),"Altitude de raction H_RZ = ",e.ContingencyVolumeHRZ," m",l.jsx("br",{}),"Altitude de contigence H_CM = ",e.ContingencyVolumeHCM," m"]}),children:l.jsx("div",{children:l.jsx("button",{onClick:()=>N(e.ContingencyVolumeHbaro,e.ContingencyVolumeHRZ,e.ContingencyVolumeHCM),className:"rounded-md border-green-200 border-2 font-bold text-green-500 hover:text-blue-200",children:"Calculer"})})})})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["GPS - Inaccuracy",l.jsx("br",{}),"En rgle gnral, on assumera une erreur  3 mtres.",l.jsx("br",{}),"..."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GPS - Inaccuracy (m)"})}),l.jsx("input",{type:"number",defaultValue:1,value:e.ContingencyVolumeSGPS,onChange:O=>n({...e,ContingencyVolumeSGPS:parseFloat(O.target.value),ContingencyVolumeWidth:E(parseFloat(O.target.value),e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM)}),step:"0.1",min:0,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ContingencyVolumeSGPS===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Erreur de mesure d'altitude.",l.jsx("br",{}),"En rgle gnral, on assumera une erreur de 1 mtre pour une mesure baromtrique.",l.jsx("br",{}),"Et, on assumera une erreur de 4 mtre pour une mesure GPS."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Erreur de mesure d'altitude (m)"})}),l.jsx("input",{type:"number",defaultValue:1,value:e.ContingencyVolumeHbaro,onChange:O=>n({...e,ContingencyVolumeHbaro:parseFloat(O.target.value),ContingencyVolumeHeight:N(parseFloat(O.target.value),e.ContingencyVolumeHRZ,e.ContingencyVolumeHCM)}),step:"0.1",min:0,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ContingencyVolumeHbaro===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Positionnement du maintien de la position (Position Holding)",l.jsx("br",{}),"En rgle gnral, on assumera une erreur  3 mtres.",l.jsx("br",{}),"..."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Position Holding (m)"})}),l.jsx("input",{type:"number",defaultValue:3,value:e.ContingencyVolumeSpos,onChange:O=>n({...e,ContingencyVolumeSpos:parseFloat(O.target.value),ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,parseFloat(O.target.value),e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM)}),step:"0.1",min:.5,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ContingencyVolumeSpos===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsx("div",{}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Map error",l.jsx("br",{}),"En rgle gnral, on assumera une erreur  1 mtre.",l.jsx("br",{}),"..."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Map error (m)"})}),l.jsx("input",{type:"number",defaultValue:1,value:e.ContingencyVolumeSK,onChange:O=>n({...e,ContingencyVolumeSK:parseFloat(O.target.value),ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,parseFloat(O.target.value),e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM)}),step:"0.1",min:0,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ContingencyVolumeSK===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsx("div",{}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Temps de Raction de l'oprateur ou du systme.",l.jsx("br",{}),"Temps ncessaire pour que l'oprateur prenne conscience de la situation et ragisse.",l.jsx("br",{}),"Cas de l'initialisation manuelle de mesures de contingence. t_RZ  1 seconde",l.jsx("br",{}),"En cas d'automatisation type Geofence par exemple, ce temps peut-tre plus court.  Dans ce cas apporter une justification."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Temps de Raction de l'oprateur ou du systme (s)"})}),l.jsx("input",{type:"number",defaultValue:1,value:e.ContingencyTimeRZ,onChange:O=>n({...e,ContingencyTimeRZ:parseFloat(O.target.value),ContingencyVolumeSRZ:parseFloat(O.target.value)*e.maxSpeed,ContingencyVolumeHRZ:parseFloat(O.target.value)*.7*e.maxSpeed,ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,parseFloat(O.target.value)*e.maxSpeed,e.ContingencyVolumeSCM),ContingencyVolumeHeight:N(e.ContingencyVolumeHbaro,parseFloat(O.target.value)*.7*e.maxSpeed,e.ContingencyVolumeHCM)}),step:"0.1",min:0,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ContingencyTimeRZ===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsx("div",{}),l.jsx("div",{children:l.jsxs("div",{children:[l.jsx(Ee,{text:"S_RZ=01 s ",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Distance de raction S_RZ (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeSRZ,className:"mt-1 block w-full rounded-md border-grey-200 border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:(1*e.maxSpeed).toString(),disabled:!0})]})}),l.jsx("div",{children:l.jsxs("div",{children:[l.jsx(Ee,{text:"RZ=V00.71 s  ",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Altitude de raction H_RZ (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeHRZ,className:"mt-1 block w-full rounded-md border-grey-200 border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:(1*.7*e.maxSpeed).toString(),disabled:!0})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manoeuvre de Contingence : Activation du Parachute"}),l.jsx("input",{type:"checkbox",checked:(e.ContingencyParachuteManeuver||[]).includes("OUI"),onChange:O=>{var ne,J;return n({...e,ContingencyParachuteManeuver:O.target.checked?"OUI":"NON",ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM),ContingencyVolumeHeight:N(e.ContingencyVolumeHbaro,e.ContingencyVolumeHRZ,e.ContingencyVolumeHCM),ContingencyVolumeSCM:(ne=M())==null?void 0:ne.at(0),ContingencyVolumeHCM:(J=M())==null?void 0:J.at(1)})},className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(e.ContingencyParachuteManeuver||[]).includes("OUI")?l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Temps d'activation du parachute (s)",l.jsx("br",{}),"Doit prendre en compte le temps d'ouverture et de mise en descente.",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Temps d'activation du parachute (s)"})}),l.jsx("input",{type:"number",value:e.ParachuteTime,defaultValue:1,onChange:O=>n({...e,ParachuteTime:parseFloat(O.target.value),ContingencyVolumeSCM:parseFloat(O.target.value)*e.maxSpeed,ContingencyVolumeHCM:parseFloat((parseFloat(O.target.value)*.7*e.maxSpeed).toFixed(2)),ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,parseFloat(O.target.value)*e.maxSpeed),ContingencyVolumeHeight:N(e.ContingencyVolumeHbaro,e.ContingencyVolumeHRZ,parseFloat((parseFloat(O.target.value)*.7*e.maxSpeed).toFixed(2)))}),step:"0.1",min:1,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ParachuteTime===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Manoeuvre de contigence S_CM (m)",l.jsx("br",{}),"Alternative : Activation du Parachute.",l.jsx("br",{}),"S_CM = Vmaxt_parachute",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manoeuvre de contigence S_CM (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeSCM,className:"mt-1 block w-full rounded-md border-grey-200 border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:(1*e.maxSpeed).toString(),disabled:!0})]})]}):l.jsxs("div",{children:[(e.uasType||[]).includes("Hli")||(e.uasType||[]).includes("Multi")?l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["ThetaStopCopter (deg)",l.jsx("br",{}),"Hypothses : ThrustWeightRatio suprieur  2.",l.jsx("br",{}),"ThetaStopCopter inf 45",l.jsx("br",{}),"en assumant un angle de roulis  nul."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theta Max Stop (deg)"})}),l.jsx("input",{type:"number",defaultValue:45,value:e.ThetaStopCopter,onChange:O=>n({...e,ThetaStopCopter:parseFloat(O.target.value),ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM),ContingencyVolumeHeight:N(e.ContingencyVolumeHbaro,e.ContingencyVolumeHRZ,e.ContingencyVolumeHCM)}),step:"1.0",min:0,max:45,className:"mt-1 block w-full rounded-md border-grey-200 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"TO BE DEFINED"})]}):l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["PhiMaxPlane (deg)",l.jsx("br",{}),"Hypothses : Virrage  180 en mode Avion.",l.jsx("br",{}),"PhiMaxPlane inf  30",l.jsx("br",{}),"en assumant un angle de roulis  nul."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"PhiMaxPlane (deg)"})}),l.jsx("input",{type:"number",defaultValue:30,value:e.PhiMaxPlane,onChange:O=>n({...e,PhiMaxPlane:parseFloat(O.target.value),ContingencyVolumeWidth:E(e.ContingencyVolumeSGPS,e.ContingencyVolumeSpos,e.ContingencyVolumeSK,e.ContingencyVolumeSRZ,e.ContingencyVolumeSCM),ContingencyVolumeHeight:N(e.ContingencyVolumeHbaro,e.ContingencyVolumeHRZ,e.ContingencyVolumeHCM)}),step:"1.0",min:0,max:30,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.PhiMaxPlane===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"TO BE DEFINED"})]}),l.jsx(Ee,{text:l.jsxs("div",{children:["Manoeuvre de contigence S_CM (m)",l.jsx("br",{}),"* Hlicoptre/Multi-rotor  Arrt d'urgence",l.jsx("br",{}),"S_CM = 1/2Vmax/(gtan())",l.jsx("br",{}),"* Avion/Hybride/Plus lger que l'air  Virage  180",l.jsx("br",{}),"S_CM = Vmax/(gtan())",l.jsx("br",{}),"en assumant un angle de roulis  de 30.",l.jsx("br",{}),"ou bien",l.jsx("br",{}),"S_CM = 180/(2taux de virage max)"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manoeuvre de contigence S_CM (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeSCM,onChange:O=>n({...e,ContingencyVolumeSCM:parseFloat(O.target.value)}),step:"0.1",min:1,className:"mt-1 block w-full rounded-md border-grey-200 border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:(ue=M())==null?void 0:ue.at(0),disabled:!0})]})]}),l.jsxs("div",{children:[l.jsx("br",{}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Manoeuvre de contigence verticale H_CM (m)",l.jsx("br",{}),"Alternative : Activation du Parachute.",l.jsx("br",{}),"H_CM = Vmaxt_parachute0.7",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Altitude de contigence H_CM (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeHCM,className:"mt-1 block w-full rounded-md border-grey-200 border-2 font-bold shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:(1*.7*e.maxSpeed).toString(),disabled:!0})]})]})]}):e.assessmentContingencyVolume==="Spcifie par le dposant"?l.jsxs("div",{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur du Volume de Contingence.",l.jsx("br",{}),"Attention : Des valeurs infrieures  la Largeur du Volume d'volution sont considres irrecevables.",l.jsx("br",{}),"S_CV  S_FG"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"S_CV : Largeur du Volume de Contingence (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeWidth,onChange:O=>n({...e,ContingencyVolumeWidth:parseFloat(O.target.value)}),step:"0.1",min:e.FlightGeographyWidth,className:"mt-1 block w-full rounded-md border-orange-900 border-2 font-bold bg-orange-50 text-orange-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:e.FlightGeographyWidth})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Hauteur du Volume de Contingence.",l.jsx("br",{}),"Attention : Des valeurs infrieures  la Hauteur du Volume d'volution sont considres irrecevables.",l.jsx("br",{}),"H_CV  H_FG"]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"H_CV : Hauteur du Volume de Contingence (m)"})}),l.jsx("input",{type:"number",value:e.ContingencyVolumeHeight,onChange:O=>n({...e,ContingencyVolumeHeight:Math.max(parseFloat(O.target.value),e.FlightGeographyHeight)||0}),step:"0.1",min:e.FlightGeographyHeight,className:"mt-1 block w-full rounded-md border-orange-900 border-2 font-bold bg-orange-50 text-orange-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:e.FlightGeographyHeight})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Volume de Contingence.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Volume de Contingence"})}),l.jsx("textarea",{value:e.ContingencyVolume_Justification,onChange:O=>n({...e,ContingencyVolume_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):l.jsx("div",{}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("h2",{className:"text-lg font-medium",children:"Etape 2.3 : Determination du Zone Tampon (Ground Risk Buffer)."}),(e.uasType==="Avion"||e.uasType==="Hybride/VTOL")&&e.GlidingCapability==="OUI"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Terminaison Aile Fixe",children:"Terminaison Aile Fixe"}),l.jsx("option",{value:"Terminaison avec parachute",children:"Terminaison avec parachute"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}):(e.uasType==="Avion"||e.uasType==="Hybride/VTOL")&&e.GlidingCapability==="NON"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Terminaison avec parachute",children:"Terminaison avec parachute"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}):(e.uasType==="Avion"||e.uasType==="Hybride/VTOL")&&(e.GlidingCapability===void 0||e.GlidingCapability===null)?l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Terminaison Aile Fixe",children:"Terminaison Aile Fixe"}),l.jsx("option",{value:"Terminaison avec parachute",children:"Terminaison avec parachute"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}):e.uasType==="Hlicoptre"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Approche Balistique (Hlicoptre ou Multirotor)",children:"Approche Balistique (Hlicoptre ou Multirotor)"}),l.jsx("option",{value:"Terminaison avec parachute",children:"Terminaison avec parachute"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}):e.uasType==="Multirotor"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Approche Balistique (Hlicoptre ou Multirotor)",children:"Approche Balistique (Hlicoptre ou Multirotor)"}),l.jsx("option",{value:"Terminaison avec parachute",children:"Terminaison avec parachute"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}):e.uasType==="Plus lger que l'air"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}):l.jsxs("div",{children:[l.jsx(Ee,{text:"Aussi appele Ground Risk Buffer, cette zone est dfinie au niveau du sol directement adjacente au volume de contingence. Si l'UAS quitte la zone de contingence, il est assum que l'UAS n'est plus sous contrle de l'oprateur et qu'il doit tre mis fin au vol. Dans ce cas le l'UAS doit retomber dans la zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de la Zone Tampon"})}),l.jsxs("select",{value:e.assessmentGRB,onChange:O=>n({...e,assessmentGRB:O.target.value,GRB:O.target.value==="Slectionner une mthode d'valuation de la zone tampon"?e.GRB:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation de la zone tampon",children:"Slectionner une mthode d'valuation de la zone tampon"}),l.jsx("option",{value:"Approche Simplifie, Rgle 1:1",children:"Approche Simplifie, Rgle 1:1"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]})]}),l.jsxs("div",{children:[e.uasType==="Avion"||e.uasType==="Hybride/VTOL"?l.jsxs("div",{className:"text-red-900 border-gray-300 rounded",children:[l.jsx("b",{children:"Rappels"})," : Type d'UAS comme ",l.jsx("b",{children:e.uasType}),l.jsx("br",{}),"Vous devez dfinir si votre appareil peut effectuer un vol plan.",l.jsx("br",{}),"Attention de bien rester cohrent si vous changez votre dclaration vis  vis de celle utilisez dans le modle JARUS pour l'valuation de la zone de crash.",l.jsx("br",{}),"Si aucune capacit de vol plan n'est possible, seule la rgle 1:1 ou la terminaison avec parachute peuvent tre appliques.",l.jsx("br",{}),"Sinon, dfinissez votre propre GRB.",l.jsx("br",{}),l.jsx("br",{})]}):e.uasType==="Hlicoptre"?l.jsxs("div",{className:"text-red-900 border-gray-300 rounded",children:[l.jsx("b",{children:"Rappels"})," : Type d'UAS comme ",l.jsx("b",{children:e.uasType}),l.jsx("br",{}),"Seules les rgles compatibles peuvent tre appliques.",l.jsx("br",{}),"Sinon, dfinissez votre propre GRB.",l.jsx("br",{}),l.jsx("br",{})]}):e.uasType==="Multirotor"?l.jsxs("div",{className:"text-red-900 border-gray-300 rounded",children:[l.jsx("b",{children:"Rappels"})," : Type d'UAS comme ",l.jsx("b",{children:e.uasType}),l.jsx("br",{}),"Seules les rgles compatibles peuvent tre appliques.",l.jsx("br",{}),"Sinon, dfinissez votre propre GRB.",l.jsx("br",{}),l.jsx("br",{})]}):e.uasType==="Plus lger que l'air"?l.jsxs("div",{className:"text-red-900 border-gray-300 rounded",children:[l.jsx("b",{children:"Rappels"})," : Type d'UAS comme ",l.jsx("b",{children:e.uasType}),l.jsx("br",{}),"Seule la rgle 1:1 peut tre applique.",l.jsx("br",{}),"Sinon, dfinissez votre propre GRB.",l.jsx("br",{}),l.jsx("br",{})]}):l.jsxs("div",{className:"text-red-900 border-gray-300 rounded",children:[l.jsx("b",{children:"-Rappels"})," : Type d'UAS comme ",l.jsx("b",{children:e.uasType}),l.jsx("br",{}),"Seule la rgle 1:1 peut tre applique.",l.jsx("br",{}),"Sinon, dfinissez votre propre GRB.",l.jsx("br",{}),l.jsx("br",{})]}),e.assessmentGRB==="Approche Simplifie, Rgle 1:1"?l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur de votre Zone Tampon (Ground Risk Buffer)",l.jsx("br",{}),l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRB : Largeur de votre Zone Tampon (m)"})}),l.jsx("input",{type:"number",value:S(),onChange:O=>n({...e,GRBWidth:parseFloat(O.target.value)}),className:"mt-1 block w-full rounded-md border-red-900 border-2 font-bold bg-red-50 text-red-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Not yet computed",disabled:!0})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Volume de Contingence.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Zone Tampon (Ground Risk Buffer)"})}),l.jsx("textarea",{value:e.GRB_Justification,onChange:O=>n({...e,GRB_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):e.assessmentGRB==="Approche Balistique (Hlicoptre ou Multirotor)"?l.jsxs("div",{children:[l.jsx("label",{children:"'Approche Balistique (Hlicoptre ou Multirotor)'"}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur de votre Zone Tampon (Ground Risk Buffer)",l.jsx("br",{}),l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRB : Largeur de votre Zone Tampon (m)"})}),l.jsx("input",{type:"number",value:S(),onChange:O=>n({...e,GRBWidth:parseFloat(O.target.value)}),className:"mt-1 block w-full rounded-md border-red-900 border-2 font-bold bg-red-50 text-red-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Not yet computed",disabled:!0})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Volume de Contingence.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Zone Tampon (Ground Risk Buffer)"})}),l.jsx("textarea",{value:e.GRB_Justification,onChange:O=>n({...e,GRB_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):e.assessmentGRB==="Terminaison Aile Fixe"?l.jsxs("div",{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coupure de l'alimentation."}),l.jsx("input",{type:"checkbox",onChange:T,className:"h-4 w-4 text-blue-600 border-gray-300 rounded",defaultChecked:y()})]}),e.GRB_FixedWingPowerOff.includes("ACTIVATED")?l.jsx("div",{children:l.jsxs("div",{children:[l.jsx("b",{children:"Rappel :"}),'Vous avez dclar "',e.GlidingCapability,`" pour la capacit de vol plan dans le Modle JARUS pour l'valuation de la Zone de Crash.`,l.jsx("br",{}),l.jsx("br",{}),'Sinon, dfinissez Theta_Glide en cohrence avec celui utilis dans le Modle JARUS, soit "',e.ThetaGlide,'".']})}):l.jsxs("div",{children:["Si vous n'activ pas de Coupure de l'alimentation la rgle du 1:1 sera applique car GRB_FixedWingPowerOff = ",e.GRB_FixedWingPowerOff]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:" ",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"L'appareil est-il capable de planer ?"})}),l.jsxs("select",{value:e.GlidingCapability,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Angle d'impact (de plan/fauch.) NB: Si Dimensions caractristiques maximales  1m prendre 35, et pour les appareil plus grand prendre 10.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theta_Glide (deg)"})}),l.jsx("input",{type:"number",value:e.ThetaGlide,onChange:O=>n({...e,ThetaGlide:parseFloat(O.target.value)||0}),step:"0.1",min:0,max:90,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.ThetaGlide===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur de votre Zone Tampon (Ground Risk Buffer)",l.jsx("br",{}),l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRB : Largeur de votre Zone Tampon (m)"})}),l.jsx("input",{type:"number",value:S(),onChange:O=>n({...e,GRBWidth:parseFloat(O.target.value)}),className:"mt-1 block w-full rounded-md border-red-900 border-2 font-bold bg-red-50 text-red-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Not yet computed",disabled:!0})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Volume de Contingence.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Zone Tampon (Ground Risk Buffer)"})}),l.jsx("textarea",{value:e.GRB_Justification,onChange:O=>n({...e,GRB_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):e.assessmentGRB==="Terminaison avec parachute"?l.jsxs("div",{children:[e.ParachuteTime&&(e.ContingencyParachuteManeuver||[]).includes("OUI")?l.jsxs("label",{children:["Temps d'activation du parachute dj dfinie pour la manoeuvre de contingence : ",e.ParachuteTime,"(s)"]}):l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Temps d'activation du parachute (s)",l.jsx("br",{}),"Doit prendre en compte le temps d'ouverture et de mise en descente.",l.jsx("br",{}),"Ne peut tre infrieur  1 seconde."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Temps d'activation du parachute (s)"})}),l.jsx("input",{type:"number",value:e.ParachuteTime,defaultValue:1,onChange:O=>n({...e,ParachuteTime:parseFloat(O.target.value),GRBWidth:S()}),step:"0.1",min:1,className:"mt-1 block w-full rounded-md border-grey-200 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"1.0"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Vitesse de dscente sous parachute (m/s)",l.jsx("br",{}),"Gnralement de l'ordred de 6.0 m/s",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse de dscente sous parachute (m/s)"})}),l.jsx("input",{type:"number",value:e.VzParachute,onChange:O=>n({...e,VzParachute:parseFloat(O.target.value)}),step:"0.1",min:3,className:`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 ${e.VzParachute===void 0?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-blue-500"}`,placeholder:"6.0"})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Vitesse du vent considr pour la dscente sous parachute (m/s)",l.jsx("br",{}),"Elle doit tre comprise entre la Vitesse maximale du vent au dcollage et la Vitesse maximale de tenue  la rafale en volution .",l.jsx("br",{}),`Ces valeur ont t dclares dans la section "Limitations environnementales"  l'tape 1 : Concept d'oprations / ConOps`]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse du vent considr pour la dscente sous parachute (m/s)"})}),l.jsx("input",{type:"number",value:e.VwindParachute,onChange:O=>n({...e,VwindParachute:parseFloat(O.target.value)}),step:"0.1",min:e.environmentalLimitations.maxWindSpeedTakeoff,max:e.environmentalLimitations.maxGustSpeed,className:"mt-1 block w-full rounded-md border-grey-200 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:e.environmentalLimitations.maxWindSpeedTakeoff.toString()})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur de votre Zone Tampon (Ground Risk Buffer)",l.jsx("br",{}),l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRB : Largeur de votre Zone Tampon (m)"})}),l.jsx("input",{type:"number",value:S(),onChange:O=>n({...e,GRBWidth:parseFloat(O.target.value)}),className:"mt-1 block w-full rounded-md border-red-900 border-2 font-bold bg-red-50 text-red-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Not yet computed",disabled:!0})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Volume de Contingence.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Zone Tampon (Ground Risk Buffer)"})}),l.jsx("textarea",{value:e.GRB_Justification,onChange:O=>n({...e,GRB_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):e.assessmentGRB==="Spcifie par le dposant"?l.jsxs("div",{children:[l.jsx("label",{children:"'Autre Terminaison  prciser'"}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur de votre Zone Tampon (Ground Risk Buffer)",l.jsx("br",{}),l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRB : Largeur de votre Zone Tampon (m)"})}),l.jsx("input",{type:"number",value:e.GRBWidth,onChange:O=>n({...e,GRBWidth:parseFloat(O.target.value)}),step:"0.1",min:e.FlightGeographyWidth,className:"mt-1 block w-full rounded-md border-red-900 border-2 font-bold bg-red-50 text-red-600 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:e.FlightGeographyWidth})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Volume de Contingence.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Zone Tampon (Ground Risk Buffer)"})}),l.jsx("textarea",{value:e.GRB_Justification,onChange:O=>n({...e,GRB_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):l.jsx("div",{})]}),l.jsx("h2",{className:"text-lg font-medium",children:"Etape 2.4 : Determination de la Zone Adjacente (Adjacent Volume)."}),l.jsx("img",{src:IE,alt:"AdjacenteArea",className:"w-auto h-auto mb-6 mx-auto"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur Zone Adjacente (Adjacent Volume)",l.jsx("br",{}),"Calcul selon l'hyposthse que l'UAS vole  sa vitesse maximale de croisire durant 3 minutes.",l.jsx("br",{}),"5 km < Largeur Zone Adjacente < 35 km",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Largeur Zone Adjacente (m)"})}),l.jsx("input",{type:"number",value:_(),onChange:O=>n({...e,AdjacentVolumeWidth:parseFloat(O.target.value)}),className:"mt-1 block w-full rounded-md border-black border-2 font-bold bg-gray-400 text-black  border-2 font-bold  shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:5e3,disabled:!0})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Hauteur Zone Adjacente (Adjacent Volume)",l.jsx("br",{})," =  + 150 ",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hauteur Zone Adjacente (m)"})}),l.jsx("input",{type:"number",value:w(),onChange:O=>n({...e,AdjacentVolumeHeight:parseFloat(O.target.value)}),className:"mt-1 block w-full rounded-md border-black border-2 font-bold bg-gray-400 text-black  border-2 font-bold  shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:0,disabled:!0})]}),e.AdjacentVolumeWidthEqualMaxRange==="OUI"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la dfinition de votre Zone Adjacente.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Zone Adjacente (Adjacent Volume)"})}),l.jsx("textarea",{value:e.AdjacentVolume_Justification,onChange:O=>n({...e,AdjacentVolume_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]}):l.jsx("div",{})]})]})]}),l.jsx("section",{className:"space-y-4",children:l.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["Ground Risk Assessment Initial",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Main-Body-Release-JAR_doc_25.pdf#page=33","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Main Body - Section 4.2 Step #2  Determination of the intrinsic Ground Risk Class (iGRC) ",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:[l.jsx("li",{children:"Le calcul de l'iGRC peut tre dterminer par l'utilisateur qui devra alors fournir la densit de population, la vitesse maximale de l'UAS et la dimension caractristique maximale tant alors utilis pour dterminer un iGRC selon la table. Une justification de la densit de population doit tre fournie, en justifiant de la base de donne de population utilise."}),l.jsx("br",{}),l.jsx("li",{children:"Sinon l'utilisateur peut choisir de gnrer un fichier d'input pour utiliser l'outil DROSERA(c). Il reportera le fichier de rsultat DROSERA dans le champ  cet effet. "}),l.jsx("br",{}),l.jsx("li",{children:"Enfin le dposant peut choisir de spcifier lui-mme l'iGRC. Dans ce cas il devra remplir les informations tel que pour le calcul selon les table SORA qui lui fourniront alors  titre indicatif un iGRC. Le dposant devra alors slectionner et justifier de son iGRC plus bas."})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mthode d'valuation de l'iGRC"})}),l.jsxs("select",{value:e.assessmentiGRC,onChange:O=>n({...e,assessmentiGRC:O.target.value,iGRCNumber:O.target.value==="Spcifie par le dposant"?e.iGRCNumber:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation iGRC",children:"Slectionner une mthode d'valuation iGRC"}),l.jsx("option",{value:"Calcul selon les tables SORA",children:"Calcul selon les tables SORA"}),l.jsx("option",{value:"Calcul DROSERA",children:"Calcul DROSERA"}),l.jsx("option",{value:"Spcifie par le dposant",children:"Spcifie par le dposant"})]})]}),l.jsx("h3",{className:"text-lg font-medium",children:"Rappels des donnes de base"}),l.jsx("div",{children:""}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dimensions caractristiques maximales (m)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxCharacteristicDimension})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse maximales (m/s)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxSpeed})]}),l.jsx("img",{src:eR,alt:"Centres d'Essais Drones France",className:"w-auto h-auto mb-6 mx-auto md:col-span-2"}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:[l.jsx("li",{children:"BDD Population"}),l.jsx("br",{}),l.jsx("li",{children:". "}),l.jsx("br",{}),l.jsx("li",{children:"."})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Base de donne de population"})}),l.jsxs("select",{value:e.PopulationDensityDataBase,onChange:O=>n({...e,PopulationDensityDataBase:O.target.value,PopulationDensityDataBaseNumber:O.target.value==="Spcifie par le dposant"?e.PopulationDensityDataBaseNumber:0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une Base de donne de population",children:"Slectionner une Base de donne de population"}),l.jsx("option",{value:"INSEE_Filosofi2019_200m",children:"INSEE_Filosofi2019_200m"}),l.jsx("option",{value:"GHS_POP_E2025_GLOBE_R2023A_54009_100_V1_0_dens",children:"GHS_POP_E2025_GLOBE_R2023A_54009_100_V1_0_dens"})]})]})]}),e.assessmentiGRC==="Calcul selon les tables SORA"||e.assessmentiGRC==="Spcifie par le dposant"?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"iGRC Footprint : Densit Maximale de population(ppl/km)"}),l.jsxs("select",{value:e.populationDensity||"Zone Contrle",onChange:O=>n({...e,populationDensity:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une Densit de population",children:"Slectionner une Densit de population"}),l.jsx("option",{value:"Zone Contrle",children:"Zone Contrle"}),l.jsx("option",{value:"<5",children:"<5"}),l.jsx("option",{value:"<50",children:"<50"}),l.jsx("option",{value:"<500",children:"<500"}),l.jsx("option",{value:"<5,000",children:"<5,000"}),l.jsx("option",{value:"<50,000",children:"<50,000"}),l.jsx("option",{value:">50,000",children:">50,000"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la Densit de population slectionne.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Densit Maximale de population (iGRC Footprint)"})}),l.jsx("textarea",{value:e.PopulationDensity_Justification,onChange:O=>n({...e,PopulationDensity_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zone adjacente : Densit Moyenne de population(ppl/km)"}),l.jsxs("select",{value:e.populationDensityAdjacentArea||"Zone Contrle",onChange:O=>n({...e,populationDensityAdjacentArea:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une Densit de population",children:"Slectionner une Densit de population"}),l.jsx("option",{value:"Zone Contrle",children:"Zone Contrle"}),l.jsx("option",{value:"<5",children:"<5"}),l.jsx("option",{value:"<50",children:"<50"}),l.jsx("option",{value:"<500",children:"<500"}),l.jsx("option",{value:"<5,000",children:"<5,000"}),l.jsx("option",{value:"<50,000",children:"<50,000"}),l.jsx("option",{value:">50,000",children:">50,000"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Vous devez apporter des lments de justification de la Densit de population slectionne.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification de votre Densit de population moyenne en zone adjacente"})}),l.jsx("textarea",{value:e.PopulationDensity_Justification,onChange:O=>n({...e,PopulationDensity_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]}):e.assessmentiGRC==="Calcul DROSERA"?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Cette option n'aura d'impact qu'en cas d'usage du module DROSERA  l'tape Ground Risk Assessment Initial plus bas.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Moduler la densit de population en fonction du temps de vol le long de la trajectoire du drone"})}),l.jsxs("select",{value:e.PopulationDensityModulation,onChange:O=>n({...e,PopulationDensityModulation:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation",children:"Slectionner une mthode d'valuation"}),l.jsx("option",{value:"NON",children:"NON"}),l.jsx("option",{value:"OUI",children:"OUI"})]})]}),e.PopulationDensityModulation==="OUI"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Rappel : Heure Locale spcifie  l'tape #1",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Heure de Dmarrage"})}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{type:"time",value:e.assessmentStartTime,onChange:O=>n({...e,assessmentStartTime:O.target.value}),className:"block w-full pr-10 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:!0}),l.jsx(Uh,{className:"absolute right-3 top-2 h-5 w-5 text-gray-400"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Rappel : Heure Locale spcifie  l'tape #1",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Heure de Fin des oprations"})}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{type:"time",value:e.assessmentEndTime,onChange:O=>n({...e,assessmentEndTime:O.target.value}),className:"block w-full pr-10 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:!0}),l.jsx(Uh,{className:"absolute right-3 top-2 h-5 w-5 text-gray-400"})]})]})]}),e.PopulationDensityModulation==="NON"?l.jsx("div",{children:""}):e.PopulationDensityModulation==="OUI"?null:l.jsx("div",{children:""}),l.jsxs("button",{onClick:()=>ce(),className:" flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!(e.PopulationDensityModulation==="OUI"||e.PopulationDensityModulation==="NON")||!(e.PopulationDensityDataBase==="INSEE_Filosofi2019_200m"||e.PopulationDensityDataBase==="GHS_POP_E2025_GLOBE_R2023A_54009_100_V1_0_dens"),children:[l.jsx(Eg,{className:"w-5 h-5"}),"Gnrer le fichier d'input pour DROSERA"]}),l.jsx("div",{}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Insrez fichier html output drosder",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drosera ouptut HTML"})}),l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-500 transition-colors",children:[l.jsx("input",{ref:z,type:"file",accept:".html",onChange:ae,className:"hidden"}),l.jsxs("div",{onClick:()=>{var O;return(O=z.current)==null?void 0:O.click()},className:"flex items-center justify-center gap-2 cursor-pointer",children:[l.jsx(qh,{className:"w-5 h-5 text-gray-400"}),l.jsx("span",{className:"text-gray-600",children:"Dposer le fichier Drosera HTML ici"})]})]}),A&&l.jsx("div",{className:"mt-2 p-2 bg-red-50 text-red-600 rounded",children:A}),e.droseraOutputFile&&e.droseraOutputFile.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:e.droseraOutputFile.map((O,ne)=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded",children:[l.jsx("span",{className:"text-sm text-gray-600",children:O.name}),l.jsx("button",{onClick:()=>P(ne),className:"text-red-500 hover:text-red-700",children:"Supprimer"})]},ne))})]}),l.jsxs("div",{className:"bg-gray-400 p-4 md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-4",children:"Rsultat de l'analyse DROSERA"}),l.jsx("div",{}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.DroseraResTable&&e.DroseraResTable.length>0?l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 text-black",children:[l.jsx("th",{className:"py-2 px-4 border-b",children:"Critical area (m)"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Max population density (ppl/km)"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Max iGRC"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Average population density in adjacent area (ppl/km)"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Average iGRC in adjacent area"})]})}),l.jsx("tbody",{children:l.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[l.jsx("td",{className:"py-2 px-4 border-b",children:e.DroseraResTable[0]}),l.jsx("td",{className:"py-2 px-4 border-b",children:e.DroseraResTable[1]}),l.jsx("td",{className:"py-2 px-4 border-b",children:e.DroseraResTable[2]}),l.jsx("td",{className:"py-2 px-4 border-b",children:e.DroseraResTable[3]}),l.jsx("td",{className:"py-2 px-4 border-b",children:e.DroseraResTable[4]})]})})]}):l.jsx("div",{className:"text-gray-600",children:"Aucune donne disponible. Veuillez tlcharger un fichier DROSERA valide."})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"iGRC Footprint : Densit Maximale de population(ppl/km)"}),l.jsxs("select",{value:e.populationDensity||"Zone Contrle",onChange:O=>n({...e,populationDensity:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Zone Contrle",children:"Zone Contrle"}),l.jsx("option",{value:"<5",children:"<5"}),l.jsx("option",{value:"<50",children:"<50"}),l.jsx("option",{value:"<500",children:"<500"}),l.jsx("option",{value:"<5,000",children:"<5,000"}),l.jsx("option",{value:"<50,000",children:"<50,000"}),l.jsx("option",{value:">50,000",children:">50,000"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zone adjacente : Densit Moyenne de population(ppl/km)"}),l.jsxs("select",{value:e.populationDensityAdjacentArea||"Zone Contrle",onChange:O=>n({...e,populationDensityAdjacentArea:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une Densit de population",children:"Slectionner une Densit de population"}),l.jsx("option",{value:"Zone Contrle",children:"Zone Contrle"}),l.jsx("option",{value:"<5",children:"<5"}),l.jsx("option",{value:"<50",children:"<50"}),l.jsx("option",{value:"<500",children:"<500"}),l.jsx("option",{value:"<5,000",children:"<5,000"}),l.jsx("option",{value:"<50,000",children:"<50,000"}),l.jsx("option",{value:">50,000",children:">50,000"})]})]})]}):l.jsx("div",{}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("h2",{className:"text-1xl font-semibold",children:"Tableau de dtermination de l'iGRC"}),e.assessmentiGRC!=="Calcul DROSERA"?l.jsxs("div",{children:[l.jsx(Ee,{text:"Attention : Si vous activez une rduction de l'iGRC via cette option, et que vous la confirme plus bas, vous devrez considrer que toute mitigation de type M2 lors de l'tape 3 sera juge en regard de la catgorie de dimension attenante.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Utiliser la classe de Dimension Caractristique Max. Applicable selon le calcul de la crash Area"})}),l.jsx("div",{children:" "}),l.jsx("input",{type:"checkbox",checked:(e.UsemaxCharacteristicDimension||[]).includes("OUI"),onChange:O=>n({...e,UsemaxCharacteristicDimension:O.target.checked?"OUI":"NON"}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsxs("div",{className:" text-gray-200",children:[s()," "]}),l.jsx(Ee,{text:"Attention : Si vous activez une rduction de l'iGRC via cette option, et que vous la confirme plus bas, vous devrez considrer que toute mitigation de type M2 lors de l'tape 3 sera juge en regard de la catgorie de dimension attenante.",children:e.UsemaxCharacteristicDimension==="OUI"?l.jsxs("div",{children:[" Dimension Caractristique Maximale utilise : ",e.maxCharacteristicDimensionClass,"m"]}):l.jsxs("div",{children:[" Dimension Caractristique Maximale utilise : ",e.maxCharacteristicDimension,"m"]})})]}):l.jsxs("div",{className:" text-gray-200",children:[e.UsemaxCharacteristicDimension="NON",s(),l.jsxs("div",{className:" text-gray-600",children:["Dimension Caractristique Maximale utilise : ",e.maxCharacteristicDimension,"m"]})]}),l.jsxs("table",{className:"min-w-full bg-white md:col-span-2",children:[l.jsxs("thead",{children:[l.jsx("tr",{className:"bg-gray-100 text-black",children:l.jsx(Ee,{text:"En bleu l'iGRC selon les tables SORA, en gris l'iGRC moyen dans la zone adjacente. Si vous avez utilis les calculs DROSERA ces valeurs sont potentiellement majorante.",children:l.jsx("th",{colspan:"7",className:"  py-2 px-4 border-b",children:"Classe d'iGRC"})})}),l.jsxs("tr",{className:"bg-blue-500 text-white",children:[l.jsx("th",{colspan:"2",className:"bg-blue-400 py-2 px-4 border-b",children:"Dimension caractristique Maimale"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"1m / appro. 3ft"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"3m / appro. 10ft"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"8m / appro. 25ft"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"20m / appro. 65ft"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"40m / appro. 130ft"})]}),l.jsxs("tr",{className:"bg-green-500 text-white",children:[l.jsx("th",{colspan:"2",className:"bg-green-400 py-2 px-4 border-b",children:"Vitesse de Croisire Maximale"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"25 m/s"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"35 m/s"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"75 m/s"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"150 m/s"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"200 m/s"})]})]}),l.jsxs("tbody",{children:[l.jsx("th",{rowspan:"8",className:"bg-red-200 text-black",children:"Densit de population iGRC Maximale (ppl/km)"}),a.map((O,ne)=>l.jsxs("tr",{className:"bg-gray-200 text-gray-400",children:[l.jsx("th",{className:"py-2 px-4 border-b bg-red-200 text-black",children:O.PopDensity}),l.jsxs("th",{className:e.iGRC_colIndex==1?O.PopDensity.endsWith(e.populationDensity)&&O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-blue-400 text-white border-2 border-gray-500":O.PopDensity.endsWith(e.populationDensity)?"bg-blue-400 border-2 border-blue-500 text-white":O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-gray-400 border-2 border-gray-500 text-white":"py-2 px-4 border-b":"py-2 px-4 border-b",children:[O.MaxdimCS1,"    "]}),l.jsx("th",{className:e.iGRC_colIndex==2?O.PopDensity.endsWith(e.populationDensity)&&O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-blue-400 text-white border-2 border-gray-500":O.PopDensity.endsWith(e.populationDensity)?"bg-blue-400 border-2 border-blue-500 text-white":O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-gray-400 border-2 border-gray-500 text-white":"py-2 px-4 border-b":"py-2 px-4 border-b",children:O.MaxdimCS2}),l.jsx("th",{className:e.iGRC_colIndex==3?O.PopDensity.endsWith(e.populationDensity)&&O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-blue-400 text-white border-2 border-gray-500":O.PopDensity.endsWith(e.populationDensity)?"bg-blue-400 border-2 border-blue-500 text-white":O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-gray-400 border-2 border-gray-500 text-white":"py-2 px-4 border-b":"py-2 px-4 border-b",children:O.MaxdimCS3}),l.jsx("th",{className:e.iGRC_colIndex==4?O.PopDensity.endsWith(e.populationDensity)&&O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-blue-400 text-white border-2 border-gray-500":O.PopDensity.endsWith(e.populationDensity)?"bg-blue-400 border-2 border-blue-500 text-white":O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-gray-400 border-2 border-gray-500 text-white":"py-2 px-4 border-b":"py-2 px-4 border-b",children:O.MaxdimCS4}),l.jsx("th",{className:e.iGRC_colIndex==5?O.PopDensity.endsWith(e.populationDensity)&&O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-blue-400 text-white border-2 border-gray-500":O.PopDensity.endsWith(e.populationDensity)?"bg-blue-400 border-2 border-blue-500 text-white":O.PopDensity.endsWith(e.populationDensityAdjacentArea)?"bg-gray-400 border-2 border-gray-500 text-white":"py-2 px-4 border-b":"py-2 px-4 border-b",children:O.MaxdimCS5})]},ne))]})]})]}),l.jsx("h2",{className:"text-2xl font-semibold",children:"iGRC"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Veuillez entrer le niveau GRC Initial Maximal dclar pour la zone d'Empreinte au sol de l'opration : Volume Oprationel + Zone Tampon.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Maximum iGRC (Empreinte au sol de l'opration UAS)"})}),l.jsxs("select",{value:e.iGRC,onChange:O=>n({...e,iGRC:O.target.value}),className:"mt-1 block w-full rounded-md border-blue-900 border-2 font-bold bg-blue-50 text-blue-600 shadow-sm focus:border-red-500 focus:ring-red-500",children:[l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"}),l.jsx("option",{value:"5",children:"5"}),l.jsx("option",{value:"6",children:"6"}),l.jsx("option",{value:"7",children:"7"}),l.jsx("option",{value:"8",children:"8"})]})]}),l.jsxs("div",{className:"bg-gray-400 p-4 md:col-span-2",children:[l.jsx(Ee,{text:"Si votre iGRC dclar diffre de celui calcul ou si vous avez choisi de spcifier vous mme votre iGRC, une justification complmentaire devra tre apporte. Dans les autres cas vous pouvez apporter un complment d'information ou laisser ce champ vide.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justification complmnetaire de votre iGRC dclar"})}),l.jsx("textarea",{value:e.iGRC_Justification,onChange:O=>n({...e,iGRC_Justification:O.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]})]})})]})}function oR({assessment:e,onChange:t}){const r=[{Integrity:"Intgrit faible ",InsuranceLow:"Robustesse faible",InsuranceMedium:"Robustesse Faible ",InsuranceHigh:"Robustesse Faible "},{Integrity:"Intgrit moyenne",InsuranceLow:"Robustesse faible",InsuranceMedium:"Robustesse Moyenne",InsuranceHigh:"Robustesse Moyenne"},{Integrity:"Intgrit haute  ",InsuranceLow:"Robustesse faible",InsuranceMedium:"Robustesse Moyenne",InsuranceHigh:"Robustesse Haute  "}],n=()=>{if(!e||!e.iGRC||!e.mitigationStrategiqueM1A||!e.mitigationStrategiqueM1B||!e.reduceImpactAttenuationM2||!e.confinementRequirements)return"Vous devez slectionner une valeur pour chaque type d'attnuation";let a=Number(e.iGRC);return e.mitigationStrategiqueM1A.includes("faible")?a=a-1:e.mitigationStrategiqueM1A.includes("moyenne")?a=a-2:a=a-0,e.mitigationStrategiqueM1B.includes("moyenne")?a=a-1:e.mitigationStrategiqueM1B.includes("leve")?a=a-2:a=a-0,e.mitigationTactiqueM1C.includes("faible")?a=a-1:a=a-0,e.reduceImpactAttenuationM2.includes("moyenne")?a=a-1:e.reduceImpactAttenuationM2.includes("leve")?a=a-2:a=a-0,a<e.iGRCControledZone&&(a=e.iGRCControledZone),a},i=[{MitigationGR:"M1(A)  Attnuation Strategique - Abris",LowMitigation:"-1",MediumMitigation:"-2",HighMitigation:"N/A"},{MitigationGR:"M1(B)  Attnuation Strategique - Restrictions Operationelles",LowMitigation:"N/A",MediumMitigation:"-1",HighMitigation:"-2"},{MitigationGR:"M1(C)  Attnuations Tactique  Observateur(s) au sol",LowMitigation:"-1",MediumMitigation:"N/A",HighMitigation:"N/A"},{MitigationGR:"M2  Rduction des effets de limpact au sol",LowMitigation:"N/A",MediumMitigation:"-1",HighMitigation:"-2"}];return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("h2",{className:"text-2xl font-semibold",children:["Tableau de mitigation du Risque Sol",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Main-Body-Release-JAR_doc_25.pdf#page=33","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Main Body - Section 4.3 Step #3  Final Ground Risk Class (GRC) determination (optional)  ",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsxs("thead",{children:[l.jsxs("tr",{className:"bg-white",children:[l.jsx("th",{className:"bg-withe py-2 px-4 border-b",children:" "}),l.jsx("th",{colspan:"3",className:"bg-blue-300 py-2 px-4 border-b ",children:"Niveau de Robustesse"})]}),l.jsxs("tr",{className:"bg-blue-300 ",children:[l.jsx("th",{className:"bg-blue-400 py-2 px-4 border-b",children:"Attnuation du risque Sol"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Faible"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Moyenne"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Haute"})]})]}),l.jsx("tbody",{children:i.map((a,s)=>l.jsxs("tr",{className:"bg-gray-200 text-gray-800",children:[l.jsx("th",{className:"py-2 px-4 border-b bg-red-200 text-black text-left",children:a.MitigationGR}),l.jsxs("th",{className:"py-2 px-4 border-b",children:[a.LowMitigation,"    "]}),l.jsx("th",{className:"py-2 px-4 border-b",children:a.MediumMitigation}),l.jsx("th",{className:"py-2 px-4 border-b",children:a.HighMitigation})]},s))})]}),l.jsxs("h2",{className:"text-1xl font-semibold",children:["Tableau de Robustesse des moyens de mitigation",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Main-Body-Release-JAR_doc_25.pdf#page=33","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Main Body - Section 2.4 Robustess ",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-500 text-white",children:[l.jsx("th",{className:"py-2 px-4 border-b",children:" "}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Assurance faible"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Assurance moyenne"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Assurance haute"})]})}),l.jsx("tbody",{children:r.map((a,s)=>l.jsxs("tr",{className:s%2===0?"bg-gray-100 text-gray-800":"bg-gray-200 text-gray-800",children:[l.jsx("td",{className:"py-2 px-4 border-b",children:a.Integrity}),l.jsx("td",{className:"py-2 px-4 border-b",children:a.InsuranceLow}),l.jsx("td",{className:"py-2 px-4 border-b",children:a.InsuranceMedium}),l.jsx("td",{className:"py-2 px-4 border-b",children:a.InsuranceHigh})]},s))})]}),l.jsx("h2",{className:"text-2xl font-semibold",children:"Robustesse des Moyens d'Attnuation du risque sol"}),l.jsx("section",{className:"space-y-4",children:l.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg space-y-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["M1(A)  Attnuation Strategique - Abris ",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Annex-B-Release.JAR_doc_27pdf.pdf","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Annex B",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsx("div",{children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"L'attnuation M1(A) est lie au fait que les gens passent en moyenne trs peu de temps  l'extrieur sans tre protgs par une structure. Par consquent, les oprateurs qui utilisent des UAS suffisamment petits peuvent s'attendre  ce qu'un grand pourcentage de la population soit  l'abri d'un impact. Cette hypothse peut galement s'appliquer  des UAS plus grands ; dans ce cas, l'efficacit de la mise  l'abri doit tre dmontre."})}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez l'une des quatre options. Dans le cas o l'valuation des risques est base sur la SORA, cela consiste en une attnuation M1.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M1(A)  Attnuation Strategique - Abris"})}),l.jsxs("select",{value:e.mitigationStrategiqueM1A,onChange:a=>{t({...e,mitigationStrategiqueM1A:a.target.value}),n()},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation iGRC",children:"Slectionner une valeur"}),l.jsx("option",{value:"Non",children:"Non"}),l.jsx("option",{value:"Oui, faible",children:"Oui, faible"}),l.jsx("option",{value:"Oui, moyenne",children:"Oui, moyenne"})]})]}),l.jsx(Ee,{text:"Apporter une justification pour l'attnuation M1(A).",children:l.jsx("h3",{className:"text-lg font-medium",children:"Justification M1(A)"})}),l.jsx("textarea",{value:e.M1A_Justification,onChange:a=>t({...e,M1A_Justification:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"})]})}),l.jsx("section",{className:"space-y-4",children:l.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg space-y-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["M1(B)  Attnuation Strategique - Restrictions Operationelles ",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Annex-B-Release.JAR_doc_27pdf.pdf#page=10","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Annex B",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsx("div",{children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Les mesures d'attnuation M1(B) visent  rduire le nombre de personnes en danger au sol, indpendamment de la mise  l'abri. Ces mesures d'attnuation sont appliques avant le vol. Les mesures d'attnuation M1(B) sont des combinaisons de limitations concernant le temps et le lieu de l'opration afin de rduire le nombre de personnes exposes  un risque  un moment et dans un lieu donns."})}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez l'une des quatre options. Dans le cas o l'valuation des risques est base sur la SORA, cela consiste en une attnuation M1.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M1(B)  Attnuation Strategique - Restrictions Operationelles"})}),l.jsxs("select",{value:e.mitigationStrategiqueM1B,onChange:a=>{t({...e,mitigationStrategiqueM1B:a.target.value}),n()},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation iGRC",children:"Slectionner une valeur"}),l.jsx("option",{value:"Non",children:"Non"}),l.jsx("option",{value:"Oui, moyenne",children:"Oui, moyenne"}),l.jsx("option",{value:"Oui, leve",children:"Oui, leve"})]})]}),l.jsx(Ee,{text:"Apporter une justification pour l'attnuation M1(A).",children:l.jsx("h3",{className:"text-lg font-medium",children:"Justification M1(B)"})}),l.jsx("textarea",{value:e.M1B_Justification,onChange:a=>t({...e,M1B_Justification:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"})]})}),l.jsx("section",{className:"space-y-4",children:l.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg space-y-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["M1(C)  Attnuations Tactique  Observateur(s) au sol ",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Annex-B-Release.JAR_doc_27pdf.pdf","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Annex B",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["REMARQUE : Si un ou plusieurs observateurs au sol sont dclars, ceux-ci devront tre clairement identifis  l'tape 2 sur vos fichier trajectoire ou zone de vol.",l.jsx("br",{}),"Qui plus est, si votre opration est dclare en EVLOS  l'tape 1, le nombre d'observateurs au sol devra tre dclar en cohrence.",l.jsx("br",{})]})}),l.jsx("div",{children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"L'attnuation M1(C) est une attnuation tactique dans laquelle l'quipage  distance ou le systme peut observer la majeure partie de la ou des zones survoles, ce qui permet de dtecter les personnes non impliques dans la zone oprationnelle et de manuvrer l'UA, de sorte que le nombre de personnes non impliques survoles au cours de l'opration est considrablement rduit."})}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez l'une des quatre options. Dans le cas o l'valuation des risques est base sur la SORA, cela consiste en une attnuation M1.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M1(C)  Attnuations Tactique  Observateur(s) au sol"})}),l.jsxs("select",{value:e.mitigationTactiqueM1C,onChange:a=>{t({...e,mitigationTactiqueM1C:a.target.value}),n()},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation iGRC",children:"Slectionner une valeur"}),l.jsx("option",{value:"Non",children:"Non"}),l.jsx("option",{value:"Oui, faible",children:"Oui, faible"})]})]}),l.jsx(Ee,{text:"Apporter une justification pour l'attnuation M1(A).",children:l.jsx("h3",{className:"text-lg font-medium",children:"Justification M1(C)"})}),l.jsx("textarea",{value:e.M1C_Justification,onChange:a=>t({...e,M1C_Justification:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"})]})}),l.jsx("section",{className:"space-y-4",children:l.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg space-y-4",children:[l.jsxs("h2",{className:"text-lg font-medium",children:["M2  Rduction des effets de limpact au sol ",l.jsx("button",{type:"button",onClick:()=>window.open("https://www.easa.europa.eu/en/downloads/137609/en","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation EASA : MOC Light-UAS.2512-01 (medium robustness)",children:l.jsx(dn,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>window.open("https://www.easa.europa.eu/en/downloads/139843/en","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Attention : statut 'Proposed' Ouvrir la documentation EASA : MOC Light-UAS.2512-01 (high robustness)",children:l.jsx(dn,{className:"w-4 h-4"})})]}),e.UsemaxCharacteristicDimension=="OUI"?l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("label",{className:"block text-sm font-medium text-red-700",children:["ATTENTION : A l'tape 2, vous avez slectionn l'option 'Utiliser la dimension caractristique maximale Applicable selon le calcul de la crash Area'.",l.jsx("br",{}),"En consquence, vos justifications apportes au titre d'un M2 devrons dmontrer une rduction du risque par rapport  cette crash area de rfrence.",l.jsx("br",{})]})}):l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["REMARQUE : A l'tape 2, si vous avez dclar une valeur de crash Area faisant dj usage de votre M2, vous ne pouvez justifier de celle-ci une nouvelle fois.",l.jsx("br",{}),"En consquence, il ne vous est pas possible de rduire le GRC Final en dessous de l'iGRC dclar  l'tape 2 grce  une seconde dclaration de ce mme M2.",l.jsx("br",{})]})}),l.jsx("div",{children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Les mesures d'attnuation M2 visent  rduire l'effet de l'impact au sol une fois que le contrle de l'opration est perdu. Cela se fait soit en rduisant la probabilit de ltalit d'un impact d'UA (c'est--dire l'nergie, l'impulsion, la dynamique de transfert d'nergie, etc.) et/ou en rduisant la taille de la zone critique prvue. Les exemples incluent, sans s'y limiter, les parachutes, l'autorotation, la frangibilit, le dcrochage de l'aronef pour ralentir la descente et augmenter l'angle d'impact. Le demandeur doit dmontrer une rduction totale requise de l'un ou l'autre des facteurs, ou des deux."})}),l.jsxs("div",{className:"flex-1",children:[l.jsx(Ee,{text:"Slectionnez l'une des quatre options de la premire ligne. Dans le cas o l'valuation des risques est base sur le SORA, cela consiste en une attnuation M2. Mme si le drone peut tre quip d'un tel systme, cette attnuation peut ne pas tre requise pour l'opration afin de rduire le risque au sol. Dans ce cas, dans la deuxime ligne, slectionnez 'NON'. Si l'attnuation est utilise pour rduire le risque au sol, slectionnez 'OUI', et l'oprateur doit inclure les procdures associes dans le manuel d'exploitation.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M2  Rduction des effets de limpact au sol"})}),l.jsxs("select",{value:e.reduceImpactAttenuationM2,onChange:a=>{t({...e,reduceImpactAttenuationM2:a.target.value}),n()},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une mthode d'valuation iGRC",children:"Slectionner une valeur"}),l.jsx("option",{value:"Non",children:"Non"}),l.jsx("option",{value:"Oui, moyenne",children:"Oui, moyenne"}),l.jsx("option",{value:"Oui, leve",children:"Oui, leve"})]})]}),l.jsx(Ee,{text:"Apporter une justification pour l'attnuation M1(A).",children:l.jsx("h3",{className:"text-lg font-medium",children:"Justification M2"})}),l.jsx("textarea",{value:e.M2_Justification,onChange:a=>t({...e,M2_Justification:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"})]})}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium",children:"Remarques complmentaires"}),l.jsx(Ee,{text:l.jsxs("div",{children:["Champ de texte libre pour l'ajout de toute remarque pertinente.",l.jsx("br",{}),"Exemple : Attnuations partielles multiples",l.jsx("br",{}),"Dans les cas o des attnuations partielles multiples ne satisfont pas individuellement aux critres de l'annexe B mais que, prises ensemble, elles permettent d'obtenir des rductions cumulatives d'un ou plusieurs ordres de grandeur, l'autorit comptente peut accepter une rduction de la note finale du GRC."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Champ de texte libre pour l'ajout de toute remarque pertinente"})}),l.jsx("textarea",{value:e.additionalRemarks,onChange:a=>t({...e,additionalRemarks:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"})]})}),l.jsx("h2",{className:"text-2xl font-semibold",children:"GRC Final"}),l.jsxs("div",{children:[l.jsx(Ee,{text:"GRC Final calcul  partir de l'iGRC et des gain d'attnuation. N.B. cette valeur ne peut tre infrieure  l'iGRC 'Zone Contrl' de votre classe d'appareil identifie  l'tape 2.",children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["GRC Final Calcul : ",e.iGRCControledZone]})}),l.jsxs("h2",{className:"text-2xl",children:[e.iGRC," is reduced to ",l.jsx("b",{children:n()})]})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"GRC Final.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRC"})}),l.jsxs("select",{value:e.GRC_Final,onChange:a=>t({...e,GRC_Final:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"}),l.jsx("option",{value:"5",children:"5"}),l.jsx("option",{value:"6",children:"6"}),l.jsx("option",{value:"7",children:"7"}),l.jsx("option",{value:"8",children:"8"})]})]}),Number(e.GRC_Final)>7?l.jsx("div",{children:l.jsx(Ee,{text:"GRC Final.",children:l.jsx("label",{className:"block text-lg font-bold text-red-700",children:"GRC Final - Trop lev. Le processus SORA est inadapt."})})}):l.jsx("div",{children:l.jsx(Ee,{text:"GRC Final.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GRC Final - Valide. Vous pouvez procder aux tapes suivantes du processus SORA."})})})]})]})}function sR({assessment:e,onChange:t}){const r=ge.useRef(null),n=["Classe - A","Classe - B","Classe - C","Classe - D","Classe - E","Classe - F","Classe - G","U-Space","Autre, Prciser"];return ge.useEffect(()=>{if(!r.current)return;r.current.innerHTML="",delete window.goBack,delete window.resetQuestionnaire,delete window.handleModalAnswer,delete window.closeModal;const i={currentNode:"start",nodes:{start:{type:"question",text:"OPS in Atypical Airspace?",x:80,y:120,yes:"arc-a",no:"q2"},q2:{type:"question",text:"OPS > FL600?",x:80,y:300,yes:"arc-b",no:"q3"},q3:{type:"question",text:"OPS in Airport or Heliport Environment ?",x:80,y:480,yes:"q4",no:"q5"},q4:{type:"question",text:"OPS in Class B, C or D Airspace?",x:280,y:480,yes:"arc-d-1",no:"arc-c-1"},q5:{type:"question",text:"OPS > 500 ft AGL but < FL600",x:80,y:930,yes:"q6",no:"ops-500"},q6:{type:"question",text:"OPS in Mode-C Veil or TMZ",x:280,y:930,yes:"arc-d-2",no:"q7"},q7:{type:"question",text:"OPS in Controlled Airspace?",x:490,y:930,yes:"arc-d-3",no:"q8"},q8:{type:"question",text:"OPS in Uncontrolled Airspace over Urban Area?",x:700,y:930,yes:"arc-c-4",no:"rural-ops-1"},"ops-500":{type:"intermediate",text:"OPS < 500 ft AGL",x:80,y:1230,next:"q6-low"},"q6-low":{type:"question",text:"OPS in Mode-C Veil or TMZ",x:280,y:1230,yes:"arc-c-5",no:"q7-low"},"q7-low":{type:"question",text:"OPS in Controlled Airspace?",x:490,y:1230,yes:"arc-c-6",no:"q8-low"},"q8-low":{type:"question",text:"OPS in Uncontrolled Airspace over Urban Area?",x:700,y:1230,yes:"arc-c-7",no:"rural-ops-2"},"arc-a":{type:"result",text:"ARC-a",x:280,y:120,class:"arc-a"},"arc-b":{type:"result",text:"ARC-b",x:280,y:300,class:"arc-b"},"arc-c-1":{type:"result",text:"ARC-c",x:280,y:630,class:"arc-c"},"arc-d-1":{type:"result",text:"ARC-d",x:490,y:480,class:"arc-d"},"arc-d-2":{type:"result",text:"ARC-d",x:280,y:795,class:"arc-d"},"arc-d-3":{type:"result",text:"ARC-d",x:490,y:795,class:"arc-d"},"arc-c-4":{type:"result",text:"ARC-c",x:700,y:795,class:"arc-c"},"arc-c-5":{type:"result",text:"ARC-c",x:280,y:1095,class:"arc-c"},"arc-c-6":{type:"result",text:"ARC-c",x:490,y:1095,class:"arc-c"},"arc-c-7":{type:"result",text:"ARC-c",x:700,y:1095,class:"arc-c"},"rural-ops-1":{type:"result",text:"Operations in Uncontrolled Airspace over Rural Areas",x:950,y:930,width:240,height:90,hasAutoArc:!0},"arc-c-rural-1":{type:"result",text:"ARC-c",x:950,y:795,class:"arc-c"},"rural-ops-2":{type:"result",text:"Operations in Uncontrolled Airspace over Rural Areas",x:950,y:1230,width:240,height:90,hasAutoArc:!0},"arc-b-rural-2":{type:"result",text:"ARC-b",x:950,y:1095,class:"arc-b"}},visitedNodes:new Set,visitedArrows:new Set,history:[],currentQuestionNode:null};function a(){const E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.setAttribute("width","100%"),E.setAttribute("height","100%"),E.setAttribute("viewBox","0 0 1100 1650");const N=document.createElementNS("http://www.w3.org/2000/svg","defs"),M=document.createElementNS("http://www.w3.org/2000/svg","marker");M.setAttribute("id","arrowhead"),M.setAttribute("markerWidth","5"),M.setAttribute("markerHeight","3.5"),M.setAttribute("refX","4.5"),M.setAttribute("refY","1.75"),M.setAttribute("orient","auto");const B=document.createElementNS("http://www.w3.org/2000/svg","polygon");return B.setAttribute("points","0 0, 5 1.75, 0 3.5"),B.setAttribute("fill","#333"),M.appendChild(B),N.appendChild(M),E.appendChild(N),E}function s(E,N,M,B,D){const A=document.createElementNS("http://www.w3.org/2000/svg","polygon"),H=`${E},${N-B/2} ${E+M/2},${N} ${E},${N+B/2} ${E-M/2},${N}`;return A.setAttribute("points",H),A.setAttribute("class","diamond inactive"),A.setAttribute("id",D),A}function u(E,N,M,B,D,A=""){const H=document.createElementNS("http://www.w3.org/2000/svg","rect");return H.setAttribute("x",(E-M/2).toString()),H.setAttribute("y",(N-B/2).toString()),H.setAttribute("width",M.toString()),H.setAttribute("height",B.toString()),H.setAttribute("class",`result-box inactive ${A}`),H.setAttribute("id",D),H}function d(E,N,M,B,D,A=""){const H=document.createElementNS("http://www.w3.org/2000/svg","line");return H.setAttribute("x1",E.toString()),H.setAttribute("y1",N.toString()),H.setAttribute("x2",M.toString()),H.setAttribute("y2",B.toString()),H.setAttribute("class","arrow inactive"),H.setAttribute("id",D),H.setAttribute("data-label",A),H}function h(E,N,M,B,D=""){const A=document.createElementNS("http://www.w3.org/2000/svg","text");return A.setAttribute("x",E.toString()),A.setAttribute("y",N.toString()),A.setAttribute("class",`text inactive ${D}`),A.setAttribute("id",B),A.textContent=M,A}function f(){const E=a();r.current.appendChild(E),Object.keys(i.nodes).forEach(D=>{const A=i.nodes[D];if(A.type==="question"){const H=s(A.x,A.y,180,120,`node-${D}`);H.addEventListener("click",function(){this.classList.contains("active")&&S(D)}),E.appendChild(H);const te=A.text.split(" ");if(te.length>6){const z=Math.ceil(te.length/3),ae=Math.ceil(2*te.length/3),P=h(A.x,A.y-18,te.slice(0,z).join(" "),`text-${D}-1`,"small"),ce=h(A.x,A.y,te.slice(z,ae).join(" "),`text-${D}-2`,"small"),fe=h(A.x,A.y+18,te.slice(ae).join(" "),`text-${D}-3`,"small");E.appendChild(P),E.appendChild(ce),E.appendChild(fe)}else if(te.length>3){const z=h(A.x,A.y-12,te.slice(0,Math.ceil(te.length/2)).join(" "),`text-${D}-1`,"small"),ae=h(A.x,A.y+12,te.slice(Math.ceil(te.length/2)).join(" "),`text-${D}-2`,"small");E.appendChild(z),E.appendChild(ae)}else{const z=h(A.x,A.y,A.text,`text-${D}`,"small");E.appendChild(z)}if(A.yes){const z=i.nodes[A.yes];let ae=null,P=null;if(D==="start"||D==="q2"||D==="q3"||D==="q4"||D==="q5"){const ce=z.width?z.width/2:75;ae=d(A.x+90,A.y,z.x-ce,z.y,`arrow-${D}-yes`),P=h((A.x+30+z.x-ce)/2,A.y-22.5,"Yes",`label-${D}-yes`)}else(D==="q6"||D==="q7"||D==="q8"||D==="q6-low"||D==="q7-low"||D==="q8-low")&&(ae=d(A.x,A.y-60,z.x,z.y+30,`arrow-${D}-yes`),P=h(A.x+30,(A.y+z.y)/2,"Yes",`label-${D}-yes`));ae&&(ae.addEventListener("click",()=>b(D,"yes")),E.appendChild(ae),P&&E.appendChild(P))}if(A.no){const z=i.nodes[A.no];let ae=null,P=null;if(D==="start"||D==="q2"||D==="q3")ae=d(A.x,A.y+60,z.x,z.y-60,`arrow-${D}-no`),P=h(A.x+30,(A.y+z.y)/2,"No",`label-${D}-no`);else if(D==="q4")ae=d(A.x,A.y+60,z.x,z.y-30,`arrow-${D}-no`),P=h(A.x+30,(A.y+z.y)/2,"No",`label-${D}-no`);else if(D==="q5")ae=d(A.x,A.y+60,z.x,z.y-30,`arrow-${D}-no`),P=h(A.x+30,(A.y+z.y)/2,"No",`label-${D}-no`);else if(D==="q8-low"){const ce=z.width?z.width/2:90;ae=d(A.x+90,A.y,z.x-ce+10,z.y,`arrow-${D}-no`),P=h((A.x+30+z.x-ce)/2,A.y+22.5,"No",`label-${D}-no`)}else if(D==="q6"||D==="q7"||D==="q8"||D==="q6-low"||D==="q7-low"){const ce=z.width?z.width/2:90;ae=d(A.x+90,A.y,z.x-ce,z.y,`arrow-${D}-no`),P=h((A.x+30+z.x-ce)/2,A.y+22.5,"No",`label-${D}-no`)}ae&&(ae.addEventListener("click",()=>b(D,"no")),E.appendChild(ae),P&&E.appendChild(P))}}else if(A.type==="result"||A.type==="intermediate"){const H=A.width||150,te=A.height||60,z=u(A.x,A.y,H,te,`node-${D}`,A.class||"");if(z.addEventListener("click",function(){this.classList.contains("active")&&p(D)}),E.appendChild(z),A.text.length>20){const ae=A.text.split(" "),P=Math.ceil(ae.length/2),ce=h(A.x,A.y-15,ae.slice(0,P).join(" "),`text-${D}-1`,"small"),fe=h(A.x,A.y+15,ae.slice(P).join(" "),`text-${D}-2`,"small");E.appendChild(ce),E.appendChild(fe)}else{const ae=h(A.x,A.y,A.text,`text-${D}`);E.appendChild(ae)}}});const N=d(155,1230,190,1230,"arrow-ops-auto");E.appendChild(N);const M=d(950,885,950,825,"arrow-rural-auto1");E.appendChild(M);const B=d(950,1185,950,1125,"arrow-rural-auto2");E.appendChild(B),v("start")}function p(E){const M={"arc-a":{OpsEnv:"OPS in Atypical or Segregated Airspace",IGDR:1,AEC:12,ARCI:"ARC-a"},"arc-b":{OpsEnv:"Operations above Flight Level 600",IGDR:1,AEC:11,ARCI:"ARC-b"},"arc-c-1":{OpsEnv:"OPS in Airport/Heliport Environment in Class E airspace or in Class F or G",IGDR:3,AEC:6,ARCI:"ARC-c"},"arc-d-1":{OpsEnv:"OPS in Airport/Heliport Environment in Class B, C or D airspace",IGDR:5,AEC:1,ARCI:"ARC-d"},"arc-d-2":{OpsEnv:"Operations above 500 feet AGL but below Flight level 600 in a Mode-S Veil or Transponder Mandatory Zone (TMZ)",IGDR:5,AEC:2,ARCI:"ARC-d"},"arc-d-3":{OpsEnv:"Operations above 500 feet AGL but below Flight level 600 in controlled airspace",IGDR:5,AEC:3,ARCI:"ARC-d"},"arc-c-4":{OpsEnv:"Operations above 500 feet AGL but below Flight level 600 in uncontrolled airspace over Urban Area",IGDR:3,AEC:4,ARCI:"ARC-c"},"arc-c-5":{OpsEnv:"Operations below 500 ft AGL OPS in a Mode-S Veil or Transponder Mandatory Zone (TMZ)",IGDR:3,AEC:7,ARCI:"ARC-c"},"arc-c-6":{OpsEnv:"Operations below 500 ft AGL OPS in controlled airspace",IGDR:3,AEC:8,ARCI:"ARC-c"},"arc-c-7":{OpsEnv:"Operations below 500 ft AGL OPS in uncontrolled airspace over Urban Area",IGDR:2,AEC:9,ARCI:"ARC-c"},"arc-c-rural-1":{OpsEnv:"Operations above 500 feet AGL but below Flight level 600 in uncontrolled airspace over Rural Area",IGDR:2,AEC:5,ARCI:"ARC-c"},"arc-b-rural-2":{OpsEnv:"Operations below 500 ft AGL in uncontrolled airspace over Rural Area",IGDR:1,AEC:10,ARCI:"ARC-b"}}[E];M&&t({...e,OpsEnv:M.OpsEnv,IGDR:M.IGDR,AEC:M.AEC,ARCI:M.ARCI})}function v(E){const N=i.nodes[E];i.currentNode=E,i.visitedNodes.add(E);const M=document.getElementById(`node-${E}`),B=[document.getElementById(`text-${E}`),document.getElementById(`text-${E}-1`),document.getElementById(`text-${E}-2`),document.getElementById(`text-${E}-3`)].filter(D=>D);if(M&&(M.classList.remove("inactive"),M.classList.add("active"),N.type==="result"&&M.classList.add("final")),B.forEach(D=>{D&&D.classList.remove("inactive")}),E==="ops-500"){const D=document.getElementById("arrow-ops-auto");D&&(D.classList.remove("inactive"),D.classList.add("active")),setTimeout(()=>{v("q6-low")},1e3);return}if(E==="rural-ops-1"){const D=document.getElementById("arrow-rural-auto1");D&&(D.classList.remove("inactive"),D.classList.add("active")),setTimeout(()=>{v("arc-c-rural-1")},1e3);return}if(E==="rural-ops-2"){const D=document.getElementById("arrow-rural-auto2");D&&(D.classList.remove("inactive"),D.classList.add("active")),setTimeout(()=>{v("arc-b-rural-2")},1e3);return}if(N.type==="question"){if(N.yes){const D=document.getElementById(`arrow-${E}-yes`),A=document.getElementById(`label-${E}-yes`);D&&A&&(D.classList.remove("inactive"),D.classList.add("clickable"),A.classList.remove("inactive"))}if(N.no){const D=document.getElementById(`arrow-${E}-no`),A=document.getElementById(`label-${E}-no`);D&&A&&(D.classList.remove("inactive"),D.classList.add("clickable"),A.classList.remove("inactive"))}}}function b(E,N){const M=i.nodes[E],B=N==="yes"?M.yes:M.no;if(B){const D={currentNode:i.currentNode,visitedNodes:new Set(i.visitedNodes),visitedArrows:new Set(i.visitedArrows)};i.history.push(D);const A=document.getElementById(`arrow-${E}-${N}`);A&&(A.classList.add("active"),A.classList.remove("clickable"),i.visitedArrows.add(`arrow-${E}-${N}`));const H=N==="yes"?"no":"yes",te=document.getElementById(`arrow-${E}-${H}`);te&&(te.classList.remove("clickable"),te.classList.add("inactive")),setTimeout(()=>{v(B)},300)}}function k(){if(i.history.length>0){const E=i.history.pop();i.currentNode=E.currentNode,i.visitedNodes=new Set(E.visitedNodes),i.visitedArrows=new Set(E.visitedArrows),document.querySelectorAll(".diamond, .result-box, .arrow, .text").forEach(N=>{N.classList.remove("active","clickable","final"),N.classList.add("inactive")}),i.visitedNodes.forEach(N=>{const M=document.getElementById(`node-${N}`),B=[document.getElementById(`text-${N}`),document.getElementById(`text-${N}-1`),document.getElementById(`text-${N}-2`)].filter(D=>D);M&&(M.classList.remove("inactive"),M.classList.add("active")),B.forEach(D=>{D&&D.classList.remove("inactive")})}),i.visitedArrows.forEach(N=>{const M=document.getElementById(N);M&&(M.classList.remove("inactive"),M.classList.add("active"))}),v(i.currentNode)}}function S(E){const N=i.nodes[E];if(N.type==="question"){i.currentQuestionNode=E;const M=document.getElementById("questionModal"),B=document.getElementById("modalQuestion");M&&B&&(B.textContent=N.text,M.classList.remove("hidden"))}}function T(){const E=document.getElementById("questionModal");E&&E.classList.add("hidden")}function y(E){i.currentQuestionNode&&(b(i.currentQuestionNode,E),T())}function _(){i.currentNode="start",i.visitedNodes.clear(),i.visitedArrows.clear(),i.history=[],document.querySelectorAll(".diamond, .result-box, .arrow, .text").forEach(E=>{E.classList.remove("active","clickable","final"),E.classList.add("inactive")}),v("start")}window.goBack=k,window.resetQuestionnaire=_,window.handleModalAnswer=y,window.closeModal=T;const w=document.createElement("style");w.textContent=`
      .diamond {
        fill: #f9f9f9;
        stroke: #333;
        stroke-width: 2;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .diamond.active {
        fill: #4CAF50;
        stroke: #2E7D32;
        stroke-width: 3;
        filter: drop-shadow(0 4px 6px rgba(76, 175, 80, 0.3));
      }
      .diamond.inactive {
        opacity: 0.3;
        fill: #e0e0e0;
        stroke: #bdbdbd;
        cursor: default;
      }
      .result-box {
        fill: #fff;
        stroke: #333;
        stroke-width: 2;
        rx: 30;
      }
      .result-box.arc-a {
        fill: #4CAF50;
        stroke: #2E7D32;
      }
      .result-box.arc-b {
        fill: #FFEB3B;
        stroke: #F57F17;
      }
      .result-box.arc-c {
        fill: #FF9800;
        stroke: #E65100;
      }
      .result-box.arc-d {
        fill: #F44336;
        stroke: #C62828;
      }
      .result-box.final {
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
        stroke-width: 4;
      }
      .result-box.inactive {
        opacity: 0.3;
        fill: #e0e0e0;
        stroke: #bdbdbd;
      }
      .arrow {
        stroke: #333;
        stroke-width: 3;
        fill: none;
        marker-end: url(#arrowhead);
        transition: all 0.3s ease;
      }
      .arrow.inactive {
        opacity: 0.3;
        stroke: #bdbdbd;
      }
      .arrow.active {
        stroke: #4CAF50;
        stroke-width: 4.5;
      }
      .arrow.clickable {
        cursor: pointer;
        stroke-width: 4.5;
      }
      .arrow.clickable:hover {
        stroke: #FF5722;
      }
      .text {
        font-size: 16.5px;
        text-anchor: middle;
        dominant-baseline: middle;
        pointer-events: none;
      }
      .text.inactive {
        opacity: 0.3;
        fill: #bdbdbd;
      }
      .text.small {
        font-size: 15px;
      }
    `,document.head.appendChild(w),f()},[]),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Rappel des donnes :"}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Limite verticale du Volume d'volution (Flight Geometry) :"}),l.jsxs("div",{className:"mt-1 p-2 bg-gray-100 rounded-md",children:[e.FlightGeographyHeight," m"]}),l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Limite verticale du Volume de contingence (Contingency Volume) :"}),l.jsxs("div",{className:"mt-1 p-2 bg-gray-100 rounded-md",children:[e.ContingencyVolumeHeight," m"]}),l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Limite verticale du Volume Adjacent (Adjacent Volume) :"}),l.jsxs("div",{className:"mt-1 p-2 bg-gray-100 rounded-md",children:[e.AdjacentVolumeHeight," m"]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Volume d'espace arien"}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez une ou plusieurs des neuf options. Slectionnez 'Autre' si aucune des options prcdentes ne s'applique (par exemple, les zones militaires).",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Classe d'espace arien de l'opration envisage"})}),l.jsx("div",{className:"mt-1 space-y-2",children:n.map(i=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:(e.airspaceClasses||[]).includes(i),onChange:a=>t({...e,airspaceClasses:a.target.checked?[...e.airspaceClasses||[],i]:(e.airspaceClasses||[]).filter(s=>s!==i)}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("label",{className:"ml-2 text-sm text-gray-700",children:i}),i==="U-Space"&&(e.airspaceClasses||[]).includes("U-Space")&&l.jsx("input",{type:"text",value:e.uspaceProvider,onChange:a=>t({...e,uspaceProvider:a.target.value}),className:"ml-4 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Fournisseur de service USSP"}),i==="Autre, Prciser"&&(e.airspaceClasses||[]).includes("Autre, Prciser")&&l.jsx("input",{type:"text",value:e.otherDetails,onChange:a=>t({...e,otherDetails:a.target.value}),className:"ml-4 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Prciser la nature de l'espace arien"})]},i))})]}),l.jsx(Ee,{text:"Si l'autorit comptente, l'ANSP ou le service UTM/U-space fournit une carte des risques de collision arienne (statique ou dynamique), le candidat doit utiliser ce service pour dterminer l'ARC initiale/rsiduelle.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Carte des risques de collision arienne (statique ou dynamique)"})}),l.jsx("input",{type:"checkbox",checked:(e.AirCollisionRiskMap||[]).includes("OUI"),onChange:i=>t({...e,AirCollisionRiskMap:i.target.checked?"OUI":"NON"}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),"Le service est disponible et sera utilis",e.AirCollisionRiskMap=="OUI"?l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["U-SPACE",l.jsx("br",{}),`Si vous avez slectionn "U-Space" comme classe d'espace arien, veuillez indiquer le nom du fournisseur de service UTM (USSP) que vous utiliserez pour l'opration.`]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Merci de prciser les informations sur votre fournisseur de service"})}),l.jsx("textarea",{value:e.AirCollisionRiskMapJustification,onChange:i=>t({...e,AirCollisionRiskMapJustification:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"})]}):l.jsx("div",{children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Si vous n'avez pas de fournisseur de service, identifier l'ARC initial du volume oprationnel  l'aide de l'arbre de dcision ci-dessous."})})]})]}),e.AirCollisionRiskMap=="NON"?l.jsx("div",{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h2",{className:"text-2xl font-semibold",children:["Questionnaire ARC - Classification des Espaces Ariens",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-v2.5-Main-Body-Release-JAR_doc_25.pdf#page=33","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Main Body - 4.4 Step #4  Determination of the initial Air Risk Class (ARC)    ",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-lg border border-gray-200",children:[l.jsx("div",{ref:r,className:"w-full h-[1100px] border border-gray-300 rounded-md overflow-hidden",id:"flowchart"}),l.jsxs("div",{className:"flex gap-2 mt-5",children:[l.jsx("button",{onClick:()=>{window.goBack&&window.goBack()},className:"px-5 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:"Revenir en arrire"}),l.jsx("button",{onClick:()=>{window.resetQuestionnaire&&window.resetQuestionnaire()},className:"px-5 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:"Recommencer"})]})]}),l.jsx("div",{id:"questionModal",className:"fixed inset-0 bg-black bg-opacity-50 z-50 hidden",children:l.jsxs("div",{className:"bg-white mx-auto mt-[15%] p-5 border border-gray-300 w-4/5 max-w-lg rounded-lg text-center",children:[l.jsx("p",{id:"modalQuestion",className:"mb-5"}),l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>{window.handleModalAnswer&&window.handleModalAnswer("yes")},className:"px-5 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Yes"}),l.jsx("button",{onClick:()=>{window.handleModalAnswer&&window.handleModalAnswer("no")},className:"px-5 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"No"}),l.jsx("button",{onClick:()=>{window.closeModal&&window.closeModal()},className:"px-5 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:"Dismiss"})]})]})}),l.jsx("div",{className:"space-y-8",children:l.jsxs("div",{className:"bg-gray-400 p-4 md:col-span-2 rounded-md",children:[l.jsxs("label",{className:"block text-sm font-medium text-blue-700 mt-4",children:[l.jsx("i",{children:"Cliquer sur le nud ARC prcdemment identifier pour valider et afficher les dtails de l'ARC initial."}),l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-Annex-C-v1.0.pdf","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS : SORA-Annex-C-v1.0",children:l.jsx(dn,{className:"w-4 h-4"})})]}),l.jsx("label",{className:"block text-sm font-bold text-gray-700 mt-4",children:"Volume Oprationnel, AEC and ARC."}),l.jsx("div",{children:l.jsxs("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e.OpsEnv}),l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 text-black",children:[l.jsx("th",{className:"py-2 px-4 border-b",children:"Taux initial de densit gnralise"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Catgories de rencontres dans l'espace arien"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"ARC Initial"})]})}),l.jsx("tbody",{children:l.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[l.jsx("td",{className:"py-2 px-4 border-b",children:e.IGDR}),l.jsx("td",{className:"py-2 px-4 border-b",children:e.AEC}),l.jsx("td",{className:"py-2 px-4 border-b",children:e.ARCI})]})})]})]})})]})})]})}):null,l.jsx("h2",{className:"text-2xl font-semibold",children:"Niveau de Risque Air Initial"}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez le Niveau de Risque Air Initial pour l'opration envisage.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Volume Oprationnel"})}),l.jsxs("select",{value:e.OperationalVolumeLevel,onChange:i=>t({...e,OperationalVolumeLevel:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"ARC-a",children:"ARC-a"}),l.jsx("option",{value:"ARC-b",children:"ARC-b"}),l.jsx("option",{value:"ARC-c",children:"ARC-c"}),l.jsx("option",{value:"ARC-d",children:"ARC-d"})]})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez le Niveau de Risque Air Initial pour le volume adjacent.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Volume Adjacent"})}),l.jsxs("select",{value:e.AdjacentVolumeLevel,onChange:i=>t({...e,AdjacentVolumeLevel:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"ARC-a",children:"ARC-a"}),l.jsx("option",{value:"ARC-b",children:"ARC-b"}),l.jsx("option",{value:"ARC-c",children:"ARC-c"}),l.jsx("option",{value:"ARC-d",children:"ARC-d"})]})]})]})]})}function lR({assessment:e,onChange:t}){return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Mitigation Stratgique Risque Air"}),l.jsx("div",{children:"L'attnuation stratgique consiste en des procdures et des restrictions oprationnelles visant  rduire les taux de rencontre avec l'UAS ou le temps d'exposition, avant le dcollage."}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["Les restrictions oprationnelles sont contrles4 par l'oprateur et visent  rduire les risques de collision avant le dcollage. Cette section fournit des dtails sur les restrictions oprationnelles et des exemples sur la faon dont elles peuvent tre appliques aux oprations UAS.",l.jsx("br",{}),"Les restrictions oprationnelles sont le principal moyen dont dispose un exploitant pour rduire les risques de collision au moyen d'une ou plusieurs mesures d'attnuation stratgiques. Les mesures d'attnuation les plus courantes sont les suivantes :",l.jsx("br",{}),l.jsx("li",{children:"Attnuation(s) qui limite(nt) le volume gographique dans lequel l'UAS opre (par exemple, certaines frontires ou volumes d'espace arien)"}),l.jsx("li",{children:"Attnuation(s) qui limite(nt) le cadre temporel oprationnel (par exemple, limit  certaines heures de la journe, comme voler seulement la nuit)"}),l.jsx("br",{}),"En plus de ce qui prcde, une autre approche pour limiter l'exposition au risque est de limiter le temps d'exposition. C'est ce qu'on appelle  l'attnuation par l'exposition . L'attnuation par l'exposition limite simplement la dure d'exposition au risque oprationnel."]}),children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Attnuations Stratgique par des restrictions oprationnelles ",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-Annex-C-v1.0.pdf","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Annex C - 5.1 Strategic Mitigation by Operational Restrictions",children:l.jsx(dn,{className:"w-4 h-4"})})]})}),l.jsxs("select",{value:e.StrategicMitigationOperationalRestrictionsAvailable,onChange:r=>t({...e,StrategicMitigationOperationalRestrictionsAvailable:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"OUI",children:"OUI"}),l.jsx("option",{value:"NON",children:"NON"})]})]}),e.StrategicMitigationOperationalRestrictionsAvailable==="OUI"&&l.jsxs("div",{children:[l.jsx(Ee,{text:"En quelques phrases, Justifier vos lments de restrictions oprationnelles",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justifier vos lments de restrictions oprationnelles"})}),l.jsx("textarea",{value:e.StrategicMitigationOperationalRestrictionsJustification,onChange:r=>t({...e,StrategicMitigationOperationalRestrictionsJustification:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]}),l.jsxs("div",{children:[l.jsx(Ee,{text:l.jsxs("div",{children:["L'attnuation stratgique par des structures et des rgles communes exige que tous les aronefs d'une certaine classe d'espace arien suivent les mmes structures et rgles ; ces structures et rgles visent  rduire le risque de collision dans l'espace arien.",l.jsx("br",{}),"Tous les aronefs voluant dans cet espace arien doivent y participer et seules les autorits comptentes et/ou les ANSP sont habilites  fixer des exigences pour ces aronefs.",l.jsx("br",{}),"L'oprateur de l'UAS n'a aucun contrle sur l'existence ou le niveau de participation  la structure de l'espace arien ou sur l'application des rgles de vol.",l.jsx("br",{}),"Par consquent, l'attnuation stratgique par des structures et des rgles communes n'est applique que par les autorits comptentes et/ou les ANSP. Elle est  la disposition de l'oprateur UAS ou non."]}),children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Attnuations Stratgique par des structures communes et des rgles ",l.jsx("button",{type:"button",onClick:()=>window.open("http://jarus-rpas.org/wp-content/uploads/2024/06/SORA-Annex-C-v1.0.pdf","_blank"),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"Ouvrir la documentation JARUS SORA v2.5 Annex C - 5.2 Strategic Mitigation by Common Structures and Rules",children:l.jsx(dn,{className:"w-4 h-4"})})]})}),l.jsxs("select",{value:e.StrategicMitigationCommonStructuresAvailable,onChange:r=>t({...e,StrategicMitigationCommonStructuresAvailable:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"OUI",children:"OUI"}),l.jsx("option",{value:"NON",children:"NON"})]})]}),e.StrategicMitigationCommonStructuresAvailable==="OUI"&&l.jsxs("div",{children:[l.jsx(Ee,{text:"En quelques phrases, Justifier vos lments de restrictions oprationnelles",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justifier vos lments de restrictions oprationnelles"})}),l.jsx("textarea",{value:e.StrategicMitigationCommonStructuresJustification,onChange:r=>t({...e,StrategicMitigationCommonStructuresJustification:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Niveau de Risque Air Rsiduel aprs Mitigation Stratgique "}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("div",{children:[l.jsx(Ee,{text:"Slectionnez le niveau de risque rsiduel pour l'opration envisage.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Volume Oprationnel"})}),l.jsxs("select",{value:e.OperationalVolumeLevelMitigated,onChange:r=>t({...e,OperationalVolumeLevelMitigated:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"ARC-a",children:"ARC-a"}),l.jsx("option",{value:"ARC-b",children:"ARC-b"}),l.jsx("option",{value:"ARC-c",children:"ARC-c"}),l.jsx("option",{value:"ARC-d",children:"ARC-d"})]})]})})]})]})}function uR({assessment:e,onChange:t}){const r=[{ARC:"ARC-d",Attenuation:"Haut",Robustness:"Haute"},{ARC:"ARC-c",Attenuation:"Moyen",Robustness:"Moyenne"},{ARC:"ARC-b",Attenuation:"Faible",Robustness:"Faible"},{ARC:"ARC-a",Attenuation:"Aucun minimum",Robustness:"Aucun minimum"}];return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Tableau de Mitigation Tactique"}),l.jsx("div",{children:"Les mesures d'attnuation tactiques sont appliques pour rduire tout risque rsiduel de collision en vol ncessaire pour atteindre l'objectif de scurit de l'espace arien applicable."}),l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-500 text-white",children:[l.jsx("th",{className:"py-2 px-4 border-b",children:"ARC-Final"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Niveau d'attnuation Tactique"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"Robustesse de l'attnuation"})]})}),l.jsx("tbody",{children:r.map((n,i)=>l.jsxs("tr",{className:n.ARC===e.OperationalVolumeLevelMitigated?"bg-blue-900 text-white":"bg-gray-200 text-gray-400",children:[l.jsx("th",{className:"py-2 px-4 border-b",children:n.ARC}),l.jsx("th",{className:"py-2 px-4 border-b",children:n.Attenuation}),l.jsx("th",{className:"py-2 px-4 border-b",children:n.Robustness})]},i))})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Mitigation Tactique Risque Air"}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ee,{text:"L'tape 5 permet de rduire lARC en justifiant dune probabilit rduite de rencontre avec d'autres aronefs sappuyant par exemple sur une densit arienne plus faible, sur une coordination avec les services de contrle, sur une information des autres usagers de lespace arien, etc. La rduction de lARC propose doit tre explicitement justifie et argumente.",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Une Mitigation Tactique est-elle mise en place"})}),l.jsxs("select",{value:e.TacticalMitigationAvailable,onChange:n=>t({...e,TacticalMitigationAvailable:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Indiquer une valeur",children:"Indiquer une valeur"}),l.jsx("option",{value:"OUI",children:"OUI"}),l.jsx("option",{value:"NON",children:"NON"})]})]}),e.TacticalMitigationAvailable==="OUI"&&l.jsxs("div",{children:[l.jsx(Ee,{text:"En quelques phrases, veuillez dcrire les moyens et TacticalMitigationJustifications de Mitigation Stratgique du risque Air",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Justifier vos lments de Mitigation Tactique du risque Air"})}),l.jsx("textarea",{value:e.TacticalMitigationJustification,onChange:n=>t({...e,TacticalMitigationJustification:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})]})]})]})}function cR({assessment:e,onChange:t}){const r=()=>{let n="Aucun minimum1",i=-1;e.populationDensityAdjacentArea==="Zone Contrle"?i=0:e.populationDensityAdjacentArea==="<5"?i=4:e.populationDensityAdjacentArea==="<50"?i=49:e.populationDensityAdjacentArea==="<500"?i=499:e.populationDensityAdjacentArea==="<5,000"?i=4999:e.populationDensityAdjacentArea==="<50,000"?i=49999:i=50001;let a=-1;return e.OutdoorAssembliesAllowed==="Assemblies < 40k people"?a=39:e.OutdoorAssembliesAllowed==="Assemblies of 40k to 400k"?a=400:e.OutdoorAssembliesAllowed==="> 400k"&&(a=401),e.iGRC_colIndex==1?e.SAILNumber>=4?n="Faible_dim1-sail4":e.SAILNumber==3?i<=5e4?a<40?n="Faible_dim1-sail3a":a<=400?n="Faible_dim1-sail3b":n="Moyen_dim1-sail3":a<=400?n="Faible_dim1-sail3c":n="Moyen_dim1-sail3":e.SAILNumber<=2&&(i<=5e4?a<40?n="Faible_dim1-sail12a":a<=400?n="Moyen_dim1-sail12a":n="Haut_dim1-sail12a":a<=400?n="Moyen_dim1-sail12b":n="Haut_dim1-sail12b"):e.iGRC_colIndex==2?e.ShelterApplicable==="OUI"?e.SAILNumber>=5?n="Faible_dim3sh-sail56":e.SAILNumber>=4?a>400?n="Moyen_dim3sh-sail4":n="Faible_dim3sh-sail4":e.SAILNumber==3?i>5e4?a>400?n="Out of Scope_dim3sh-sail3":n="Moyen_dim3sh-sail3":a>400?n="Out of Scope_dim3sh-sail3":a>40?n="Moyen_dim3sh-sail3":n="Faible_dim3sh-sail3":e.SAILNumber<=2&&(i>5e4?a<=400?n="Haut_dim3sh-sail12":n="Out of Scope_dim3sh-sail12":a<=40?n="Faible_dim3sh-sail12":a<=400?n="Haut_dim3sh-sail12":n="Out of Scope_dim3sh-sail12"):e.SAILNumber>=5?n="Faible_dim3Nosh-sail56":e.SAILNumber>=4?a>400||i>5e4?n="Moyen_dim3Nosh-sail4":n="Faible_dim3Nosh-sail4":e.SAILNumber==3?a>400||i>5e4?n="Out of Scope_dim3Nosh-sail3":a>40||i>5e3?n="Moyen_dim3Nosh-sail3":n="Faible_dim3Nosh-sail3":e.SAILNumber<=2&&(a<40&&i<500?n="Faible_dim3Nosh-sail12":a<40&&i<5e3?n="Moyen_dim3Nosh-sail12":i<=5e4?a<=400?n="Haut_dim3Nosh-sail12":n="Out of Scope_dim3Nosh-sail12":i>5e4&&(n="Out of Scope_dim3Nosh-sail12")):e.iGRC_colIndex==3?e.SAILNumber==6?n="Faible_dim8-sail6":e.SAILNumber==5?a>400||i>5e4?n="Moyen_dim8-sail5":n="Faible_dim8-sail5":e.SAILNumber>=4?a>400||i>5e4?n="Out of Scope_dim8-sail4":a>40||i>5e3?n="Moyen_dim8-sail4":n="Faible_dim8-sail4":e.SAILNumber==3?a>=40||i>5e3?n="Out of Scope_dim8-sail3":i<50||i<500?n="Faible_dim8-sail3":n="Moyen_dim8-sail3":e.SAILNumber<=2&&(a>=40||i>5e3?n="Out of Scope_dim8-sail3":i<50?n="Faible_dim8-sail3":i<500?n="Moyen_dim8-sail3":n="Haut_dim8-sail3"):e.iGRC_colIndex==4?(n="Cas4",e.SAILNumber==6?a>400||i>5e4?n="Moyen_dim20-sail6":n="Faible_dim20-sail6":e.SAILNumber==5?a>400||i>5e4?n="Out of Scope_dim20-sail5":a>40||i>5e3?n="Moyen_dim20-sail5":n="Faible_dim20-sail5":e.SAILNumber>=4?a>=40||i>5e3?n="Out of Scope_dim20-sail4":i<50||i<500?n="Faible_dim20-sail4":n="Moyen_dim20-sail4":e.SAILNumber==3?a>=40||i>5e3?n="Out of Scope_dim20-sail3":i<50?n="Faible_dim20-sail3":i<500?n="Moyen_dim20-sail3":n="Out of Scope_dim20-sail3":e.SAILNumber<=2&&(a>=40||i>5e3?n="Out of Scope_dim20-sail3":i<50?n="Moyen_dim20-sail3":i<500?n="Haut_dim20-sail3":n="Out of Scope_dim20-sail3")):e.iGRC_colIndex==5?(n="Cas5",e.SAILNumber==6?a>400||i>5e4?n="Out of Scope_dim40-sail6":a>40||i>5e3?n="Moyen_dim40-sail6":n="Faible_dim40-sail6":e.SAILNumber==5?a>=40||i>5e3?n="Out of Scope_dim40-sail5":i<50||i<500?n="Faible_dim40-sail5":n="Moyen_dim40-sail5":e.SAILNumber>=4?a>=40||i>5e3?n="Out of Scope_dim40-sail4":i<50?n="Faible_dim40-sail4":i<500?n="Moyen_dim40-sail4":n="Out of Scope_dim40-sail4":e.SAILNumber==3?a>=40||i>5e3?n="Out of Scope_dim40-sail3":i<50?n="Moyen_dim40-sail3":(i<500,n="Out of Scope_dim40-sail3"):e.SAILNumber<=2&&(a>=40||i>5e3?n="Out of Scope_dim40-sail3":i<50?n="Haut_dim40-sail3":(i<500,n="Out of Scope_dim40-sail3"))):e.iGRC_colIndex==6?n="Out of Scope-iGRC_colIndex=6":n="ERREUR-iGRC_colIndex voir Etape 2",n};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("h3",{className:"text-2xl font-semibold",children:["Rappel des donnes : Opration en catgorie ",e.SAIL," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("img",{className:"w-auto h-auto mb-6 mx-auto md:row-span-6",src:IE,alt:"AdjacenteArea"}),l.jsx(Ee,{text:l.jsxs("div",{children:["Largeur Zone Adjacente (Adjacent Volume)",l.jsx("br",{}),"Calcul selon l'hyposthse que l'UAS vole  sa vitesse maximale de croisire durant 3 minutes.",l.jsx("br",{}),"5 km < Largeur Zone Adjacente < 35 km",l.jsx("br",{}),"Sauf si le dposant peut dmontrer que la porte maximale de l'UAS n'excdera pas la condition des 3minutes  sa vitesse maximale de croisire."]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Largeur Zone Adjacente (m)"})}),l.jsx("input",{type:"number",value:e.AdjacentVolumeWidth||"",className:"mt-1 block w-full rounded-md border-black border-2 font-bold bg-gray-400 text-black  border-2 font-bold  shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:5e3,disabled:!0}),l.jsx(Ee,{text:l.jsxs("div",{children:["Hauteur Zone Adjacente (Adjacent Volume)",l.jsx("br",{})," =  + 150 ",l.jsx("br",{})]}),children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hauteur Zone Adjacente (m)"})}),l.jsx("input",{type:"number",value:e.AdjacentVolumeHeight||"",className:"mt-1 block w-full rounded-md border-black border-2 font-bold bg-gray-400 text-black  border-2 font-bold  shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:0,disabled:!0}),l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zone adjacente : Densit Moyenne de population(ppl/km)"}),l.jsx("input",{type:"text",value:e.populationDensityAdjacentArea||"",className:"mt-1 block w-full rounded-md border-black border-2 font-bold bg-gray-400 text-black  border-2 font-bold  shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Complter Etape 2",disabled:!0}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dimensions caractristiques maximales (m)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxCharacteristicDimension}),l.jsx(Ee,{text:"Attention : Si vous avez justifi d'une valeur diffrente  l'tape 2, celle ci sera utilise ici.",children:e.UsemaxCharacteristicDimension==="OUI"?l.jsxs("div",{children:[" Valeur utilise  l'tape 2: ",e.maxCharacteristicDimensionClass,"m"]}):l.jsxs("div",{children:[" Valeur utilise  l'tape 2 : ",e.maxCharacteristicDimension,"m"]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vitesse maximales (m/s)"}),l.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:e.maxSpeed})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Niveau de robustesse du confinent requis"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assembles en plein air autorises dans un rayon de 1 km autour du volume OPS"}),e.iGRC_colIndex===1?l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Le Sheltering est considr comme applicable pour l'UA coinsidr dans la zone adjacente car 1m UA (<25m/s)"}):e.iGRC_colIndex===2?l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Le Sheltering est-il applicable pour l'UA dans la zone adjacente"}):l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Le Sheltering est considr comme non applicable pour l'UA coinsidr dans la zone adjacente car >3m UA (>35m/s)"}),l.jsxs("select",{value:e.OutdoorAssembliesAllowed,onChange:n=>t({...e,OutdoorAssembliesAllowed:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une valeur",children:"Slectionner une valeur"}),l.jsx("option",{value:"Assemblies < 40k people",children:"Assemblies < 40k people"}),l.jsx("option",{value:"Assemblies of 40k to 400k",children:"Assemblies of 40k to 400k"}),l.jsx("option",{value:"> 400k",children:"> 400k"})]}),e.iGRC_colIndex===1?l.jsx("div",{children:e.ShelterApplicable="OUI"}):e.iGRC_colIndex===2?l.jsxs("select",{value:e.ShelterApplicable,onChange:n=>t({...e,ShelterApplicable:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[l.jsx("option",{value:"Slectionner une valeur",children:"Slectionner une valeur"}),l.jsx("option",{value:"OUI",children:"OUI"}),l.jsx("option",{value:"NON",children:"NON"})]}):l.jsx("div",{children:e.ShelterApplicable="NON"})]}),l.jsxs("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Niveau de robustesse du confinent requis :"}),r().startsWith("Out of Scope")?l.jsx("div",{className:"text-grey-600 font-bold",children:"Hors du champ d'application"}):r().startsWith("ERREUR")?l.jsx("div",{className:"text-purple-600 font-bold",children:"ERREUR : vrifier la compltude des tapes prcdantes!"}):r().startsWith("Faible")?l.jsx("div",{className:"text-yellow-600 font-bold",children:"Faible"}):r().startsWith("Moyen")?l.jsx("div",{className:"text-orange-600 font-bold",children:"Moyen"}):r().startsWith("Haut")?l.jsx("div",{className:"text-red-600 font-bold",children:"Haut"}):l.jsxs("div",{className:"text-green-600 font-bold",children:["Niveau de robustesse du confinent requis : ",r()]})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Justifications additionnelles"}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("div",{children:[l.jsx(Ee,{text:"En quelques phrases, vous pouvez apporter des commentaires additionnels sur le niveau de SAIL de l'opration envisage",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Apporter vos justifications sur le niveau derobustesse du confinent atteint :"})}),l.jsx("textarea",{value:e.SAILJustification,onChange:n=>t({...e,SAILJustification:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})})]})]})}function dR({assessment:e,onChange:t}){const r=[{GRC_Final:"<=2",ARC_a:"I",ARC_b:"II",ARC_c:"IV",ARC_d:"VI"},{GRC_Final:"3",ARC_a:"II",ARC_b:"II",ARC_c:"IV",ARC_d:"VI"},{GRC_Final:"4",ARC_a:"III",ARC_b:"III",ARC_c:"IV",ARC_d:"VI"},{GRC_Final:"5",ARC_a:"IV",ARC_b:"IV",ARC_c:"IV",ARC_d:"VI"},{GRC_Final:"6",ARC_a:"V",ARC_b:"V",ARC_c:"V",ARC_d:"VI"},{GRC_Final:"7",ARC_a:"VI",ARC_b:"VI",ARC_c:"VI",ARC_d:"VI"}];let n="0";switch(e.GRC_Final){case"1":switch(n="<=2",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 1",e.SAILNumber=1;break;case"ARC-b":e.SAIL="SAIL 2",e.SAILNumber=2;break;case"ARC-c":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"2":switch(n="<=2",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 1",e.SAILNumber=1;break;case"ARC-b":e.SAIL="SAIL 2",e.SAILNumber=2;break;case"ARC-c":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"3":switch(n="3",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 2",e.SAILNumber=2;break;case"ARC-b":e.SAIL="SAIL 2",e.SAILNumber=2;break;case"ARC-c":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"4":switch(n="4",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 3",e.SAILNumber=3;break;case"ARC-b":e.SAIL="SAIL 3",e.SAILNumber=3;break;case"ARC-c":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"5":switch(n="5",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-b":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-c":e.SAIL="SAIL 4",e.SAILNumber=4;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"6":switch(n="6",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 5",e.SAILNumber=5;break;case"ARC-b":e.SAIL="SAIL 5",e.SAILNumber=5;break;case"ARC-c":e.SAIL="SAIL 5",e.SAILNumber=5;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"7":switch(n="7",e.OperationalVolumeLevelMitigated){case"ARC-a":e.SAIL="SAIL 6",e.SAILNumber=6;break;case"ARC-b":e.SAIL="SAIL 6",e.SAILNumber=6;break;case"ARC-c":e.SAIL="SAIL 6",e.SAILNumber=6;break;case"ARC-d":e.SAIL="SAIL 6",e.SAILNumber=6;break}break;case"8":n=">7",e.SAIL="Certifi",e.SAILNumber=7;break;default:n="0",e.SAIL="Certifi",e.SAILNumber=7}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Dtermination du SAIL"}),l.jsxs("table",{className:"min-w-full bg-white",children:[l.jsxs("thead",{children:[l.jsxs("tr",{className:"bg-blue-500 text-white",children:[l.jsx("th",{className:"bg-white  py-2 px-4 border-b"}),l.jsx("th",{colspan:"4",className:"  py-2 px-4 border-b",children:"ARC Final"})]}),l.jsxs("tr",{className:"bg-blue-500 text-white",children:[l.jsx("th",{className:"bg-blue-400 py-2 px-4 border-b",children:"GRC Final"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"ARC-a"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"ARC-b"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"ARC-c"}),l.jsx("th",{className:"py-2 px-4 border-b",children:"ARC-d"})]})]}),l.jsxs("tbody",{children:[r.map((i,a)=>l.jsxs("tr",{className:"bg-gray-200",children:[l.jsx("th",{className:"bg-blue-400 py-2 px-4 border-b",children:i.GRC_Final}),l.jsxs("th",{className:i.GRC_Final.includes(n)&&e.OperationalVolumeLevelMitigated==="ARC-a"?"bg-blue-900  text-white":"bg-gray-200 text-gray-400",children:[i.ARC_a,"    "]}),l.jsxs("th",{className:i.GRC_Final.includes(n)&&e.OperationalVolumeLevelMitigated==="ARC-b"?"bg-blue-900 text-white":"bg-gray-200 text-gray-400",children:[i.ARC_b,"    "]}),l.jsxs("th",{className:i.GRC_Final.includes(n)&&e.OperationalVolumeLevelMitigated==="ARC-c"?"bg-blue-900 text-white":"bg-gray-200 text-gray-400",children:[i.ARC_c,"    "]}),l.jsxs("th",{className:i.GRC_Final.includes(n)&&e.OperationalVolumeLevelMitigated==="ARC-d"?"bg-blue-900 text-white":"bg-gray-200 text-gray-400",children:[i.ARC_d,"    "]})]})),l.jsxs("tr",{children:[l.jsx("th",{className:"bg-blue-400 py-2 px-4 border-b",children:">7"}),l.jsx("th",{className:n.includes(">7")?"bg-blue-900 text-white":"bg-gray-200 text-gray-400",colspan:"5",children:"Opration en catgorie certifie"})]})]})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Commentaires additionnels"}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:l.jsxs("div",{children:[l.jsx(Ee,{text:"En quelques phrases, vous pouvez apporter des commentaires additionnels sur le niveau de SAIL de l'opration envisage",children:l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Apporter vos commentaires sur le niveau de SAIL si vous le souhaitez :"})}),l.jsx("textarea",{value:e.SAILJustification,onChange:i=>t({...e,SAILJustification:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})]})})]})]})}const hR="/assets/EASA_Logo-DaeTCmlm.png";function fR({assessment:e,formData:t,onChange:r,showOnly:n}){return l.jsxs("div",{className:"space-y-8",children:[l.jsx("table",{className:"min-w-full bg-grey-500",children:l.jsxs("thead",{children:[l.jsxs("tr",{className:"bg-grey-500 text-black",children:[l.jsxs("th",{className:"bg-white  py-2 px-4 border-b",children:[l.jsx("br",{}),l.jsx("img",{src:hR,alt:"Logo_EASA",className:"h-auto mb-6 mx-auto",style:{width:"50px",height:"auto"}})," "]}),l.jsxs("th",{colspan:"3",className:"  py-2 px-4 border-b",children:["Votre dossier SORA est prt !",l.jsx("br",{}),"Demande dautorisation dexploitation en catgorie Spcifique",l.jsx("br",{})]}),l.jsxs("th",{className:"bg-white  py-2 px-4 border-b",children:[l.jsx("br",{}),l.jsx("img",{src:k1,alt:"Logo_CEDF",className:"h-auto mb-6 mx-auto",style:{width:"100px",height:"auto"}})]})]}),l.jsx("tr",{className:"bg-gray-300 text-black",children:l.jsx("th",{colspan:"5",className:"  py-2 px-4 border-b",children:" "})}),l.jsx("tr",{className:"bg-white  py-2 px-4 border-b",children:l.jsxs("th",{colspan:"5",className:"py-2 px-4 border-b  text-left font-normal",children:[l.jsx("strong",{children:"Protection des donnes :"})," Les donnes personnelles incluses dans la prsente demande sont traites par les Centres d'essais dans un cadre strict de protection des donnes. Les donnes personnelles seront traites aux fins de l'excution, de la gestion et du suivi de la demande. Si le demandeur souhaite obtenir des informations supplmentaires concernant le traitement de ses donnes  caractre personnel ou exercer ses droits (par exemple, accder  des donnes inexactes ou incompltes ou les rectifier), il peut contacter le responsable des vols du ou des centres d'essais concerns par l'opration."]})}),l.jsx("tr",{className:"bg-gray-300 text-black",children:l.jsx("th",{colspan:"5",className:"  py-2 px-4 border-b",children:" "})}),l.jsxs("tr",{className:"bg-white  py-2 px-4 border-b  border-black",children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal",children:" Nouvelle demande"}),l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left  text-blue-100 font-normal",children:" Modification de l'autorisation d'exploitation :"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b text-left font-normal text-blue-100 bg-[#f9fbff]",children:"n de l'AE  modifier"})]}),l.jsx("tr",{className:"bg-gray-300 text-black",children:l.jsx("th",{colspan:"5",className:"  py-2 px-4 border-b",children:" 1. Donnes concernant l'exploitant d'UAS"})}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 1.1 Numro d'enregistrement de l'exploitant UAS"}),l.jsxs("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:[" ",t.operator.registrationNumber]})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 1.2 Nom de l'exploitant UAS"}),l.jsxs("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:[" ",t.operator.name]})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 1.3 Nom du dirigeant responsable"}),l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:t.operator.managerName})]}),l.jsxs("tr",{children:[l.jsxs("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:[" 1.4 Point de contact oprationnel",l.jsxs("ul",{children:[l.jsx("li",{children:" Nom"}),l.jsx("li",{children:" Tlphone"}),l.jsx("li",{children:" Courrielt"})]})]}),l.jsxs("th",{colspan:"2",className:"py-2 px-4 border-b  text-left font-normal bg-[#f9fbff]",children:[" ",l.jsxs("ul",{children:[l.jsxs("li",{children:[" ",t.operator.operationalContact]}),l.jsxs("li",{children:[" ",t.operator.phone]}),l.jsxs("li",{children:[" ",t.operator.email]})]})]})]}),l.jsx("tr",{className:"bg-gray-300 text-black",children:l.jsx("th",{colspan:"5",className:"  py-2 px-4 border-b",children:" 2. Dtails concernant l'opration UAS"})}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.1 Date prvue de dbut de l'opration"}),l.jsxs("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:[" ",t.operator.startDate]}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.2 Date de fin prvue"}),l.jsxs("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:[" ",t.operator.endDate]})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.3 Lieu(x) prvu(s) de l'opration"}),l.jsxs("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:[" ",t.operator.locations]})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.4 Rfrence et rvision de l'valuation des risques"}),l.jsxs("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:["  SORA 2.5 ",l.jsx("br",{})," ",l.jsx("b",{className:"py-2 px-4 border-b text-left  text-blue-100 font-normal",children:" PDRA # ____  autre"})]})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.5 Niveau d'assurance et d'intgrit (SAIL)"}),l.jsxs("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left bg-[#f9fbff]",children:[" ",t.riskAssessment.SAIL]})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.6 Type d'opration"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"  Vol en vue(VLOS) "}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"  Vol en vue Etendue (EVLOS) "}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"  Vol hors vue(BVLOS) "})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.7 Transport de marchandises dangereuses"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"  Oui   Non"})]}),l.jsx("tr",{children:l.jsx("th",{colspan:"1",rowspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:"2.8 Caractrisation des risques au sol"})}),l.jsxs("tr",{children:[l.jsx("td",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:"2.8.1 Zone d'exploitation"}),l.jsx("td",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"VAL"})]}),l.jsxs("tr",{children:[l.jsx("td",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:"2.8.2 Zone adjacente"}),l.jsx("td",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.9 Limite suprieure du volume d'exploitation"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.10 Classe d'espace arien de l'opration envisage"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsx("tr",{children:l.jsx("th",{colspan:"1",rowspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:"2.11 Niveau de risque arien rsiduel"})}),l.jsxs("tr",{children:[l.jsx("td",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:"2.11.1 Volumed'exploitation"}),l.jsx("td",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"ARC-aARC-bARC-cARC-d"})]}),l.jsxs("tr",{children:[l.jsx("td",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:"2.11.2. V olume adjacent"}),l.jsx("td",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:"ARC-aARC-bARC-cARC-d"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 2.12 Rfrence du manuel d'exploitation"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 2.13 Rfrence du dossier de dmonstration de conformit"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsx("tr",{className:"bg-gray-300 text-black",children:l.jsx("th",{colspan:"5",className:"  py-2 px-4 border-b",children:" 3. Donnes concernant l'UAS ou les UAS"})}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 3.1 Constructeur"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" VAL"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 3.2 Modle"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 3.3 Type d'UAS"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" VAL"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 3.4 Dimensions caractristiques maximales"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" _____ m"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 3.5 Masse au dcollage"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" _____ kg"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#d9e2f3]",children:" 3.6 Vitesse maximale"}),l.jsx("th",{colspan:"1",className:"py-2 px-4 border-b border-black text-left font-normal bg-[#f9fbff]",children:" _____ m/s (_____ kt)"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 3.7 Numro de srie ou, le cas chant, immatriculation"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 3.8 Certificat de type (TC) ou rapport de vrification de la conception, le cas chant"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 3.9 Numro du certificat de navigabilit (CdN), le cas chant"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 3.10 Numro du certificat de puissance acoustique, le cas chant"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 3.11 Attnuation des effets de l'impact au sol (M2)"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsxs("tr",{children:[l.jsx("th",{colspan:"2",className:"py-2 px-4 border-b text-left font-normal bg-[#d9e2f3]",children:" 3.12 Exigences techniques pour le confinement"}),l.jsx("th",{colspan:"3",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:" VAL"})]}),l.jsx("tr",{className:"bg-gray-300 text-black",children:l.jsx("th",{colspan:"5",className:"  py-2 px-4 border-b",children:" 4. Remarques"})}),l.jsx("tr",{children:l.jsx("th",{colspan:"5",className:"py-2 px-4 border-b text-left font-normal bg-[#f9fbff]",children:l.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:4})})})]})}),l.jsx("div",{className:"text-sm text-gray-600 mt-8",children:l.jsx("p",{children:"Vous pouvez maintenant tlcharger votre dossier SORA complet en cliquant sur le bouton ci-dessous."})})]})}function pR({className:e=""}){const{studyId:t,studyName:r,formData:n,saving:i,setSaving:a,setStudyId:s}=Ef(),{user:u,isSuperAgent:d}=ao(),[h,f]=ge.useState(null),p=async()=>{if(!(!r||i||!u)){a(!0),f(null);try{const v=t||`temp_${Date.now()}`,{prepareFormDataForSave:b}=await Pl(async()=>{const{prepareFormDataForSave:S}=await import("./fileStorage-C2zVp9Cj.js");return{prepareFormDataForSave:S}},[]),k=await b(n,v);if(t){let S=Qt.from("sora_studies").update({name:r,data:k,updated_at:new Date().toISOString()}).eq("id",t);d||(S=S.eq("user_id",u.id));const{error:T}=await S;if(T)throw T}else{const{data:S,error:T}=await Qt.from("sora_studies").insert({name:r,data:k,user_id:u.id}).select().single();if(T)throw T;S&&s(S.id)}}catch(v){const b=v instanceof Error?v.message:"Une erreur est survenue lors de la sauvegarde";f(b),console.error("Erreur dtaille lors de la sauvegarde:",v)}finally{a(!1)}}};return l.jsxs("div",{className:"fixed bottom-3 left-8 flex flex-col items-end",children:[h&&l.jsx("div",{className:"mb-2 p-3 bg-red-100 text-red-700 rounded-lg max-w-md",children:h}),l.jsxs("button",{onClick:p,disabled:i||!r||!u,className:`flex items-center gap-2 px-6 py-3 rounded-full shadow-lg transition-all transform hover:scale-105 ${i||!u?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white hover:shadow-xl"} ${e}`,children:[l.jsx(Tk,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:i?"Sauvegarde...":"Sauvegarder"})]})]})}function mR({isOpen:e,onClose:t,onSaveAndExit:r,onExitWithoutSaving:n}){return e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Sauvegarder les modifications ?"}),l.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:l.jsx(r0,{className:"w-5 h-5"})})]}),l.jsx("p",{className:"mb-6 text-gray-600",children:"Voulez-vous sauvegarder votre travail avant de quitter ?"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Quitter sans sauvegarder"}),l.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Sauvegarder et quitter"})]})]})}):null}function LE(){const e=ts(),{user:t,isSuperAgent:r}=ao(),{studyId:n,studyName:i,formData:a,saving:s,setSaving:u}=Ef(),[d,h]=ge.useState(!1),f=()=>{h(!0)},p=async()=>{if(!(!t||s)){u(!0);try{if(n){let b=Qt.from("sora_studies").update({name:i,data:a,updated_at:new Date().toISOString()}).eq("id",n);r||(b=b.eq("user_id",t.id)),await b}else i&&await Qt.from("sora_studies").insert({name:i,data:a,user_id:t.id});e("/")}catch(b){console.error("Erreur lors de la sauvegarde:",b)}finally{u(!1),h(!1)}}},v=()=>{h(!1),e("/")};return l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:f,className:"fixed top-4 left-4 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors",title:"Retour  l'accueil",children:l.jsx(Ek,{className:"w-6 h-6 text-gray-600"})}),l.jsx(mR,{isOpen:d,onClose:()=>h(!1),onSaveAndExit:p,onExitWithoutSaving:v})]})}var gR={},pn={},Ri={},vR=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.zipSave=Ri.zipSetText=Ri.zipGetText=Ri.zipLoad=void 0;var yR=vR(H1),xR=function(e){return yR.default.loadAsync(e)};Ri.zipLoad=xR;var bR=function(e,t){var r=e.file(t);return r?r.async("text"):null};Ri.zipGetText=bR;var _R=function(e,t,r){return e.file(t,r,{binary:!1})};Ri.zipSetText=_R;var wR=function(e){return e.generateAsync({type:"uint8array",compression:"DEFLATE",compressionOptions:{level:1}})};Ri.zipSave=wR;var Sl={},PE={};const ER={},CR=Object.freeze(Object.defineProperty({__proto__:null,default:ER},Symbol.toStringTag,{value:"Module"})),_0=k_(CR);var $p={},Kd={exports:{}},yb;function SR(){return yb||(yb=1,function(e,t){var r=_0,n=r.Buffer;function i(s,u){for(var d in s)u[d]=s[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=a);function a(s,u,d){return n(s,u,d)}i(n,a),a.from=function(s,u,d){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,u,d)},a.alloc=function(s,u,d){if(typeof s!="number")throw new TypeError("Argument must be a number");var h=n(s);return u!==void 0?typeof d=="string"?h.fill(u,d):h.fill(u):h.fill(0),h},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}}(Kd,Kd.exports)),Kd.exports}var xb;function AR(){if(xb)return $p;xb=1;var e=SR().Buffer,t=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(y){if(!y)return"utf8";for(var _;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(_)return;y=(""+y).toLowerCase(),_=!0}}function n(y){var _=r(y);if(typeof _!="string"&&(e.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return _||y}$p.StringDecoder=i;function i(y){this.encoding=n(y);var _;switch(this.encoding){case"utf16le":this.text=p,this.end=v,_=4;break;case"utf8":this.fillLast=d,_=4;break;case"base64":this.text=b,this.end=k,_=3;break;default:this.write=S,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}i.prototype.write=function(y){if(y.length===0)return"";var _,w;if(this.lastNeed){if(_=this.fillLast(y),_===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<y.length?_?_+this.text(y,w):this.text(y,w):_||""},i.prototype.end=f,i.prototype.text=h,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function a(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,_,w){var E=_.length-1;if(E<w)return 0;var N=a(_[E]);return N>=0?(N>0&&(y.lastNeed=N-1),N):--E<w||N===-2?0:(N=a(_[E]),N>=0?(N>0&&(y.lastNeed=N-2),N):--E<w||N===-2?0:(N=a(_[E]),N>=0?(N>0&&(N===2?N=0:y.lastNeed=N-3),N):0))}function u(y,_,w){if((_[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return y.lastNeed=2,""}}function d(y){var _=this.lastTotal-this.lastNeed,w=u(this,y);if(w!==void 0)return w;if(this.lastNeed<=y.length)return y.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,_,0,y.length),this.lastNeed-=y.length}function h(y,_){var w=s(this,y,_);if(!this.lastNeed)return y.toString("utf8",_);this.lastTotal=w;var E=y.length-(w-this.lastNeed);return y.copy(this.lastChar,0,E),y.toString("utf8",_,E)}function f(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+"":_}function p(y,_){if((y.length-_)%2===0){var w=y.toString("utf16le",_);if(w){var E=w.charCodeAt(w.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",_,y.length-1)}function v(y){var _=y&&y.length?this.write(y):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,w)}return _}function b(y,_){var w=(y.length-_)%3;return w===0?y.toString("base64",_):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",_,y.length-w))}function k(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function S(y){return y.toString(this.encoding)}function T(y){return y&&y.length?this.write(y):""}return $p}(function(e){(function(t){t.parser=function(F,I){return new n(F,I)},t.SAXParser=n,t.SAXStream=f,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(F,I){if(!(this instanceof n))return new n(F,I);var X=this;a(X),X.q=X.c="",X.bufferCheckPosition=t.MAX_BUFFER_LENGTH,X.opt=I||{},X.opt.lowercase=X.opt.lowercase||X.opt.lowercasetags,X.looseCase=X.opt.lowercase?"toLowerCase":"toUpperCase",X.tags=[],X.closed=X.closedRoot=X.sawRoot=!1,X.tag=X.error=null,X.strict=!!F,X.noscript=!!(F||X.opt.noscript),X.state=A.BEGIN,X.strictEntities=X.opt.strictEntities,X.ENTITIES=X.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),X.attribList=[],X.opt.xmlns&&(X.ns=Object.create(S)),X.trackPosition=X.opt.position!==!1,X.trackPosition&&(X.position=X.line=X.column=0),te(X,"onready")}Object.create||(Object.create=function(F){function I(){}I.prototype=F;var X=new I;return X}),Object.keys||(Object.keys=function(F){var I=[];for(var X in F)F.hasOwnProperty(X)&&I.push(X);return I});function i(F){for(var I=Math.max(t.MAX_BUFFER_LENGTH,10),X=0,Y=0,Ne=r.length;Y<Ne;Y++){var Le=F[r[Y]].length;if(Le>I)switch(r[Y]){case"textNode":ae(F);break;case"cdata":z(F,"oncdata",F.cdata),F.cdata="";break;case"script":z(F,"onscript",F.script),F.script="";break;default:ce(F,"Max buffer length exceeded: "+r[Y])}X=Math.max(X,Le)}var Me=t.MAX_BUFFER_LENGTH-X;F.bufferCheckPosition=Me+F.position}function a(F){for(var I=0,X=r.length;I<X;I++)F[r[I]]=""}function s(F){ae(F),F.cdata!==""&&(z(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(z(F,"onscript",F.script),F.script="")}n.prototype={end:function(){fe(this)},write:se,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var u;try{u=_0.Stream}catch{u=function(){}}u||(u=function(){});var d=t.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function h(F,I){return new f(F,I)}function f(F,I){if(!(this instanceof f))return new f(F,I);u.apply(this),this._parser=new n(F,I),this.writable=!0,this.readable=!0;var X=this;this._parser.onend=function(){X.emit("end")},this._parser.onerror=function(Y){X.emit("error",Y),X._parser.error=null},this._decoder=null,d.forEach(function(Y){Object.defineProperty(X,"on"+Y,{get:function(){return X._parser["on"+Y]},set:function(Ne){if(!Ne)return X.removeAllListeners(Y),X._parser["on"+Y]=Ne,Ne;X.on(Y,Ne)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(u.prototype,{constructor:{value:f}}),f.prototype.write=function(F){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(F)){if(!this._decoder){var I=AR().StringDecoder;this._decoder=new I("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},f.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},f.prototype.on=function(F,I){var X=this;return!X._parser["on"+F]&&d.indexOf(F)!==-1&&(X._parser["on"+F]=function(){var Y=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Y.splice(0,0,F),X.emit.apply(X,Y)}),u.prototype.on.call(X,F,I)};var p="[CDATA[",v="DOCTYPE",b="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/2000/xmlns/",S={xml:b,xmlns:k},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function E(F){return F===" "||F===`
`||F==="\r"||F==="	"}function N(F){return F==='"'||F==="'"}function M(F){return F===">"||E(F)}function B(F,I){return F.test(I)}function D(F,I){return!B(F,I)}var A=0;t.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(F){var I=t.ENTITIES[F],X=typeof I=="number"?String.fromCharCode(I):I;t.ENTITIES[F]=X});for(var H in t.STATE)t.STATE[t.STATE[H]]=H;A=t.STATE;function te(F,I,X){F[I]&&F[I](X)}function z(F,I,X){F.textNode&&ae(F),te(F,I,X)}function ae(F){F.textNode=P(F.opt,F.textNode),F.textNode&&te(F,"ontext",F.textNode),F.textNode=""}function P(F,I){return F.trim&&(I=I.trim()),F.normalize&&(I=I.replace(/\s+/g," ")),I}function ce(F,I){return ae(F),F.trackPosition&&(I+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),I=new Error(I),F.error=I,te(F,"onerror",I),F}function fe(F){return F.sawRoot&&!F.closedRoot&&re(F,"Unclosed root tag"),F.state!==A.BEGIN&&F.state!==A.BEGIN_WHITESPACE&&F.state!==A.TEXT&&ce(F,"Unexpected end"),ae(F),F.c="",F.closed=!0,te(F,"onend"),n.call(F,F.strict,F.opt),F}function re(F,I){if(typeof F!="object"||!(F instanceof n))throw new Error("bad call to strictFail");F.strict&&ce(F,I)}function ue(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var I=F.tags[F.tags.length-1]||F,X=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(X.ns=I.ns),F.attribList.length=0,z(F,"onopentagstart",X)}function O(F,I){var X=F.indexOf(":"),Y=X<0?["",F]:F.split(":"),Ne=Y[0],Le=Y[1];return I&&F==="xmlns"&&(Ne="xmlns",Le=""),{prefix:Ne,local:Le}}function ne(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var I=O(F.attribName,!0),X=I.prefix,Y=I.local;if(X==="xmlns")if(Y==="xml"&&F.attribValue!==b)re(F,"xml: prefix must be bound to "+b+`
Actual: `+F.attribValue);else if(Y==="xmlns"&&F.attribValue!==k)re(F,"xmlns: prefix must be bound to "+k+`
Actual: `+F.attribValue);else{var Ne=F.tag,Le=F.tags[F.tags.length-1]||F;Ne.ns===Le.ns&&(Ne.ns=Object.create(Le.ns)),Ne.ns[Y]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,z(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function J(F,I){if(F.opt.xmlns){var X=F.tag,Y=O(F.tagName);X.prefix=Y.prefix,X.local=Y.local,X.uri=X.ns[Y.prefix]||"",X.prefix&&!X.uri&&(re(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),X.uri=Y.prefix);var Ne=F.tags[F.tags.length-1]||F;X.ns&&Ne.ns!==X.ns&&Object.keys(X.ns).forEach(function(he){z(F,"onopennamespace",{prefix:he,uri:X.ns[he]})});for(var Le=0,Me=F.attribList.length;Le<Me;Le++){var j=F.attribList[Le],K=j[0],W=j[1],V=O(K,!0),q=V.prefix,ie=V.local,ye=q===""?"":X.ns[q]||"",we={name:K,value:W,prefix:q,local:ie,uri:ye};q&&q!=="xmlns"&&!ye&&(re(F,"Unbound namespace prefix: "+JSON.stringify(q)),we.uri=q),F.tag.attributes[K]=we,z(F,"onattribute",we)}F.attribList.length=0}F.tag.isSelfClosing=!!I,F.sawRoot=!0,F.tags.push(F.tag),z(F,"onopentag",F.tag),I||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=A.SCRIPT:F.state=A.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function G(F){if(!F.tagName){re(F,"Weird empty close tag."),F.textNode+="</>",F.state=A.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=A.SCRIPT;return}z(F,"onscript",F.script),F.script=""}var I=F.tags.length,X=F.tagName;F.strict||(X=X[F.looseCase]());for(var Y=X;I--;){var Ne=F.tags[I];if(Ne.name!==Y)re(F,"Unexpected close tag");else break}if(I<0){re(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=A.TEXT;return}F.tagName=X;for(var Le=F.tags.length;Le-- >I;){var Me=F.tag=F.tags.pop();F.tagName=F.tag.name,z(F,"onclosetag",F.tagName);var j={};for(var K in Me.ns)j[K]=Me.ns[K];var W=F.tags[F.tags.length-1]||F;F.opt.xmlns&&Me.ns!==W.ns&&Object.keys(Me.ns).forEach(function(V){var q=Me.ns[V];z(F,"onclosenamespace",{prefix:V,uri:q})})}I===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=A.TEXT}function ve(F){var I=F.entity,X=I.toLowerCase(),Y,Ne="";return F.ENTITIES[I]?F.ENTITIES[I]:F.ENTITIES[X]?F.ENTITIES[X]:(I=X,I.charAt(0)==="#"&&(I.charAt(1)==="x"?(I=I.slice(2),Y=parseInt(I,16),Ne=Y.toString(16)):(I=I.slice(1),Y=parseInt(I,10),Ne=Y.toString(10))),I=I.replace(/^0+/,""),isNaN(Y)||Ne.toLowerCase()!==I?(re(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(Y))}function de(F,I){I==="<"?(F.state=A.OPEN_WAKA,F.startTagPosition=F.position):E(I)||(re(F,"Non-whitespace before first tag."),F.textNode=I,F.state=A.TEXT)}function Z(F,I){var X="";return I<F.length&&(X=F.charAt(I)),X}function se(F){var I=this;if(this.error)throw this.error;if(I.closed)return ce(I,"Cannot write after close. Assign an onready handler.");if(F===null)return fe(I);typeof F=="object"&&(F=F.toString());for(var X=0,Y="";Y=Z(F,X++),I.c=Y,!!Y;)switch(I.trackPosition&&(I.position++,Y===`
`?(I.line++,I.column=0):I.column++),I.state){case A.BEGIN:if(I.state=A.BEGIN_WHITESPACE,Y==="\uFEFF")continue;de(I,Y);continue;case A.BEGIN_WHITESPACE:de(I,Y);continue;case A.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Ne=X-1;Y&&Y!=="<"&&Y!=="&";)Y=Z(F,X++),Y&&I.trackPosition&&(I.position++,Y===`
`?(I.line++,I.column=0):I.column++);I.textNode+=F.substring(Ne,X-1)}Y==="<"&&!(I.sawRoot&&I.closedRoot&&!I.strict)?(I.state=A.OPEN_WAKA,I.startTagPosition=I.position):(!E(Y)&&(!I.sawRoot||I.closedRoot)&&re(I,"Text data outside of root node."),Y==="&"?I.state=A.TEXT_ENTITY:I.textNode+=Y);continue;case A.SCRIPT:Y==="<"?I.state=A.SCRIPT_ENDING:I.script+=Y;continue;case A.SCRIPT_ENDING:Y==="/"?I.state=A.CLOSE_TAG:(I.script+="<"+Y,I.state=A.SCRIPT);continue;case A.OPEN_WAKA:if(Y==="!")I.state=A.SGML_DECL,I.sgmlDecl="";else if(!E(Y))if(B(T,Y))I.state=A.OPEN_TAG,I.tagName=Y;else if(Y==="/")I.state=A.CLOSE_TAG,I.tagName="";else if(Y==="?")I.state=A.PROC_INST,I.procInstName=I.procInstBody="";else{if(re(I,"Unencoded <"),I.startTagPosition+1<I.position){var Le=I.position-I.startTagPosition;Y=new Array(Le).join(" ")+Y}I.textNode+="<"+Y,I.state=A.TEXT}continue;case A.SGML_DECL:(I.sgmlDecl+Y).toUpperCase()===p?(z(I,"onopencdata"),I.state=A.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+Y==="--"?(I.state=A.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+Y).toUpperCase()===v?(I.state=A.DOCTYPE,(I.doctype||I.sawRoot)&&re(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):Y===">"?(z(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=A.TEXT):(N(Y)&&(I.state=A.SGML_DECL_QUOTED),I.sgmlDecl+=Y);continue;case A.SGML_DECL_QUOTED:Y===I.q&&(I.state=A.SGML_DECL,I.q=""),I.sgmlDecl+=Y;continue;case A.DOCTYPE:Y===">"?(I.state=A.TEXT,z(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=Y,Y==="["?I.state=A.DOCTYPE_DTD:N(Y)&&(I.state=A.DOCTYPE_QUOTED,I.q=Y));continue;case A.DOCTYPE_QUOTED:I.doctype+=Y,Y===I.q&&(I.q="",I.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:I.doctype+=Y,Y==="]"?I.state=A.DOCTYPE:N(Y)&&(I.state=A.DOCTYPE_DTD_QUOTED,I.q=Y);continue;case A.DOCTYPE_DTD_QUOTED:I.doctype+=Y,Y===I.q&&(I.state=A.DOCTYPE_DTD,I.q="");continue;case A.COMMENT:Y==="-"?I.state=A.COMMENT_ENDING:I.comment+=Y;continue;case A.COMMENT_ENDING:Y==="-"?(I.state=A.COMMENT_ENDED,I.comment=P(I.opt,I.comment),I.comment&&z(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+Y,I.state=A.COMMENT);continue;case A.COMMENT_ENDED:Y!==">"?(re(I,"Malformed comment"),I.comment+="--"+Y,I.state=A.COMMENT):I.state=A.TEXT;continue;case A.CDATA:Y==="]"?I.state=A.CDATA_ENDING:I.cdata+=Y;continue;case A.CDATA_ENDING:Y==="]"?I.state=A.CDATA_ENDING_2:(I.cdata+="]"+Y,I.state=A.CDATA);continue;case A.CDATA_ENDING_2:Y===">"?(I.cdata&&z(I,"oncdata",I.cdata),z(I,"onclosecdata"),I.cdata="",I.state=A.TEXT):Y==="]"?I.cdata+="]":(I.cdata+="]]"+Y,I.state=A.CDATA);continue;case A.PROC_INST:Y==="?"?I.state=A.PROC_INST_ENDING:E(Y)?I.state=A.PROC_INST_BODY:I.procInstName+=Y;continue;case A.PROC_INST_BODY:if(!I.procInstBody&&E(Y))continue;Y==="?"?I.state=A.PROC_INST_ENDING:I.procInstBody+=Y;continue;case A.PROC_INST_ENDING:Y===">"?(z(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=A.TEXT):(I.procInstBody+="?"+Y,I.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:B(y,Y)?I.tagName+=Y:(ue(I),Y===">"?J(I):Y==="/"?I.state=A.OPEN_TAG_SLASH:(E(Y)||re(I,"Invalid character in tag name"),I.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:Y===">"?(J(I,!0),G(I)):(re(I,"Forward-slash in opening tag not followed by >"),I.state=A.ATTRIB);continue;case A.ATTRIB:if(E(Y))continue;Y===">"?J(I):Y==="/"?I.state=A.OPEN_TAG_SLASH:B(T,Y)?(I.attribName=Y,I.attribValue="",I.state=A.ATTRIB_NAME):re(I,"Invalid attribute name");continue;case A.ATTRIB_NAME:Y==="="?I.state=A.ATTRIB_VALUE:Y===">"?(re(I,"Attribute without value"),I.attribValue=I.attribName,ne(I),J(I)):E(Y)?I.state=A.ATTRIB_NAME_SAW_WHITE:B(y,Y)?I.attribName+=Y:re(I,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if(Y==="=")I.state=A.ATTRIB_VALUE;else{if(E(Y))continue;re(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",z(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",Y===">"?J(I):B(T,Y)?(I.attribName=Y,I.state=A.ATTRIB_NAME):(re(I,"Invalid attribute name"),I.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(E(Y))continue;N(Y)?(I.q=Y,I.state=A.ATTRIB_VALUE_QUOTED):(re(I,"Unquoted attribute value"),I.state=A.ATTRIB_VALUE_UNQUOTED,I.attribValue=Y);continue;case A.ATTRIB_VALUE_QUOTED:if(Y!==I.q){Y==="&"?I.state=A.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=Y;continue}ne(I),I.q="",I.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:E(Y)?I.state=A.ATTRIB:Y===">"?J(I):Y==="/"?I.state=A.OPEN_TAG_SLASH:B(T,Y)?(re(I,"No whitespace between attributes"),I.attribName=Y,I.attribValue="",I.state=A.ATTRIB_NAME):re(I,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(!M(Y)){Y==="&"?I.state=A.ATTRIB_VALUE_ENTITY_U:I.attribValue+=Y;continue}ne(I),Y===">"?J(I):I.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(I.tagName)Y===">"?G(I):B(y,Y)?I.tagName+=Y:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=A.SCRIPT):(E(Y)||re(I,"Invalid tagname in closing tag"),I.state=A.CLOSE_TAG_SAW_WHITE);else{if(E(Y))continue;D(T,Y)?I.script?(I.script+="</"+Y,I.state=A.SCRIPT):re(I,"Invalid tagname in closing tag."):I.tagName=Y}continue;case A.CLOSE_TAG_SAW_WHITE:if(E(Y))continue;Y===">"?G(I):re(I,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var Me,j;switch(I.state){case A.TEXT_ENTITY:Me=A.TEXT,j="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:Me=A.ATTRIB_VALUE_QUOTED,j="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:Me=A.ATTRIB_VALUE_UNQUOTED,j="attribValue";break}if(Y===";")if(I.opt.unparsedEntities){var K=ve(I);I.entity="",I.state=Me,I.write(K)}else I[j]+=ve(I),I.entity="",I.state=Me;else B(I.entity.length?w:_,Y)?I.entity+=Y:(re(I,"Invalid character in entity name"),I[j]+="&"+I.entity+Y,I.entity="",I.state=Me);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&i(I),I}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var F=String.fromCharCode,I=Math.floor,X=function(){var Y=16384,Ne=[],Le,Me,j=-1,K=arguments.length;if(!K)return"";for(var W="";++j<K;){var V=Number(arguments[j]);if(!isFinite(V)||V<0||V>1114111||I(V)!==V)throw RangeError("Invalid code point: "+V);V<=65535?Ne.push(V):(V-=65536,Le=(V>>10)+55296,Me=V%1024+56320,Ne.push(Le,Me)),(j+1===K||Ne.length>Y)&&(W+=F.apply(null,Ne),Ne.length=0)}return W};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:X,configurable:!0,writable:!0}):String.fromCodePoint=X}()})(e)})(PE);var Fl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.setDebugLogSink=e.logger=void 0,e.logger={debug:function(){}};function t(r){e.logger.debug=r}e.setDebugLogSink=t})(Fl);var TR=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.buildXml=Sl.parseXml=void 0;var NR=TR(PE),kR=Fl,jR=function(e){var t=NR.default.parser(!0,{trim:!1,normalize:!1}),r,n=null,i=0;return new Promise(function(a,s){t.onopentag=function(u){var d={_parent:n||void 0,_children:[],_fTextNode:!1,_tag:u.name,_attrs:u.attributes};n!=null?n._children.push(d):r=d,n=d,i+=1},t.onclosetag=function(){n=n!=null?n._parent:null},t.ontext=function(u){n!=null&&n._children.push({_parent:n,_children:[],_fTextNode:!0,_text:u})},t.onend=function(){kR.logger.debug("Number of XML elements: ".concat(i)),a(r)},t.onerror=function(u){s(u)},t.write(e),t.end()})};Sl.parseXml=jR;function ME(e,t,r){r===void 0&&(r="");var n=r.length?"":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',i=[Buffer.from(n,"utf-8")];if(e._fTextNode)i.push(Buffer.from(DR(e._text,t)));else{var a="",s=e._attrs;Object.keys(s).forEach(function(p){a+=" ".concat(p,'="').concat(OR(s[p]),'"')});var u=e._children.length>0,d=u?"":"/";i.push(Buffer.from(`
`.concat(r,"<").concat(e._tag).concat(a).concat(d,">")));var h=!1;if(e._children.forEach(function(p){i.push(ME(p,t,"".concat(r,"  "))),h=!p._fTextNode}),u){var f=h?`
`.concat(r):"";i.push(Buffer.from("".concat(f,"</").concat(e._tag,">")))}}return Buffer.concat(i)}Sl.buildXml=ME;var DR=function(e,t){for(var r="",n=e.split(t.literalXmlDelimiter),i=!1,a=0;a<n.length;a++){var s=n[a];i||(s=s.replace(/&/g,"&amp;"),s=s.replace(/</g,"&lt;"),s=s.replace(/>/g,"&gt;")),r+=s,i=!i}return r},OR=function(e){var t=typeof e=="string"?e:e.value;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;"),t},w0={},Jt={},zt={},qi=Qe&&Qe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(zt,"__esModule",{value:!0});zt.UnterminatedForLoopError=zt.IncompleteConditionalStatementError=zt.TemplateParseError=zt.InternalError=zt.ImageError=zt.CommandExecutionError=zt.InvalidCommandError=zt.CommandSyntaxError=zt.ObjectCommandResultError=zt.NullishCommandResultError=zt.isError=void 0;function RR(e){return e instanceof Error||typeof e=="object"&&!!e&&"name"in e&&"message"in e}zt.isError=RR;var IR=function(e){qi(t,e);function t(r){var n=e.call(this,"Result of command ".concat(r," is null or undefined and rejectNullish is set"))||this;return Object.setPrototypeOf(n,t.prototype),n.command=r,n}return t}(Error);zt.NullishCommandResultError=IR;var LR=function(e){qi(t,e);function t(r,n){var i=e.call(this,"Result of command '".concat(r,"' is an object"))||this;return Object.setPrototypeOf(i,t.prototype),i.command=r,i.result=n,i}return t}(Error);zt.ObjectCommandResultError=LR;var PR=function(e){qi(t,e);function t(r){var n=e.call(this,"Invalid command syntax: ".concat(r))||this;return Object.setPrototypeOf(n,t.prototype),n.command=r,n}return t}(Error);zt.CommandSyntaxError=PR;var MR=function(e){qi(t,e);function t(r,n){var i=e.call(this,"".concat(r,": ").concat(n))||this;return Object.setPrototypeOf(i,t.prototype),i.command=n,i}return t}(Error);zt.InvalidCommandError=MR;var BE=function(e){qi(t,e);function t(r,n){var i=e.call(this,"Error executing command '".concat(n,"': ").concat(r.name,": ").concat(r.message))||this;return Object.setPrototypeOf(i,t.prototype),i.command=n,i.err=r,i}return t}(Error);zt.CommandExecutionError=BE;var BR=function(e){qi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(BE);zt.ImageError=BR;var FR=function(e){qi(t,e);function t(r){return e.call(this,"INTERNAL ERROR: ".concat(r))||this}return t}(Error);zt.InternalError=FR;var zR=function(e){qi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Error);zt.TemplateParseError=zR;var UR=function(e){qi(t,e);function t(){return e.call(this,"Incomplete IF/END-IF statement. Make sure each IF-statement has a corresponding END-IF command.")||this}return t}(Error);zt.IncompleteConditionalStatementError=UR;var qR=function(e){qi(t,e);function t(r){return e.call(this,"Unterminated FOR-loop ('FOR ".concat(r.varName,"'). Make sure each FOR loop has a corresponding END-FOR command."))||this}return t}(Error);zt.UnterminatedForLoopError=qR;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.logLoop=Jt.isLoopExploring=Jt.getCurLoop=Jt.addChild=Jt.newTextNode=Jt.newNonTextNode=Jt.insertTextSiblingAfter=Jt.getNextSibling=Jt.cloneNodeWithoutChildren=void 0;var Gp=zt,VR=Fl,FE=function(e){return e._fTextNode?{_children:[],_fTextNode:!0,_text:e._text}:{_children:[],_fTextNode:!1,_tag:e._tag,_attrs:e._attrs}};Jt.cloneNodeWithoutChildren=FE;var $R=function(e){var t=e._parent;if(t==null)return null;var r=t._children,n=r.indexOf(e);return n<0||n>=r.length-1?null:r[n+1]};Jt.getNextSibling=$R;var GR=function(e){var t=e._parent;if(!(t&&!t._fTextNode&&t._tag==="w:t"))throw new Gp.TemplateParseError("Template syntax error: text node not within w:t");var r=t._parent;if(r==null)throw new Gp.TemplateParseError("Template syntax error: w:t node has no parent");var n=r._children.indexOf(t);if(n<0)throw new Gp.TemplateParseError("Template syntax error");var i=FE(t);i._parent=r;var a={_parent:i,_children:[],_fTextNode:!0,_text:""};return i._children=[a],r._children.splice(n+1,0,i),a};Jt.insertTextSiblingAfter=GR;var HR=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r=[]);var n={_fTextNode:!1,_tag:e,_attrs:t,_children:r};return n._children.forEach(function(i){i._parent=n}),n};Jt.newNonTextNode=HR;var WR=function(e){var t={_children:[],_fTextNode:!0,_text:e};return t};Jt.newTextNode=WR;var ZR=function(e,t){return e._children.push(t),t._parent=e,t};Jt.addChild=ZR;var zE=function(e){return e.loops.length?e.loops[e.loops.length-1]:null};Jt.getCurLoop=zE;var KR=function(e){var t=zE(e);return t!=null&&t.idx<0};Jt.isLoopExploring=KR;var XR=function(e){if(e.length){var t=e.length-1,r=e[t],n=r.varName,i=r.idx,a=r.loopOver,s=r.isIf,u=i>=0?i+1:"EXPLORATION";VR.logger.debug("".concat(s?"IF":"FOR"," loop ")+"on ".concat(t,":").concat(n)+"".concat(u,"/").concat(a.length))}};Jt.logLoop=XR;Object.defineProperty(w0,"__esModule",{value:!0});var Hp=Jt,JR=function(e,t){for(var r=e,n=!1,i=null,a=0,s="".concat(t[0],"CMD_NODE").concat(t[1]);r!=null;){if(!r._fTextNode&&r._tag==="w:t"&&(r._attrs["xml:space"]="preserve"),!r._fTextNode&&r._tag==="w:p"&&i&&(i._text+=" "),r._fTextNode&&r._parent&&!r._parent._fTextNode&&r._parent._tag==="w:t"){i==null&&(i=r);var u=r._text;r._text="";for(var d=0;d<u.length;d++){var h=u[d],f=n?t[1]:t[0];if(h===f[a]){if(a+=1,a===f.length){n=!n;var p=r===i;n&&i._text.length&&(i=(0,Hp.insertTextSiblingAfter)(i),p&&(r=i)),i._text+=f,!n&&d<u.length-1&&(i=(0,Hp.insertTextSiblingAfter)(i),p&&(r=i)),a=0,n||(i=r)}}else a&&(i._text+=f.slice(0,a),a=0,n||(i=r)),i._text+=h}!n&&!a&&(i=null),u.length&&!r._text.length&&(r._text=s)}if(r._children.length)r=r._children[0];else{for(var v=!1;r._parent!=null;){var b=r._parent,k=(0,Hp.getNextSibling)(r);if(k){v=!0,r=k;break}r=b}v||(r=null)}}return e};w0.default=JR;var zr={},Lf={},Aa=Qe&&Qe.__assign||function(){return Aa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Aa.apply(this,arguments)},YR=Qe&&Qe.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})},QR=Qe&&Qe.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(f){return d([h,f])}}function d(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(f){h=[6,f],i=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},e5=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.runUserJsAndGetRaw=void 0;var bb=e5(_0),t5=Jt,Wp=zt,r5=Fl;function n5(e,t,r){return YR(this,void 0,void 0,function(){var n,i,a,s,u,d,h,f,p,v,b;return QR(this,function(k){switch(k.label){case 0:n=Aa(Aa(Aa(Aa({},r.jsSandbox||{}),{__code__:t,__result__:void 0}),e),r.options.additionalJsContext),i=(0,t5.getCurLoop)(r),i&&(n.$idx=i.idx),Object.keys(r.vars).forEach(function(S){n["$".concat(S)]=r.vars[S]}),k.label=1;case 1:return k.trys.push([1,8,,12]),r.options.runJs?(u=r.options.runJs({sandbox:n,ctx:r}),a=u.modifiedSandbox,[4,u.result]):[3,3];case 2:return s=k.sent(),[3,7];case 3:return r.options.noSandbox?(a=n,d=new Function("with(this) { return eval(__code__); }"),[4,d.call(a)]):[3,5];case 4:return s=k.sent(),[3,7];case 5:return h=new bb.default.Script((b=n.__code__)!==null&&b!==void 0?b:""),a=bb.default.createContext(n),[4,h.runInContext(a)];case 6:s=k.sent(),k.label=7;case 7:return[3,12];case 8:return f=k.sent(),p=(0,Wp.isError)(f)?f:new Error("".concat(f)),r.options.errorHandler==null?[3,10]:(a=n,[4,r.options.errorHandler(p,t)]);case 9:return s=k.sent(),[3,11];case 10:throw new Wp.CommandExecutionError(p,t);case 11:return[3,12];case 12:return r.options.rejectNullish&&s==null?(v=new Wp.NullishCommandResultError(t),r.options.errorHandler==null?[3,14]:[4,r.options.errorHandler(v,t)]):[3,15];case 13:return s=k.sent(),[3,15];case 14:throw v;case 15:return r.jsSandbox=Aa(Aa({},a),{__code__:void 0,__result__:void 0}),r5.logger.debug("Command returned: ",s),[2,s]}})})}Lf.runUserJsAndGetRaw=n5;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.BUILT_IN_COMMANDS=Al.ImageExtensions=void 0;Al.ImageExtensions=[".png",".gif",".jpg",".jpeg",".svg"];Al.BUILT_IN_COMMANDS=["QUERY","CMD_NODE","ALIAS","FOR","END-FOR","IF","END-IF","INS","EXEC","IMAGE","LINK","HTML"];var ef=Qe&&Qe.__assign||function(){return ef=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ef.apply(this,arguments)},oo=Qe&&Qe.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})},so=Qe&&Qe.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(f){return d([h,f])}}function d(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(f){h=[6,f],i=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}};Object.defineProperty(zr,"__esModule",{value:!0});zr.splitCommand=zr.getCommand=zr.walkTemplate=zr.findHighestImgId=zr.produceJsReport=zr.extractQuery=zr.newContext=void 0;var or=Jt,Ro=Lf,$g=Al,cr=zt,ui=Fl;function UE(e,t){return t===void 0&&(t=0),{gCntIf:0,gCntEndIf:0,level:1,fCmd:!1,cmd:"",fSeekQuery:!1,buffers:{"w:p":{text:"",cmds:"",fInsertedText:!1},"w:tr":{text:"",cmds:"",fInsertedText:!1},"w:tc":{text:"",cmds:"",fInsertedText:!1}},imageAndShapeIdIncrement:t,images:{},linkId:0,links:{},htmlId:0,htmls:{},vars:{},loops:[],fJump:!1,shorthands:{},options:e,pIfCheckMap:new Map,trIfCheckMap:new Map}}zr.newContext=UE;function i5(e,t){return oo(this,void 0,void 0,function(){var r,n,i,a,s,u;return so(this,function(d){switch(d.label){case 0:r=UE(t),r.fSeekQuery=!0,n=e,d.label=1;case 1:if(n._children.length)n=n._children[0];else{for(i=!1;n._parent!=null;){if(a=n._parent,s=(0,or.getNextSibling)(n),s){n=s,i=!0;break}n=a}if(!i)return[3,4]}return n?(u=n._parent,n._fTextNode&&u&&!u._fTextNode&&u._tag==="w:t"?[4,$E(null,n,r,GE)]:[3,3]):[3,4];case 2:d.sent(),d.label=3;case 3:return r.query!=null?[3,4]:[3,1];case 4:return[2,r.query]}})})}zr.extractQuery=i5;function a5(e,t,r){return oo(this,void 0,void 0,function(){return so(this,function(n){return[2,VE(e,t,r,GE)]})})}zr.produceJsReport=a5;function o5(e){var t=[],r=function(n){for(var i=0,a=n._children;i<a.length;i++){var s=a[i],u=s._fTextNode?null:s._tag;if(u!=null){if(u==="wp:docPr"){if(s._fTextNode)continue;var d=s._attrs.id;if(typeof d!="string")continue;var h=Number.parseInt(d,10);Number.isSafeInteger(h)&&t.push(h)}s._children.length>0&&r(s)}}};return r(e),t.length>0?Math.max.apply(Math,t):0}zr.findHighestImgId=o5;var Ls=function(e){return JSON.stringify(e._fTextNode?{_ifName:e._ifName,_fTextNode:e._fTextNode,_text:e==null?void 0:e._text}:{_ifName:e._ifName,_fTextNode:e._fTextNode,_tag:e==null?void 0:e._tag,_attrs:e==null?void 0:e._attrs})},qE=function(e){for(var t=e._parent,r=null;t!=null&&r==null;){var n=t._fTextNode?null:t._tag;if(n==="w:p"){var i=t._parent!=null?t._parent._parent:null;i!=null&&!i._fTextNode&&i._tag==="w:tr"?r=i:r=t}t=t._parent}return r};function VE(e,t,r,n){return oo(this,void 0,void 0,function(){var i,a,s,u,d,h,f,p,v,b,k,A,S,T,y,_,w,E,N,M,B,D,A,H,te,z,ae,ce,P,ce,fe,re;return so(this,function(ue){switch(ue.label){case 0:i=(0,or.cloneNodeWithoutChildren)(t),a=t,s=i,d=0,h=[],f=0,p=((re=r.options)===null||re===void 0?void 0:re.maximumWalkingDepth)||1e6,ue.label=1;case 1:if(v=(0,or.getCurLoop)(r),b=null,r.fJump){if(!v)throw new cr.InternalError("jumping while curLoop is null");ui.logger.debug("Jumping to level ".concat(v.refNodeLevel,"..."),Ls(v.refNode)),d=r.level-v.refNodeLevel,a=v.refNode,r.level=v.refNodeLevel,r.fJump=!1,u="JUMP"}else if(a._children.length&&u!=="UP")a=a._children[0],r.level+=1,u="DOWN";else if(b=(0,or.getNextSibling)(a))a=b,u="SIDE";else{if(k=a._parent,k==null)return ui.logger.debug("=== parent is null, breaking after ".concat(f," loops...")),[3,5];if(f>p)throw ui.logger.debug("=== parent is still not null after ".concat(f," loops, something must be wrong ..."),Ls(k)),new cr.InternalError("infinite loop or massive dataset detected. Please review and try again");a=k,r.level-=1,u="UP"}if(ui.logger.debug("Next node [".concat(u,", level ").concat(r.level,"]"),Ls(a)),u!=="DOWN"&&(A=s._fTextNode?null:s._tag,S=!1,(A==="w:p"||A==="w:tbl"||A==="w:tr"||A==="w:tc")&&(0,or.isLoopExploring)(r)?S=!0:(A==="w:p"||A==="w:tr"||A==="w:tc")&&(T=r.buffers[A],S=T.text===""&&T.cmds!==""&&!T.fInsertedText,A==="w:tr"&&S&&(S=a._children.filter(function(O){return!O._fTextNode&&O._tag==="w:tr"}).length!==1),A==="w:tc"&&S&&(S=!(s._children.filter(function(O){return!O._fTextNode&&O._tag==="w:tbl"}).length>0))),S&&s._parent!=null&&s._parent._children.pop()),u==="UP"){if((0,or.isLoopExploring)(r)&&v&&a===v.refNode._parent&&(v.refNode=a,v.refNodeLevel-=1,ui.logger.debug("Updated loop '".concat(v.varName,"' refNode: ")+Ls(a))),y=s._parent,y==null)throw new cr.InternalError("node parent is null");s=y,r.pendingImageNode&&!s._fTextNode&&s._tag==="w:t"&&(_=r.pendingImageNode.image,w=r.pendingImageNode.caption,E=s._parent,E&&(_._parent=E,E._children.pop(),E._children.push(_),w&&(fe=E._children).push.apply(fe,w),r.buffers["w:p"].fInsertedText=!0,r.buffers["w:tr"].fInsertedText=!0,r.buffers["w:tc"].fInsertedText=!0),delete r.pendingImageNode),r.pendingLinkNode&&!s._fTextNode&&s._tag==="w:r"&&(N=r.pendingLinkNode,M=s._parent,M&&(N._parent=M,M._children.pop(),M._children.push(N),r.buffers["w:p"].fInsertedText=!0,r.buffers["w:tr"].fInsertedText=!0,r.buffers["w:tc"].fInsertedText=!0),delete r.pendingLinkNode),r.pendingHtmlNode&&!s._fTextNode&&s._tag==="w:p"&&(B=r.pendingHtmlNode,D=s._parent,D&&(B._parent=D,D._children.pop(),D._children.push(B),r.buffers["w:p"].fInsertedText=!0,r.buffers["w:tr"].fInsertedText=!0,r.buffers["w:tc"].fInsertedText=!0),delete r.pendingHtmlNode),!s._fTextNode&&s._tag==="w:tc"&&!s._children.filter(function(O){return!O._fTextNode&&(O._tag==="w:p"||O._tag==="w:altChunk")}).length&&s._children.push({_parent:s,_children:[],_fTextNode:!1,_tag:"w:p",_attrs:{}}),!s._fTextNode&&s._tag==="w:rPr"&&(r.textRunPropsNode=s),!a._fTextNode&&a._tag==="w:r"&&delete r.textRunPropsNode}if(!(u==="DOWN"||u==="SIDE"))return[3,4];if(u==="SIDE"){if(s._parent==null)throw new cr.InternalError("node parent is null");s=s._parent}return A=a._fTextNode?null:a._tag,(A==="w:p"||A==="w:tr"||A==="w:tc")&&(r.buffers[A]={text:"",cmds:"",fInsertedText:!1}),H=(0,or.cloneNodeWithoutChildren)(a),H._parent=s,s._children.push(H),te=H._tag,!(0,or.isLoopExploring)(r)&&(te==="wp:docPr"||te==="v:shape")&&(ui.logger.debug("detected a - ",Ls(H)),v5(H,r)),z=a._parent,a._fTextNode&&z&&!z._fTextNode&&z._tag==="w:t"?[4,$E(e,a,r,n)]:[3,3];case 2:ae=ue.sent(),typeof ae=="string"?(H._text=ae,ui.logger.debug("Inserted command result string into node. Updated node: "+Ls(H))):h.push.apply(h,ae),ue.label=3;case 3:s=H,ue.label=4;case 4:if(u==="JUMP")for(;d>0;){if(s._parent==null)throw new cr.InternalError("node parent is null");s=s._parent,d-=1}return f++,[3,1];case 5:if(r.gCntIf!==r.gCntEndIf){if(ce=new cr.IncompleteConditionalStatementError,r.options.failFast)throw ce;h.push(ce)}if(r.loops.filter(function(O){return!O.isIf}).length>0){if(P=r.loops[r.loops.length-1],ce=new cr.UnterminatedForLoopError(P),r.options.failFast)throw ce;h.push(ce)}return h.length>0?[2,{status:"errors",errors:h}]:[2,{status:"success",report:i,images:r.images,links:r.links,htmls:r.htmls}]}})})}zr.walkTemplate=VE;var $E=function(e,t,r,n){return oo(void 0,void 0,void 0,function(){var i,a,s,u,d,h,f,p,v,b;return so(this,function(k){switch(k.label){case 0:if(i=r.options,a=i.cmdDelimiter,s=i.failFast,u=t._text,u==null||u==="")return[2,""];d=u.split(a[0]).map(function(S){return S.split(a[1])}).reduce(function(S,T){return S.concat(T)}),h="",f=[],p=0,k.label=1;case 1:return p<d.length?(p>0&&Zp(a[0],r,{fCmd:!0}),v=d[p],r.fCmd?r.cmd+=v:(0,or.isLoopExploring)(r)||(h+=v),Zp(v,r,{fCmd:r.fCmd}),p<d.length-1?r.fCmd?[4,n(e,t,r)]:[3,3]:[3,4]):[3,5];case 2:if(b=k.sent(),b!=null)if(typeof b=="string")h+=b,Zp(b,r,{fCmd:!1,fInsertedText:!0});else{if(s)throw b;f.push(b)}k.label=3;case 3:r.fCmd=!r.fCmd,k.label=4;case 4:return p++,[3,1];case 5:return f.length>0?[2,f]:[2,h]}})})},GE=function(e,t,r){return oo(void 0,void 0,void 0,function(){var n,i,a,s,u,d,h,f,p,v,b,k,S,T,y,_,w,E,N;return so(this,function(M){switch(M.label){case 0:n=HE(r.cmd,r.shorthands,r.options.fixSmartQuotes),r.cmd="",M.label=1;case 1:return M.trys.push([1,28,,29]),i=WE(n),a=i.cmdName,s=i.cmdRest,a!=="CMD_NODE"&&ui.logger.debug("Processing cmd: ".concat(n)),r.fSeekQuery?(a==="QUERY"&&(r.query=s),[2]):a==="QUERY"||a==="CMD_NODE"?[3,27]:[3,2];case 2:if(a!=="ALIAS")return[3,3];if(u=/^(\S+)\s+(.+)/.exec(s),!u)throw new cr.InvalidCommandError("Invalid ALIAS command",n);return d=u[1],h=u[2],r.shorthands[d]=h,ui.logger.debug("Defined alias '".concat(d,"' for: ").concat(h)),[3,27];case 3:return a==="FOR"||a==="IF"?[4,u5(e,t,r,n,a,s)]:[3,5];case 4:return M.sent(),[3,27];case 5:return a==="END-FOR"||a==="END-IF"?(c5(t,r,n,a,s),[3,27]):[3,6];case 6:return a!=="INS"?[3,12]:(0,or.isLoopExploring)(r)?[3,11]:[4,(0,Ro.runUserJsAndGetRaw)(e,s,r)];case 7:return f=M.sent(),f==null?[2,""]:typeof f=="object"&&!Array.isArray(f)?(p=new cr.ObjectCommandResultError(s,f),r.options.errorHandler==null?[3,9]:[4,r.options.errorHandler(p,s)]):[3,10];case 8:return f=M.sent(),[3,10];case 9:throw p;case 10:return v=String(f),r.options.processLineBreaks&&(b=r.options.literalXmlDelimiter,r.options.processLineBreaksAsNewText?(k=v.split(`
`),S="".concat(b,"<w:br/>").concat(b),T="".concat(b,"</w:t>").concat(b),y="".concat(b,'<w:t xml:space="preserve">').concat(b),v=k.join("".concat(T).concat(S).concat(y))):v=v.replace(/\n/g,"".concat(b,"<w:br/>").concat(b))),[2,v];case 11:return[3,27];case 12:return a!=="EXEC"?[3,15]:(0,or.isLoopExploring)(r)?[3,14]:[4,(0,Ro.runUserJsAndGetRaw)(e,s,r)];case 13:M.sent(),M.label=14;case 14:return[3,27];case 15:return a!=="IMAGE"?[3,18]:(0,or.isLoopExploring)(r)?[3,17]:[4,(0,Ro.runUserJsAndGetRaw)(e,s,r)];case 16:if(_=M.sent(),_!=null)try{h5(r,_)}catch(B){throw(0,cr.isError)(B)?new cr.ImageError(B,n):B}M.label=17;case 17:return[3,27];case 18:return a!=="LINK"?[3,22]:(0,or.isLoopExploring)(r)?[3,21]:[4,(0,Ro.runUserJsAndGetRaw)(e,s,r)];case 19:return w=M.sent(),w==null?[3,21]:[4,p5(r,w)];case 20:M.sent(),M.label=21;case 21:return[3,27];case 22:return a!=="HTML"?[3,26]:(0,or.isLoopExploring)(r)?[3,25]:[4,(0,Ro.runUserJsAndGetRaw)(e,s,r)];case 23:return E=M.sent(),E==null?[3,25]:[4,m5(r,E)];case 24:M.sent(),M.label=25;case 25:return[3,27];case 26:throw new cr.CommandSyntaxError(n);case 27:return[2];case 28:if(N=M.sent(),!(0,cr.isError)(N))throw N;return r.options.errorHandler!=null?[2,r.options.errorHandler(N)]:[2,N];case 29:return[2]}})})},s5=$g.BUILT_IN_COMMANDS.map(function(e){return new RegExp("^".concat(e,"\\b"))}),l5=function(e){return!s5.some(function(t){return t.test(e.toUpperCase())})};function HE(e,t,r){var n=e.trim();if(n[0]==="*"){var i=n.slice(1).trim();if(!t[i])throw new cr.InvalidCommandError("Unknown alias",n);n=t[i],ui.logger.debug("Alias for: ".concat(n))}else n[0]==="="?n="INS ".concat(n.slice(1).trim()):n[0]==="!"?n="EXEC ".concat(n.slice(1).trim()):l5(n)&&(n="INS ".concat(n.trim()));return r&&(n=n.replace(/[\u201C\u201D\u201E]/g,'"').replace(/[\u2018\u2019\u201A]/g,"'")),n.trim()}zr.getCommand=HE;function WE(e){var t=/^(\S+)\s*/.exec(e),r,n="";return t!=null&&(r=t[1].toUpperCase(),n=e.slice(r.length).trim()),{cmdName:r,cmdRest:n}}zr.splitCommand=WE;var u5=function(e,t,r,n,i,a){return oo(void 0,void 0,void 0,function(){var s,u,d,h,f,p,v,b,k,S;return so(this,function(T){switch(T.label){case 0:if(s=i==="IF",u=null,d=void 0,s)t._ifName||(t._ifName="__if_".concat(r.gCntIf),r.gCntIf+=1),d=t._ifName;else{if(u=/^(\S+)\s+IN\s+(.+)/i.exec(a),!u)throw new cr.InvalidCommandError("Invalid FOR command",n);d=u[1]}if(h=(0,or.getCurLoop)(r),h&&h.varName===d)return[3,6];if(s&&(f=qE(t),p=f!=null?f._fTextNode?null:f._tag:null,f!=null)){if(p==="w:p"){if(r.pIfCheckMap.has(f)&&r.pIfCheckMap.get(f)!==n)throw new cr.InvalidCommandError("Invalid IF command nested into another IF command on the same line",n);r.pIfCheckMap.set(f,n)}else if(p==="w:tr"){if(r.trIfCheckMap.has(f)&&r.trIfCheckMap.get(f)!==n)throw new cr.InvalidCommandError("Invalid IF command nested into another IF command on the same table row",n);r.trIfCheckMap.set(f,n)}}return v=r.loops.length-1,b=v>=0&&r.loops[v].idx===-1,k=void 0,b?(k=[],[3,5]):[3,1];case 1:return s?[4,(0,Ro.runUserJsAndGetRaw)(e,a,r)]:[3,3];case 2:return S=!!T.sent(),k=S?[1]:[],[3,5];case 3:if(!u)throw new cr.InvalidCommandError("Invalid FOR command",n);return[4,(0,Ro.runUserJsAndGetRaw)(e,u[2],r)];case 4:if(k=T.sent(),!Array.isArray(k))throw new cr.InvalidCommandError("Invalid FOR command (can only iterate over Array)",n);T.label=5;case 5:r.loops.push({refNode:t,refNodeLevel:r.level,varName:d,loopOver:k,isIf:s,idx:-1}),T.label=6;case 6:return(0,or.logLoop)(r.loops),[2]}})})},c5=function(e,t,r,n,i){var a=n==="END-IF",s=(0,or.getCurLoop)(t);if(!s)throw new cr.InvalidCommandError("Unexpected ".concat(n," outside of ").concat(a?"IF statement":"FOR loop"," context"),r);var u=qE(e),d=u!=null?u._fTextNode?null:u._tag:null;d==="w:p"?t.pIfCheckMap.delete(u):d==="w:tr"&&t.trIfCheckMap.delete(u),a&&!e._ifName&&(e._ifName=s.varName,t.gCntEndIf+=1);var h=a?e._ifName:i;if(s.varName!==h){if(t.loops.find(function(v){return v.varName===h})==null){ui.logger.debug("Ignoring ".concat(r," (").concat(h,", but we're expecting ").concat(s.varName,")"));return}throw new cr.InvalidCommandError("Invalid command",r)}var f=s.idx+1,p=s.loopOver[f];p!=null?(t.vars[h]=p,t.fJump=!0,s.idx=f):t.loops.pop()},_b=function(e,t){Gg(t),e.imageAndShapeIdIncrement+=1;var r=String(e.imageAndShapeIdIncrement),n="img".concat(r);return e.images[n]=t,n};function Gg(e){if(!(e.data instanceof Uint8Array||e.data instanceof ArrayBuffer||typeof e.data=="string"))throw new Error("image .data property needs to be provided as Uint8Array (e.g. Buffer), ArrayBuffer, or as a base64-encoded string");if(!$g.ImageExtensions.includes(e.extension))throw new Error("An extension (one of ".concat($g.ImageExtensions,") needs to be provided when providing an image or a thumbnail."))}function d5(e){if(!Number.isFinite(e.width))throw new Error("invalid image width: ".concat(e.width," (in cm)"));if(!Number.isFinite(e.height))throw new Error("invalid image height: ".concat(e.height," (in cm)"));Gg(e),e.thumbnail&&Gg(e.thumbnail)}var h5=function(e,t){var r;d5(t);var n=(t.width*36e4).toFixed(0),i=(t.height*36e4).toFixed(0),a=_b(e,f5(t)),s=String(e.imageAndShapeIdIncrement),u=t.alt||"desc",d=or.newNonTextNode,h=[];h.push(d("a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"},[d("a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"})]));var f=t.rotation?(t.rotation*6e4).toString():void 0;if(e.images[a].extension===".svg"){var p=(r=t.thumbnail)!==null&&r!==void 0?r:{data:"bm90aGluZwo=",extension:".png"},v=_b(e,p);h.push(d("a:ext",{uri:"{96DAC541-7B7A-43D3-8B79-37D633B846F1}"},[d("asvg:svgBlip",{"xmlns:asvg":"http://schemas.microsoft.com/office/drawing/2016/SVG/main","r:embed":a})])),a=v}var b=d("pic:pic",{"xmlns:pic":"http://schemas.openxmlformats.org/drawingml/2006/picture"},[d("pic:nvPicPr",{},[d("pic:cNvPr",{id:"0",name:"Picture ".concat(s),descr:u}),d("pic:cNvPicPr",{},[d("a:picLocks",{noChangeAspect:"1",noChangeArrowheads:"1"})])]),d("pic:blipFill",{},[d("a:blip",{"r:embed":a,cstate:"print"},[d("a:extLst",{},h)]),d("a:srcRect"),d("a:stretch",{},[d("a:fillRect")])]),d("pic:spPr",{bwMode:"auto"},[d("a:xfrm",f?{rot:f}:{},[d("a:off",{x:"0",y:"0"}),d("a:ext",{cx:n,cy:i})]),d("a:prstGeom",{prst:"rect"},[d("a:avLst")]),d("a:noFill"),d("a:ln",{},[d("a:noFill")])])]),k=d("w:drawing",{},[d("wp:inline",{distT:"0",distB:"0",distL:"0",distR:"0"},[d("wp:extent",{cx:n,cy:i}),d("wp:docPr",{id:s,name:"Picture ".concat(s),descr:u}),d("wp:cNvGraphicFramePr",{},[d("a:graphicFrameLocks",{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:"1"})]),d("a:graphic",{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},[d("a:graphicData",{uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"},[b])])])]);e.pendingImageNode={image:k},t.caption&&(e.pendingImageNode.caption=[d("w:br"),d("w:t",{},[(0,or.newTextNode)(t.caption)])])};function f5(e){var t=e.data,r=e.extension;if(!r)throw new Error("If you return image `data`, make sure you return an extension as well!");return{extension:r,data:t}}var p5=function(e,t){return oo(void 0,void 0,void 0,function(){var r,n,i,a,s,u,d,h;return so(this,function(f){return r=t.url,n=t.label,i=n===void 0?r:n,e.linkId+=1,a=String(e.linkId),s="link".concat(a),e.links[s]={url:r},u=or.newNonTextNode,d=e.textRunPropsNode,h=u("w:hyperlink",{"r:id":s,"w:history":"1"},[u("w:r",{},[d||u("w:rPr",{},[u("w:u",{"w:val":"single"})]),u("w:t",{},[(0,or.newTextNode)(i)])])]),e.pendingLinkNode=h,[2]})})},m5=function(e,t){return oo(void 0,void 0,void 0,function(){var r,n,i,a;return so(this,function(s){return e.htmlId+=1,r=String(e.htmlId),n="html".concat(r),e.htmls[n]=t,i=or.newNonTextNode,a=i("w:altChunk",{"r:id":n}),e.pendingHtmlNode=a,[2]})})},g5=["w:p","w:tr","w:tc"],Zp=function(e,t,r){if(!t.fSeekQuery){var n=r.fCmd,i=r.fInsertedText,a=n?"cmds":"text";g5.forEach(function(s){var u=t.buffers[s];u[a]+=e,i&&(u.fInsertedText=!0)})}};function v5(e,t){t.imageAndShapeIdIncrement+=1;var r=String(t.imageAndShapeIdIncrement);e._attrs=ef(ef({},e._attrs),{id:"".concat(r)})}var Ln=Qe&&Qe.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(f){try{h(n.next(f))}catch(p){s(p)}}function d(f){try{h(n.throw(f))}catch(p){s(p)}}function h(f){f.done?a(f.value):i(f.value).then(u,d)}h((n=n.apply(e,t||[])).next())})},Pn=Qe&&Qe.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(f){return d([h,f])}}function d(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){r.label=h[1];break}if(h[0]===6&&r.label<a[1]){r.label=a[1],a=h;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(h);break}a[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(f){h=[6,f],i=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Hg=Qe&&Qe.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},y5=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pn,"__esModule",{value:!0});pn.getMainDoc=pn.readContentTypes=pn.getMetadata=pn.listCommands=pn.parseTemplate=void 0;var gn=Ri,Pi=Sl,E0=y5(w0),ci=zr,Za=Jt,vc=zt,Mt=Fl,wb="+++",Vc="||",C0="[Content_Types].xml",zi="word",x5=new RegExp("".concat(zi,"\\/[^\\/]+\\.xml"));function S0(e){return Ln(this,void 0,void 0,function(){var t,r,n,i,a,s,u,d,h;return Pn(this,function(f){switch(f.label){case 0:return Mt.logger.debug("Unzipping..."),[4,(0,gn.zipLoad)(e)];case 1:return t=f.sent(),Mt.logger.debug("finding main template file (e.g. document.xml)"),[4,KE(t)];case 2:return r=f.sent(),n=XE(r),i="".concat(zi,"/").concat(n),Mt.logger.debug("Reading ".concat(i,"...")),[4,(0,gn.zipGetText)(t,i)];case 3:if(a=f.sent(),a==null)throw new vc.TemplateParseError("".concat(n," could not be found"));return Mt.logger.debug("".concat(i," file length: ").concat(a.length)),Mt.logger.debug("Parsing ".concat(i," XML...")),s=new Date().getTime(),[4,(0,Pi.parseXml)(a)];case 4:return u=f.sent(),d=u,h=new Date().getTime(),Mt.logger.debug("".concat(i," parsed in ").concat(h-s," ms")),[2,{jsTemplate:d,mainDocument:n,zip:t,contentTypes:r}]}})})}pn.parseTemplate=S0;function ZE(e,t,r){return Ln(this,void 0,void 0,function(){var n,i,a,s,u,d,h,f,p=this;return Pn(this,function(v){switch(v.label){case 0:n=[],e.forEach(function(b){return Ln(p,void 0,void 0,function(){return Pn(this,function(k){return x5.test(b)&&b!=="".concat(zi,"/").concat(t)&&b.indexOf("".concat(zi,"/template"))!==0&&n.push(b),[2]})})}),n.sort(),i=[],a=0,s=n,v.label=1;case 1:return a<s.length?(u=s[a],Mt.logger.debug("Reading ".concat(u,"...")),[4,(0,gn.zipGetText)(e,u)]):[3,5];case 2:if(d=v.sent(),d==null)throw new vc.TemplateParseError("".concat(u," could not be read"));return Mt.logger.debug("".concat(u," file length: ").concat(d.length)),Mt.logger.debug("Parsing ".concat(u," XML...")),[4,(0,Pi.parseXml)(d)];case 3:h=v.sent(),f=(0,E0.default)(h,r.cmdDelimiter),i.push([f,u]),v.label=4;case 4:return a++,[3,1];case 5:return[2,i]}})})}function b5(e,t){return Ln(this,void 0,void 0,function(){var r,n,i,a,s,u,d,h,f,p,v,b,k,S,T,y,_,w,E,N,M,B,D,A,H,te,z,ae,P,ce,fe,re,ue,O,ne,J,G,ve,de,Z,se;return Pn(this,function(F){switch(F.label){case 0:return Mt.logger.debug("Report options:",{attach:e}),r=e.template,n=e.data,i=e.queryVars,a=e.literalXmlDelimiter||Vc,s={cmdDelimiter:JE(e.cmdDelimiter),literalXmlDelimiter:a,processLineBreaks:e.processLineBreaks!=null?e.processLineBreaks:!0,noSandbox:e.noSandbox||!1,runJs:e.runJs,additionalJsContext:e.additionalJsContext||{},failFast:e.failFast==null?!0:e.failFast,rejectNullish:e.rejectNullish==null?!1:e.rejectNullish,errorHandler:typeof e.errorHandler=="function"?e.errorHandler:null,fixSmartQuotes:e.fixSmartQuotes==null?!1:e.fixSmartQuotes,processLineBreaksAsNewText:e.processLineBreaksAsNewText==null?!1:e.processLineBreaksAsNewText,maximumWalkingDepth:e.maximumWalkingDepth},u={literalXmlDelimiter:a},[4,S0(r)];case 1:return d=F.sent(),h=d.jsTemplate,f=d.mainDocument,p=d.zip,v=d.contentTypes,Mt.logger.debug("Preprocessing template..."),b=(0,E0.default)(h,s.cmdDelimiter),k=null,typeof n!="function"?[3,4]:(Mt.logger.debug("Looking for the query in the template..."),[4,(0,ci.extractQuery)(b,s)]);case 2:return S=F.sent(),Mt.logger.debug("Query: ".concat(S||"no query found")),[4,n(S,i)];case 3:return k=F.sent(),[3,5];case 4:k=n,F.label=5;case 5:return[4,ZE(p,f,s)];case 6:return T=F.sent(),y=Math.max.apply(Math,Hg(Hg([],T.map(function(I){var X=I[0];return I[1],(0,ci.findHighestImgId)(X)}),!1),[(0,ci.findHighestImgId)(b)],!1)),Mt.logger.debug("Generating report..."),_=(0,ci.newContext)(s,y),[4,(0,ci.produceJsReport)(k,b,_)];case 7:if(w=F.sent(),w.status==="errors")throw w.errors;return E=w.report,N=w.images,M=w.links,B=w.htmls,t==="JS"?[2,E]:(Mt.logger.debug("Converting report to XML..."),D=(0,Pi.buildXml)(E,u),t==="XML"?[2,D.toString("utf-8")]:(Mt.logger.debug("Writing report..."),(0,gn.zipSetText)(p,"".concat(zi,"/").concat(f),D),A=Object.keys(N).length,H=Object.keys(B).length,[4,Eb(N,f,p)]));case 8:return F.sent(),[4,Cb(M,f,p)];case 9:return F.sent(),[4,Sb(B,f,p)];case 10:F.sent(),te=0,z=T,F.label=11;case 11:return te<z.length?(ae=z[te],P=ae[0],ce=ae[1],_=(0,ci.newContext)(s,_.imageAndShapeIdIncrement),[4,(0,ci.produceJsReport)(k,P,_)]):[3,17];case 12:if(fe=F.sent(),fe.status==="errors")throw fe.errors;return re=fe.report,ue=fe.images,O=fe.links,ne=fe.htmls,J=(0,Pi.buildXml)(re,u),(0,gn.zipSetText)(p,ce,J),A+=Object.keys(ue).length,H+=Object.keys(ne).length,G=ce.split("/"),ve=G[G.length-1],[4,Eb(ue,ve,p)];case 13:return F.sent(),[4,Cb(O,f,p)];case 14:return F.sent(),[4,Sb(ne,f,p)];case 15:F.sent(),F.label=16;case 16:return te++,[3,11];case 17:return(A||H)&&(Mt.logger.debug("Completing [Content_Types].xml..."),Mt.logger.debug("Content types",{attach:v}),de=function(I,X){var Y=v._children;Y.filter(function(Ne){var Le;return!Ne._fTextNode&&((Le=Ne._attrs.Extension)===null||Le===void 0?void 0:Le.toLowerCase())===(I==null?void 0:I.toLowerCase())}).length||(0,Za.addChild)(v,(0,Za.newNonTextNode)("Default",{Extension:I,ContentType:X}))},A&&(Mt.logger.debug("Completing [Content_Types].xml for IMAGES..."),de("png","image/png"),de("jpg","image/jpeg"),de("jpeg","image/jpeg"),de("gif","image/gif"),de("bmp","image/bmp"),de("svg","image/svg+xml")),H&&(Mt.logger.debug("Completing [Content_Types].xml for HTML..."),de("html","text/html")),Z=(0,Pi.buildXml)(v,u),(0,gn.zipSetText)(p,C0,Z)),Mt.logger.debug("Zipping..."),[4,(0,gn.zipSave)(p)];case 18:return se=F.sent(),[2,se]}})})}function _5(e,t){return Ln(this,void 0,void 0,function(){var r,n,i,a,s,u,d,h,f,p,v,b,k,S=this;return Pn(this,function(T){switch(T.label){case 0:return r={cmdDelimiter:JE(t),literalXmlDelimiter:Vc,processLineBreaks:!0,noSandbox:!1,additionalJsContext:{},failFast:!1,rejectNullish:!1,errorHandler:null,fixSmartQuotes:!1,processLineBreaksAsNewText:!1},[4,S0(e)];case 1:return n=T.sent(),i=n.jsTemplate,a=n.mainDocument,s=n.zip,[4,ZE(s,a,r)];case 2:u=T.sent(),d=Hg([i],u.map(function(y){var _=y[0];return y[1],_}),!0),h=[],f=0,p=d,T.label=3;case 3:return f<p.length?(v=p[f],b=(0,E0.default)(v,r.cmdDelimiter),k=(0,ci.newContext)(r),[4,(0,ci.walkTemplate)(void 0,b,k,function(y,_,w){return Ln(S,void 0,void 0,function(){var E,N,M,B,D;return Pn(this,function(A){return E=(0,ci.getCommand)(w.cmd,w.shorthands,w.options.fixSmartQuotes),w.cmd="",N=(0,ci.splitCommand)(E),M=N.cmdName,B=N.cmdRest,D=M,D!=null&&D!=="CMD_NODE"&&h.push({raw:E,type:D,code:B}),[2,void 0]})})})]):[3,6];case 4:T.sent(),T.label=5;case 5:return f++,[3,3];case 6:return[2,h]}})})}pn.listCommands=_5;function w5(e){return Ln(this,void 0,void 0,function(){function t(h){if(h._children.length!==0){var f=h._children[0];if(f._fTextNode)return f._text;throw new Error("Not a text node")}}function r(h,f){for(var p=0,v=h._children;p<v.length;p++){var b=v[p];if(!b._fTextNode&&b._tag===f)return t(b)}}var n,i,a,s,u,d;return Pn(this,function(h){switch(h.label){case 0:return n="docProps/app.xml",i="docProps/core.xml",[4,(0,gn.zipLoad)(e)];case 1:return a=h.sent(),[4,Wg(a,n)];case 2:return s=h.sent(),[4,Wg(a,i)];case 3:return u=h.sent(),d=function(f){var p=Number(f);if(Number.isFinite(p))return p},[2,{pages:d(r(s,"Pages")),words:d(r(s,"Words")),characters:d(r(s,"Characters")),lines:d(r(s,"Lines")),paragraphs:d(r(s,"Paragraphs")),company:r(s,"Company"),template:r(s,"Template"),title:r(u,"dc:title"),subject:r(u,"dc:subject"),creator:r(u,"dc:creator"),description:r(u,"dc:description"),lastModifiedBy:r(u,"cp:lastModifiedBy"),revision:r(u,"cp:revision"),lastPrinted:r(u,"cp:lastPrinted"),created:r(u,"dcterms:created"),modified:r(u,"dcterms:modified"),category:r(u,"cp:category")}]}})})}pn.getMetadata=w5;function Wg(e,t){return Ln(this,void 0,void 0,function(){var r,n;return Pn(this,function(i){switch(i.label){case 0:return[4,(0,gn.zipGetText)(e,t)];case 1:if(r=i.sent(),r==null)throw new vc.TemplateParseError("".concat(t," could not be read"));return[4,(0,Pi.parseXml)(r)];case 2:if(n=i.sent(),n._fTextNode)throw new vc.TemplateParseError("".concat(t," is a text node when parsed"));return[2,n]}})})}function KE(e){return Ln(this,void 0,void 0,function(){return Pn(this,function(t){switch(t.label){case 0:return[4,Wg(e,C0)];case 1:return[2,t.sent()]}})})}pn.readContentTypes=KE;function XE(e){for(var t=["application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","application/vnd.ms-word.document.macroEnabled.main+xml"],r=0,n=e._children;r<n.length;r++){var i=n[r];if(!i._fTextNode&&i._attrs.ContentType!=null&&t.includes(i._attrs.ContentType)){var a=i._attrs.PartName;if(a)return a.replace("/word/","")}}throw new vc.TemplateParseError("Could not find main document (e.g. document.xml) in ".concat(C0))}pn.getMainDoc=XE;var Eb=function(e,t,r){return Ln(void 0,void 0,void 0,function(){var n,i,a,s,u,d,h,f,p,v,b,k;return Pn(this,function(S){switch(S.label){case 0:return Mt.logger.debug("Processing images for ".concat(t,"...")),n=Object.keys(e),n.length?(Mt.logger.debug("Completing document.xml.rels..."),i="".concat(zi,"/_rels/").concat(t,".rels"),[4,A0(r,i)]):[2];case 1:for(a=S.sent(),s=0,u=n;s<u.length;s++)d=u[s],h=e[d],f=h.extension,p=h.data,v="template_".concat(t,"_").concat(d).concat(f),Mt.logger.debug("Writing image ".concat(d," (").concat(v,")...")),b="".concat(zi,"/media/").concat(v),typeof p=="string"?r.file(b,p,{base64:!0}):r.file(b,p,{binary:!0}),(0,Za.addChild)(a,(0,Za.newNonTextNode)("Relationship",{Id:d,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"media/".concat(v)}));return k=(0,Pi.buildXml)(a,{literalXmlDelimiter:Vc}),(0,gn.zipSetText)(r,i,k),[2]}})})},Cb=function(e,t,r){return Ln(void 0,void 0,void 0,function(){var n,i,a,s,u,d,h,f;return Pn(this,function(p){switch(p.label){case 0:return Mt.logger.debug("Processing links for ".concat(t,"...")),n=Object.keys(e),n.length?(Mt.logger.debug("Completing document.xml.rels..."),i="".concat(zi,"/_rels/").concat(t,".rels"),[4,A0(r,i)]):[3,2];case 1:for(a=p.sent(),s=0,u=n;s<u.length;s++)d=u[s],h=e[d].url,(0,Za.addChild)(a,(0,Za.newNonTextNode)("Relationship",{Id:d,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Target:h,TargetMode:"External"}));f=(0,Pi.buildXml)(a,{literalXmlDelimiter:Vc}),(0,gn.zipSetText)(r,i,f),p.label=2;case 2:return[2]}})})},Sb=function(e,t,r){return Ln(void 0,void 0,void 0,function(){var n,i,a,s,u,d,h,f,p,v,b;return Pn(this,function(k){switch(k.label){case 0:return Mt.logger.debug("Processing htmls for ".concat(t,"...")),n=Object.keys(e),n.length?(Mt.logger.debug("Completing document.xml.rels..."),i=[],a="".concat(zi,"/_rels/").concat(t,".rels"),[4,A0(r,a)]):[3,2];case 1:for(s=k.sent(),u=0,d=n;u<d.length;u++)h=d[u],f=e[h],p="template_".concat(t.replace(/\./g,"_"),"_").concat(h,".html"),Mt.logger.debug("Writing html ".concat(h," (").concat(p,")...")),v="".concat(zi,"/").concat(p),i.push("/".concat(v)),(0,gn.zipSetText)(r,v,Buffer.from(f)),(0,Za.addChild)(s,(0,Za.newNonTextNode)("Relationship",{Id:h,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/aFChunk",Target:"".concat(p)}));b=(0,Pi.buildXml)(s,{literalXmlDelimiter:Vc}),(0,gn.zipSetText)(r,a,b),k.label=2;case 2:return[2]}})})},A0=function(e,t){return Ln(void 0,void 0,void 0,function(){var r;return Pn(this,function(n){switch(n.label){case 0:return[4,(0,gn.zipGetText)(e,t)];case 1:return r=n.sent(),r||(r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
        <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
        </Relationships>`),[2,(0,Pi.parseXml)(r)]}})})},JE=function(e){return e?typeof e=="string"?[e,e]:e:[wb,wb]};pn.default=b5;(function(e){var t=Qe&&Qe.__createBinding||(Object.create?function(s,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(s,h,f)}:function(s,u,d,h){h===void 0&&(h=d),s[h]=u[d]}),r=Qe&&Qe.__exportStar||function(s,u){for(var d in s)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&t(u,s,d)},n=Qe&&Qe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.createReport=e.getMetadata=e.listCommands=void 0;var i=n(pn);e.createReport=i.default;var a=pn;Object.defineProperty(e,"listCommands",{enumerable:!0,get:function(){return a.listCommands}}),Object.defineProperty(e,"getMetadata",{enumerable:!0,get:function(){return a.getMetadata}}),r(zt,e),e.default=i.default})(gR);const E5="data:application/octet-stream;base64,";var YE={exports:{}},Dt={},sr={};function C5(e,t,r){if(r===void 0&&(r=Array.prototype),e&&typeof r.find=="function")return r.find.call(e,t);for(var n=0;n<e.length;n++)if(ns(e,n)){var i=e[n];if(t.call(void 0,i,n,e))return i}}function zl(e,t){return t===void 0&&(t=Object),t&&typeof t.getOwnPropertyDescriptors=="function"&&(e=t.create(null,t.getOwnPropertyDescriptors(e))),t&&typeof t.freeze=="function"?t.freeze(e):e}function ns(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S5(e,t){if(e===null||typeof e!="object")throw new TypeError("target is not an object");for(var r in t)ns(t,r)&&(e[r]=t[r]);return e}var QE=zl({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function A5(e){return ns(QE,e.toLowerCase())}var eC=zl({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T5(e){return ns(eC,e.toLowerCase())}var yc=zl({script:!1,style:!1,textarea:!0,title:!0});function N5(e){var t=e.toLowerCase();return ns(yc,t)&&!yc[t]}function k5(e){var t=e.toLowerCase();return ns(yc,t)&&yc[t]}function tC(e){return e===xc.HTML}function j5(e){return tC(e)||e===xc.XML_XHTML_APPLICATION}var xc=zl({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),D5=Object.keys(xc).map(function(e){return xc[e]});function O5(e){return D5.indexOf(e)>-1}var R5=zl({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});sr.assign=S5;sr.find=C5;sr.freeze=zl;sr.HTML_BOOLEAN_ATTRIBUTES=QE;sr.HTML_RAW_TEXT_ELEMENTS=yc;sr.HTML_VOID_ELEMENTS=eC;sr.hasDefaultHTMLNamespace=j5;sr.hasOwn=ns;sr.isHTMLBooleanAttribute=A5;sr.isHTMLRawTextElement=N5;sr.isHTMLEscapableRawTextElement=k5;sr.isHTMLMimeType=tC;sr.isHTMLVoidElement=T5;sr.isValidMimeType=O5;sr.MIME_TYPE=xc;sr.NAMESPACE=R5;var lo={},I5=sr;function rC(e,t){e.prototype=Object.create(Error.prototype,{constructor:{value:e},name:{value:e.name,enumerable:!0,writable:t}})}var bc=I5.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),nC=Object.keys(bc);function iC(e){return typeof e=="number"&&e>=1&&e<=25}function L5(e){return typeof e=="string"&&e.substring(e.length-bc.Error.length)===bc.Error}function $c(e,t){iC(e)?(this.name=nC[e],this.message=t||""):(this.message=e,this.name=L5(t)?t:bc.Error),Error.captureStackTrace&&Error.captureStackTrace(this,$c)}rC($c,!0);Object.defineProperties($c.prototype,{code:{enumerable:!0,get:function(){var e=nC.indexOf(this.name);return iC(e)?e:0}}});var aC={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},Kp=Object.entries(aC);for(var Xd=0;Xd<Kp.length;Xd++){var P5=Kp[Xd][0];$c[P5]=Kp[Xd][1]}function T0(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,T0)}rC(T0);lo.DOMException=$c;lo.DOMExceptionName=bc;lo.ExceptionCode=aC;lo.ParseError=T0;var lr={},_t={};function oC(e){try{typeof e!="function"&&(e=RegExp);var t=new e("","u").exec("");return!!t&&t[0].length===2}catch{}return!1}var Gc=oC();function Ko(e){if(e.source[0]!=="[")throw new Error(e+" can not be used with chars");return e.source.slice(1,e.source.lastIndexOf("]"))}function Tl(e,t){if(e.source[0]!=="[")throw new Error("/"+e.source+"/ can not be used with chars_without");if(!t||typeof t!="string")throw new Error(JSON.stringify(t)+" is not a valid search");if(e.source.indexOf(t)===-1)throw new Error('"'+t+'" is not is /'+e.source+"/");if(t==="-"&&e.source.indexOf(t)!==1)throw new Error('"'+t+'" is not at the first postion of /'+e.source+"/");return new RegExp(e.source.replace(t,""),Gc?"u":"")}function At(e){var t=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(r){var n=typeof r=="string";if(n&&t===void 0&&r==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return n?r:r.source}).join(""),Gc?"mu":"m")}function lt(e){if(arguments.length===0)throw new Error("no parameters provided");return At.apply(lt,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var M5="",Xo=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;Gc&&(Xo=At("[",Ko(Xo),"\\u{10000}-\\u{10FFFF}","]"));var N0=/[\x20\x09\x0D\x0A]/,B5=Ko(N0),Ft=At(N0,"+"),er=At(N0,"*"),_c=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;Gc&&(_c=At("[",Ko(_c),"\\u{10000}-\\u{10FFFF}","]"));var F5=Ko(_c),k0=At("[",F5,Ko(/[-.0-9\xB7]/),Ko(/[\u0300-\u036F\u203F-\u2040]/),"]"),Xn=At(_c,k0,"*"),Ab=At(k0,"+"),z5=At("&",Xn,";"),U5=lt(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),wc=lt(z5,"|",U5),Ec=At("%",Xn,";"),j0=lt(At('"',lt(/[^%&"]/,"|",Ec,"|",wc),"*",'"'),"|",At("'",lt(/[^%&']/,"|",Ec,"|",wc),"*","'")),q5=lt('"',lt(/[^<&"]/,"|",wc),"*",'"',"|","'",lt(/[^<&']/,"|",wc),"*","'"),V5=Tl(_c,":"),$5=Tl(k0,":"),Tb=At(V5,$5,"*"),Hc=At(Tb,lt(":",Tb),"?"),G5=At("^",Hc,"$"),H5=At("(",Hc,")"),Cc=lt(/"[^"]*"|'[^']*'/),W5=At(/^<\?/,"(",Xn,")",lt(Ft,"(",Xo,"*?)"),"?",/\?>/),Nb=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,Pf=lt('"',Nb,'*"',"|","'",Tl(Nb,"'"),"*'"),sC="<!--",lC="-->",Z5=At(sC,lt(Tl(Xo,"-"),"|",At("-",Tl(Xo,"-"))),"*",lC),kb="#PCDATA",K5=lt(At(/\(/,er,kb,lt(er,/\|/,er,Hc),"*",er,/\)\*/),"|",At(/\(/,er,kb,er,/\)/)),X5=/[?*+]?/,J5=At(/\([^>]+\)/,X5),Y5=lt("EMPTY","|","ANY","|",K5,"|",J5),Q5="<!ELEMENT",eI=At(Q5,Ft,lt(Hc,"|",Ec),Ft,lt(Y5,"|",Ec),er,">"),tI=At("NOTATION",Ft,/\(/,er,Xn,lt(er,/\|/,er,Xn),"*",er,/\)/),rI=At(/\(/,er,Ab,lt(er,/\|/,er,Ab),"*",er,/\)/),nI=lt(tI,"|",rI),iI=lt(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",nI),aI=lt(/#REQUIRED|#IMPLIED/,"|",lt(lt("#FIXED",Ft),"?",q5)),oI=lt(Ft,Xn,Ft,iI,Ft,aI),sI="<!ATTLIST",lI=At(sI,Ft,Xn,oI,"*",er,">"),Zg="about:legacy-compat",uI=lt('"'+Zg+'"',"|","'"+Zg+"'"),D0="SYSTEM",Mf="PUBLIC",Bf=lt(lt(D0,Ft,Cc),"|",lt(Mf,Ft,Pf,Ft,Cc)),cI=At("^",lt(lt(D0,Ft,"(?<SystemLiteralOnly>",Cc,")"),"|",lt(Mf,Ft,"(?<PubidLiteral>",Pf,")",Ft,"(?<SystemLiteral>",Cc,")"))),dI=lt(Ft,"NDATA",Ft,Xn),hI=lt(j0,"|",lt(Bf,dI,"?")),uC="<!ENTITY",fI=At(uC,Ft,Xn,Ft,hI,er,">"),pI=lt(j0,"|",Bf),mI=At(uC,Ft,"%",Ft,Xn,Ft,pI,er,">"),gI=lt(fI,"|",mI),vI=At(Mf,Ft,Pf),yI=At("<!NOTATION",Ft,Xn,Ft,lt(Bf,"|",vI),er,">"),O0=At(er,"=",er),jb=/1[.]\d+/,xI=At(Ft,"version",O0,lt("'",jb,"'","|",'"',jb,'"')),Db=/[A-Za-z][-A-Za-z0-9._]*/,bI=lt(Ft,"encoding",O0,lt('"',Db,'"',"|","'",Db,"'")),_I=lt(Ft,"standalone",O0,lt("'",lt("yes","|","no"),"'","|",'"',lt("yes","|","no"),'"')),wI=At(/^<\?xml/,xI,bI,"?",_I,"?",er,/\?>/),EI="<!DOCTYPE",CI="<![CDATA[",SI="]]>",AI=/<!\[CDATA\[/,TI=/\]\]>/,NI=At(Xo,"*?",TI),kI=At(AI,NI);_t.chars=Ko;_t.chars_without=Tl;_t.detectUnicodeSupport=oC;_t.reg=At;_t.regg=lt;_t.ABOUT_LEGACY_COMPAT=Zg;_t.ABOUT_LEGACY_COMPAT_SystemLiteral=uI;_t.AttlistDecl=lI;_t.CDATA_START=CI;_t.CDATA_END=SI;_t.CDSect=kI;_t.Char=Xo;_t.Comment=Z5;_t.COMMENT_START=sC;_t.COMMENT_END=lC;_t.DOCTYPE_DECL_START=EI;_t.elementdecl=eI;_t.EntityDecl=gI;_t.EntityValue=j0;_t.ExternalID=Bf;_t.ExternalID_match=cI;_t.Name=Xn;_t.NotationDecl=yI;_t.Reference=wc;_t.PEReference=Ec;_t.PI=W5;_t.PUBLIC=Mf;_t.PubidLiteral=Pf;_t.QName=Hc;_t.QName_exact=G5;_t.QName_group=H5;_t.S=Ft;_t.SChar_s=B5;_t.S_OPT=er;_t.SYSTEM=D0;_t.SystemLiteral=Cc;_t.UNICODE_REPLACEMENT_CHARACTER=M5;_t.UNICODE_SUPPORT=Gc;_t.XMLDecl=wI;var Wn=sr,Mi=Wn.find,jI=Wn.hasDefaultHTMLNamespace,Nl=Wn.hasOwn,DI=Wn.isHTMLMimeType,OI=Wn.isHTMLRawTextElement,RI=Wn.isHTMLVoidElement,Iu=Wn.MIME_TYPE,Ui=Wn.NAMESPACE,Qr=Symbol(),cC=lo,at=cC.DOMException,II=cC.DOMExceptionName,Di=_t;function En(e){if(e!==Qr)throw new TypeError("Illegal constructor")}function LI(e){return e!==""}function PI(e){return e?e.split(/[\t\n\f\r ]+/).filter(LI):[]}function MI(e,t){return Nl(e,t)||(e[t]=!0),e}function Ob(e){if(!e)return[];var t=PI(e);return Object.keys(t.reduce(MI,{}))}function BI(e){return function(t){return e&&e.indexOf(t)!==-1}}function dC(e){if(!Di.QName_exact.test(e))throw new at(at.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+e+'"')}function Kg(e,t){dC(t),e=e||null;var r=null,n=t;if(t.indexOf(":")>=0){var i=t.split(":");r=i[0],n=i[1]}if(r!==null&&e===null)throw new at(at.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(r==="xml"&&e!==Wn.NAMESPACE.XML)throw new at(at.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((r==="xmlns"||t==="xmlns")&&e!==Wn.NAMESPACE.XMLNS)throw new at(at.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(e===Wn.NAMESPACE.XMLNS&&r!=="xmlns"&&t!=="xmlns")throw new at(at.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[e,r,n]}function Ul(e,t){for(var r in e)Nl(e,r)&&(t[r]=e[r])}function Cn(e,t){var r=e.prototype;if(!(r instanceof t)){let n=function(){};n.prototype=t.prototype,n=new n,Ul(r,n),e.prototype=r=n}r.constructor!=e&&(typeof e!="function"&&console.error("unknown Class:"+e),r.constructor=e)}var Sn={},hi=Sn.ELEMENT_NODE=1,kl=Sn.ATTRIBUTE_NODE=2,tf=Sn.TEXT_NODE=3,hC=Sn.CDATA_SECTION_NODE=4,fC=Sn.ENTITY_REFERENCE_NODE=5,FI=Sn.ENTITY_NODE=6,pC=Sn.PROCESSING_INSTRUCTION_NODE=7,mC=Sn.COMMENT_NODE=8,Sc=Sn.DOCUMENT_NODE=9,gC=Sn.DOCUMENT_TYPE_NODE=10,Ka=Sn.DOCUMENT_FRAGMENT_NODE=11,zI=Sn.NOTATION_NODE=12,nr=Wn.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function vC(e,t){if(t.length<e.length)return vC(t,e);var r=null;for(var n in e){if(e[n]!==t[n])return r;r=e[n]}return r}function Rb(e){return e.guid||(e.guid=Math.random()),e.guid}function br(){}br.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e){for(var t=[],r=0;r<this.length;r++)nl(this[r],t,e);return t.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}};br.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Uo(e,t){this._node=e,this._refresh=t,Ff(this)}function Ff(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var r=e._refresh(e._node);if(kC(e,"length",r.length),!e.$$length||r.length<e.$$length)for(var n=r.length;n in e;n++)Nl(e,n)&&delete e[n];Ul(r,e),e._inc=t}}Uo.prototype.item=function(e){return Ff(this),this[e]||null};Cn(Uo,br);function jl(){}function yC(e,t){for(var r=0;r<e.length;){if(e[r]===t)return r;r++}}function UI(e,t,r,n){if(n?t[yC(t,n)]=r:(t[t.length]=r,t.length++),e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&_C(i,e,n),qI(i,e,r))}}function Ib(e,t,r){var n=yC(t,r);if(n>=0){for(var i=t.length-1;n<=i;)t[n]=t[++n];if(t.length=i,e){var a=e.ownerDocument;a&&_C(a,e,r),r.ownerElement=null}}}jl.prototype={length:0,item:br.prototype.item,getNamedItem:function(e){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());for(var t=0;t<this.length;){var r=this[t];if(r.nodeName===e)return r;t++}return null},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!==this._ownerElement)throw new at(at.INUSE_ATTRIBUTE_ERR);var r=this.getNamedItemNS(e.namespaceURI,e.localName);return r===e?e:(UI(this._ownerElement,this,e,r),r)},setNamedItemNS:function(e){return this.setNamedItem(e)},removeNamedItem:function(e){var t=this.getNamedItem(e);if(!t)throw new at(at.NOT_FOUND_ERR,e);return Ib(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);if(!r)throw new at(at.NOT_FOUND_ERR,e?e+" : "+t:t);return Ib(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){e||(e=null);for(var r=0;r<this.length;){var n=this[r];if(n.localName===t&&n.namespaceURI===e)return n;r++}return null}};jl.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function xC(){}xC.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var n=Iu.XML_APPLICATION;e===Ui.HTML?n=Iu.XML_XHTML_APPLICATION:e===Ui.SVG&&(n=Iu.XML_SVG_IMAGE);var i=new Xa(Qr,{contentType:n});if(i.implementation=this,i.childNodes=new br,i.doctype=r||null,r&&i.appendChild(r),t){var a=i.createElementNS(e,t);i.appendChild(a)}return i},createDocumentType:function(e,t,r,n){dC(e);var i=new qf(Qr);return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=r||"",i.internalSubset=n||"",i.childNodes=new br,i},createHTMLDocument:function(e){var t=new Xa(Qr,{contentType:Iu.HTML});if(t.implementation=this,t.childNodes=new br,e!==!1){t.doctype=this.createDocumentType("html"),t.doctype.ownerDocument=t,t.appendChild(t.doctype);var r=t.createElement("html");t.appendChild(r);var n=t.createElement("head");if(r.appendChild(n),typeof e=="string"){var i=t.createElement("title");i.appendChild(t.createTextNode(e)),n.appendChild(i)}r.appendChild(t.createElement("body"))}return t}};function jt(e){En(e)}jt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var e=this.getRootNode();return e&&e.nodeType===e.DOCUMENT_NODE},contains:function(e){if(!e)return!1;var t=e;do{if(this===t)return!0;t=e.parentNode}while(t);return!1},getRootNode:function(e){var t=this;do{if(!t.parentNode)return t;t=t.parentNode}while(t)},isEqualNode:function(e){if(!e||this.nodeType!==e.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==e.name||this.publicId!==e.publicId||this.systemId!==e.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==e.namespaceURI||this.prefix!==e.prefix||this.localName!==e.localName||this.attributes.length!==e.attributes.length)return!1;for(var t=0;t<this.attributes.length;t++){var r=this.attributes.item(t);if(!r.isEqualNode(e.getAttributeNodeNS(r.namespaceURI,r.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==e.namespaceURI||this.localName!==e.localName||this.value!==e.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==e.target||this.data!==e.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==e.data)return!1;break}if(this.childNodes.length!==e.childNodes.length)return!1;for(var t=0;t<this.childNodes.length;t++)if(!this.childNodes[t].isEqualNode(e.childNodes[t]))return!1;return!0},isSameNode:function(e){return this===e},insertBefore:function(e,t){return rf(this,e,t)},replaceChild:function(e,t){rf(this,e,t,SC),t&&this.removeChild(t)},removeChild:function(e){return EC(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return Xg(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==tf&&e.nodeType==tf?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r){for(var n in r)if(Nl(r,n)&&r[n]===e)return n}t=t.nodeType==kl?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&Nl(r,e))return r[e];t=t.nodeType==kl?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null},compareDocumentPosition:function(e){if(this===e)return 0;var t=e,r=this,n=null,i=null;if(t instanceof Jo&&(n=t,t=n.ownerElement),r instanceof Jo&&(i=r,r=i.ownerElement,n&&t&&r===t))for(var a=0,s;s=r.attributes[a];a++){if(s===n)return nr.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+nr.DOCUMENT_POSITION_PRECEDING;if(s===i)return nr.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+nr.DOCUMENT_POSITION_FOLLOWING}if(!t||!r||r.ownerDocument!==t.ownerDocument)return nr.DOCUMENT_POSITION_DISCONNECTED+nr.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(Rb(r.ownerDocument)>Rb(t.ownerDocument)?nr.DOCUMENT_POSITION_FOLLOWING:nr.DOCUMENT_POSITION_PRECEDING);if(i&&t===r)return nr.DOCUMENT_POSITION_CONTAINS+nr.DOCUMENT_POSITION_PRECEDING;if(n&&t===r)return nr.DOCUMENT_POSITION_CONTAINED_BY+nr.DOCUMENT_POSITION_FOLLOWING;for(var u=[],d=t.parentNode;d;){if(!i&&d===r)return nr.DOCUMENT_POSITION_CONTAINED_BY+nr.DOCUMENT_POSITION_FOLLOWING;u.push(d),d=d.parentNode}u.reverse();for(var h=[],f=r.parentNode;f;){if(!n&&f===t)return nr.DOCUMENT_POSITION_CONTAINS+nr.DOCUMENT_POSITION_PRECEDING;h.push(f),f=f.parentNode}h.reverse();var p=vC(u,h);for(var v in p.childNodes){var b=p.childNodes[v];if(b===r)return nr.DOCUMENT_POSITION_FOLLOWING;if(b===t)return nr.DOCUMENT_POSITION_PRECEDING;if(h.indexOf(b)>=0)return nr.DOCUMENT_POSITION_FOLLOWING;if(u.indexOf(b)>=0)return nr.DOCUMENT_POSITION_PRECEDING}return 0}};function bC(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}Ul(Sn,jt);Ul(Sn,jt.prototype);Ul(nr,jt);Ul(nr,jt.prototype);function Wu(e,t){if(t(e))return!0;if(e=e.firstChild)do if(Wu(e,t))return!0;while(e=e.nextSibling)}function Xa(e,t){En(e);var r=t||{};this.ownerDocument=this,this.contentType=r.contentType||Iu.XML_APPLICATION,this.type=DI(this.contentType)?"html":"xml"}function qI(e,t,r){e&&e._inc++;var n=r.namespaceURI;n===Ui.XMLNS&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function _C(e,t,r,n){e&&e._inc++;var i=r.namespaceURI;i===Ui.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function wC(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r&&!r.nextSibling)n[n.length++]=r;else{for(var i=t.firstChild,a=0;i;)n[a++]=i,i=i.nextSibling;n.length=a,delete n[n.length]}}}function EC(e,t){if(e!==t.parentNode)throw new at(at.NOT_FOUND_ERR,"child's parent is not parent");var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,wC(e.ownerDocument,e),t.parentNode=null,t.previousSibling=null,t.nextSibling=null,t}function VI(e){return e&&(e.nodeType===jt.DOCUMENT_NODE||e.nodeType===jt.DOCUMENT_FRAGMENT_NODE||e.nodeType===jt.ELEMENT_NODE)}function $I(e){return e&&(e.nodeType===jt.CDATA_SECTION_NODE||e.nodeType===jt.COMMENT_NODE||e.nodeType===jt.DOCUMENT_FRAGMENT_NODE||e.nodeType===jt.DOCUMENT_TYPE_NODE||e.nodeType===jt.ELEMENT_NODE||e.nodeType===jt.PROCESSING_INSTRUCTION_NODE||e.nodeType===jt.TEXT_NODE)}function Ja(e){return e&&e.nodeType===jt.DOCUMENT_TYPE_NODE}function ta(e){return e&&e.nodeType===jt.ELEMENT_NODE}function CC(e){return e&&e.nodeType===jt.TEXT_NODE}function Lb(e,t){var r=e.childNodes||[];if(Mi(r,ta)||Ja(t))return!1;var n=Mi(r,Ja);return!(t&&n&&r.indexOf(n)>r.indexOf(t))}function Pb(e,t){var r=e.childNodes||[];function n(a){return ta(a)&&a!==t}if(Mi(r,n))return!1;var i=Mi(r,Ja);return!(t&&i&&r.indexOf(i)>r.indexOf(t))}function GI(e,t,r){if(!VI(e))throw new at(at.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new at(at.NOT_FOUND_ERR,"child not in parent");if(!$I(t)||Ja(t)&&e.nodeType!==jt.DOCUMENT_NODE)throw new at(at.HIERARCHY_REQUEST_ERR,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function HI(e,t,r){var n=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===jt.DOCUMENT_FRAGMENT_NODE){var a=i.filter(ta);if(a.length>1||Mi(i,CC))throw new at(at.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(a.length===1&&!Lb(e,r))throw new at(at.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(ta(t)&&!Lb(e,r))throw new at(at.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Ja(t)){if(Mi(n,Ja))throw new at(at.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var s=Mi(n,ta);if(r&&n.indexOf(s)<n.indexOf(r))throw new at(at.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!r&&s)throw new at(at.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function SC(e,t,r){var n=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===jt.DOCUMENT_FRAGMENT_NODE){var a=i.filter(ta);if(a.length>1||Mi(i,CC))throw new at(at.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(a.length===1&&!Pb(e,r))throw new at(at.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(ta(t)&&!Pb(e,r))throw new at(at.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Ja(t)){if(Mi(n,function(d){return Ja(d)&&d!==r}))throw new at(at.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var s=Mi(n,ta);if(r&&n.indexOf(s)<n.indexOf(r))throw new at(at.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function rf(e,t,r,n){GI(e,t,r),e.nodeType===jt.DOCUMENT_NODE&&(n||HI)(e,t,r);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===Ka){var a=t.firstChild;if(a==null)return t;var s=t.lastChild}else a=s=t;var u=r?r.previousSibling:e.lastChild;a.previousSibling=u,s.nextSibling=r,u?u.nextSibling=a:e.firstChild=a,r==null?e.lastChild=s:r.previousSibling=s;do a.parentNode=e;while(a!==s&&(a=a.nextSibling));return wC(e.ownerDocument||e,e,t),t.nodeType==Ka&&(t.firstChild=t.lastChild=null),t}Xa.prototype={implementation:null,nodeName:"#document",nodeType:Sc,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType===Ka){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return rf(this,e,t),e.ownerDocument=this,this.documentElement===null&&e.nodeType===hi&&(this.documentElement=e),e},removeChild:function(e){var t=EC(this,e);return t===this.documentElement&&(this.documentElement=null),t},replaceChild:function(e,t){rf(this,e,t,SC),e.ownerDocument=this,t&&this.removeChild(t),ta(e)&&(this.documentElement=e)},importNode:function(e,t){return NC(this,e,t)},getElementById:function(e){var t=null;return Wu(this.documentElement,function(r){if(r.nodeType==hi&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new Ya(Qr);t.ownerDocument=this,this.type==="html"&&(e=e.toLowerCase()),jI(this.contentType)&&(t.namespaceURI=Ui.HTML),t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new br;var r=t.attributes=new jl;return r._ownerElement=t,t},createDocumentFragment:function(){var e=new Zc(Qr);return e.ownerDocument=this,e.childNodes=new br,e},createTextNode:function(e){var t=new Wc(Qr);return t.ownerDocument=this,t.childNodes=new br,t.appendData(e),t},createComment:function(e){var t=new zf(Qr);return t.ownerDocument=this,t.childNodes=new br,t.appendData(e),t},createCDATASection:function(e){var t=new Uf(Qr);return t.ownerDocument=this,t.childNodes=new br,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new $f(Qr);return r.ownerDocument=this,r.childNodes=new br,r.nodeName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){if(!Di.QName_exact.test(e))throw new at(at.INVALID_CHARACTER_ERR,'invalid character in name "'+e+'"');return this.type==="html"&&(e=e.toLowerCase()),this._createAttribute(e)},_createAttribute:function(e){var t=new Jo(Qr);return t.ownerDocument=this,t.childNodes=new br,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){if(!Di.Name.test(e))throw new at(at.INVALID_CHARACTER_ERR,'not a valid xml name "'+e+'"');if(this.type==="html")throw new at("document is an html document",II.NotSupportedError);var t=new Vf(Qr);return t.ownerDocument=this,t.childNodes=new br,t.nodeName=e,t},createElementNS:function(e,t){var r=Kg(e,t),n=new Ya(Qr),i=n.attributes=new jl;return n.childNodes=new br,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=r[0],n.prefix=r[1],n.localName=r[2],i._ownerElement=n,n},createAttributeNS:function(e,t){var r=Kg(e,t),n=new Jo(Qr);return n.ownerDocument=this,n.childNodes=new br,n.nodeName=t,n.name=t,n.specified=!0,n.namespaceURI=r[0],n.prefix=r[1],n.localName=r[2],n}};Cn(Xa,jt);function Ya(e){En(e),this._nsMap=Object.create(null)}Ya.prototype={nodeType:hi,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===Ui.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(e){return!!this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t?t.value:null},getAttributeNode:function(e){return this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase()),this.attributes.getNamedItem(e)},setAttribute:function(e,t){this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());var r=this.getAttributeNode(e);r?r.value=r.nodeValue=""+t:(r=this.ownerDocument._createAttribute(e),r.value=r.nodeValue=""+t,this.setAttributeNode(r))},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r?r.value:null},setAttributeNS:function(e,t,r){var n=Kg(e,t),i=n[2],a=this.getAttributeNodeNS(e,i);a?a.value=a.nodeValue=""+r:(a=this.ownerDocument.createAttributeNS(e,t),a.value=a.nodeValue=""+r,this.setAttributeNode(a))},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByClassName:function(e){var t=Ob(e);return new Uo(this,function(r){var n=[];return t.length>0&&Wu(r,function(i){if(i!==r&&i.nodeType===hi){var a=i.getAttribute("class");if(a){var s=e===a;if(!s){var u=Ob(a);s=t.every(BI(u))}s&&n.push(i)}}}),n})},getElementsByTagName:function(e){var t=(this.nodeType===Sc?this:this.ownerDocument).type==="html",r=e.toLowerCase();return new Uo(this,function(n){var i=[];return Wu(n,function(a){if(!(a===n||a.nodeType!==hi))if(e==="*")i.push(a);else{var s=a.getQualifiedName(),u=t&&a.namespaceURI===Ui.HTML?r:e;s===u&&i.push(a)}}),i})},getElementsByTagNameNS:function(e,t){return new Uo(this,function(r){var n=[];return Wu(r,function(i){i!==r&&i.nodeType===hi&&(e==="*"||i.namespaceURI===e)&&(t==="*"||i.localName==t)&&n.push(i)}),n})}};Xa.prototype.getElementsByClassName=Ya.prototype.getElementsByClassName;Xa.prototype.getElementsByTagName=Ya.prototype.getElementsByTagName;Xa.prototype.getElementsByTagNameNS=Ya.prototype.getElementsByTagNameNS;Cn(Ya,jt);function Jo(e){En(e),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}Jo.prototype.nodeType=kl;Cn(Jo,jt);function ql(e){En(e)}ql.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){var n=this.data.substring(0,e),i=this.data.substring(e+t);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};Cn(ql,jt);function Wc(e){En(e)}Wc.prototype={nodeName:"#text",nodeType:tf,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Cn(Wc,ql);function zf(e){En(e)}zf.prototype={nodeName:"#comment",nodeType:mC};Cn(zf,ql);function Uf(e){En(e)}Uf.prototype={nodeName:"#cdata-section",nodeType:hC};Cn(Uf,Wc);function qf(e){En(e)}qf.prototype.nodeType=gC;Cn(qf,jt);function R0(e){En(e)}R0.prototype.nodeType=zI;Cn(R0,jt);function I0(e){En(e)}I0.prototype.nodeType=FI;Cn(I0,jt);function Vf(e){En(e)}Vf.prototype.nodeType=fC;Cn(Vf,jt);function Zc(e){En(e)}Zc.prototype.nodeName="#document-fragment";Zc.prototype.nodeType=Ka;Cn(Zc,jt);function $f(e){En(e)}$f.prototype.nodeType=pC;Cn($f,ql);function AC(){}AC.prototype.serializeToString=function(e,t){return TC.call(e,t)};jt.prototype.toString=TC;function TC(e){var t=[],r=this.nodeType===Sc&&this.documentElement||this,n=r.prefix,i=r.namespaceURI;if(i&&n==null){var n=r.lookupPrefix(i);if(n==null)var a=[{namespace:i,prefix:null}]}return nl(this,t,e,a),t.join("")}function Mb(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!i||n==="xml"&&i===Ui.XML||i===Ui.XMLNS)return!1;for(var a=r.length;a--;){var s=r[a];if(s.prefix===n)return s.namespace!==i}return!0}function Xp(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,bC),'"')}function nl(e,t,r,n){n||(n=[]);var i=e.nodeType===Sc?e:e.ownerDocument,a=i.type==="html";if(r)if(e=r(e),e){if(typeof e=="string"){t.push(e);return}}else return;switch(e.nodeType){case hi:var s=e.attributes,u=s.length,w=e.firstChild,d=e.tagName,h=d;if(!a&&!e.prefix&&e.namespaceURI){for(var f,p=0;p<s.length;p++)if(s.item(p).name==="xmlns"){f=s.item(p).value;break}if(!f)for(var v=n.length-1;v>=0;v--){var b=n[v];if(b.prefix===""&&b.namespace===e.namespaceURI){f=b.namespace;break}}if(f!==e.namespaceURI)for(var v=n.length-1;v>=0;v--){var b=n[v];if(b.namespace===e.namespaceURI){b.prefix&&(h=b.prefix+":"+d);break}}}t.push("<",h);for(var k=0;k<u;k++){var S=s.item(k);S.prefix=="xmlns"?n.push({prefix:S.localName,namespace:S.value}):S.nodeName=="xmlns"&&n.push({prefix:"",namespace:S.value})}for(var k=0;k<u;k++){var S=s.item(k);if(Mb(S,a,n)){var T=S.prefix||"",y=S.namespaceURI;Xp(t,T?"xmlns:"+T:"xmlns",y),n.push({prefix:T,namespace:y})}nl(S,t,r,n)}if(d===h&&Mb(e,a,n)){var T=e.prefix||"",y=e.namespaceURI;Xp(t,T?"xmlns:"+T:"xmlns",y),n.push({prefix:T,namespace:y})}var _=!w;if(_&&(a||e.namespaceURI===Ui.HTML)&&(_=RI(d)),_)t.push("/>");else{if(t.push(">"),a&&OI(d))for(;w;)w.data?t.push(w.data):nl(w,t,r,n.slice()),w=w.nextSibling;else for(;w;)nl(w,t,r,n.slice()),w=w.nextSibling;t.push("</",h,">")}return;case Sc:case Ka:for(var w=e.firstChild;w;)nl(w,t,r,n.slice()),w=w.nextSibling;return;case kl:return Xp(t,e.name,e.value);case tf:return t.push(e.data.replace(/[<&>]/g,bC));case hC:return t.push(Di.CDATA_START,e.data,Di.CDATA_END);case mC:return t.push(Di.COMMENT_START,e.data,Di.COMMENT_END);case gC:var E=e.publicId,N=e.systemId;t.push(Di.DOCTYPE_DECL_START," ",e.name),E?(t.push(" ",Di.PUBLIC," ",E),N&&N!=="."&&t.push(" ",N)):N&&N!=="."&&t.push(" ",Di.SYSTEM," ",N),e.internalSubset&&t.push(" [",e.internalSubset,"]"),t.push(">");return;case pC:return t.push("<?",e.target," ",e.data,"?>");case fC:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function NC(e,t,r){var n;switch(t.nodeType){case hi:n=t.cloneNode(!1),n.ownerDocument=e;case Ka:break;case kl:r=!0;break}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(NC(e,i,r)),i=i.nextSibling;return n}function Xg(e,t,r){var n=new t.constructor(Qr);for(var i in t)if(Nl(t,i)){var a=t[i];typeof a!="object"&&a!=n[i]&&(n[i]=a)}switch(t.childNodes&&(n.childNodes=new br),n.ownerDocument=e,n.nodeType){case hi:var s=t.attributes,u=n.attributes=new jl,d=s.length;u._ownerElement=n;for(var h=0;h<d;h++)n.setAttributeNode(Xg(e,s.item(h),!0));break;case kl:r=!0}if(r)for(var f=t.firstChild;f;)n.appendChild(Xg(e,f,r)),f=f.nextSibling;return n}function kC(e,t,r){e[t]=r}try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case hi:case Ka:var r=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}};Object.defineProperty(Uo.prototype,"length",{get:function(){return Ff(this),this.$$length}}),Object.defineProperty(jt.prototype,"textContent",{get:function(){return e(this)},set:function(t){switch(this.nodeType){case hi:case Ka:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),kC=function(t,r,n){t["$$"+r]=n}}}catch{}lr._updateLiveList=Ff;lr.Attr=Jo;lr.CDATASection=Uf;lr.CharacterData=ql;lr.Comment=zf;lr.Document=Xa;lr.DocumentFragment=Zc;lr.DocumentType=qf;lr.DOMImplementation=xC;lr.Element=Ya;lr.Entity=I0;lr.EntityReference=Vf;lr.LiveNodeList=Uo;lr.NamedNodeMap=jl;lr.Node=jt;lr.NodeList=br;lr.Notation=R0;lr.Text=Wc;lr.ProcessingInstruction=$f;lr.XMLSerializer=AC;var Vl={},jC={};(function(e){var t=sr.freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(jC);var Gf={},$l=sr,xt=_t,DC=lo,WI=$l.isHTMLEscapableRawTextElement,ZI=$l.isHTMLMimeType,KI=$l.isHTMLRawTextElement,Ac=$l.hasOwn,Bb=$l.NAMESPACE,Fb=DC.ParseError,XI=DC.DOMException,Su=0,xa=1,Ps=2,Au=3,Ms=4,Bs=5,Tu=6,Jd=7;function OC(){}OC.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),RC(t,t=Object.create(null)),JI(e,t,r,n,this.errorHandler),n.endDocument()}};var L0=/&#?\w+;?/g;function JI(e,t,r,n,i){var a=ZI(n.mimeType);e.indexOf(xt.UNICODE_REPLACEMENT_CHARACTER)>=0&&i.warning("Unicode replacement character detected, source encoding issues?");function s(O){if(O>65535){O-=65536;var ne=55296+(O>>10),J=56320+(O&1023);return String.fromCharCode(ne,J)}else return String.fromCharCode(O)}function u(O){var ne=O[O.length-1]===";"?O:O+";";if(!a&&ne!==O)return i.error("EntityRef: expecting ;"),O;var J=xt.Reference.exec(ne);if(!J||J[0].length!==ne.length)return i.error("entity not matching Reference production: "+O),O;var G=ne.slice(1,-1);return Ac(r,G)?r[G]:G.charAt(0)==="#"?s(parseInt(G.substring(1).replace("x","0x"))):(i.error("entity not found:"+O),O)}function d(O){if(O>T){var ne=e.substring(T,O).replace(L0,u);v&&b(T),n.characters(ne,0,O-T),T=O}}var h=0,f=0,p=/\r\n?|\n|$/g,v=n.locator;function b(O,ne){for(;O>=f&&(ne=p.exec(e));)h=f,f=ne.index+ne[0].length,v.lineNumber++;v.columnNumber=O-h+1}for(var k=[{currentNSMap:t}],S=[],T=0;;){try{var y=e.indexOf("<",T);if(y<0){if(!a&&S.length>0)return i.fatalError("unclosed xml tag(s): "+S.join(", "));if(!e.substring(T).match(/^\s*$/)){var _=n.doc,w=_.createTextNode(e.substring(T));if(_.documentElement)return i.error("Extra content at the end of the document");_.appendChild(w),n.currentElement=w}return}if(y>T){var E=e.substring(T,y);!a&&S.length===0&&(E=E.replace(new RegExp(xt.S_OPT.source,"g"),""),E&&i.error("Unexpected content outside root element: '"+E+"'")),d(y)}switch(e.charAt(y+1)){case"/":var P=e.indexOf(">",y+2),N=e.substring(y+2,P>0?P:void 0);if(!N)return i.fatalError("end tag name missing");var M=P>0&&xt.reg("^",xt.QName_group,xt.S_OPT,"$").exec(N);if(!M)return i.fatalError('end tag name contains invalid characters: "'+N+'"');if(!n.currentElement&&!n.doc.documentElement)return;var B=S[S.length-1]||n.currentElement.tagName||n.doc.documentElement.tagName||"";if(B!==M[1]){var D=M[1].toLowerCase();if(!a||B.toLowerCase()!==D)return i.fatalError('Opening and ending tag mismatch: "'+B+'" != "'+N+'"')}var A=k.pop();S.pop();var H=A.localNSMap;if(n.endElement(A.uri,A.localName,B),H)for(var te in H)Ac(H,te)&&n.endPrefixMapping(te);P++;break;case"?":v&&b(y),P=tL(e,y,n,i);break;case"!":v&&b(y),P=LC(e,y,n,i,a);break;default:v&&b(y);var z=new PC,ae=k[k.length-1].currentNSMap,P=YI(e,y,z,ae,u,i,a),ce=z.length;if(z.closed||(a&&$l.isHTMLVoidElement(z.tagName)?z.closed=!0:S.push(z.tagName)),v&&ce){for(var fe=zb(v,{}),re=0;re<ce;re++){var ue=z[re];b(ue.offset),ue.locator=zb(v,{})}n.locator=fe,Ub(z,n,ae)&&k.push(z),n.locator=v}else Ub(z,n,ae)&&k.push(z);a&&!z.closed?P=QI(e,P,z.tagName,u,n):P++}}catch(O){if(O instanceof Fb)throw O;if(O instanceof XI)throw new Fb(O.name+": "+O.message,n.locator,O);i.error("element parse error: "+O),P=-1}P>T?T=P:d(Math.max(y,T)+1)}}function zb(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function YI(e,t,r,n,i,a,s){function u(b,k,S){if(Ac(r.attributeNames,b))return a.fatalError("Attribute "+b+" redefined");if(!s&&k.indexOf("<")>=0)return a.fatalError("Unescaped '<' not allowed in attributes values");r.addValue(b,k.replace(/[\t\n\r]/g," ").replace(L0,i),S)}for(var d,h,f=++t,p=Su;;){var v=e.charAt(f);switch(v){case"=":if(p===xa)d=e.slice(t,f),p=Au;else if(p===Ps)p=Au;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(p===Au||p===xa)if(p===xa&&(a.warning('attribute value must after "="'),d=e.slice(t,f)),t=f+1,f=e.indexOf(v,t),f>0)h=e.slice(t,f),u(d,h,t-1),p=Bs;else throw new Error("attribute value no end '"+v+"' match");else if(p==Ms)h=e.slice(t,f),u(d,h,t),a.warning('attribute "'+d+'" missed start quot('+v+")!!"),t=f+1,p=Bs;else throw new Error('attribute value must after "="');break;case"/":switch(p){case Su:r.setTagName(e.slice(t,f));case Bs:case Tu:case Jd:p=Jd,r.closed=!0;case Ms:case xa:break;case Ps:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),p==Su&&r.setTagName(e.slice(t,f)),f;case">":switch(p){case Su:r.setTagName(e.slice(t,f));case Bs:case Tu:case Jd:break;case Ms:case xa:h=e.slice(t,f),h.slice(-1)==="/"&&(r.closed=!0,h=h.slice(0,-1));case Ps:p===Ps&&(h=d),p==Ms?(a.warning('attribute "'+h+'" missed quot(")!'),u(d,h,t)):(s||a.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),u(h,h,t));break;case Au:if(!s)return a.fatalError(`AttValue: ' or " expected`)}return f;case"":v=" ";default:if(v<=" ")switch(p){case Su:r.setTagName(e.slice(t,f)),p=Tu;break;case xa:d=e.slice(t,f),p=Ps;break;case Ms:var h=e.slice(t,f);a.warning('attribute "'+h+'" missed quot(")!!'),u(d,h,t);case Bs:p=Tu;break}else switch(p){case Ps:s||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),u(d,d,t),t=f,p=xa;break;case Bs:a.warning('attribute space is required"'+d+'"!!');case Tu:p=xa,t=f;break;case Au:p=Ms,t=f;break;case Jd:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function Ub(e,t,r){for(var n=e.tagName,i=null,p=e.length;p--;){var a=e[p],s=a.qName,u=a.value,v=s.indexOf(":");if(v>0)var d=a.prefix=s.slice(0,v),h=s.slice(v+1),f=d==="xmlns"&&h;else h=s,d=null,f=s==="xmlns"&&"";a.localName=h,f!==!1&&(i==null&&(i=Object.create(null),RC(r,r=Object.create(null))),r[f]=i[f]=u,a.uri=Bb.XMLNS,t.startPrefixMapping(f,u))}for(var p=e.length;p--;)a=e[p],a.prefix&&(a.prefix==="xml"&&(a.uri=Bb.XML),a.prefix!=="xmlns"&&(a.uri=r[a.prefix]));var v=n.indexOf(":");v>0?(d=e.prefix=n.slice(0,v),h=e.localName=n.slice(v+1)):(d=null,h=e.localName=n);var b=e.uri=r[d||""];if(t.startElement(b,h,n,e),e.closed){if(t.endElement(b,h,n),i)for(d in i)Ac(i,d)&&t.endPrefixMapping(d)}else return e.currentNSMap=r,e.localNSMap=i,!0}function QI(e,t,r,n,i){var a=WI(r);if(a||KI(r)){var s=e.indexOf("</"+r+">",t),u=e.substring(t+1,s);return a&&(u=u.replace(L0,n)),i.characters(u,0,u.length),s}return t+1}function RC(e,t){for(var r in e)Ac(e,r)&&(t[r]=e[r])}function IC(e,t){var r=t;function n(f){return f=f||0,e.charAt(r+f)}function i(f){f=f||1,r+=f}function a(){for(var f=0;r<e.length;){var p=n();if(p!==" "&&p!==`
`&&p!=="	"&&p!=="\r")return f;f++,i()}return-1}function s(){return e.substring(r)}function u(f){return e.substring(r,r+f.length)===f}function d(f){return e.substring(r,r+f.length).toUpperCase()===f.toUpperCase()}function h(f){var p=xt.reg("^",f),v=p.exec(s());return v?(i(v[0].length),v[0]):null}return{char:n,getIndex:function(){return r},getMatch:h,getSource:function(){return e},skip:i,skipBlanks:a,substringFromIndex:s,substringStartsWith:u,substringStartsWithCaseInsensitive:d}}function eL(e,t){function r(u,d){var h=xt.PI.exec(u.substringFromIndex());return h?h[1].toLowerCase()==="xml"?d.fatalError("xml declaration is only allowed at the start of the document, but found at position "+u.getIndex()):(u.skip(h[0].length),h[0]):d.fatalError("processing instruction is not well-formed at position "+u.getIndex())}var n=e.getSource();if(e.char()==="["){e.skip(1);for(var i=e.getIndex();e.getIndex()<n.length;){if(e.skipBlanks(),e.char()==="]"){var a=n.substring(i,e.getIndex());return e.skip(1),a}var s=null;if(e.char()==="<"&&e.char(1)==="!")switch(e.char(2)){case"E":e.char(3)==="L"?s=e.getMatch(xt.elementdecl):e.char(3)==="N"&&(s=e.getMatch(xt.EntityDecl));break;case"A":s=e.getMatch(xt.AttlistDecl);break;case"N":s=e.getMatch(xt.NotationDecl);break;case"-":s=e.getMatch(xt.Comment);break}else if(e.char()==="<"&&e.char(1)==="?")s=r(e,t);else if(e.char()==="%")s=e.getMatch(xt.PEReference);else return t.fatalError("Error detected in Markup declaration");if(!s)return t.fatalError("Error in internal subset at position "+e.getIndex())}return t.fatalError("doctype internal subset is not well-formed, missing ]")}}function LC(e,t,r,n,i){var a=IC(e,t);switch(i?a.char(2).toUpperCase():a.char(2)){case"-":var s=a.getMatch(xt.Comment);return s?(r.comment(s,xt.COMMENT_START.length,s.length-xt.COMMENT_START.length-xt.COMMENT_END.length),a.getIndex()):n.fatalError("comment is not well-formed at position "+a.getIndex());case"[":var u=a.getMatch(xt.CDSect);return u?!i&&!r.currentElement?n.fatalError("CDATA outside of element"):(r.startCDATA(),r.characters(u,xt.CDATA_START.length,u.length-xt.CDATA_START.length-xt.CDATA_END.length),r.endCDATA(),a.getIndex()):n.fatalError("Invalid CDATA starting at position "+t);case"D":{if(r.doc&&r.doc.documentElement)return n.fatalError("Doctype not allowed inside or after documentElement at position "+a.getIndex());if(i?!a.substringStartsWithCaseInsensitive(xt.DOCTYPE_DECL_START):!a.substringStartsWith(xt.DOCTYPE_DECL_START))return n.fatalError("Expected "+xt.DOCTYPE_DECL_START+" at position "+a.getIndex());if(a.skip(xt.DOCTYPE_DECL_START.length),a.skipBlanks()<1)return n.fatalError("Expected whitespace after "+xt.DOCTYPE_DECL_START+" at position "+a.getIndex());var d={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(d.name=a.getMatch(xt.Name),!d.name)return n.fatalError("doctype name missing or contains unexpected characters at position "+a.getIndex());if(i&&d.name.toLowerCase()!=="html"&&n.warning("Unexpected DOCTYPE in HTML document at position "+a.getIndex()),a.skipBlanks(),a.substringStartsWith(xt.PUBLIC)||a.substringStartsWith(xt.SYSTEM)){var h=xt.ExternalID_match.exec(a.substringFromIndex());if(!h)return n.fatalError("doctype external id is not well-formed at position "+a.getIndex());h.groups.SystemLiteralOnly!==void 0?d.systemId=h.groups.SystemLiteralOnly:(d.systemId=h.groups.SystemLiteral,d.publicId=h.groups.PubidLiteral),a.skip(h[0].length)}else if(i&&a.substringStartsWithCaseInsensitive(xt.SYSTEM)){if(a.skip(xt.SYSTEM.length),a.skipBlanks()<1)return n.fatalError("Expected whitespace after "+xt.SYSTEM+" at position "+a.getIndex());if(d.systemId=a.getMatch(xt.ABOUT_LEGACY_COMPAT_SystemLiteral),!d.systemId)return n.fatalError("Expected "+xt.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+xt.SYSTEM+" at position "+a.getIndex())}return i&&d.systemId&&!xt.ABOUT_LEGACY_COMPAT_SystemLiteral.test(d.systemId)&&n.warning("Unexpected doctype.systemId in HTML document at position "+a.getIndex()),i||(a.skipBlanks(),d.internalSubset=eL(a,n)),a.skipBlanks(),a.char()!==">"?n.fatalError("doctype not terminated with > at position "+a.getIndex()):(a.skip(1),r.startDTD(d.name,d.publicId,d.systemId,d.internalSubset),r.endDTD(),a.getIndex())}default:return n.fatalError('Not well-formed XML starting with "<!" at position '+t)}}function tL(e,t,r,n){var i=e.substring(t).match(xt.PI);if(!i)return n.fatalError("Invalid processing instruction starting at position "+t);if(i[1].toLowerCase()==="xml"){if(t>0)return n.fatalError("processing instruction at position "+t+" is an xml declaration which is only at the start of the document");if(!xt.XMLDecl.test(e.substring(t)))return n.fatalError("xml declaration is not well-formed")}return r.processingInstruction(i[1],i[2]),t+i[0].length}function PC(){this.attributeNames=Object.create(null)}PC.prototype={setTagName:function(e){if(!xt.QName_exact.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!xt.QName_exact.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};Gf.XMLReader=OC;Gf.parseUtils=IC;Gf.parseDoctypeCommentOrCData=LC;var is=sr,rL=lr,nL=lo,qb=jC,iL=Gf,aL=rL.DOMImplementation,oL=is.hasDefaultHTMLNamespace,sL=is.isHTMLMimeType,lL=is.isValidMimeType,MC=is.MIME_TYPE,Jp=is.NAMESPACE,Vb=nL.ParseError,uL=iL.XMLReader;function BC(e){return e.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function FC(e){if(e=e||{},e.locator===void 0&&(e.locator=!0),this.assign=e.assign||is.assign,this.domHandler=e.domHandler||Hf,this.onError=e.onError||e.errorHandler,e.errorHandler&&typeof e.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");e.errorHandler&&e.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=e.normalizeLineEndings||BC,this.locator=!!e.locator,this.xmlns=this.assign(Object.create(null),e.xmlns)}FC.prototype.parseFromString=function(e,t){if(!lL(t))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+t+'" is not valid.');var r=this.assign(Object.create(null),this.xmlns),n=qb.XML_ENTITIES,i=r[""]||null;oL(t)?(n=qb.HTML_ENTITIES,i=Jp.HTML):t===MC.XML_SVG_IMAGE&&(i=Jp.SVG),r[""]=i,r.xml=r.xml||Jp.XML;var a=new this.domHandler({mimeType:t,defaultNamespace:i,onError:this.onError}),s=this.locator?{}:void 0;this.locator&&a.setDocumentLocator(s);var u=new uL;u.errorHandler=a,u.domBuilder=a;var d=!is.isHTMLMimeType(t);return d&&typeof e!="string"&&u.errorHandler.fatalError("source is not a string"),u.parse(this.normalizeLineEndings(String(e)),r,n),a.doc.documentElement||u.errorHandler.fatalError("missing root element"),a.doc};function Hf(e){var t=e||{};this.mimeType=t.mimeType||MC.XML_APPLICATION,this.defaultNamespace=t.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=t.onError}function Fs(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}Hf.prototype={startDocument:function(){var e=new aL;this.doc=sL(this.mimeType)?e.createHTMLDocument(!1):e.createDocument(this.defaultNamespace,"")},startElement:function(e,t,r,n){var i=this.doc,a=i.createElementNS(e,r||t),s=n.length;Yd(this,a),this.currentElement=a,this.locator&&Fs(this.locator,a);for(var u=0;u<s;u++){var e=n.getURI(u),d=n.getValue(u),r=n.getQName(u),h=i.createAttributeNS(e,r);this.locator&&Fs(n.getLocator(u),h),h.value=h.nodeValue=d,a.setAttributeNode(h)}},endElement:function(e,t,r){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&Fs(this.locator,r),Yd(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=$b.apply(this,arguments),e){if(this.cdata)var n=this.doc.createCDATASection(e);else var n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&Fs(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){e&&(e.lineNumber=0),this.locator=e},comment:function(e,t,r){e=$b.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&Fs(this.locator,n),Yd(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var a=i.createDocumentType(e,t,r,n);this.locator&&Fs(this.locator,a),Yd(this,a),this.doc.doctype=a}},reportError:function(e,t){if(typeof this.onError=="function")try{this.onError(e,t,this)}catch(r){throw new Vb("Reporting "+e+' "'+t+'" caused '+r,this.locator)}else console.error("[xmldom "+e+"]	"+t,cL(this.locator))},warning:function(e){this.reportError("warning",e)},error:function(e){this.reportError("error",e)},fatalError:function(e){throw this.reportError("fatalError",e),new Vb(e,this.locator)}};function cL(e){if(e)return`
@#[line:`+e.lineNumber+",col:"+e.columnNumber+"]"}function $b(e,t,r){return typeof e=="string"?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){Hf.prototype[e]=function(){return null}});function Yd(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}function dL(e){if(e==="error")throw"onErrorStopParsing"}function hL(){throw"onWarningStopParsing"}Vl.__DOMHandler=Hf;Vl.DOMParser=FC;Vl.normalizeLineEndings=BC;Vl.onErrorStopParsing=dL;Vl.onWarningStopParsing=hL;var Gl=sr;Dt.assign=Gl.assign;Dt.hasDefaultHTMLNamespace=Gl.hasDefaultHTMLNamespace;Dt.isHTMLMimeType=Gl.isHTMLMimeType;Dt.isValidMimeType=Gl.isValidMimeType;Dt.MIME_TYPE=Gl.MIME_TYPE;Dt.NAMESPACE=Gl.NAMESPACE;var Wf=lo;Dt.DOMException=Wf.DOMException;Dt.DOMExceptionName=Wf.DOMExceptionName;Dt.ExceptionCode=Wf.ExceptionCode;Dt.ParseError=Wf.ParseError;var Cr=lr;Dt.Attr=Cr.Attr;Dt.CDATASection=Cr.CDATASection;Dt.CharacterData=Cr.CharacterData;Dt.Comment=Cr.Comment;Dt.Document=Cr.Document;Dt.DocumentFragment=Cr.DocumentFragment;Dt.DocumentType=Cr.DocumentType;Dt.DOMImplementation=Cr.DOMImplementation;Dt.Element=Cr.Element;Dt.Entity=Cr.Entity;Dt.EntityReference=Cr.EntityReference;Dt.LiveNodeList=Cr.LiveNodeList;Dt.NamedNodeMap=Cr.NamedNodeMap;Dt.Node=Cr.Node;Dt.NodeList=Cr.NodeList;Dt.Notation=Cr.Notation;Dt.ProcessingInstruction=Cr.ProcessingInstruction;Dt.Text=Cr.Text;Dt.XMLSerializer=Cr.XMLSerializer;var Zf=Vl;Dt.DOMParser=Zf.DOMParser;Dt.normalizeLineEndings=Zf.normalizeLineEndings;Dt.onErrorStopParsing=Zf.onErrorStopParsing;Dt.onWarningStopParsing=Zf.onWarningStopParsing;function fL(e){return e[e.length-1]}function pL(e){return e[0]}var P0={last:fL,first:pL};function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function Gb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gb(Object(r),!0).forEach(function(n){gL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gL(e,t,r){return(t=vL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vL(e){var t=yL(e,"string");return Tc(t)=="symbol"?t:t+""}function yL(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zC=P0,mh=zC.last,Bo=zC.first;function as(e){this.name="GenericError",this.message=e,this.stack=new Error(e).stack}as.prototype=Error.prototype;function Hr(e){this.name="TemplateError",this.message=e,this.stack=new Error(e).stack}Hr.prototype=new as;function Nc(e){this.name="RenderingError",this.message=e,this.stack=new Error(e).stack}Nc.prototype=new as;function Kf(e){this.name="ScopeParserError",this.message=e,this.stack=new Error(e).stack}Kf.prototype=new as;function uo(e){this.name="InternalError",this.properties={explanation:"InternalError"},this.message=e,this.stack=new Error(e).stack}uo.prototype=new as;function M0(e){this.name="APIVersionError",this.properties={explanation:"APIVersionError"},this.message=e,this.stack=new Error(e).stack}M0.prototype=new as;function xL(e,t){var r=new M0(e);throw r.properties=mL({id:"api_version_error"},t),r}function bL(e){var t=new Hr("Multi error");throw t.properties={errors:e,id:"multi_error",explanation:"The template has multiple errors"},t}function _L(e){var t=new Hr("Unopened tag");return t.properties={xtag:mh(e.xtag.split(" ")),id:"unopened_tag",context:e.xtag,offset:e.offset,lIndex:e.lIndex,explanation:'The tag beginning with "'.concat(e.xtag.substr(0,10),'" is unopened')},t}function wL(e){var t=new Hr("Duplicate open tag, expected one open tag");return t.properties={xtag:Bo(e.xtag.split(" ")),id:"duplicate_open_tag",context:e.xtag,offset:e.offset,lIndex:e.lIndex,explanation:'The tag beginning with "'.concat(e.xtag.substr(0,10),'" has duplicate open tags')},t}function EL(e){var t=new Hr("Duplicate close tag, expected one close tag");return t.properties={xtag:Bo(e.xtag.split(" ")),id:"duplicate_close_tag",context:e.xtag,offset:e.offset,lIndex:e.lIndex,explanation:'The tag ending with "'.concat(e.xtag.substr(0,10),'" has duplicate close tags')},t}function CL(e){var t=new Hr("Unclosed tag");return t.properties={xtag:Bo(e.xtag.split(" ")).substr(1),id:"unclosed_tag",context:e.xtag,offset:e.offset,lIndex:e.lIndex,explanation:'The tag beginning with "'.concat(e.xtag.substr(0,10),'" is unclosed')},t}function SL(e){var t=new Hr('No tag "'.concat(e.element,'" was found at the ').concat(e.position)),r=e.parsed[e.index];throw t.properties={id:"no_xml_tag_found_at_".concat(e.position),explanation:'No tag "'.concat(e.element,'" was found at the ').concat(e.position),offset:r.offset,part:r,parsed:e.parsed,index:e.index,element:e.element},t}function AL(e){var t=e.tag,r=e.value,n=e.offset,i=new Nc("There are some XML corrupt characters");return i.properties={id:"invalid_xml_characters",xtag:t,value:r,offset:n,explanation:"There are some corrupt characters for the field ".concat(t)},i}function TL(e){var t=e.tag,r=e.value,n=e.offset,i=new Nc("Non string values are not allowed for rawXML tags");return i.properties={id:"invalid_raw_xml_value",xtag:t,value:r,offset:n,explanation:"The value of the raw tag : '".concat(t,"' is not a string")},i}function NL(e){var t=e.part,r=t.value,n=t.offset,i=e.id,a=i===void 0?"raw_tag_outerxml_invalid":i,s=e.message,u=s===void 0?"Raw tag not in paragraph":s,d=e.part,h=e.explanation,f=h===void 0?'The tag "'.concat(r,'" is not inside a paragraph'):h;typeof f=="function"&&(f=f(d));var p=new Hr(u);throw p.properties={id:a,explanation:f,rootError:e.rootError,xtag:r,offset:n,postparsed:e.postparsed,expandTo:e.expandTo,index:e.index},p}function kL(e){var t=new Hr("Raw tag should be the only text in paragraph"),r=e.part.value;throw t.properties={id:"raw_xml_tag_should_be_only_text_in_paragraph",explanation:'The raw tag "'.concat(r,'" should be the only text in this paragraph. This means that this tag should not be surrounded by any text or spaces.'),xtag:r,offset:e.part.offset,paragraphParts:e.paragraphParts},t}function jL(e){var t=e.location,r=e.offset,n=e.square,i=t==="start"?"unclosed":"unopened",a=t==="start"?"Unclosed":"Unopened",s=new Hr("".concat(a," loop")),u=e.value;return s.properties={id:"".concat(i,"_loop"),explanation:'The loop with tag "'.concat(u,'" is ').concat(i),xtag:u,offset:r},n&&(s.properties.square=n),s}function DL(e,t){var r=new Hr("Unbalanced loop tag"),n=t[0].part.value,i=t[1].part.value,a=e[0].part.value,s=e[1].part.value;return r.properties={id:"unbalanced_loop_tags",explanation:"Unbalanced loop tags {#".concat(n,"}{/").concat(i,"}{#").concat(a,"}{/").concat(s,"}"),offset:[t[0].part.offset,e[1].part.offset],lastPair:{left:t[0].part.value,right:t[1].part.value},pair:{left:e[0].part.value,right:e[1].part.value}},r}function OL(e){var t=e.tags,r=new Hr("Closing tag does not match opening tag");return r.properties={id:"closing_tag_does_not_match_opening_tag",explanation:'The tag "'.concat(t[0].value,'" is closed by the tag "').concat(t[1].value,'"'),openingtag:Bo(t).value,offset:[Bo(t).offset,mh(t).offset],closingtag:mh(t).value},Bo(t).square&&(r.properties.square=[Bo(t).square,mh(t).square]),r}function RL(e){var t=e.tag,r=e.rootError,n=e.offset,i=new Kf("Scope parser compilation failed");return i.properties={id:"scopeparser_compilation_failed",offset:n,xtag:t,explanation:'The scope parser for the tag "'.concat(t,'" failed to compile'),rootError:r},i}function IL(e){var t=e.tag,r=e.scope,n=e.error,i=e.offset,a=new Kf("Scope parser execution failed");return a.properties={id:"scopeparser_execution_failed",explanation:"The scope parser for the tag ".concat(t," failed to execute"),scope:r,offset:i,xtag:t,rootError:n},a}function LL(e){var t=e.tag,r=e.offset,n=new Hr('The position of the loop tags "'.concat(t,'" would produce invalid XML'));return n.properties={xtag:t,id:"loop_position_invalid",explanation:'The tags "'.concat(t,'" are misplaced in the document, for example one of them is in a table and the other one outside the table'),offset:r},n}function PL(e,t){var r='Unimplemented tag type "'.concat(e.type,'"');e.module&&(r+=' "'.concat(e.module,'"'));var n=new Hr(r);throw n.properties={part:e,index:t,id:"unimplemented_tag_type"},n}function ML(){var e=new uo("Malformed xml");throw e.properties={explanation:"The template contains malformed xml",id:"malformed_xml"},e}function BL(){var e=new uo("You must run `.compile()` before running `.resolveData()`");throw e.properties={id:"resolve_before_compile",explanation:"You must run `.compile()` before running `.resolveData()`"},e}function FL(){var e=new uo("You should not call .render on a document that had compilation errors");throw e.properties={id:"render_on_invalid_template",explanation:"You should not call .render on a document that had compilation errors"},e}function zL(){var e=new uo("You should not call .render twice on the same docxtemplater instance");throw e.properties={id:"render_twice",explanation:"You should not call .render twice on the same docxtemplater instance"},e}function UL(e){var t=Object.keys(e.files).slice(0,10),r="";t.length===0?r="Empty zip file":r="Zip file contains : ".concat(t.join(","));var n=new uo("The filetype for this file could not be identified, is this file corrupted ? ".concat(r));throw n.properties={id:"filetype_not_identified",explanation:"The filetype for this file could not be identified, is this file corrupted ? ".concat(r)},n}function qL(e,t){var r=new Hr("An XML file has invalid xml");throw r.properties={id:"file_has_invalid_xml",content:e,offset:t,explanation:"The docx contains invalid XML, it is most likely corrupt"},r}function VL(e){var t=new uo('The filetype "'.concat(e,'" is not handled by docxtemplater'));throw t.properties={id:"filetype_not_handled",explanation:'The file you are trying to generate is of type "'.concat(e,'", but only docx and pptx formats are handled'),fileType:e},t}var yi={XTError:as,XTTemplateError:Hr,XTInternalError:uo,XTScopeParserError:Kf,XTAPIVersionError:M0,RenderingError:Nc,XTRenderingError:Nc,getClosingTagNotMatchOpeningTag:OL,getLoopPositionProducesInvalidXMLError:LL,getScopeCompilationError:RL,getScopeParserExecutionError:IL,getUnclosedTagException:CL,getUnopenedTagException:_L,getUnmatchedLoopException:jL,getDuplicateCloseTagException:EL,getDuplicateOpenTagException:wL,getCorruptCharactersException:AL,getInvalidRawXMLValueException:TL,getUnbalancedLoopException:DL,throwApiVersionError:xL,throwFileTypeNotHandled:VL,throwFileTypeNotIdentified:UL,throwMalformedXml:ML,throwMultiError:bL,throwExpandNotFound:NL,throwRawTagShouldBeOnlyTextInParagraph:kL,throwUnimplementedTagType:PL,throwXmlTagNotFound:SL,throwXmlInvalid:qL,throwResolveBeforeCompile:BL,throwRenderInvalidTemplate:FL,throwRenderTwice:zL};function $L(e,t){return ZL(e)||WL(e,t)||HL(e,t)||GL()}function GL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HL(e,t){if(e){if(typeof e=="string")return Hb(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hb(e,t):void 0}}function Hb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function WL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,u=[],d=!0,h=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(d=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(f){h=!0,i=f}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return u}}function ZL(e){if(Array.isArray(e))return e}var UC=Dt,KL=UC.DOMParser,XL=UC.XMLSerializer,JL=yi,qC=JL.throwXmlTagNotFound,VC=P0,YL=VC.last,QL=VC.first;function eP(e){return/^[ \n\r\t]+$/.test(e)}function tP(e){return{get:function(r){return e==="."?r:r&&r[e]}}}var Yp={};function rP(e,t,r){var n;if(Yp[t]?n=Yp[t]:(n=new RegExp("(<.* ".concat(t,'=")([^"]*)(".*)$')),Yp[t]=n),n.test(e))return e.replace(n,"$1".concat(r,"$3"));var i=e.lastIndexOf("/>");return i===-1&&(i=e.lastIndexOf(">")),e.substr(0,i)+" ".concat(t,'="').concat(r,'"')+e.substr(i)}function nP(e,t){var r=e.indexOf(" ".concat(t,'="'));if(r===-1)return null;var n=e.substr(r).search(/["']/)+r,i=e.substr(n+1).search(/["']/)+n;return e.substr(n+1,i-n)}function iP(e,t){return e.indexOf(t,e.length-t.length)!==-1}function aP(e,t){return e.substring(0,t.length)===t}function oP(e){for(var t=[],r={},n=[],i=0,a=e.length;i<a;++i)r[e[i]]?t.push(e[i]):(r[e[i]]=!0,n.push(e[i]));return t}function sP(e){for(var t={},r=[],n=0,i=e.length;n<i;++n)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function lP(e,t){for(var r=[[]],n=0;n<e.length;n++){var i=e[n],a=r[r.length-1],s=t(i);s==="start"?r.push([i]):s==="end"?(a.push(i),r.push([])):a.push(i)}for(var u=[],d=0;d<r.length;d++){var h=r[d];h.length>0&&u.push(h)}return u}function uP(){return{errorLogging:"json",stripInvalidXMLChars:!1,paragraphLoop:!1,nullGetter:function(t){return t.module?"":"undefined"},xmlFileNames:["[Content_Types].xml"],parser:tP,linebreaks:!1,fileTypeConfig:null,delimiters:{start:"{",end:"}"},syntax:{changeDelimiterPrefix:"="}}}function cP(e){return new XL().serializeToString(e).replace(/xmlns(:[a-z0-9]+)?="" ?/g,"")}function dP(e){return e.charCodeAt(0)===65279&&(e=e.substr(1)),new KL().parseFromString(e,"text/xml")}var $C=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&apos;"]],kc=$C.map(function(e){var t=$L(e,2),r=t[0],n=t[1];return{rstart:new RegExp(n,"g"),rend:new RegExp(r,"g"),start:n,end:r}});function hP(e){for(var t=kc.length-1;t>=0;t--){var r=kc[t];e=e.replace(r.rstart,r.end)}return e}function fP(e){var t;(t=e)!==null&&t!==void 0&&t.toString?e=e.toString():e="";for(var r,n=0,i=kc.length;n<i;n++)r=kc[n],e=e.replace(r.rend,r.start);return e}function pP(e){for(var t=[],r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++){var a=n[i];t.push(a)}return t}function mP(e,t){if(!t)return e;for(var r=0,n=t.length;r<n;r++)e.push(t[r]);return e}var gP=new RegExp("","g");function vP(e){return e.replace(gP," ")}function yP(e,t){for(var r=[],n;(n=e.exec(t))!=null;)r.push({array:n,offset:n.index});return r}function B0(e,t){return e==="</"+t+">"}function F0(e,t){return e.indexOf("<"+t)===0&&[">"," ","/"].indexOf(e[t.length+1])!==-1}function xP(e,t,r){var n=GC(e,t,r);if(n!==null)return n;qC({position:"right",element:t,parsed:e,index:r})}function GC(e,t,r){typeof t=="string"&&(t=[t]);for(var n=1,i=r,a=e.length;i<a;i++)for(var s=e[i],u=0,d=t;u<d.length;u++){var h=d[u];if(B0(s.value,h)&&n--,F0(s.value,h)&&n++,n===0)return i}return null}function bP(e,t,r){var n=HC(e,t,r);if(n!==null)return n;qC({position:"left",element:t,parsed:e,index:r})}function HC(e,t,r){typeof t=="string"&&(t=[t]);for(var n=1,i=r;i>=0;i--)for(var a=e[i],s=0,u=t;s<u.length;s++){var d=u[s];if(F0(a.value,d)&&n--,B0(a.value,d)&&n++,n===0)return i}return null}function _P(e,t){var r=t.type,n=t.tag,i=t.position;return r==="tag"&&n===e&&(i==="start"||i==="selfclosing")}function wP(e,t){var r=t.type,n=t.tag,i=t.position;return r==="tag"&&n===e&&i==="end"}function EP(e){var t=e.type,r=e.tag,n=e.position;return["w:p","a:p","text:p"].indexOf(r)!==-1&&t==="tag"&&n==="start"}function CP(e){var t=e.type,r=e.tag,n=e.position;return["w:p","a:p","text:p"].indexOf(r)!==-1&&t==="tag"&&n==="end"}function SP(e){var t=e.type,r=e.position,n=e.text;return n&&t==="tag"&&r==="start"}function AP(e){var t=e.type,r=e.position,n=e.text;return n&&t==="tag"&&r==="end"}function TP(e){var t=e.type,r=e.position;return t==="placeholder"||t==="content"&&r==="insidetag"}function NP(e,t){var r=e.module,n=e.type;return t instanceof Array||(t=[t]),n==="placeholder"&&t.indexOf(r)!==-1}var Jg=/[\x00-\x08\x0B\x0C\x0E-\x1F]/g;function kP(e){return Jg.lastIndex=0,Jg.test(e)}function jP(e){return typeof e!="string"&&(e=String(e)),e.replace(Jg,"")}function DP(e){var t={};for(var r in e){var n=e[r];t[n]||(t[n]=[]),t[n].push(r)}return t}function OP(e,t){return e.map(function(r,n){return{item:r,index:n}}).sort(function(r,n){return t(r.item,n.item)||r.index-n.index}).map(function(r){var n=r.item;return n})}var Sr={endsWith:iP,startsWith:aP,isContent:TP,isParagraphStart:EP,isParagraphEnd:CP,isTagStart:_P,isTagEnd:wP,isTextStart:SP,isTextEnd:AP,isStarting:F0,isEnding:B0,isModule:NP,uniq:sP,getDuplicates:oP,chunkBy:lP,last:YL,first:QL,xml2str:cP,str2xml:dP,getRightOrNull:GC,getRight:xP,getLeftOrNull:HC,getLeft:bP,pregMatchAll:yP,convertSpaces:vP,charMapRegexes:kc,hasCorruptCharacters:kP,removeCorruptCharacters:jP,getDefaults:uP,wordToUtf8:hP,utf8ToWord:fP,concatArrays:pP,pushArray:mP,invertMap:DP,charMap:$C,getSingleAttribute:nP,setSingleAttribute:rP,isWhiteSpace:eP,stableSort:OP};function RP(e,t){return MP(e)||PP(e,t)||LP(e,t)||IP()}function IP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LP(e,t){if(e){if(typeof e=="string")return Wb(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wb(e,t):void 0}}function Wb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function PP(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,u=[],d=!0,h=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(d=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(f){h=!0,i=f}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return u}}function MP(e){if(Array.isArray(e))return e}function Ir(e){"@babel/helpers - typeof";return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(e)}function BP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UP(n.key),n)}}function zP(e,t,r){return r&&FP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UP(e){var t=qP(e,"string");return Ir(t)=="symbol"?t:t+""}function qP(e,t){if(Ir(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ir(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VP=function(){function e(){BP(this,e)}return zP(e,null,[{key:"createSchema",value:function(r){var n={validate:r,optional:function(){return e.createSchema(function(a){return a===void 0?{success:!0,value:a}:r(a)})},nullable:function(){return e.createSchema(function(a){return a==null?{success:!0,value:a}:r(a)})}};return n}},{key:"string",value:function(){return e.createSchema(function(r){return typeof r!="string"?{success:!1,error:"Expected string, received ".concat(Ir(r))}:{success:!0,value:r}})}},{key:"date",value:function(){return e.createSchema(function(r){return r instanceof Date?{success:!0,value:r}:{success:!1,error:"Expected date, received ".concat(Ir(r))}})}},{key:"boolean",value:function(){return e.createSchema(function(r){return typeof r!="boolean"?{success:!1,error:"Expected boolean, received ".concat(Ir(r))}:{success:!0,value:r}})}},{key:"number",value:function(){return e.createSchema(function(r){return typeof r!="number"?{success:!1,error:"Expected number, received ".concat(Ir(r))}:{success:!0,value:r}})}},{key:"function",value:function(){return e.createSchema(function(r){return typeof r!="function"?{success:!1,error:"Expected function, received ".concat(Ir(r))}:{success:!0,value:r}})}},{key:"array",value:function(r){return e.createSchema(function(n){if(!Array.isArray(n))return{success:!1,error:"Expected array, received ".concat(Ir(n))};for(var i=0;i<n.length;i++){var a=r.validate(n[i]);if(!a.success)return{success:!1,error:"".concat(a.error," at index ").concat(i)}}return{success:!0,value:n}})}},{key:"any",value:function(){return e.createSchema(function(r){return{success:!0,value:r}})}},{key:"isRegex",value:function(){return e.createSchema(function(r){return r instanceof RegExp?{success:!0,value:r}:{success:!1,error:"Expected RegExp, received ".concat(Ir(r))}})}},{key:"union",value:function(r){return e.createSchema(function(n){for(var i=0;i<r.length;i++){var a=r[i],s=a.validate(n);if(s.success)return s}return{success:!1,error:"Value ".concat(n," does not match any schema in union")}})}},{key:"object",value:function(r){var n=e.createSchema(function(i){if(i==null)return{success:!1,error:"Expected object, received ".concat(i)};if(Ir(i)!=="object")return{success:!1,error:"Expected object, received ".concat(Ir(i))};for(var a=0,s=Object.entries(r);a<s.length;a++){var u=RP(s[a],2),d=u[0],h=u[1],f=h.validate(i[d]);if(!f.success)return{success:!1,error:"".concat(f.error," at ").concat(d)}}return{success:!0,value:i}});return n.strict=function(){return e.createSchema(function(i){var a=n.validate(i);if(!a.success)return a;var s=Object.keys(i).filter(function(u){return!(u in r)});return s.length>0?{success:!1,error:"Unexpected properties: ".concat(s.join(", "))}:a})},n}},{key:"record",value:function(r){return e.createSchema(function(n){if(n===null)return{success:!1,error:"Expected object, received null"};if(Ir(n)!=="object")return{success:!1,error:"Expected object, received ".concat(Ir(n))};for(var i=0,a=Object.keys(n);i<a.length;i++){var s=a[i];if(typeof s!="string")return{success:!1,error:"Expected string key, received ".concat(Ir(s)," at ").concat(s)};var u=r.validate(n[s]);if(!u.success)return{success:!1,error:"".concat(u.error," at key ").concat(s)}}return{success:!0,value:n}})}}])}(),$P=VP,Qp,Zb;function GP(){if(Zb)return Qp;Zb=1;var e=Sr,t=e.str2xml,r="_rels/.rels";function n(i){for(var a=i.files[r],s=a?t(a.asText()):null,u=s?s.getElementsByTagName("Relationship"):[],d={},h=0;h<u.length;h++){var f=u[h];d[f.getAttribute("Target")]=f.getAttribute("Type")}return d}return Qp={getRelsTypes:n},Qp}var em,Kb;function HP(){if(Kb)return em;Kb=1;var e=Sr,t=e.str2xml,r="[Content_Types].xml";function n(a,s,u){for(var d={},h=0;h<a.length;h++){var f=a[h],p=f.getAttribute("ContentType"),v=f.getAttribute("PartName").substr(1);d[v]=p}for(var b=function(){var T=s[k],y=T.getAttribute("ContentType"),_=T.getAttribute("Extension");u.file(/./).map(function(w){var E=w.name;E.slice(E.length-_.length)===_&&!d[E]&&E!==r&&(d[E]=y)})},k=0;k<s.length;k++)b();return d}function i(a){var s=a.files[r],u=s?t(s.asText()):null,d=u?u.getElementsByTagName("Override"):null,h=u?u.getElementsByTagName("Default"):null;return{overrides:d,defaults:h,contentTypes:s,contentTypeXml:u}}return em={collectContentTypes:n,getContentTypes:i},em}var tm,Xb;function os(){if(Xb)return tm;Xb=1;var e=yi,t=e.XTInternalError;function r(){}function n(i){return i}return tm=function(i){var a={set:r,matchers:function(){return[]},parse:r,render:r,getTraits:r,getFileType:r,nullGetter:r,optionsTransformer:n,postrender:n,errorsTransformer:n,getRenderedMap:n,preparse:n,postparse:n,on:r,resolve:r,preResolve:r};if(Object.keys(a).every(function(d){return!i[d]})){var s=new t("This module cannot be wrapped, because it doesn't define any of the necessary functions");throw s.properties={id:"module_cannot_be_wrapped",explanation:"This module cannot be wrapped, because it doesn't define any of the necessary functions"},s}for(var u in a)i[u]||(i[u]=a[u]);return i},tm}var rm,Jb;function z0(){if(Jb)return rm;Jb=1;function e(G){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},e(G)}function t(G){return i(G)||n(G)||u(G)||r()}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(G){if(typeof Symbol<"u"&&G[Symbol.iterator]!=null||G["@@iterator"]!=null)return Array.from(G)}function i(G){if(Array.isArray(G))return d(G)}function a(G,ve){return f(G)||h(G,ve)||u(G,ve)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(G,ve){if(G){if(typeof G=="string")return d(G,ve);var de={}.toString.call(G).slice(8,-1);return de==="Object"&&G.constructor&&(de=G.constructor.name),de==="Map"||de==="Set"?Array.from(G):de==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de)?d(G,ve):void 0}}function d(G,ve){(ve==null||ve>G.length)&&(ve=G.length);for(var de=0,Z=Array(ve);de<ve;de++)Z[de]=G[de];return Z}function h(G,ve){var de=G==null?null:typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(de!=null){var Z,se,F,I,X=[],Y=!0,Ne=!1;try{if(F=(de=de.call(G)).next,ve!==0)for(;!(Y=(Z=F.call(de)).done)&&(X.push(Z.value),X.length!==ve);Y=!0);}catch(Le){Ne=!0,se=Le}finally{try{if(!Y&&de.return!=null&&(I=de.return(),Object(I)!==I))return}finally{if(Ne)throw se}}return X}}function f(G){if(Array.isArray(G))return G}function p(G,ve){var de=Object.keys(G);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(G);ve&&(Z=Z.filter(function(se){return Object.getOwnPropertyDescriptor(G,se).enumerable})),de.push.apply(de,Z)}return de}function v(G){for(var ve=1;ve<arguments.length;ve++){var de=arguments[ve]!=null?arguments[ve]:{};ve%2?p(Object(de),!0).forEach(function(Z){b(G,Z,de[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(de)):p(Object(de)).forEach(function(Z){Object.defineProperty(G,Z,Object.getOwnPropertyDescriptor(de,Z))})}return G}function b(G,ve,de){return(ve=k(ve))in G?Object.defineProperty(G,ve,{value:de,enumerable:!0,configurable:!0,writable:!0}):G[ve]=de,G}function k(G){var ve=S(G,"string");return e(ve)=="symbol"?ve:ve+""}function S(G,ve){if(e(G)!="object"||!G)return G;var de=G[Symbol.toPrimitive];if(de!==void 0){var Z=de.call(G,ve);if(e(Z)!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ve==="string"?String:Number)(G)}var T=Sr,y=T.getRightOrNull,_=T.getRight,w=T.getLeft,E=T.getLeftOrNull,N=T.chunkBy,M=T.isTagStart,B=T.isTagEnd,D=T.isContent,A=T.last,H=T.first,te=yi,z=te.XTTemplateError,ae=te.throwExpandNotFound,P=te.getLoopPositionProducesInvalidXMLError;function ce(G,ve){if(G.length===0)return!1;var de=A(G).substr(1);return de.indexOf(ve)===0}function fe(G){for(var ve=[],de=0;de<G.length;de++){var Z=G[de],se=Z.position,F=Z.value,I=Z.tag;I&&(se==="end"?ce(ve,I)?ve.pop():ve.push(F):se==="start"&&ve.push(F))}return ve}function re(G,ve){for(var de=0;de<ve.length;de++){var Z=ve[de];if(Z.indexOf("<".concat(G))===0)return!0}return!1}function ue(G,ve,de){var Z=G.slice(ve[0].offset,ve[1].offset),se=fe(Z),F=se.filter(function(Le){return Le[1]==="/"}).length,I=se.filter(function(Le){return Le[1]!=="/"&&Le[Le.length-2]!=="/"}).length;if(F!==I)return{error:P({tag:H(ve).part.value,offset:[H(ve).part.offset,A(ve).part.offset]})};for(var X=function(){var Me=de[Ne],j=Me.contains,K=Me.expand,W=Me.onlyTextInTag;if(re(j,se)){if(W){var V=E(G,j,ve[0].offset),q=y(G,j,ve[1].offset);if(V===null||q===null)return 0;var ie=N(G.slice(V,q),function(Pe){return M(j,Pe)?"start":B(j,Pe)?"end":null}),ye=H(ie),we=A(ie),he=ye.filter(D),je=we.filter(D);if(he.length!==1||je.length!==1)return 0}return{v:{value:K}}}},Y,Ne=0;Ne<de.length;Ne++)if(Y=X(),Y!==0&&Y)return Y.v;return{}}function O(G,ve,de,Z){var se=G.expandTo||Z.expandTo;if(se){var F,I;try{I=w(de,se,ve),F=_(de,se,ve)}catch(Ne){var X=v({part:G,rootError:Ne,postparsed:de,expandTo:se,index:ve},Z.error);if(Z.onError){var Y=Z.onError(X);if(Y==="ignore")return}ae(X)}return[I,F]}}function ne(G,ve,de,Z){var se=a(G,2),F=se[0],I=se[1],X=de.indexOf(ve),Y=de.slice(F,X),Ne=de.slice(X+1,I+1),Le=Z.getInner({postparse:Z.postparse,index:X,part:ve,leftParts:Y,rightParts:Ne,left:F,right:I,postparsed:de});return Le.length||(Le.expanded=[Y,Ne],Le=[Le]),{left:F,right:I,inner:Le}}function J(G,ve){var de=[];G.errors&&(de=G.errors,G=G.postparsed);for(var Z=[],se=0,F=G.length;se<F;se++){var I=G[se];if(I.type==="placeholder"&&I.module===ve.moduleName&&!I.subparsed&&!I.expanded)try{var X=O(I,se,G,ve);if(!X)continue;var Y=a(X,2),Ne=Y[0],Le=Y[1];Z.push({left:Ne,right:Le,part:I,i:se,leftPart:G[Ne],rightPart:G[Le]})}catch(we){de.push(we)}}Z.sort(function(we,he){return we.left===he.left?he.part.lIndex<we.part.lIndex?1:-1:he.left<we.left?1:-1});for(var Me=-1,j=0,K=0,W=Z.length;K<W;K++){var V,q=Z[K];if(Me=Math.max(Me,K>0?Z[K-1].right:0),!(q.left<Me)){var ie=void 0;try{ie=ne([q.left+j,q.right+j],q.part,G,ve)}catch(we){if(ve.onError){var ye=ve.onError(v({part:q.part,rootError:we,postparsed:G,expandOne:ne},ve.errors));if(ye==="ignore")continue}if(we instanceof z)de.push(we);else throw we}ie&&(j+=ie.inner.length-(ie.right+1-ie.left),(V=G).splice.apply(V,[ie.left,ie.right+1-ie.left].concat(t(ie.inner))))}}return{postparsed:G,errors:de}}return rm={expandToOne:J,getExpandToDefault:ue},rm}var nm,Yb;function U0(){if(Yb)return nm;Yb=1;var e="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml",t="application/vnd.ms-word.document.macroEnabled.main+xml",r="application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml",n="application/vnd.ms-word.template.macroEnabledTemplate.main+xml",i="application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",a="application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml",s="application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml",u="application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",d="application/vnd.openxmlformats-officedocument.presentationml.slide+xml",h="application/vnd.openxmlformats-officedocument.presentationml.slideMaster+xml",f="application/vnd.openxmlformats-officedocument.presentationml.slideLayout+xml",p="application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml",v="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",b="application/vnd.ms-excel.sheet.macroEnabled.main+xml",k="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",S=[e,t,r,n],T={main:S,docx:[i].concat(S,[u,a,s]),pptx:[d,h,f,p],xlsx:[v,b,k]};return nm=T,nm}var im,Qb;function WC(){if(Qb)return im;Qb=1;var e="application/vnd.openxmlformats-package.core-properties+xml",t="application/vnd.openxmlformats-officedocument.extended-properties+xml",r="application/vnd.openxmlformats-officedocument.custom-properties+xml",n="application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml",i="application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml",a="application/vnd.ms-office.drawingml.diagramDrawing+xml";return im={settingsContentType:n,coreContentType:e,appContentType:t,customContentType:r,diagramDataContentType:i,diagramDrawingContentType:a},im}var am,e_;function WP(){if(e_)return am;e_=1;function e(w){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},e(w)}function t(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function r(w,E){for(var N=0;N<E.length;N++){var M=E[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,i(M.key),M)}}function n(w,E,N){return E&&r(w.prototype,E),Object.defineProperty(w,"prototype",{writable:!1}),w}function i(w){var E=a(w,"string");return e(E)=="symbol"?E:E+""}function a(w,E){if(e(w)!="object"||!w)return w;var N=w[Symbol.toPrimitive];if(N!==void 0){var M=N.call(w,E);if(e(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)}var s=Sr,u=s.pushArray,d=os(),h=U0(),f=WC(),p=f.settingsContentType,v=f.coreContentType,b=f.appContentType,k=f.customContentType,S=f.diagramDataContentType,T=f.diagramDrawingContentType,y=[p,v,b,k,S,T],_=function(){function w(){t(this,w),this.name="Common"}return n(w,[{key:"getFileType",value:function(N){var M=N.doc,B=M.invertedContentTypes;if(B){for(var D=0;D<y.length;D++){var A=y[D];B[A]&&u(M.targets,B[A])}for(var H=["docx","pptx","xlsx"],te,z=0;z<H.length;z++){for(var ae=H[z],P=h[ae],ce=0;ce<P.length;ce++){var fe=P[ce];if(B[fe])for(var re=0,ue=B[fe];re<ue.length;re++){var O=ue[re];M.relsTypes[O]&&["http://purl.oclc.org/ooxml/officeDocument/relationships/officeDocument","http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument"].indexOf(M.relsTypes[O])===-1||(te=ae,(h.main.indexOf(fe)!==-1||fe===h.pptx[0])&&(M.textTarget||(M.textTarget=O)),te!=="xlsx"&&M.targets.push(O))}}if(te)return te}return te}}}])}();return am=function(){return d(new _)},am}var om,t_;function ZP(){if(t_)return om;t_=1;function e(T){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},e(T)}function t(T,y){if(!(T instanceof y))throw new TypeError("Cannot call a class as a function")}function r(T,y){for(var _=0;_<y.length;_++){var w=y[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(T,i(w.key),w)}}function n(T,y,_){return y&&r(T.prototype,y),Object.defineProperty(T,"prototype",{writable:!1}),T}function i(T){var y=a(T,"string");return e(y)=="symbol"?y:y+""}function a(T,y){if(e(T)!="object"||!T)return T;var _=T[Symbol.toPrimitive];if(_!==void 0){var w=_.call(T,y);if(e(w)!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)}var s=yi,u=s.getScopeParserExecutionError,d=P0,h=d.last,f=Sr,p=f.concatArrays;function v(T,y){for(var _=T.length>>>0,w,E=0;E<_;E++)if(w=T[E],y.call(this,w,E,T))return w}function b(T,y,_){var w=this,E=this.scopeList[_];if(this.root.finishedResolving){for(var N=this.resolved,M=function(){var z=w.scopeLindex[B];N=v(N,function(ae){return ae.lIndex===z}),N=N.value[w.scopePathItem[B]]},B=this.resolveOffset,D=this.scopePath.length;B<D;B++)M();return v(N,function(te){return y.part.lIndex===te.lIndex}).value}var A,H;!this.cachedParsers||!y.part?H=this.parser(T,{tag:y.part,scopePath:this.scopePath}):this.cachedParsers[y.part.lIndex]?H=this.cachedParsers[y.part.lIndex]:H=this.cachedParsers[y.part.lIndex]=this.parser(T,{tag:y.part,scopePath:this.scopePath});try{A=H.get(E,this.getContext(y,_))}catch(te){throw u({tag:T,scope:E,error:te,offset:y.part.offset})}return A==null&&_>0?b.call(this,T,y,_-1):A}function k(T,y,_){var w=this,E=this.scopeList[_],N;return!this.cachedParsers||!y.part?N=this.parser(T,{tag:y.part,scopePath:this.scopePath}):this.cachedParsers[y.part.lIndex]?N=this.cachedParsers[y.part.lIndex]:N=this.cachedParsers[y.part.lIndex]=this.parser(T,{tag:y.part,scopePath:this.scopePath}),Promise.resolve().then(function(){return N.get(E,w.getContext(y,_))}).catch(function(M){throw u({tag:T,scope:E,error:M,offset:y.part.offset})}).then(function(M){return M==null&&_>0?k.call(w,T,y,_-1):M})}var S=function(){function T(y){t(this,T),this.root=y.root||this,this.resolveOffset=y.resolveOffset||0,this.scopePath=y.scopePath,this.scopePathItem=y.scopePathItem,this.scopePathLength=y.scopePathLength,this.scopeList=y.scopeList,this.scopeType="",this.scopeTypes=y.scopeTypes,this.scopeLindex=y.scopeLindex,this.parser=y.parser,this.resolved=y.resolved,this.cachedParsers=y.cachedParsers}return n(T,[{key:"loopOver",value:function(_,w,E,N){return this.loopOverValue(this.getValue(_,N),w,E)}},{key:"functorIfInverted",value:function(_,w,E,N,M){return _&&w(E,N,M),_}},{key:"isValueFalsy",value:function(_,w){return _==null||!_||w==="[object Array]"&&_.length===0}},{key:"loopOverValue",value:function(_,w,E){this.root.finishedResolving&&(E=!1);var N=Object.prototype.toString.call(_);if(this.isValueFalsy(_,N))return this.scopeType=!1,this.functorIfInverted(E,w,h(this.scopeList),0,1);if(N==="[object Array]"){this.scopeType="array";for(var M=0;M<_.length;M++)this.functorIfInverted(!E,w,_[M],M,_.length);return!0}return N==="[object Object]"?(this.scopeType="object",this.functorIfInverted(!E,w,_,0,1)):this.functorIfInverted(!E,w,h(this.scopeList),0,1)}},{key:"getValue",value:function(_,w){var E=b.call(this,_,w,this.scopeList.length-1);return typeof E=="function"?E(this.scopeList[this.scopeList.length-1],this):E}},{key:"getValueAsync",value:function(_,w){var E=this;return k.call(this,_,w,this.scopeList.length-1).then(function(N){return typeof N=="function"?N(E.scopeList[E.scopeList.length-1],E):N})}},{key:"getContext",value:function(_,w){return{num:w,meta:_,scopeList:this.scopeList,resolved:this.resolved,scopePath:this.scopePath,scopeTypes:this.scopeTypes,scopePathItem:this.scopePathItem,scopePathLength:this.scopePathLength}}},{key:"createSubScopeManager",value:function(_,w,E,N,M){return new T({root:this.root,resolveOffset:this.resolveOffset,resolved:this.resolved,parser:this.parser,cachedParsers:this.cachedParsers,scopeTypes:p([this.scopeTypes,[this.scopeType]]),scopeList:p([this.scopeList,[_]]),scopePath:p([this.scopePath,[w]]),scopePathItem:p([this.scopePathItem,[E]]),scopePathLength:p([this.scopePathLength,[M]]),scopeLindex:p([this.scopeLindex,[N.lIndex]])})}}])}();return om=function(T){return T.scopePath=[],T.scopePathItem=[],T.scopePathLength=[],T.scopeTypes=[],T.scopeLindex=[],T.scopeList=[T.tags],new S(T)},om}var sm,r_;function ZC(){if(r_)return sm;r_=1;function e(Z){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},e(Z)}function t(Z,se){return s(Z)||a(Z,se)||n(Z,se)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(Z,se){if(Z){if(typeof Z=="string")return i(Z,se);var F={}.toString.call(Z).slice(8,-1);return F==="Object"&&Z.constructor&&(F=Z.constructor.name),F==="Map"||F==="Set"?Array.from(Z):F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F)?i(Z,se):void 0}}function i(Z,se){(se==null||se>Z.length)&&(se=Z.length);for(var F=0,I=Array(se);F<se;F++)I[F]=Z[F];return I}function a(Z,se){var F=Z==null?null:typeof Symbol<"u"&&Z[Symbol.iterator]||Z["@@iterator"];if(F!=null){var I,X,Y,Ne,Le=[],Me=!0,j=!1;try{if(Y=(F=F.call(Z)).next,se!==0)for(;!(Me=(I=Y.call(F)).done)&&(Le.push(I.value),Le.length!==se);Me=!0);}catch(K){j=!0,X=K}finally{try{if(!Me&&F.return!=null&&(Ne=F.return(),Object(Ne)!==Ne))return}finally{if(j)throw X}}return Le}}function s(Z){if(Array.isArray(Z))return Z}function u(Z,se){var F=Object.keys(Z);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(Z);se&&(I=I.filter(function(X){return Object.getOwnPropertyDescriptor(Z,X).enumerable})),F.push.apply(F,I)}return F}function d(Z){for(var se=1;se<arguments.length;se++){var F=arguments[se]!=null?arguments[se]:{};se%2?u(Object(F),!0).forEach(function(I){h(Z,I,F[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(F)):u(Object(F)).forEach(function(I){Object.defineProperty(Z,I,Object.getOwnPropertyDescriptor(F,I))})}return Z}function h(Z,se,F){return(se=f(se))in Z?Object.defineProperty(Z,se,{value:F,enumerable:!0,configurable:!0,writable:!0}):Z[se]=F,Z}function f(Z){var se=p(Z,"string");return e(se)=="symbol"?se:se+""}function p(Z,se){if(e(Z)!="object"||!Z)return Z;var F=Z[Symbol.toPrimitive];if(F!==void 0){var I=F.call(Z,se);if(e(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(se==="string"?String:Number)(Z)}var v=yi,b=v.getUnclosedTagException,k=v.getUnopenedTagException,S=v.getDuplicateOpenTagException,T=v.getDuplicateCloseTagException,y=v.throwMalformedXml,_=v.throwXmlInvalid,w=v.XTTemplateError,E=Sr,N=E.isTextStart,M=E.isTextEnd,B=E.wordToUtf8,D=E.pushArray,A=0,H=1,te=2,z=3;function ae(Z,se){return Z[0]<=se.offset&&se.offset<Z[1]}function P(Z,se){return N(Z)?(se&&y(),!0):M(Z)?(se||y(),!1):se}function ce(Z){var se="",F=1,I=Z.indexOf(" ");return Z[Z.length-2]==="/"?(se="selfclosing",I===-1&&(I=Z.length-2)):Z[1]==="/"?(F=2,se="end",I===-1&&(I=Z.length-1)):(se="start",I===-1&&(I=Z.length-1)),{tag:Z.slice(F,I),position:se}}function fe(Z,se,F){for(var I=0,X=Z.length,Y={},Ne=0;Ne<se.length;Ne++){var Le=se[Ne];Y[Le]=!0}for(var Me=0;Me<F.length;Me++){var j=F[Me];Y[j]=!1}for(var K=[];I<X&&(I=Z.indexOf("<",I),I!==-1);){var W=I,V=Z.indexOf("<",I+1);I=Z.indexOf(">",I),(I===-1||V!==-1&&I>V)&&_(Z,W);var q=Z.slice(W,I+1),ie=ce(q),ye=ie.tag,we=ie.position,he=Y[ye];he!=null&&K.push({type:"tag",position:we,text:he,offset:W,value:q,tag:ye})}return K}function re(Z,se,F){var I=[],X=!1,Y={offset:0},Ne,Le=Z.reduce(function(j,K){var W=K.position,V=K.offset,q=Y.offset,ie=Y.length;if(Ne=se.substr(q,V-q),X&&W==="start"){if(q+ie===V&&(Ne=se.substr(q,V-q+ie+4),!F.allowUnclosedTag))return I.push(S({xtag:Ne,offset:q})),Y=K,j.push(d(d({},K),{},{error:!0})),j;if(!F.allowUnclosedTag)return I.push(b({xtag:B(Ne),offset:q})),Y=K,j.push(d(d({},K),{},{error:!0})),j;j.pop()}return!X&&W==="end"?F.allowUnopenedTag?j:q+ie===V?(Ne=se.substr(q-4,V-q+ie+4),I.push(T({xtag:Ne,offset:q})),Y=K,j.push(d(d({},K),{},{error:!0})),j):(I.push(k({xtag:Ne,offset:V})),Y=K,j.push(d(d({},K),{},{error:!0})),j):(X=W==="start",Y=K,j.push(K),j)},[]);if(X){var Me=Y.offset;Ne=se.substr(Me,se.length-Me),F.allowUnclosedTag?Le.pop():I.push(b({xtag:B(Ne),offset:Me}))}return{delimiterWithErrors:Le,errors:I}}function ue(Z,se){return Z===-1&&se===-1?A:Z===se?H:Z===-1||se===-1?se<Z?te:z:Z<se?te:z}function O(Z){var se=Z.split(" ");if(se.length!==2){var F=new w("New Delimiters cannot be parsed");throw F.properties={id:"change_delimiters_invalid",explanation:"Cannot parser delimiters"},F}var I=t(se,2),X=I[0],Y=I[1];if(X.length===0||Y.length===0){var Ne=new w("New Delimiters cannot be parsed");throw Ne.properties={id:"change_delimiters_invalid",explanation:"Cannot parser delimiters"},Ne}return[X,Y]}function ne(Z,se,F){var I=[],X=se.start,Y=se.end,Ne=-1,Le=!1;if(X==null&&Y==null)return[];for(;;){var Me=Z.indexOf(X,Ne+1),j=Z.indexOf(Y,Ne+1),K=null,W=void 0,V=ue(Me,j);switch(V===H&&(V=Le?z:te),V){case A:return I;case z:Le=!1,Ne=j,K="end",W=Y.length;break;case te:Le=!0,Ne=Me,K="start",W=X.length;break}if(F.changeDelimiterPrefix&&V===te&&Z[Ne+X.length]===F.changeDelimiterPrefix){I.push({offset:Me,position:"start",length:X.length,changedelimiter:!0});var q=Z.indexOf(F.changeDelimiterPrefix,Ne+X.length+1),ie=Z.indexOf(Y,q+1);I.push({offset:ie,position:"end",length:Y.length,changedelimiter:!0});var ye=Z.substr(Ne+X.length+1,q-Ne-X.length-1),we=O(ye),he=t(we,2);X=he[0],Y=he[1],Ne=ie;continue}I.push({offset:Ne,position:K,length:W})}}function J(Z,se,F){var I=Z.map(function(q){return q.value}).join(""),X=ne(I,se,F),Y=0,Ne=Z.map(function(q){return Y+=q.value.length,{offset:Y-q.value.length,lIndex:q.lIndex}}),Le=re(X,I,F),Me=Le.delimiterWithErrors,j=Le.errors,K=0,W=0,V=Ne.map(function(q,ie){for(var ye=q.offset,we=[ye,ye+Z[ie].value.length],he=Z[ie].value,je=[];W<Me.length&&ae(we,Me[W]);)je.push(Me[W]),W++;var Pe=[],Oe=0;K>0&&(Oe=K,K=0);for(var Ue=0;Ue<je.length;Ue++){var Ye=je[Ue],et=he.substr(Oe,Ye.offset-ye-Oe);if(Ye.changedelimiter){Ye.position==="start"?et.length>0&&Pe.push({type:"content",value:et}):Oe=Ye.offset-ye+Ye.length;continue}et.length>0&&(Pe.push({type:"content",value:et}),Oe+=et.length);var Wt={type:"delimiter",position:Ye.position,offset:Oe+ye};Pe.push(Wt),Oe=Ye.offset-ye+Ye.length}K=Oe-he.length;var Ar=he.substr(Oe);return Ar.length>0&&Pe.push({type:"content",value:Ar}),Pe},this);return{parsed:V,errors:j}}function G(Z){return Z.type==="content"&&Z.position==="insidetag"}function ve(Z){return Z.filter(G)}function de(Z,se){for(var F=!1,I=0;I<Z.length;I++){var X=Z[I];F=P(X,F),X.type==="content"&&(X.position=F?"insidetag":"outsidetag"),se!=="text"&&G(X)&&(X.value=X.value.replace(/>/g,"&gt;"))}}return sm={parseDelimiters:J,parse:function(se,F,I,X){de(se,X);for(var Y=J(ve(se),F,I),Ne=Y.parsed,Le=Y.errors,Me=[],j=0,K=0,W=0;W<se.length;W++){var V=se[W];if(G(V)){for(var q=0,ie=Ne[j];q<ie.length;q++){var ye=ie[q];ye.type==="content"&&(ye.position="insidetag"),ye.lIndex=K++}D(Me,Ne[j]),j++}else V.lIndex=K++,Me.push(V)}return{errors:Le,lexed:Me}},xmlparse:function(se,F){for(var I=fe(se,F.text,F.other),X=0,Y=[],Ne=0;Ne<I.length;Ne++){var Le=I[Ne];se.length>X&&Le.offset-X>0&&Y.push({type:"content",value:se.substr(X,Le.offset-X)}),X=Le.offset+Le.value.length,delete Le.offset,Y.push(Le)}return se.length>X&&Y.push({type:"content",value:se.substr(X)}),Y}},sm}var lm,n_;function KP(){if(n_)return lm;n_=1;function e(d){return i(d)||n(d)||r(d)||t()}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(d,h){if(d){if(typeof d=="string")return a(d,h);var f={}.toString.call(d).slice(8,-1);return f==="Object"&&d.constructor&&(f=d.constructor.name),f==="Map"||f==="Set"?Array.from(d):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?a(d,h):void 0}}function n(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function i(d){if(Array.isArray(d))return a(d)}function a(d,h){(h==null||h>d.length)&&(h=d.length);for(var f=0,p=Array(h);f<h;f++)p[f]=d[f];return p}function s(d){return d.type==="placeholder"}function u(d){var h={},f=[{items:d.filter(s),parents:[],path:[]}];function p(fe,re,ue){ue.length&&f.push({items:ue,parents:[].concat(e(re.parents),[fe]),path:fe.dataBound!==!1&&!fe.attrParsed&&fe.value&&!fe.attrParsed?[].concat(e(re.path),[fe.value]):e(re.path)})}function v(fe,re){for(var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:re.length,O=fe,ne=0;ne<ue;ne++)O=O[re[ne]];return O}function b(fe,re){for(var ue=re.length,O=0;O<re.length;O++){var ne=re[O],J=typeof ne.lIndex=="number"?ne.lIndex:parseInt(ne.lIndex.split("-")[0],10);J>fe.lIndex&&ue--}return ue}for(;f.length>0;)for(var k=f.pop(),S=v(h,k.path),T=0,y=k.items;T<y.length;T++){var _,w,E=y[T];if(E.attrParsed){for(var N in E.attrParsed)p(E,k,E.attrParsed[N].filter(s));continue}if(E.subparsed){if(E.dataBound!==!1){var M,B;(M=S)[B=E.value]||(M[B]={})}p(E,k,E.subparsed.filter(s));continue}if(E.cellParsed){for(var D=0,A=E.cellPostParsed;D<A.length;D++){var H=A[D];if(H.type==="placeholder"){if(H.module==="pro-xml-templating/xls-module-loop")continue;if(H.subparsed){var te,z;(te=S)[z=H.value]||(te[z]={}),p(H,k,H.subparsed.filter(s))}else{var ae,P,ce=b(E,k.parents);S=v(h,k.path,ce),(ae=S)[P=H.value]||(ae[P]={})}}}continue}E.dataBound!==!1&&((_=S)[w=E.value]||(_[w]={}))}return h}return lm={getTags:u,isPlaceholder:s},lm}var um,i_;function XP(){if(i_)return um;i_=1;var e=Sr,t=e.pushArray;function r(i,a){return a instanceof Error?t(Object.getOwnPropertyNames(a),["stack"]).reduce(function(s,u){return s[u]=a[u],u==="stack"&&(s[u]=a[u].toString()),s},{}):a}function n(i,a){if(console.log(JSON.stringify({error:i},r,a==="json"?2:null)),i.properties&&i.properties.errors instanceof Array){var s=i.properties.errors.map(function(u){return u.properties.explanation}).join(`
`);console.log("errorMessages",s)}}return um=n,um}var cm,a_;function KC(){if(a_)return cm;a_=1;var e=Sr,t=e.pregMatchAll;return cm=function(n,i){var a={content:n},s=i.join("|"),u=new RegExp("(?:(<(?:".concat(s,")[^>]*>)([^<>]*)</(?:").concat(s,")>)|(<(?:").concat(s,")[^>]*/>)"),"g");return a.matches=t(u,a.content),a},cm}var dm,o_;function JP(){if(o_)return dm;o_=1;function e(s){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},e(s)}var t=new RegExp("","g");function r(s){return s.replace(t," ")}function n(s,u){var d=e(s);if(d==="string")return r(u.substr(0,s.length))===s;if(s instanceof RegExp)return s.test(r(u));if(d==="function")return!!s(u)}function i(s,u){var d=e(s);if(d==="string")return r(u).substr(s.length);if(s instanceof RegExp)return r(u).match(s)[1];if(d==="function")return s(u)}function a(s,u){var d=e(s);if(d==="string")return[u,r(u).substr(s.length)];if(s instanceof RegExp)return r(u).match(s);if(d==="function")return[u,s(u)]}return dm={match:n,getValue:i,getValues:a},dm}var hm,s_;function YP(){if(s_)return hm;s_=1;function e(B){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},e(B)}function t(B,D){var A=Object.keys(B);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(B);D&&(H=H.filter(function(te){return Object.getOwnPropertyDescriptor(B,te).enumerable})),A.push.apply(A,H)}return A}function r(B){for(var D=1;D<arguments.length;D++){var A=arguments[D]!=null?arguments[D]:{};D%2?t(Object(A),!0).forEach(function(H){n(B,H,A[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(A)):t(Object(A)).forEach(function(H){Object.defineProperty(B,H,Object.getOwnPropertyDescriptor(A,H))})}return B}function n(B,D,A){return(D=i(D))in B?Object.defineProperty(B,D,{value:A,enumerable:!0,configurable:!0,writable:!0}):B[D]=A,B}function i(B){var D=a(B,"string");return e(D)=="symbol"?D:D+""}function a(B,D){if(e(B)!="object"||!B)return B;var A=B[Symbol.toPrimitive];if(A!==void 0){var H=A.call(B,D);if(e(H)!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(B)}function s(B,D){return p(B)||f(B,D)||d(B,D)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(B,D){if(B){if(typeof B=="string")return h(B,D);var A={}.toString.call(B).slice(8,-1);return A==="Object"&&B.constructor&&(A=B.constructor.name),A==="Map"||A==="Set"?Array.from(B):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?h(B,D):void 0}}function h(B,D){(D==null||D>B.length)&&(D=B.length);for(var A=0,H=Array(D);A<D;A++)H[A]=B[A];return H}function f(B,D){var A=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(A!=null){var H,te,z,ae,P=[],ce=!0,fe=!1;try{if(z=(A=A.call(B)).next,D!==0)for(;!(ce=(H=z.call(A)).done)&&(P.push(H.value),P.length!==D);ce=!0);}catch(re){fe=!0,te=re}finally{try{if(!ce&&A.return!=null&&(ae=A.return(),Object(ae)!==ae))return}finally{if(fe)throw te}}return P}}function p(B){if(Array.isArray(B))return B}var v=Sr,b=v.wordToUtf8,k=v.pushArray,S=JP(),T=S.match,y=S.getValue,_=S.getValues;function w(B,D){for(var A=[],H=0;H<B.length;H++){var te=B[H];if(te.matchers){var z=te.matchers(D);if(!(z instanceof Array))throw new Error("module matcher returns a non array");k(A,z)}}return A}function E(B,D,A){for(var H=[],te=0;te<B.length;te++){var z=B[te],ae=s(z,2),P=ae[0],ce=ae[1],fe=z[2]||{};if(A.match(P,D)){var re=A.getValues(P,D);if(typeof fe=="function"&&(fe=fe(re)),!fe.value){var ue=s(re,2);fe.value=ue[1]}H.push(r({type:"placeholder",prefix:P,module:ce,onMatch:fe.onMatch,priority:fe.priority},fe))}}return H}function N(B,D){var A=D.modules,H=D.startOffset,te=D.lIndex,z;D.offset=H,D.match=T,D.getValue=y,D.getValues=_;var ae=w(A,D),P=E(ae,B,D);if(P.length>0){for(var ce=null,fe=0;fe<P.length;fe++){var re=P[fe];re.priority||(re.priority=-re.value.length),(!ce||re.priority>ce.priority)&&(ce=re)}return ce.offset=H,delete ce.priority,ce.endLindex=te,ce.lIndex=te,ce.raw=B,ce.onMatch&&ce.onMatch(ce),delete ce.onMatch,delete ce.prefix,ce}for(var ue=0;ue<A.length;ue++){var O=A[ue];if(z=O.parse(B,D),z)return z.offset=H,z.endLindex=te,z.lIndex=te,z.raw=B,z}return{type:"placeholder",value:B,offset:H,endLindex:te,lIndex:te}}var M={preparse:function(D,A,H){function te(z,ae){for(var P=0;P<A.length;P++){var ce=A[P];z=ce.preparse(z,ae)||z}return z}return te(D,H)},parse:function(D,A,H){var te=!1,z="",ae,P=[],ce=H.fileTypeConfig.droppedTagsInsidePlaceholder||[];return D.reduce(function(fe,re){return re.type==="delimiter"?(te=re.position==="start",re.position==="end"&&(H.parse=function(ue){return N(ue,r(r(r({},H),re),{},{startOffset:ae,modules:A}))},fe.push(H.parse(b(z))),k(fe,P),P=[]),re.position==="start"&&(P=[],ae=re.offset),z="",fe):te?re.type!=="content"||re.position!=="insidetag"?(ce.indexOf(re.tag)!==-1||P.push(re),fe):(z+=re.value,fe):(fe.push(re),fe)},[])},postparse:function(D,A,H){function te(P,ce){return A.map(function(fe){return fe.getTraits(P,ce)})}var z=[];function ae(P,ce){for(var fe=P,re=0;re<A.length;re++){var ue=A[re],O=ue.postparse(fe,r(r({},ce),{},{postparse:function(J,G){return ae(J,r(r({},ce),G))},getTraits:te}));if(O!=null){if(O.errors){k(z,O.errors),fe=O.postparsed;continue}fe=O}}return fe}return{postparsed:ae(D,H),errors:z}}};return hm=M,hm}var fm,l_;function XC(){if(l_)return fm;l_=1;function e(t,r){if(t.lIndex==null)return null;var n=r.scopeManager.scopePathItem;t.parentPart&&(n=n.slice(0,n.length-1));var i=r.filePath+"@"+t.lIndex.toString()+"-"+n.join("-");return i}return fm=e,fm}var pm,u_;function QP(){if(u_)return pm;u_=1;var e=yi,t=e.throwUnimplementedTagType,r=e.XTScopeParserError,n=Sr,i=n.pushArray,a=XC();function s(d,h){for(var f=0,p=h.modules;f<p.length;f++){var v=p[f],b=v.render(d,h);if(b)return b}return!1}function u(d){var h=d.baseNullGetter,f=d.compiled,p=d.scopeManager;d.nullGetter=function(N,M){return h(N,M||p)};for(var v=[],b=[],k=0,S=f.length;k<S;k++){var T=f[k];d.index=k,d.resolvedId=a(T,d);var y=void 0;try{y=s(T,d)}catch(N){if(N instanceof r){v.push(N),b.push(T);continue}throw N}if(y){y.errors&&i(v,y.errors),b.push(y);continue}if(T.type==="content"||T.type==="tag"){b.push(T);continue}t(T,k)}for(var _=[],w=0;w<b.length;w++){var E=b[w].value;E instanceof Array?i(_,E):E&&_.push(E)}return{errors:v,parts:_}}return pm=u,pm}var mm,c_;function e4(){if(c_)return mm;c_=1;function e(r){var n,i,a,s,u=0,d=r.length;for(a=0;a<d;a++)n=r.charCodeAt(a),(n&64512)===55296&&a+1<d&&(i=r.charCodeAt(a+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),a++)),u+=n<128?1:n<2048?2:n<65536?3:4;var h=new Uint8Array(u);for(s=0,a=0;s<u;a++)n=r.charCodeAt(a),(n&64512)===55296&&a+1<d&&(i=r.charCodeAt(a+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),a++)),n<128?h[s++]=n:n<2048?(h[s++]=192|n>>>6,h[s++]=128|n&63):n<65536?(h[s++]=224|n>>>12,h[s++]=128|n>>>6&63,h[s++]=128|n&63):(h[s++]=240|n>>>18,h[s++]=128|n>>>12&63,h[s++]=128|n>>>6&63,h[s++]=128|n&63);return h}function t(r,n){for(var i=0,a=n.modules;i<a.length;i++){var s=a[i];r=s.postrender(r,n)}for(var u=0,d=n.joinUncorrupt(r,n),h="",f=0,p=65536,v=[],b=0,k=d.length;b<k;b++){var S=d[b];if(S.length+f>p){var T=e(h);u+=T.length,v.push(T),h=""}h+=S,f+=S.length,delete d[b]}var y=e(h);u+=y.length,v.push(y);for(var _=new Uint8Array(u),w=0,E=0;E<v.length;E++){for(var N=v[E],M=0;M<N.length;++M)_[M+w]=N[M];w+=N.length}return _}return mm=t,mm}var gm,d_;function t4(){if(d_)return gm;d_=1;function e(p){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},e(p)}function t(p,v){var b=Object.keys(p);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(p);v&&(k=k.filter(function(S){return Object.getOwnPropertyDescriptor(p,S).enumerable})),b.push.apply(b,k)}return b}function r(p){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?t(Object(b),!0).forEach(function(k){n(p,k,b[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(b)):t(Object(b)).forEach(function(k){Object.defineProperty(p,k,Object.getOwnPropertyDescriptor(b,k))})}return p}function n(p,v,b){return(v=i(v))in p?Object.defineProperty(p,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[v]=b,p}function i(p){var v=a(p,"string");return e(v)=="symbol"?v:v+""}function a(p,v){if(e(p)!="object"||!p)return p;var b=p[Symbol.toPrimitive];if(b!==void 0){var k=b.call(p,v);if(e(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(p)}var s=Sr,u=s.pushArray,d=XC();function h(p,v){for(var b=0,k=v.modules;b<k.length;b++){var S=k[b],T=S.resolve(p,v);if(T)return T}return!1}function f(p){var v=[],b=p.baseNullGetter,k=p.compiled,S=p.scopeManager;p.nullGetter=function(y,_){return b(y,_||S)},p.resolved=v;var T=[];return Promise.all(k.filter(function(y){return["content","tag"].indexOf(y.type)===-1}).reduce(function(y,_){var w=h(_,r(r({},p),{},{resolvedId:d(_,p)})),E;if(w)E=w.then(function(N){v.push({tag:_.value,lIndex:_.lIndex,value:N})});else if(_.type==="placeholder")E=S.getValueAsync(_.value,{part:_}).then(function(N){return N??p.nullGetter(_)}).then(function(N){return v.push({tag:_.value,lIndex:_.lIndex,value:N}),N});else return;return y.push(E.catch(function(N){N instanceof Array?u(T,N):T.push(N)})),y},[])).then(function(){return{errors:T,resolved:v}})}return gm=f,gm}var vm,h_;function r4(){if(h_)return vm;h_=1;var e=Sr,t=e.startsWith,r=e.endsWith,n=e.isStarting,i=e.isEnding,a=e.isWhiteSpace,s=U0();function u(h){for(var f="",p=0,v=h.length;p<v;p++){var b=h[p];a(b)||t(b,"<w:bookmarkEnd")||(r(f,"</w:tbl>")&&!t(b,"<w:p")&&!t(b,"<w:tbl")&&!t(b,"<w:sectPr")&&!t(b,"</w:ftr>")&&!t(b,"</w:hdr>")&&(b="<w:p/>".concat(b)),f=b,h[p]=b)}return h}function d(h,f){var p=f.fileTypeConfig.tagShouldContain||[],v="",b=-1;s.docx.indexOf(f.contentType)!==-1&&(h=u(h));for(var k=-1,S=0,T=p.length;S<T;S++)for(var y=p[S],_=y.tag,w=y.shouldContain,E=y.value,N=y.drop,M=y.dropParent,B=0,D=h.length;B<D;B++){var A=h[B];if(b===S){if(i(A,_))if(b=-1,M){for(var H=-1,te=k;te>0;te--)if(n(h[te],M)){H=te;break}for(var z=H;z<=h.length;z++){if(i(h[z],M)){h[z]="";break}h[z]=""}}else{for(var ae=k;ae<=B;ae++)h[ae]="";N||(h[B]=v+E+A)}v+=A;for(var P=0,ce=w.length;P<ce;P++){var fe=w[P];if(n(A,fe)){b=-1;break}}}b===-1&&n(A,_)&&A.substr(1).indexOf("<")===-1&&(A[A.length-2]==="/"?h[B]="":(k=B,b=S,v=A))}return h}return vm=d,vm}var ym,f_;function n4(){if(f_)return ym;f_=1;function e(_){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},e(_)}function t(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function r(_,w){for(var E=0;E<w.length;E++){var N=w[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(_,i(N.key),N)}}function n(_,w,E){return w&&r(_.prototype,w),Object.defineProperty(_,"prototype",{writable:!1}),_}function i(_){var w=a(_,"string");return e(w)=="symbol"?w:w+""}function a(_,w){if(e(_)!="object"||!_)return _;var E=_[Symbol.toPrimitive];if(E!==void 0){var N=E.call(_,w);if(e(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var s=Sr,u=s.pushArray,d=s.wordToUtf8,h=s.convertSpaces,f=KC(),p=ZC(),v=YP(),b=QP(),k=e4(),S=t4(),T=r4();function y(_,w){var E=f(_,w),N=E.matches.map(function(M){return M.array[2]});return d(h(N.join("")))}return ym=function(){function _(w,E){t(this,_),this.cachedParsers={},this.content=w;for(var N in E)this[N]=E[N];this.setModules({inspect:{filePath:E.filePath}})}return n(_,[{key:"resolveTags",value:function(E){var N=this;this.tags=E;var M=this.getOptions(),B=this.filePath;M.scopeManager=this.scopeManager,M.resolve=S;var D=[];return Promise.all(this.modules.map(function(A){return Promise.resolve(A.preResolve(M)).catch(function(H){D.push(H)})})).then(function(){if(D.length!==0)throw D;return S(M).then(function(A){var H=A.resolved,te=A.errors;if(te=te.map(function(z){var ae;return z instanceof Error||(z=new Error(z)),(ae=z).properties||(ae.properties={}),z.properties.file=B,z}),te.length!==0)throw te;return Promise.all(H).then(function(z){return M.scopeManager.root.finishedResolving=!0,M.scopeManager.resolved=z,N.setModules({inspect:{resolved:z,filePath:B}}),z})}).catch(function(A){throw N.errorChecker(A),A})})}},{key:"getFullText",value:function(){return y(this.content,this.fileTypeConfig.tagsXmlTextArray)}},{key:"setModules",value:function(E){for(var N=0,M=this.modules;N<M.length;N++){var B=M[N];B.set(E)}}},{key:"preparse",value:function(){this.allErrors=[],this.xmllexed=p.xmlparse(this.content,{text:this.fileTypeConfig.tagsXmlTextArray,other:this.fileTypeConfig.tagsXmlLexedArray}),this.setModules({inspect:{filePath:this.filePath,xmllexed:this.xmllexed}});var E=p.parse(this.xmllexed,this.delimiters,this.syntax,this.fileType),N=E.lexed,M=E.errors;u(this.allErrors,M),this.lexed=N,this.setModules({inspect:{filePath:this.filePath,lexed:this.lexed}});var B=this.getOptions();this.lexed=v.preparse(this.lexed,this.modules,B)}},{key:"parse",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=E.noPostParse;this.setModules({inspect:{filePath:this.filePath}});var M=this.getOptions();return this.parsed=v.parse(this.lexed,this.modules,M),this.setModules({inspect:{filePath:this.filePath,parsed:this.parsed}}),N?this:this.postparse()}},{key:"postparse",value:function(){var E=this.getOptions(),N=v.postparse(this.parsed,this.modules,E),M=N.postparsed,B=N.errors;return this.postparsed=M,this.setModules({inspect:{filePath:this.filePath,postparsed:this.postparsed}}),u(this.allErrors,B),this.errorChecker(this.allErrors),this}},{key:"errorChecker",value:function(E){for(var N=0,M=E;N<M.length;N++){var B=M[N];B.properties||(B.properties={}),B.properties.file=this.filePath}for(var D=0,A=this.modules;D<A.length;D++){var H=A[D];E=H.errorsTransformer(E)}}},{key:"baseNullGetter",value:function(E,N){for(var M=null,B=0,D=this.modules;B<D.length;B++){var A=D[B];M==null&&(M=A.nullGetter(E,N,this))}return M??this.nullGetter(E,N)}},{key:"getOptions",value:function(){return{compiled:this.postparsed,cachedParsers:this.cachedParsers,tags:this.tags,modules:this.modules,parser:this.parser,contentType:this.contentType,relsType:this.relsType,baseNullGetter:this.baseNullGetter.bind(this),filePath:this.filePath,fileTypeConfig:this.fileTypeConfig,fileType:this.fileType,linebreaks:this.linebreaks,stripInvalidXMLChars:this.stripInvalidXMLChars}}},{key:"render",value:function(E){this.filePath=E;var N=this.getOptions();N.resolved=this.scopeManager.resolved,N.scopeManager=this.scopeManager,N.render=b,N.joinUncorrupt=T;var M=b(N),B=M.errors,D=M.parts;return B.length>0?(this.allErrors=B,this.errorChecker(B),this):(this.content=k(D,N),this.setModules({inspect:{filePath:this.filePath,content:this.content}}),this)}}])}(),ym}var xm,p_;function i4(){if(p_)return xm;p_=1;function e(j){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},e(j)}function t(j,K){var W=Object.keys(j);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(j);K&&(V=V.filter(function(q){return Object.getOwnPropertyDescriptor(j,q).enumerable})),W.push.apply(W,V)}return W}function r(j){for(var K=1;K<arguments.length;K++){var W=arguments[K]!=null?arguments[K]:{};K%2?t(Object(W),!0).forEach(function(V){n(j,V,W[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(W)):t(Object(W)).forEach(function(V){Object.defineProperty(j,V,Object.getOwnPropertyDescriptor(W,V))})}return j}function n(j,K,W){return(K=b(K))in j?Object.defineProperty(j,K,{value:W,enumerable:!0,configurable:!0,writable:!0}):j[K]=W,j}function i(j,K){return h(j)||d(j,K)||s(j,K)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(j,K){if(j){if(typeof j=="string")return u(j,K);var W={}.toString.call(j).slice(8,-1);return W==="Object"&&j.constructor&&(W=j.constructor.name),W==="Map"||W==="Set"?Array.from(j):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?u(j,K):void 0}}function u(j,K){(K==null||K>j.length)&&(K=j.length);for(var W=0,V=Array(K);W<K;W++)V[W]=j[W];return V}function d(j,K){var W=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(W!=null){var V,q,ie,ye,we=[],he=!0,je=!1;try{if(ie=(W=W.call(j)).next,K!==0)for(;!(he=(V=ie.call(W)).done)&&(we.push(V.value),we.length!==K);he=!0);}catch(Pe){je=!0,q=Pe}finally{try{if(!he&&W.return!=null&&(ye=W.return(),Object(ye)!==ye))return}finally{if(je)throw q}}return we}}function h(j){if(Array.isArray(j))return j}function f(j,K){if(!(j instanceof K))throw new TypeError("Cannot call a class as a function")}function p(j,K){for(var W=0;W<K.length;W++){var V=K[W];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(j,b(V.key),V)}}function v(j,K,W){return K&&p(j.prototype,K),Object.defineProperty(j,"prototype",{writable:!1}),j}function b(j){var K=k(j,"string");return e(K)=="symbol"?K:K+""}function k(j,K){if(e(j)!="object"||!j)return j;var W=j[Symbol.toPrimitive];if(W!==void 0){var V=W.call(j,K);if(e(V)!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)}var S=Sr,T=S.chunkBy,y=S.last,_=S.isParagraphStart,w=S.isModule,E=S.pushArray,N=S.isParagraphEnd,M=S.isContent,B=S.startsWith,D=S.isTagEnd,A=S.isTagStart,H=S.getSingleAttribute,te=S.setSingleAttribute,z=U0(),ae=os(),P="loop";function ce(j){return j.some(function(K){return M(K)})}function fe(j){for(var K=0;K<j.length;K++){var W=j[K];if(W.type!=="content")return W}return null}function re(j){var K=fe(j.subparsed);return K!=null&&K.tag!=="w:t"}function ue(j){return j.hasPageBreak&&re(j)?'<w:p><w:r><w:br w:type="page"/></w:r></w:p>':""}function O(j){return j.length&&_(j[0])&&N(y(j))}function ne(j){return ce(j)?0:j.length}function J(j){var K=j.parts.length-1;j.parts[K]==="</w:p>"?j.parts.splice(K,0,'<w:r><w:br w:type="page"/></w:r>'):j.parts.push('<w:p><w:r><w:br w:type="page"/></w:r></w:p>')}function G(j){j.parts.unshift('<w:p><w:r><w:br w:type="page"/></w:r></w:p>')}function ve(j){return j.some(function(K){return A("w:type",K)&&K.value.indexOf("continuous")!==-1})}function de(j){return j.some(function(K){return A("w:type",K)&&K.value.indexOf('w:val="nextPage"')!==-1})}function Z(j,K){return E(["<w:p><w:pPr>".concat(K.map(function(W){var V=W.value;return V}).join(""),"</w:pPr></w:p>")],j)}function se(j){for(var K=!1,W=!1,V=[],q=0;q<j.length;q++){var ie=j[q];K===!1&&B(ie,"<w:sectPr")&&(W=!0),W&&(B(ie,"<w:type")&&(K=!0),K===!1&&B(ie,"</w:sectPr")&&V.push('<w:type w:val="continuous"/>')),V.push(ie)}return V}function F(j){return j.filter(function(K){return!B(K,"<w:headerReference")&&!B(K,"<w:footerReference")})}function I(j){return j.some(function(K){return K.tag==="w:br"&&K.value.indexOf('w:type="page"')!==-1})}function X(j){return j.some(function(K){var W=K.tag;return W==="w:drawing"})}function Y(j){for(var K=!1,W=[],V=0;V<j.length;V++){var q=j[V];A("w:sectPr",q)&&(W.push([]),K=!0),K&&W[W.length-1].push(q),D("w:sectPr",q)&&(K=!1)}return W}function Ne(j){for(var K=!1,W=0,V=0;V<j.length;V++){var q=j[V];A("w:sectPr",q)&&(K=!0),K&&(q.tag==="w:headerReference"||q.tag==="w:footerReference")&&(W++,K=!1),D("w:sectPr",q)&&(K=!1)}return W}function Le(j){for(var K=[],W=!1,V=j.length-1;V>=0;V--){var q=j[V];if(D("w:sectPr",q)&&(W=!0),A("w:sectPr",q)&&(K.unshift(q.value),W=!1),W&&K.unshift(q.value),_(q)){if(K.length>0)return K.join("");break}}return""}var Me=function(){function j(){f(this,j),this.name="LoopModule",this.inXfrm=!1,this.totalSectPr=0,this.prefix={start:"#",end:"/",dash:/^-([^\s]+)\s(.+)/,inverted:"^"}}return v(j,[{key:"optionsTransformer",value:function(W,V){return this.docxtemplater=V,W}},{key:"preparse",value:function(W,V){var q=V.contentType;z.main.indexOf(q)!==-1&&(this.sects=Y(W))}},{key:"matchers",value:function(){var W=P;return[[this.prefix.start,W,{expandTo:"auto",location:"start",inverted:!1}],[this.prefix.inverted,W,{expandTo:"auto",location:"start",inverted:!0}],[this.prefix.end,W,{location:"end"}],[this.prefix.dash,W,function(V){var q=i(V,3),ie=q[1],ye=q[2];return{location:"start",inverted:!1,expandTo:ie,value:ye}}]]}},{key:"getTraits",value:function(W,V){if(W==="expandPair"){for(var q=[],ie=0,ye=V.length;ie<ye;ie++){var we=V[ie];w(we,P)&&we.subparsed==null&&q.push({part:we,offset:ie})}return q}}},{key:"postparse",value:function(W,V){var q=V.basePart;if(q&&this.docxtemplater.fileType==="docx"&&W.length>0){q.sectPrCount=Ne(W),this.totalSectPr+=q.sectPrCount;var ie=this.sects;ie.some(function(Ue,Ye){if(q.lIndex<Ue[0].lIndex)return Ye+1<ie.length&&ve(ie[Ye+1])&&(q.addContinuousType=!0),!0;if(W[0].lIndex<Ue[0].lIndex&&Ue[0].lIndex<q.lIndex)return de(ie[Ye])&&(q.addNextPage={index:Ye}),!0}),q.lastParagrapSectPr=Le(W)}if(!q||q.expandTo!=="auto"||q.module!==P||!O(W))return W;q.paragraphLoop=!0;var ye=0,we=T(W,function(Ue){return _(Ue)&&(ye++,ye===1)?"start":N(Ue)&&(ye--,ye===0)?"end":null}),he=we[0],je=y(we),Pe=ne(he),Oe=ne(je);return q.hasPageBreakBeginning=I(he),q.hasPageBreak=I(je),X(he)&&(Pe=0),X(je)&&(Oe=0),W.slice(Pe,W.length-Oe)}},{key:"resolve",value:function(W,V){if(!w(W,P))return null;var q=V.scopeManager,ie=q.getValueAsync(W.value,{part:W}),ye=[];function we(je,Pe,Oe){var Ue=q.createSubScopeManager(je,W.value,Pe,W,Oe);ye.push(V.resolve(r(r({},V),{},{compiled:W.subparsed,tags:{},scopeManager:Ue})))}var he=[];return ie.then(function(je){return je??(je=V.nullGetter(W)),new Promise(function(Pe){if(je instanceof Promise)return je.then(function(Oe){Oe instanceof Array?Promise.all(Oe).then(Pe):Pe(Oe)});je instanceof Array?Promise.all(je).then(Pe):Pe(je)}).then(function(Pe){return q.loopOverValue(Pe,we,W.inverted),Promise.all(ye).then(function(Oe){return Oe.map(function(Ue){var Ye=Ue.resolved,et=Ue.errors;return E(he,et),Ye})}).then(function(Oe){if(he.length>0)throw he;return Oe})})})}},{key:"render",value:function(W,V){if(W.tag==="p:xfrm"&&(this.inXfrm=W.position==="start"),W.tag==="a:ext"&&this.inXfrm)return this.lastExt=W,W;if(!w(W,P))return null;var q=[],ie=[],ye=0,we=this,he=W.subparsed[0],je=0;(he==null?void 0:he.tag)==="a:tr"&&(je=+H(he.value,"h")),ye-=je;var Pe=0,Oe=re(W);function Ue(Ar,fr,Kt){ye+=je;for(var Ae=V.scopeManager.createSubScopeManager(Ar,W.value,fr,W,Kt),Te=0,xe=W.subparsed;Te<xe.length;Te++){var Ce=xe[Te];if(A("a16:rowId",Ce)){var Ve=+H(Ce.value,"val")+Pe;Pe=1,Ce.value=te(Ce.value,"val",Ve)}}var He=V.render(r(r({},V),{},{compiled:W.subparsed,tags:{},scopeManager:Ae}));W.hasPageBreak&&fr===Kt-1&&Oe&&J(He);var ct=Ae.scopePathItem.some(function(Ct){return Ct!==0});ct?(W.sectPrCount===1&&(He.parts=F(He.parts)),W.addContinuousType&&(He.parts=se(He.parts))):W.addNextPage&&(He.parts=Z(He.parts,we.sects[W.addNextPage.index])),W.addNextPage&&J(He),W.hasPageBreakBeginning&&Oe&&G(He);for(var Ke=0,vt=He.parts;Ke<vt.length;Ke++){var wt=vt[Ke];q.push(wt)}E(ie,He.errors)}var Ye=V.scopeManager.getValue(W.value,{part:W});Ye??(Ye=V.nullGetter(W));var et=V.scopeManager.loopOverValue(Ye,Ue,W.inverted);if(et===!1)return W.lastParagrapSectPr?W.paragraphLoop?{value:"<w:p><w:pPr>".concat(W.lastParagrapSectPr,"</w:pPr></w:p>")}:{value:"</w:t></w:r></w:p><w:p><w:pPr>".concat(W.lastParagrapSectPr,"</w:pPr><w:r><w:t>")}:{value:ue(W)||"",errors:ie};if(ye!==0){var Wt=+H(this.lastExt.value,"cy");this.lastExt.value=te(this.lastExt.value,"cy",Wt+ye)}return{value:V.joinUncorrupt(q,r(r({},V),{},{basePart:W})),errors:ie}}}])}();return xm=function(){return ae(new Me)},xm}var bm,m_;function a4(){if(m_)return bm;m_=1;function e(N){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},e(N)}function t(N,M){if(!(N instanceof M))throw new TypeError("Cannot call a class as a function")}function r(N,M){for(var B=0;B<M.length;B++){var D=M[B];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(N,i(D.key),D)}}function n(N,M,B){return M&&r(N.prototype,M),Object.defineProperty(N,"prototype",{writable:!1}),N}function i(N){var M=a(N,"string");return e(M)=="symbol"?M:M+""}function a(N,M){if(e(N)!="object"||!N)return N;var B=N[Symbol.toPrimitive];if(B!==void 0){var D=B.call(N,M);if(e(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(N)}var s=os(),u=Sr,d=u.isTextStart,h=u.isTextEnd,f=u.endsWith,p=u.startsWith,v=u.pushArray,b='<w:t xml:space="preserve">',k=b.length,S="</w:t>",T=S.length;function y(N){return d(N)&&N.tag==="w:t"}function _(N,M){var B=N[M].value;return N[M+1].value==="</w:t>"||B.indexOf('xml:space="preserve"')!==-1?B:B.substr(0,B.length-1)+' xml:space="preserve">'}function w(N,M){return N&&N.basePart&&M.length>1}var E=function(){function N(){t(this,N),this.name="SpacePreserveModule"}return n(N,[{key:"postparse",value:function(B,D){var A=[],H=!1,te=0,z=0;function ae(ce,fe){return ce.type==="placeholder"&&fe.length>1}var P=B.reduce(function(ce,fe){return y(fe)&&(H=!0,z=A.length),H?(A.push(fe),w(D,A)&&(te=D.basePart.endLindex,A[0].value=_(A,0)),ae(fe,A)&&(A[z].value=_(A,z),te=fe.endLindex),h(fe)&&fe.lIndex>te&&(te!==0&&(A[z].value=_(A,z)),v(ce,A),A=[],H=!1,te=0,z=0),ce):(ce.push(fe),ce)},[]);return v(P,A),P}},{key:"postrender",value:function(B){for(var D="",A=0,H=0,te=B.length;H<te;H++){var z=B[H];z!==""&&(f(D,b)&&p(z,S)&&(B[A]=D.substr(0,D.length-k)+"<w:t/>",z=z.substr(T)),D=z,A=H,B[H]=z)}return B}}])}();return bm=function(){return s(new E)},bm}var _m,g_;function o4(){if(g_)return _m;g_=1;function e(T){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},e(T)}function t(T,y){if(!(T instanceof y))throw new TypeError("Cannot call a class as a function")}function r(T,y){for(var _=0;_<y.length;_++){var w=y[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(T,i(w.key),w)}}function n(T,y,_){return y&&r(T.prototype,y),Object.defineProperty(T,"prototype",{writable:!1}),T}function i(T){var y=a(T,"string");return e(y)=="symbol"?y:y+""}function a(T,y){if(e(T)!="object"||!T)return T;var _=T[Symbol.toPrimitive];if(_!==void 0){var w=_.call(T,y);if(e(w)!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)}var s=z0(),u=Sr,d=u.isContent,h=yi,f=h.throwRawTagShouldBeOnlyTextInParagraph,p=h.getInvalidRawXMLValueException,v=os(),b="rawxml";function k(T){for(var y=T.part,_=T.left,w=T.right,E=T.postparsed,N=T.index,M=E.slice(_+1,w),B=0,D=M.length;B<D;B++)if(B!==N-_-1){var A=M[B];d(A)&&f({paragraphParts:M,part:y})}return y}var S=function(){function T(){t(this,T),this.name="RawXmlModule",this.prefix="@"}return n(T,[{key:"optionsTransformer",value:function(_,w){return this.fileTypeConfig=w.fileTypeConfig,_}},{key:"matchers",value:function(){return[[this.prefix,b]]}},{key:"postparse",value:function(_){return s.expandToOne(_,{moduleName:b,getInner:k,expandTo:this.fileTypeConfig.tagRawXml,error:{message:"Raw tag not in paragraph",id:"raw_tag_outerxml_invalid",explanation:function(E){return'The tag "'.concat(E.value,'" is not inside a paragraph, putting raw tags inside an inline loop is disallowed.')}}})}},{key:"render",value:function(_,w){if(_.module!==b)return null;var E,N=[];try{E=w.scopeManager.getValue(_.value,{part:_}),E??(E=w.nullGetter(_))}catch(M){return N.push(M),{errors:N}}return E=E||"",typeof E=="string"?{value:E}:{errors:[p({tag:_.value,value:E,offset:_.offset})]}}}])}();return _m=function(){return v(new S)},_m}var wm,v_;function s4(){if(v_)return wm;v_=1;function e(t,r){for(var n=-1,i=0,a=t.length;i<a;i++)r[i]>=t[i].length||(n===-1||t[i][r[i]].offset<t[n][r[n]].offset)&&(n=i);return n}return wm=function(t){for(var r=0,n=0,i=t;n<i.length;n++){var a=i[n];r+=a.length}t=t.filter(function(f){return f.length>0});for(var s=new Array(r),u=t.map(function(){return 0}),d=0;d<r;d++){var h=e(t,u);s[d]=t[h][u[h]],u[h]++}return s},wm}var Em,y_;function l4(){if(y_)return Em;y_=1;function e(D){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},e(D)}function t(D,A){if(!(D instanceof A))throw new TypeError("Cannot call a class as a function")}function r(D,A){for(var H=0;H<A.length;H++){var te=A[H];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(D,i(te.key),te)}}function n(D,A,H){return A&&r(D.prototype,A),Object.defineProperty(D,"prototype",{writable:!1}),D}function i(D){var A=a(D,"string");return e(A)=="symbol"?A:A+""}function a(D,A){if(e(D)!="object"||!D)return D;var H=D[Symbol.toPrimitive];if(H!==void 0){var te=H.call(D,A);if(e(te)!="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(D)}var s="expandPair",u=s4(),d=Sr,h=d.getLeft,f=d.getRight,p=d.pushArray,v=os(),b=z0(),k=b.getExpandToDefault,S=yi,T=S.getUnmatchedLoopException,y=S.getClosingTagNotMatchOpeningTag,_=S.getUnbalancedLoopException;function w(D){switch(D.location){case"start":return 1;case"end":return-1}}function E(D,A){return D!=null&&A!=null&&(D.part.location==="start"&&A.part.location==="end"&&D.part.value===A.part.value||A.part.value==="")}function N(D){for(var A=0,H=[];A<D.length;){var te=D[A].part;if(te.location==="end"){if(A===0)return D.splice(0,1),H.push(T(te)),{traits:D,errors:H};var z=A,ae=A-1,P=1;if(E(D[ae],D[z]))return D.splice(z,1),D.splice(ae,1),{errors:H,traits:D};for(;P<50;){var ce=D[ae-P],fe=D[z+P];if(E(ce,D[z]))return D.splice(z,1),D.splice(ae-P,1),{errors:H,traits:D};if(E(D[ae],fe))return D.splice(z+P,1),D.splice(ae,1),{errors:H,traits:D};P++}return H.push(y({tags:[D[ae].part,D[z].part]})),D.splice(z,1),D.splice(ae,1),{traits:D,errors:H}}A++}for(var re=0;re<D.length;re++){var ue=D[re].part;H.push(T(ue))}return{traits:[],errors:H}}function M(D){var A={},H=[],te=[],z=[];for(p(z,D);z.length>0;){var ae=N(z);p(H,ae.errors),z=ae.traits}if(H.length>0)return{pairs:te,errors:H};for(var P=0,ce=0;ce<D.length;ce++){var fe=D[ce],re=fe.part,ue=w(re);if(P+=ue,ue===1)A[P]=fe;else{var O=A[P+1];P===0&&te.push([O,fe])}P=P>=0?P:0}return{pairs:te,errors:H}}var B=function(){function D(){t(this,D),this.name="ExpandPairTrait"}return n(D,[{key:"optionsTransformer",value:function(H,te){return te.options.paragraphLoop&&p(te.fileTypeConfig.expandTags,te.fileTypeConfig.onParagraphLoop),this.expandTags=te.fileTypeConfig.expandTags,H}},{key:"postparse",value:function(H,te){var z=this,ae=te.getTraits,P=te.postparse,ce=te.fileType,fe=ae(s,H);fe=fe.map(function(se){return se||[]}),fe=u(fe);var re=M(fe),ue=re.pairs,O=re.errors,ne=0,J=null,G=ue.map(function(se){var F=se[0].part.expandTo;if(F==="auto"&&ce!=="text"){var I=k(H,se,z.expandTags);I.error&&O.push(I.error),F=I.value}if(!F||ce==="text"){var X=se[0].offset,Y=se[1].offset;return X<ne&&!z.docxtemplater.options.syntax.allowUnbalancedLoops&&O.push(_(se,J)),J=se,ne=Y,[X,Y]}var Ne,Le;try{Ne=h(H,F,se[0].offset)}catch(Me){O.push(Me)}try{Le=f(H,F,se[1].offset)}catch(Me){O.push(Me)}return Ne<ne&&!z.docxtemplater.options.syntax.allowUnbalancedLoops&&O.push(_(se,J)),ne=Le,J=se,[Ne,Le]});if(O.length>0)return{postparsed:H,errors:O};var ve=0,de,Z=H.reduce(function(se,F,I){var X=ve<ue.length&&G[ve][0]<=I&&I<=G[ve][1],Y=ue[ve],Ne=G[ve];if(!X)return se.push(F),se;if(Ne[0]===I&&(de=[]),Y[0].offset!==I&&Y[1].offset!==I&&de.push(F),Ne[1]===I){var Le=H[Y[0].offset];Le.subparsed=P(de,{basePart:Le}),Le.endLindex=Y[1].part.lIndex,delete Le.location,delete Le.expandTo,se.push(Le),ve++;for(var Me=G[ve];Me&&Me[0]<I;)ve++,Me=G[ve]}return se},[]);return{postparsed:Z,errors:O}}}])}();return Em=function(){return v(new B)},Em}var Cm,x_;function u4(){if(x_)return Cm;x_=1;function e(M){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},e(M)}function t(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function r(M,B){for(var D=0;D<B.length;D++){var A=B[D];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,i(A.key),A)}}function n(M,B,D){return B&&r(M.prototype,B),Object.defineProperty(M,"prototype",{writable:!1}),M}function i(M){var B=a(M,"string");return e(B)=="symbol"?B:B+""}function a(M,B){if(e(M)!="object"||!M)return M;var D=M[Symbol.toPrimitive];if(D!==void 0){var A=D.call(M,B);if(e(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(M)}var s=os(),u=yi,d=u.getScopeCompilationError,h=u.getCorruptCharactersException,f=Sr,p=f.utf8ToWord,v=f.hasCorruptCharacters,b=f.removeCorruptCharacters,k=WC(),S=k.settingsContentType,T=k.coreContentType,y=k.appContentType,_=k.customContentType,w=[S,T,y,_],E={docx:"w",pptx:"a"},N=function(){function M(){t(this,M),this.name="Render",this.recordRun=!1,this.recordedRun=[]}return n(M,[{key:"optionsTransformer",value:function(D,A){return this.docxtemplater=A,this.brTag=A.fileType==="docx"?"<w:r><w:br/></w:r>":"<a:br/>",this.prefix=E[A.fileType],this.runStartTag="".concat(this.prefix,":r"),this.runPropsStartTag="".concat(this.prefix,":rPr"),D}},{key:"set",value:function(D){D.compiled&&(this.compiled=D.compiled),D.data!=null&&(this.data=D.data)}},{key:"getRenderedMap",value:function(D){for(var A in this.compiled)D[A]={from:A,data:this.data};return D}},{key:"postparse",value:function(D,A){for(var H=[],te=0;te<D.length;te++){var z=D[te];if(z.type==="placeholder"){var ae=z.value;try{A.cachedParsers[z.lIndex]=this.docxtemplater.parser(ae,{tag:z})}catch(P){H.push(d({tag:ae,rootError:P,offset:z.offset}))}}}return{postparsed:D,errors:H}}},{key:"render",value:function(D,A){var H=A.contentType,te=A.scopeManager,z=A.linebreaks,ae=A.nullGetter,P=A.fileType,ce=A.stripInvalidXMLChars;if(w.indexOf(H)!==-1&&(z=!1),z&&this.recordRuns(D),!(D.type!=="placeholder"||D.module)){var fe;try{fe=te.getValue(D.value,{part:D})}catch(re){return{errors:[re]}}if(fe??(fe=ae(D)),typeof fe=="string"){if(ce)fe=b(fe);else if(["docx","pptx","xlsx"].indexOf(P)!==-1&&v(fe))return{errors:[h({tag:D.value,value:fe,offset:D.offset})]}}return P==="text"?{value:fe}:{value:z&&typeof fe=="string"?this.renderLineBreaks(fe):p(fe)}}}},{key:"recordRuns",value:function(D){D.tag===this.runStartTag?this.recordedRun="":D.tag===this.runPropsStartTag?(D.position==="start"&&(this.recordRun=!0,this.recordedRun+=D.value),(D.position==="end"||D.position==="selfclosing")&&(this.recordedRun+=D.value,this.recordRun=!1)):this.recordRun&&(this.recordedRun+=D.value)}},{key:"renderLineBreaks",value:function(D){for(var A=[],H=D.split(`
`),te=0,z=H.length;te<z;te++)A.push(p(H[te])),te<H.length-1&&A.push("</".concat(this.prefix,":t></").concat(this.prefix,":r>").concat(this.brTag,"<").concat(this.prefix,":r>").concat(this.recordedRun,"<").concat(this.prefix,":t").concat(this.docxtemplater.fileType==="docx"?' xml:space="preserve"':"",">"));return A}}])}();return Cm=function(){return s(new N)},Cm}var Sm,b_;function c4(){if(b_)return Sm;b_=1;var e=i4(),t=a4(),r=o4(),n=l4(),i=u4();function a(){return{getTemplatedFiles:function(){return[]},textPath:function(d){return d.textTarget},tagsXmlTextArray:["Company","HyperlinkBase","Manager","cp:category","cp:keywords","dc:creator","dc:description","dc:subject","dc:title","cp:contentStatus","w:t","a:t","m:t","vt:lpstr","vt:lpwstr"],tagsXmlLexedArray:["w:proofState","w:tc","w:tr","w:tbl","w:ftr","w:hdr","w:body","w:document","w:p","w:r","w:br","w:rPr","w:pPr","w:spacing","w:sdtContent","w:sdt","w:drawing","w:sectPr","w:type","w:headerReference","w:footerReference","w:bookmarkStart","w:bookmarkEnd","w:commentRangeStart","w:commentRangeEnd","w:commentReference"],droppedTagsInsidePlaceholder:["w:p","w:br","w:bookmarkStart","w:bookmarkEnd"],expandTags:[{contains:"w:tc",expand:"w:tr"}],onParagraphLoop:[{contains:"w:p",expand:"w:p",onlyTextInTag:!0}],tagRawXml:"w:p",baseModules:[e,t,n,r,i],tagShouldContain:[{tag:"w:sdtContent",shouldContain:["w:p","w:r","w:commentRangeStart","w:sdt"],value:"<w:p></w:p>"},{tag:"w:tc",shouldContain:["w:p"],value:"<w:p></w:p>"},{tag:"w:tr",shouldContain:["w:tc"],drop:!0},{tag:"w:tbl",shouldContain:["w:tr"],drop:!0}]}}function s(){return{getTemplatedFiles:function(){return[]},textPath:function(d){return d.textTarget},tagsXmlTextArray:["Company","HyperlinkBase","Manager","cp:category","cp:keywords","dc:creator","dc:description","dc:subject","dc:title","a:t","m:t","vt:lpstr","vt:lpwstr"],tagsXmlLexedArray:["p:sp","a:tc","a:tr","a:tbl","a:graphicData","a:p","a:r","a:rPr","p:txBody","a:txBody","a:off","a:ext","p:graphicFrame","p:xfrm","a16:rowId","a:endParaRPr"],droppedTagsInsidePlaceholder:["a:p","a:endParaRPr"],expandTags:[{contains:"a:tc",expand:"a:tr"}],onParagraphLoop:[{contains:"a:p",expand:"a:p",onlyTextInTag:!0}],tagRawXml:"p:sp",baseModules:[e,n,r,i],tagShouldContain:[{tag:"a:tbl",shouldContain:["a:tr"],dropParent:"p:graphicFrame"},{tag:"p:txBody",shouldContain:["a:p"],value:"<a:p></a:p>"},{tag:"a:txBody",shouldContain:["a:p"],value:"<a:p></a:p>"}]}}return Sm={docx:a,pptx:s},Sm}(function(e){var t=["modules"];function r(Ae,Te){var xe=Object.keys(Ae);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(Ae);Te&&(Ce=Ce.filter(function(Ve){return Object.getOwnPropertyDescriptor(Ae,Ve).enumerable})),xe.push.apply(xe,Ce)}return xe}function n(Ae){for(var Te=1;Te<arguments.length;Te++){var xe=arguments[Te]!=null?arguments[Te]:{};Te%2?r(Object(xe),!0).forEach(function(Ce){i(Ae,Ce,xe[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(xe)):r(Object(xe)).forEach(function(Ce){Object.defineProperty(Ae,Ce,Object.getOwnPropertyDescriptor(xe,Ce))})}return Ae}function i(Ae,Te,xe){return(Te=y(Te))in Ae?Object.defineProperty(Ae,Te,{value:xe,enumerable:!0,configurable:!0,writable:!0}):Ae[Te]=xe,Ae}function a(Ae,Te){return f(Ae)||h(Ae,Te)||u(Ae,Te)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(Ae,Te){if(Ae){if(typeof Ae=="string")return d(Ae,Te);var xe={}.toString.call(Ae).slice(8,-1);return xe==="Object"&&Ae.constructor&&(xe=Ae.constructor.name),xe==="Map"||xe==="Set"?Array.from(Ae):xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe)?d(Ae,Te):void 0}}function d(Ae,Te){(Te==null||Te>Ae.length)&&(Te=Ae.length);for(var xe=0,Ce=Array(Te);xe<Te;xe++)Ce[xe]=Ae[xe];return Ce}function h(Ae,Te){var xe=Ae==null?null:typeof Symbol<"u"&&Ae[Symbol.iterator]||Ae["@@iterator"];if(xe!=null){var Ce,Ve,He,ct,Ke=[],vt=!0,wt=!1;try{if(He=(xe=xe.call(Ae)).next,Te===0){if(Object(xe)!==xe)return;vt=!1}else for(;!(vt=(Ce=He.call(xe)).done)&&(Ke.push(Ce.value),Ke.length!==Te);vt=!0);}catch(Ct){wt=!0,Ve=Ct}finally{try{if(!vt&&xe.return!=null&&(ct=xe.return(),Object(ct)!==ct))return}finally{if(wt)throw Ve}}return Ke}}function f(Ae){if(Array.isArray(Ae))return Ae}function p(Ae){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},p(Ae)}function v(Ae,Te){if(Ae==null)return{};var xe,Ce,Ve=b(Ae,Te);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Ae);for(Ce=0;Ce<He.length;Ce++)xe=He[Ce],Te.indexOf(xe)===-1&&{}.propertyIsEnumerable.call(Ae,xe)&&(Ve[xe]=Ae[xe])}return Ve}function b(Ae,Te){if(Ae==null)return{};var xe={};for(var Ce in Ae)if({}.hasOwnProperty.call(Ae,Ce)){if(Te.indexOf(Ce)!==-1)continue;xe[Ce]=Ae[Ce]}return xe}function k(Ae,Te){if(!(Ae instanceof Te))throw new TypeError("Cannot call a class as a function")}function S(Ae,Te){for(var xe=0;xe<Te.length;xe++){var Ce=Te[xe];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(Ae,y(Ce.key),Ce)}}function T(Ae,Te,xe){return Te&&S(Ae.prototype,Te),Object.defineProperty(Ae,"prototype",{writable:!1}),Ae}function y(Ae){var Te=_(Ae,"string");return p(Te)=="symbol"?Te:Te+""}function _(Ae,Te){if(p(Ae)!="object"||!Ae)return Ae;var xe=Ae[Symbol.toPrimitive];if(xe!==void 0){var Ce=xe.call(Ae,Te);if(p(Ce)!="object")return Ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ae)}var w=Sr,E=$P,N=E.object({allowUnopenedTag:E.boolean().optional(),allowUnclosedTag:E.boolean().optional(),allowUnbalancedLoops:E.boolean().optional(),changeDelimiterPrefix:E.string().optional().nullable()}),M=E.object({delimiters:E.object({start:E.string().nullable(),end:E.string().nullable()}).strict().optional(),fileTypeConfig:E.object({}).optional(),paragraphLoop:E.boolean().optional(),parser:E.function().optional(),errorLogging:E.union([E.boolean(),E.string()]).optional(),linebreaks:E.boolean().optional(),nullGetter:E.function().optional(),syntax:N.optional(),stripInvalidXMLChars:E.boolean().optional()}).strict(),B=GP(),D=B.getRelsTypes,A=HP(),H=A.collectContentTypes,te=A.getContentTypes,z=os(),ae=z0(),P=WP(),ce=ZP(),fe=ZC(),re=KP(),ue=re.getTags,O=XP(),ne=yi,J=ne.throwMultiError,G=ne.throwResolveBeforeCompile,ve=ne.throwRenderInvalidTemplate,de=ne.throwRenderTwice,Z=ne.XTInternalError,se=ne.XTTemplateError,F=ne.throwFileTypeNotIdentified,I=ne.throwFileTypeNotHandled,X=ne.throwApiVersionError;w.getRelsTypes=D,w.traits=ae,w.moduleWrapper=z,w.collectContentTypes=H,w.getContentTypes=te;var Y=w.getDefaults,Ne=w.str2xml,Le=w.xml2str,Me=w.concatArrays,j=w.uniq,K=w.getDuplicates,W=w.stableSort,V=w.pushArray,q=w.utf8ToWord,ie=w.invertMap,ye="[Content_Types].xml",we="_rels/.rels",he=[3,47,2];function je(Ae){var Te=K(Ae.map(function(xe){var Ce=xe.name;return Ce}));if(Te.length>0)throw new Z('Detected duplicate module "'.concat(Te[0],'"'))}function Pe(Ae){for(var Te=0,xe=Ae.modules;Te<xe.length;Te++)for(var Ce=xe[Te],Ve=0,He=Ce.xmlContentTypes||[];Ve<He.length;Ve++)for(var ct=He[Ve],Ke=Ae.invertedContentTypes[ct]||[],vt=0;vt<Ke.length;vt++){var wt=Ke[vt];Ae.zip.files[wt]&&Ae.options.xmlFileNames.push(wt)}}function Oe(Ae){return W(Ae,function(Te,xe){return(xe.priority||0)-(Te.priority||0)})}function Ue(Ae){var Te=[];for(var xe in Ae)Te.push(xe);for(var Ce=[ye,we],Ve=["word/","xl/","ppt/"],He=0;He<Te.length;He++)for(var ct=Te[He],Ke=0;Ke<Ve.length;Ke++){var vt=Ve[Ke];ct.indexOf("".concat(vt))===0&&Ce.push(ct)}for(var wt=0;wt<Te.length;wt++){var Ct=Te[wt];Ce.indexOf(Ct)===-1&&Ce.push(Ct)}return Ce}function Ye(Ae,Te){Ae.hideDeprecations!==!0&&console.warn(Te)}function et(Ae,Te){if(Ae.hideDeprecations!==!0)return Ye(Ae,'Deprecated method ".'.concat(Te,'", view upgrade guide : https://docxtemplater.com/docs/api/#upgrade-guide, stack : ').concat(new Error().stack))}function Wt(Ae){Ae.modules=Ae.modules.filter(function(Te){if(!Te.supportedFileTypes)return!0;if(!Array.isArray(Te.supportedFileTypes))throw new Error("The supportedFileTypes field of the module must be an array");var xe=Te.supportedFileTypes.includes(Ae.fileType);return xe||Te.on("detached"),xe})}function Ar(Ae){var Te=Ae.compiled;Ae.errors=Me(Object.keys(Te).map(function(xe){return Te[xe].allErrors})),Ae.errors.length!==0&&(Ae.options.errorLogging&&O(Ae.errors,Ae.options.errorLogging),J(Ae.errors))}function fr(Ae){return typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(Ae)}var Kt=function(){function Ae(Te){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=xe.modules,Ve=Ce===void 0?[]:Ce,He=v(xe,t);if(k(this,Ae),this.targets=[],this.rendered=!1,this.scopeManagers={},this.compiled={},this.modules=[P()],this.xmlDocuments={},arguments.length===0)Ye(this,"Deprecated docxtemplater constructor with no arguments, view upgrade guide : https://docxtemplater.com/docs/api/#upgrade-guide, stack : ".concat(new Error().stack)),this.hideDeprecations=!0,this.setOptions(He);else{if(this.hideDeprecations=!0,this.setOptions(He),fr(Te))throw new Error("You passed a Buffer to the Docxtemplater constructor. The first argument of docxtemplater's constructor must be a valid zip file (jszip v2 or pizzip v3)");if(!Te||!Te.files||typeof Te.file!="function")throw new Error("The first argument of docxtemplater's constructor must be a valid zip file (jszip v2 or pizzip v3)");if(!Array.isArray(Ve))throw new Error("The modules argument of docxtemplater's constructor must be an array");for(var ct=0;ct<Ve.length;ct++){var Ke=Ve[ct];this.attachModule(Ke)}this.loadZip(Te),this.compile(),this.v4Constructor=!0}this.hideDeprecations=!1}return T(Ae,[{key:"verifyApiVersion",value:function(xe){return xe=xe.split(".").map(function(Ce){return parseInt(Ce,10)}),xe.length!==3&&X("neededVersion is not a valid version",{neededVersion:xe,explanation:"the neededVersion must be an array of length 3"}),xe[0]!==he[0]&&X("The major api version do not match, you probably have to update docxtemplater with npm install --save docxtemplater",{neededVersion:xe,currentModuleApiVersion:he,explanation:"moduleAPIVersionMismatch : needed=".concat(xe.join("."),", current=").concat(he.join("."))}),xe[1]>he[1]&&X("The minor api version is not uptodate, you probably have to update docxtemplater with npm install --save docxtemplater",{neededVersion:xe,currentModuleApiVersion:he,explanation:"moduleAPIVersionMismatch : needed=".concat(xe.join("."),", current=").concat(he.join("."))}),xe[1]===he[1]&&xe[2]>he[2]&&X("The patch api version is not uptodate, you probably have to update docxtemplater with npm install --save docxtemplater",{neededVersion:xe,currentModuleApiVersion:he,explanation:"moduleAPIVersionMismatch : needed=".concat(xe.join("."),", current=").concat(he.join("."))}),!0}},{key:"setModules",value:function(xe){for(var Ce=0,Ve=this.modules;Ce<Ve.length;Ce++){var He=Ve[Ce];He.set(xe)}}},{key:"sendEvent",value:function(xe){for(var Ce=0,Ve=this.modules;Ce<Ve.length;Ce++){var He=Ve[Ce];He.on(xe)}}},{key:"attachModule",value:function(xe){if(this.v4Constructor)throw new Z("attachModule() should not be called manually when using the v4 constructor");et(this,"attachModule");var Ce=p(xe);if(Ce==="function")throw new Z("Cannot attach a class/function as a module. Most probably you forgot to instantiate the module by using `new` on the module.");if(!xe||Ce!=="object")throw new Z("Cannot attachModule with a falsy value");if(xe.requiredAPIVersion&&this.verifyApiVersion(xe.requiredAPIVersion),xe.attached===!0)if(typeof xe.clone=="function")xe=xe.clone();else throw new Error('Cannot attach a module that was already attached : "'.concat(xe.name,'". The most likely cause is that you are instantiating the module at the root level, and using it for multiple instances of Docxtemplater'));xe.attached=!0;var Ve=z(xe);return this.modules.push(Ve),Ve.on("attached"),this.fileType&&Wt(this),this}},{key:"findModule",value:function(xe){for(var Ce=0,Ve=this.modules;Ce<Ve.length;Ce++){var He=Ve[Ce];if(He.name===xe)return He}}},{key:"setOptions",value:function(xe){var Ce,Ve;if(this.v4Constructor)throw new Error("setOptions() should not be called manually when using the v4 constructor");if(!xe)throw new Error("setOptions should be called with an object as first parameter");var He=M.validate(xe);if(He.success===!1)throw new Error(He.error);et(this,"setOptions"),this.options={};var ct=Y();for(var Ke in ct){var vt=ct[Ke];this.options[Ke]=xe[Ke]!=null?xe[Ke]:this[Ke]||vt,this[Ke]=this.options[Ke]}return(Ce=this.delimiters).start&&(Ce.start=q(this.delimiters.start)),(Ve=this.delimiters).end&&(Ve.end=q(this.delimiters.end)),this}},{key:"loadZip",value:function(xe){if(this.v4Constructor)throw new Error("loadZip() should not be called manually when using the v4 constructor");if(et(this,"loadZip"),xe.loadAsync)throw new Z("Docxtemplater doesn't handle JSZip version >=3, please use pizzip");this.zip=xe,this.updateFileTypeConfig(),this.modules=Me([this.fileTypeConfig.baseModules.map(function(ct){return ct()}),this.modules]);for(var Ce=0,Ve=this.modules;Ce<Ve.length;Ce++){var He=Ve[Ce];He.zip=this.zip,He.docxtemplater=this,He.fileTypeConfig=this.fileTypeConfig,He.fileType=this.fileType,He.xtOptions=this.options,He.modules=this.modules}return Wt(this),this}},{key:"precompileFile",value:function(xe){var Ce=this.createTemplateClass(xe);Ce.preparse(),this.compiled[xe]=Ce}},{key:"compileFile",value:function(xe){this.compiled[xe].parse()}},{key:"getScopeManager",value:function(xe,Ce,Ve){var He;return(He=this.scopeManagers)[xe]||(He[xe]=ce({tags:Ve,parser:this.parser,cachedParsers:Ce.cachedParsers})),this.scopeManagers[xe]}},{key:"resolveData",value:function(xe){var Ce=this;et(this,"resolveData");var Ve=[];return Object.keys(this.compiled).length||G(),Promise.resolve(xe).then(function(He){return Ce.data=He,Ce.setModules({data:Ce.data,Lexer:fe}),Ce.mapper=Ce.modules.reduce(function(ct,Ke){return Ke.getRenderedMap(ct)},{}),Promise.all(Object.keys(Ce.mapper).map(function(ct){var Ke=Ce.mapper[ct],vt=Ke.from,wt=Ke.data;return Promise.resolve(wt).then(function(Ct){var Rt=Ce.compiled[vt];return Rt.filePath=ct,Rt.scopeManager=Ce.getScopeManager(ct,Rt,Ct),Rt.resolveTags(Ct).then(function(pt){return Rt.scopeManager.finishedResolving=!0,pt},function(pt){V(Ve,pt)})})})).then(function(ct){return Ve.length!==0&&(Ce.options.errorLogging&&O(Ve,Ce.options.errorLogging),J(Ve)),Me(ct)})})}},{key:"compile",value:function(){if(et(this,"compile"),this.updateFileTypeConfig(),je(this.modules),this.modules=Oe(this.modules),Object.keys(this.compiled).length)return this;for(var xe=this.options,Ce=0,Ve=this.modules;Ce<Ve.length;Ce++){var He=Ve[Ce];xe=He.optionsTransformer(xe,this)}this.options=xe,this.options.xmlFileNames=j(this.options.xmlFileNames);for(var ct=0,Ke=this.options.xmlFileNames;ct<Ke.length;ct++){var vt=Ke[ct],wt=this.zip.files[vt].asText();this.xmlDocuments[vt]=Ne(wt)}this.setModules({zip:this.zip,xmlDocuments:this.xmlDocuments});for(var Ct=0,Rt=this.modules;Ct<Rt.length;Ct++){var pt=Rt[Ct];pt.xmlDocuments=this.xmlDocuments}this.getTemplatedFiles(),this.sendEvent("before-preparse");for(var Mr=0,Fn=this.templatedFiles;Mr<Fn.length;Mr++){var xi=Fn[Mr];this.zip.files[xi]!=null&&this.precompileFile(xi)}this.sendEvent("after-preparse");for(var Dr=0,bi=this.templatedFiles;Dr<bi.length;Dr++){var zn=bi[Dr];this.zip.files[zn]!=null&&this.compiled[zn].parse({noPostParse:!0})}this.sendEvent("after-parse");for(var Wr=0,Or=this.templatedFiles;Wr<Or.length;Wr++){var ur=Or[Wr];this.zip.files[ur]!=null&&this.compiled[ur].postparse()}return this.sendEvent("after-postparse"),this.setModules({compiled:this.compiled}),Ar(this),this}},{key:"updateFileTypeConfig",value:function(){this.relsTypes=D(this.zip);var xe=te(this.zip),Ce=xe.overrides,Ve=xe.defaults,He=xe.contentTypes,ct=xe.contentTypeXml;ct&&(this.filesContentTypes=H(Ce,Ve,this.zip),this.invertedContentTypes=ie(this.filesContentTypes),this.setModules({contentTypes:this.contentTypes,invertedContentTypes:this.invertedContentTypes}));var Ke;this.zip.files.mimetype&&(Ke="odt");for(var vt=0,wt=this.modules;vt<wt.length;vt++){var Ct=wt[vt];Ke=Ct.getFileType({zip:this.zip,contentTypes:He,contentTypeXml:ct,overrides:Ce,defaults:Ve,doc:this})||Ke}if(this.fileType=Ke,Ke==="odt"&&I(Ke),Ke||F(this.zip),Pe(this),Wt(this),this.fileTypeConfig=this.options.fileTypeConfig||this.fileTypeConfig,!this.fileTypeConfig)if(Ae.FileTypeConfig[this.fileType])this.fileTypeConfig=Ae.FileTypeConfig[this.fileType]();else{var Rt='Filetype "'.concat(this.fileType,'" is not supported'),pt="filetype_not_supported";this.fileType==="xlsx"&&(Rt='Filetype "'.concat(this.fileType,'" is supported only with the paid XlsxModule'),pt="xlsx_filetype_needs_xlsx_module");var Mr=new se(Rt);throw Mr.properties={id:pt,explanation:Rt},Mr}return this}},{key:"renderAsync",value:function(xe){var Ce=this;this.hideDeprecations=!0;var Ve=this.resolveData(xe);return this.hideDeprecations=!1,Ve.then(function(){return Ce.render()})}},{key:"render",value:function(xe){this.rendered&&de(),this.rendered=!0,Object.keys(this.compiled).length===0&&this.compile(),this.errors.length>0&&ve(),arguments.length>0&&(this.data=xe),this.setModules({data:this.data,Lexer:fe}),this.mapper||(this.mapper=this.modules.reduce(function(Xe,_i){return _i.getRenderedMap(Xe)},{}));var Ce=[];for(var Ve in this.mapper){var He=this.mapper[Ve],ct=He.from,Ke=He.data,vt=this.compiled[ct];vt.scopeManager=this.getScopeManager(Ve,vt,Ke),vt.render(Ve),Ce.push([Ve,vt.content,vt]),delete vt.content}for(var wt=0;wt<Ce.length;wt++)for(var Ct=Ce[wt],Rt=a(Ct,3),pt=Rt[1],Mr=Rt[2],Fn=0,xi=this.modules;Fn<xi.length;Fn++){var Dr=xi[Fn];if(Dr.preZip){var bi=Dr.preZip(pt,Mr);typeof bi=="string"&&(Ct[1]=bi)}}for(var zn=0;zn<Ce.length;zn++){var Wr=a(Ce[zn],2),Or=Wr[0],ur=Wr[1];this.zip.file(Or,ur,{createFolders:!0})}return Ar(this),this.sendEvent("syncing-zip"),this.syncZip(),this.sendEvent("synced-zip"),this}},{key:"syncZip",value:function(){for(var xe in this.xmlDocuments){this.zip.remove(xe);var Ce=Le(this.xmlDocuments[xe]);this.zip.file(xe,Ce,{createFolders:!0})}}},{key:"setData",value:function(xe){return et(this,"setData"),this.data=xe,this}},{key:"getZip",value:function(){return this.zip}},{key:"createTemplateClass",value:function(xe){var Ce=this.zip.files[xe].asText();return this.createTemplateClassFromContent(Ce,xe)}},{key:"createTemplateClassFromContent",value:function(xe,Ce){for(var Ve={filePath:Ce,contentType:this.filesContentTypes[Ce],relsType:this.relsTypes[Ce]},He=Y(),ct=V(Object.keys(He),["filesContentTypes","fileTypeConfig","fileType","modules"]),Ke=0;Ke<ct.length;Ke++){var vt=ct[Ke];Ve[vt]=this[vt]}return new Ae.XmlTemplater(xe,Ve)}},{key:"getFullText",value:function(xe){return this.createTemplateClass(xe||this.fileTypeConfig.textPath(this)).getFullText()}},{key:"getTemplatedFiles",value:function(){return this.templatedFiles=this.fileTypeConfig.getTemplatedFiles(this.zip),V(this.templatedFiles,this.targets),this.templatedFiles=j(this.templatedFiles),this.templatedFiles}},{key:"getTags",value:function(){var xe={headers:[],footers:[]};for(var Ce in this.compiled){var Ve=this.filesContentTypes[Ce];Ve==="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml"&&(xe.document={target:Ce,tags:ue(this.compiled[Ce].postparsed)}),Ve==="application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml"&&xe.headers.push({target:Ce,tags:ue(this.compiled[Ce].postparsed)}),Ve==="application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml"&&xe.footers.push({target:Ce,tags:ue(this.compiled[Ce].postparsed)})}return xe}},{key:"toBuffer",value:function(xe){return this.zip.generate(n(n({compression:"DEFLATE",fileOrder:Ue},xe),{},{type:"nodebuffer"}))}},{key:"toBlob",value:function(xe){return this.zip.generate(n(n({compression:"DEFLATE",fileOrder:Ue},xe),{},{type:"blob"}))}},{key:"toBase64",value:function(xe){return this.zip.generate(n(n({compression:"DEFLATE",fileOrder:Ue},xe),{},{type:"base64"}))}},{key:"toUint8Array",value:function(xe){return this.zip.generate(n(n({compression:"DEFLATE",fileOrder:Ue},xe),{},{type:"uint8array"}))}},{key:"toArrayBuffer",value:function(xe){return this.zip.generate(n(n({compression:"DEFLATE",fileOrder:Ue},xe),{},{type:"arraybuffer"}))}}])}();Kt.DocUtils=w,Kt.Errors=yi,Kt.XmlTemplater=n4(),Kt.FileTypeConfig=c4(),Kt.XmlMatcher=KC(),e.exports=Kt,e.exports.default=Kt})(YE);var d4=YE.exports;const h4=Dc(d4);var JC={exports:{}},Kc={},Ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Kc.encode=function(e){for(var t="",r,n,i,a,s,u,d,h=0;h<e.length;)r=e.charCodeAt(h++),n=e.charCodeAt(h++),i=e.charCodeAt(h++),a=r>>2,s=(r&3)<<4|n>>4,u=(n&15)<<2|i>>6,d=i&63,isNaN(n)?u=d=64:isNaN(i)&&(d=64),t=t+Ra.charAt(a)+Ra.charAt(s)+Ra.charAt(u)+Ra.charAt(d);return t};Kc.decode=function(e){var t="",r,n,i,a,s,u,d,h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)a=Ra.indexOf(e.charAt(h++)),s=Ra.indexOf(e.charAt(h++)),u=Ra.indexOf(e.charAt(h++)),d=Ra.indexOf(e.charAt(h++)),r=a<<2|s>>4,n=(s&15)<<4|u>>2,i=(u&3)<<6|d,t+=String.fromCharCode(r),u!==64&&(t+=String.fromCharCode(n)),d!==64&&(t+=String.fromCharCode(i));return t};var qr={},Qd;qr.base64=!0;qr.array=!0;qr.string=!0;qr.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u";qr.nodebuffer=typeof Buffer<"u";qr.uint8array=typeof Uint8Array<"u";if(typeof ArrayBuffer>"u")Qd=qr.blob=!1;else{var __=new ArrayBuffer(0);try{Qd=qr.blob=new Blob([__],{type:"application/zip"}).size===0}catch{try{var f4=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,w_=new f4;w_.append(__),Qd=qr.blob=w_.getBlob("application/zip").size===0}catch{Qd=qr.blob=!1}}}var Jn={},Xc={},Hl={},Yg={exports:{}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */(function(e,t){(function(r,n){n(t)})(Qe,function(r){function n(g){for(var U=g.length;--U>=0;)g[U]=0}var i=256,a=286,s=30,u=15,d=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),h=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=new Array(576);n(v);var b=new Array(60);n(b);var k=new Array(512);n(k);var S=new Array(256);n(S);var T=new Array(29);n(T);var y,_,w,E=new Array(s);function N(g,U,x,Q,ee){this.static_tree=g,this.extra_bits=U,this.extra_base=x,this.elems=Q,this.max_length=ee,this.has_stree=g&&g.length}function M(g,U){this.dyn_tree=g,this.max_code=0,this.stat_desc=U}n(E);var B=function(g){return g<256?k[g]:k[256+(g>>>7)]},D=function(g,U){g.pending_buf[g.pending++]=255&U,g.pending_buf[g.pending++]=U>>>8&255},A=function(g,U,x){g.bi_valid>16-x?(g.bi_buf|=U<<g.bi_valid&65535,D(g,g.bi_buf),g.bi_buf=U>>16-g.bi_valid,g.bi_valid+=x-16):(g.bi_buf|=U<<g.bi_valid&65535,g.bi_valid+=x)},H=function(g,U,x){A(g,x[2*U],x[2*U+1])},te=function(g,U){var x=0;do x|=1&g,g>>>=1,x<<=1;while(--U>0);return x>>>1},z=function(g,U,x){var Q,ee,oe=new Array(16),ke=0;for(Q=1;Q<=u;Q++)ke=ke+x[Q-1]<<1,oe[Q]=ke;for(ee=0;ee<=U;ee++){var pe=g[2*ee+1];pe!==0&&(g[2*ee]=te(oe[pe]++,pe))}},ae=function(g){var U;for(U=0;U<a;U++)g.dyn_ltree[2*U]=0;for(U=0;U<s;U++)g.dyn_dtree[2*U]=0;for(U=0;U<19;U++)g.bl_tree[2*U]=0;g.dyn_ltree[512]=1,g.opt_len=g.static_len=0,g.sym_next=g.matches=0},P=function(g){g.bi_valid>8?D(g,g.bi_buf):g.bi_valid>0&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0},ce=function(g,U,x,Q){var ee=2*U,oe=2*x;return g[ee]<g[oe]||g[ee]===g[oe]&&Q[U]<=Q[x]},fe=function(g,U,x){for(var Q=g.heap[x],ee=x<<1;ee<=g.heap_len&&(ee<g.heap_len&&ce(U,g.heap[ee+1],g.heap[ee],g.depth)&&ee++,!ce(U,Q,g.heap[ee],g.depth));)g.heap[x]=g.heap[ee],x=ee,ee<<=1;g.heap[x]=Q},re=function(g,U,x){var Q,ee,oe,ke,pe=0;if(g.sym_next!==0)do Q=255&g.pending_buf[g.sym_buf+pe++],Q+=(255&g.pending_buf[g.sym_buf+pe++])<<8,ee=g.pending_buf[g.sym_buf+pe++],Q===0?H(g,ee,U):(oe=S[ee],H(g,oe+i+1,U),(ke=d[oe])!==0&&(ee-=T[oe],A(g,ee,ke)),Q--,oe=B(Q),H(g,oe,x),(ke=h[oe])!==0&&(Q-=E[oe],A(g,Q,ke)));while(pe<g.sym_next);H(g,256,U)},ue=function(g,U){var x,Q,ee,oe=U.dyn_tree,ke=U.stat_desc.static_tree,pe=U.stat_desc.has_stree,Fe=U.stat_desc.elems,me=-1;for(g.heap_len=0,g.heap_max=573,x=0;x<Fe;x++)oe[2*x]!==0?(g.heap[++g.heap_len]=me=x,g.depth[x]=0):oe[2*x+1]=0;for(;g.heap_len<2;)oe[2*(ee=g.heap[++g.heap_len]=me<2?++me:0)]=1,g.depth[ee]=0,g.opt_len--,pe&&(g.static_len-=ke[2*ee+1]);for(U.max_code=me,x=g.heap_len>>1;x>=1;x--)fe(g,oe,x);ee=Fe;do x=g.heap[1],g.heap[1]=g.heap[g.heap_len--],fe(g,oe,1),Q=g.heap[1],g.heap[--g.heap_max]=x,g.heap[--g.heap_max]=Q,oe[2*ee]=oe[2*x]+oe[2*Q],g.depth[ee]=(g.depth[x]>=g.depth[Q]?g.depth[x]:g.depth[Q])+1,oe[2*x+1]=oe[2*Q+1]=ee,g.heap[1]=ee++,fe(g,oe,1);while(g.heap_len>=2);g.heap[--g.heap_max]=g.heap[1],function(be,Et){var Ge,De,$e,gt,dt,bt,qe=Et.dyn_tree,ze=Et.max_code,tt=Et.stat_desc.static_tree,It=Et.stat_desc.has_stree,Je=Et.stat_desc.extra_bits,ht=Et.stat_desc.extra_base,yt=Et.stat_desc.max_length,ot=0;for(gt=0;gt<=u;gt++)be.bl_count[gt]=0;for(qe[2*be.heap[be.heap_max]+1]=0,Ge=be.heap_max+1;Ge<573;Ge++)(gt=qe[2*qe[2*(De=be.heap[Ge])+1]+1]+1)>yt&&(gt=yt,ot++),qe[2*De+1]=gt,De>ze||(be.bl_count[gt]++,dt=0,De>=ht&&(dt=Je[De-ht]),bt=qe[2*De],be.opt_len+=bt*(gt+dt),It&&(be.static_len+=bt*(tt[2*De+1]+dt)));if(ot!==0){do{for(gt=yt-1;be.bl_count[gt]===0;)gt--;be.bl_count[gt]--,be.bl_count[gt+1]+=2,be.bl_count[yt]--,ot-=2}while(ot>0);for(gt=yt;gt!==0;gt--)for(De=be.bl_count[gt];De!==0;)($e=be.heap[--Ge])>ze||(qe[2*$e+1]!==gt&&(be.opt_len+=(gt-qe[2*$e+1])*qe[2*$e],qe[2*$e+1]=gt),De--)}}(g,U),z(oe,me,g.bl_count)},O=function(g,U,x){var Q,ee,oe=-1,ke=U[1],pe=0,Fe=7,me=4;for(ke===0&&(Fe=138,me=3),U[2*(x+1)+1]=65535,Q=0;Q<=x;Q++)ee=ke,ke=U[2*(Q+1)+1],++pe<Fe&&ee===ke||(pe<me?g.bl_tree[2*ee]+=pe:ee!==0?(ee!==oe&&g.bl_tree[2*ee]++,g.bl_tree[32]++):pe<=10?g.bl_tree[34]++:g.bl_tree[36]++,pe=0,oe=ee,ke===0?(Fe=138,me=3):ee===ke?(Fe=6,me=3):(Fe=7,me=4))},ne=function(g,U,x){var Q,ee,oe=-1,ke=U[1],pe=0,Fe=7,me=4;for(ke===0&&(Fe=138,me=3),Q=0;Q<=x;Q++)if(ee=ke,ke=U[2*(Q+1)+1],!(++pe<Fe&&ee===ke)){if(pe<me)do H(g,ee,g.bl_tree);while(--pe!=0);else ee!==0?(ee!==oe&&(H(g,ee,g.bl_tree),pe--),H(g,16,g.bl_tree),A(g,pe-3,2)):pe<=10?(H(g,17,g.bl_tree),A(g,pe-3,3)):(H(g,18,g.bl_tree),A(g,pe-11,7));pe=0,oe=ee,ke===0?(Fe=138,me=3):ee===ke?(Fe=6,me=3):(Fe=7,me=4)}},J=!1,G=function(g,U,x,Q){A(g,0+(Q?1:0),3),P(g),D(g,x),D(g,~x),x&&g.pending_buf.set(g.window.subarray(U,U+x),g.pending),g.pending+=x},ve=function(g,U,x,Q){var ee,oe,ke=0;g.level>0?(g.strm.data_type===2&&(g.strm.data_type=function(pe){var Fe,me=4093624447;for(Fe=0;Fe<=31;Fe++,me>>>=1)if(1&me&&pe.dyn_ltree[2*Fe]!==0)return 0;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return 1;for(Fe=32;Fe<i;Fe++)if(pe.dyn_ltree[2*Fe]!==0)return 1;return 0}(g)),ue(g,g.l_desc),ue(g,g.d_desc),ke=function(pe){var Fe;for(O(pe,pe.dyn_ltree,pe.l_desc.max_code),O(pe,pe.dyn_dtree,pe.d_desc.max_code),ue(pe,pe.bl_desc),Fe=18;Fe>=3&&pe.bl_tree[2*p[Fe]+1]===0;Fe--);return pe.opt_len+=3*(Fe+1)+5+5+4,Fe}(g),ee=g.opt_len+3+7>>>3,(oe=g.static_len+3+7>>>3)<=ee&&(ee=oe)):ee=oe=x+5,x+4<=ee&&U!==-1?G(g,U,x,Q):g.strategy===4||oe===ee?(A(g,2+(Q?1:0),3),re(g,v,b)):(A(g,4+(Q?1:0),3),function(pe,Fe,me,be){var Et;for(A(pe,Fe-257,5),A(pe,me-1,5),A(pe,be-4,4),Et=0;Et<be;Et++)A(pe,pe.bl_tree[2*p[Et]+1],3);ne(pe,pe.dyn_ltree,Fe-1),ne(pe,pe.dyn_dtree,me-1)}(g,g.l_desc.max_code+1,g.d_desc.max_code+1,ke+1),re(g,g.dyn_ltree,g.dyn_dtree)),ae(g),Q&&P(g)},de={_tr_init:function(g){J||(function(){var U,x,Q,ee,oe,ke=new Array(16);for(Q=0,ee=0;ee<28;ee++)for(T[ee]=Q,U=0;U<1<<d[ee];U++)S[Q++]=ee;for(S[Q-1]=ee,oe=0,ee=0;ee<16;ee++)for(E[ee]=oe,U=0;U<1<<h[ee];U++)k[oe++]=ee;for(oe>>=7;ee<s;ee++)for(E[ee]=oe<<7,U=0;U<1<<h[ee]-7;U++)k[256+oe++]=ee;for(x=0;x<=u;x++)ke[x]=0;for(U=0;U<=143;)v[2*U+1]=8,U++,ke[8]++;for(;U<=255;)v[2*U+1]=9,U++,ke[9]++;for(;U<=279;)v[2*U+1]=7,U++,ke[7]++;for(;U<=287;)v[2*U+1]=8,U++,ke[8]++;for(z(v,287,ke),U=0;U<s;U++)b[2*U+1]=5,b[2*U]=te(U,5);y=new N(v,d,257,a,u),_=new N(b,h,0,s,u),w=new N(new Array(0),f,0,19,7)}(),J=!0),g.l_desc=new M(g.dyn_ltree,y),g.d_desc=new M(g.dyn_dtree,_),g.bl_desc=new M(g.bl_tree,w),g.bi_buf=0,g.bi_valid=0,ae(g)},_tr_stored_block:G,_tr_flush_block:ve,_tr_tally:function(g,U,x){return g.pending_buf[g.sym_buf+g.sym_next++]=U,g.pending_buf[g.sym_buf+g.sym_next++]=U>>8,g.pending_buf[g.sym_buf+g.sym_next++]=x,U===0?g.dyn_ltree[2*x]++:(g.matches++,U--,g.dyn_ltree[2*(S[x]+i+1)]++,g.dyn_dtree[2*B(U)]++),g.sym_next===g.sym_end},_tr_align:function(g){A(g,2,3),H(g,256,v),function(U){U.bi_valid===16?(D(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):U.bi_valid>=8&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(g)}},Z=function(g,U,x,Q){for(var ee=65535&g|0,oe=g>>>16&65535|0,ke=0;x!==0;){x-=ke=x>2e3?2e3:x;do oe=oe+(ee=ee+U[Q++]|0)|0;while(--ke);ee%=65521,oe%=65521}return ee|oe<<16|0},se=new Uint32Array(function(){for(var g,U=[],x=0;x<256;x++){g=x;for(var Q=0;Q<8;Q++)g=1&g?3988292384^g>>>1:g>>>1;U[x]=g}return U}()),F=function(g,U,x,Q){var ee=se,oe=Q+x;g^=-1;for(var ke=Q;ke<oe;ke++)g=g>>>8^ee[255&(g^U[ke])];return-1^g},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},X={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Y=de._tr_init,Ne=de._tr_stored_block,Le=de._tr_flush_block,Me=de._tr_tally,j=de._tr_align,K=X.Z_NO_FLUSH,W=X.Z_PARTIAL_FLUSH,V=X.Z_FULL_FLUSH,q=X.Z_FINISH,ie=X.Z_BLOCK,ye=X.Z_OK,we=X.Z_STREAM_END,he=X.Z_STREAM_ERROR,je=X.Z_DATA_ERROR,Pe=X.Z_BUF_ERROR,Oe=X.Z_DEFAULT_COMPRESSION,Ue=X.Z_FILTERED,Ye=X.Z_HUFFMAN_ONLY,et=X.Z_RLE,Wt=X.Z_FIXED,Ar=X.Z_DEFAULT_STRATEGY,fr=X.Z_UNKNOWN,Kt=X.Z_DEFLATED,Ae=258,Te=262,xe=42,Ce=113,Ve=666,He=function(g,U){return g.msg=I[U],U},ct=function(g){return 2*g-(g>4?9:0)},Ke=function(g){for(var U=g.length;--U>=0;)g[U]=0},vt=function(g){var U,x,Q,ee=g.w_size;Q=U=g.hash_size;do x=g.head[--Q],g.head[Q]=x>=ee?x-ee:0;while(--U);Q=U=ee;do x=g.prev[--Q],g.prev[Q]=x>=ee?x-ee:0;while(--U)},wt=function(g,U,x){return(U<<g.hash_shift^x)&g.hash_mask},Ct=function(g){var U=g.state,x=U.pending;x>g.avail_out&&(x=g.avail_out),x!==0&&(g.output.set(U.pending_buf.subarray(U.pending_out,U.pending_out+x),g.next_out),g.next_out+=x,U.pending_out+=x,g.total_out+=x,g.avail_out-=x,U.pending-=x,U.pending===0&&(U.pending_out=0))},Rt=function(g,U){Le(g,g.block_start>=0?g.block_start:-1,g.strstart-g.block_start,U),g.block_start=g.strstart,Ct(g.strm)},pt=function(g,U){g.pending_buf[g.pending++]=U},Mr=function(g,U){g.pending_buf[g.pending++]=U>>>8&255,g.pending_buf[g.pending++]=255&U},Fn=function(g,U,x,Q){var ee=g.avail_in;return ee>Q&&(ee=Q),ee===0?0:(g.avail_in-=ee,U.set(g.input.subarray(g.next_in,g.next_in+ee),x),g.state.wrap===1?g.adler=Z(g.adler,U,ee,x):g.state.wrap===2&&(g.adler=F(g.adler,U,ee,x)),g.next_in+=ee,g.total_in+=ee,ee)},xi=function(g,U){var x,Q,ee=g.max_chain_length,oe=g.strstart,ke=g.prev_length,pe=g.nice_match,Fe=g.strstart>g.w_size-Te?g.strstart-(g.w_size-Te):0,me=g.window,be=g.w_mask,Et=g.prev,Ge=g.strstart+Ae,De=me[oe+ke-1],$e=me[oe+ke];g.prev_length>=g.good_match&&(ee>>=2),pe>g.lookahead&&(pe=g.lookahead);do if(me[(x=U)+ke]===$e&&me[x+ke-1]===De&&me[x]===me[oe]&&me[++x]===me[oe+1]){oe+=2,x++;do;while(me[++oe]===me[++x]&&me[++oe]===me[++x]&&me[++oe]===me[++x]&&me[++oe]===me[++x]&&me[++oe]===me[++x]&&me[++oe]===me[++x]&&me[++oe]===me[++x]&&me[++oe]===me[++x]&&oe<Ge);if(Q=Ae-(Ge-oe),oe=Ge-Ae,Q>ke){if(g.match_start=U,ke=Q,Q>=pe)break;De=me[oe+ke-1],$e=me[oe+ke]}}while((U=Et[U&be])>Fe&&--ee!=0);return ke<=g.lookahead?ke:g.lookahead},Dr=function(g){var U,x,Q,ee=g.w_size;do{if(x=g.window_size-g.lookahead-g.strstart,g.strstart>=ee+(ee-Te)&&(g.window.set(g.window.subarray(ee,ee+ee-x),0),g.match_start-=ee,g.strstart-=ee,g.block_start-=ee,g.insert>g.strstart&&(g.insert=g.strstart),vt(g),x+=ee),g.strm.avail_in===0)break;if(U=Fn(g.strm,g.window,g.strstart+g.lookahead,x),g.lookahead+=U,g.lookahead+g.insert>=3)for(Q=g.strstart-g.insert,g.ins_h=g.window[Q],g.ins_h=wt(g,g.ins_h,g.window[Q+1]);g.insert&&(g.ins_h=wt(g,g.ins_h,g.window[Q+3-1]),g.prev[Q&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=Q,Q++,g.insert--,!(g.lookahead+g.insert<3)););}while(g.lookahead<Te&&g.strm.avail_in!==0)},bi=function(g,U){var x,Q,ee,oe=g.pending_buf_size-5>g.w_size?g.w_size:g.pending_buf_size-5,ke=0,pe=g.strm.avail_in;do{if(x=65535,ee=g.bi_valid+42>>3,g.strm.avail_out<ee||(ee=g.strm.avail_out-ee,x>(Q=g.strstart-g.block_start)+g.strm.avail_in&&(x=Q+g.strm.avail_in),x>ee&&(x=ee),x<oe&&(x===0&&U!==q||U===K||x!==Q+g.strm.avail_in)))break;ke=U===q&&x===Q+g.strm.avail_in?1:0,Ne(g,0,0,ke),g.pending_buf[g.pending-4]=x,g.pending_buf[g.pending-3]=x>>8,g.pending_buf[g.pending-2]=~x,g.pending_buf[g.pending-1]=~x>>8,Ct(g.strm),Q&&(Q>x&&(Q=x),g.strm.output.set(g.window.subarray(g.block_start,g.block_start+Q),g.strm.next_out),g.strm.next_out+=Q,g.strm.avail_out-=Q,g.strm.total_out+=Q,g.block_start+=Q,x-=Q),x&&(Fn(g.strm,g.strm.output,g.strm.next_out,x),g.strm.next_out+=x,g.strm.avail_out-=x,g.strm.total_out+=x)}while(ke===0);return(pe-=g.strm.avail_in)&&(pe>=g.w_size?(g.matches=2,g.window.set(g.strm.input.subarray(g.strm.next_in-g.w_size,g.strm.next_in),0),g.strstart=g.w_size,g.insert=g.strstart):(g.window_size-g.strstart<=pe&&(g.strstart-=g.w_size,g.window.set(g.window.subarray(g.w_size,g.w_size+g.strstart),0),g.matches<2&&g.matches++,g.insert>g.strstart&&(g.insert=g.strstart)),g.window.set(g.strm.input.subarray(g.strm.next_in-pe,g.strm.next_in),g.strstart),g.strstart+=pe,g.insert+=pe>g.w_size-g.insert?g.w_size-g.insert:pe),g.block_start=g.strstart),g.high_water<g.strstart&&(g.high_water=g.strstart),ke?4:U!==K&&U!==q&&g.strm.avail_in===0&&g.strstart===g.block_start?2:(ee=g.window_size-g.strstart,g.strm.avail_in>ee&&g.block_start>=g.w_size&&(g.block_start-=g.w_size,g.strstart-=g.w_size,g.window.set(g.window.subarray(g.w_size,g.w_size+g.strstart),0),g.matches<2&&g.matches++,ee+=g.w_size,g.insert>g.strstart&&(g.insert=g.strstart)),ee>g.strm.avail_in&&(ee=g.strm.avail_in),ee&&(Fn(g.strm,g.window,g.strstart,ee),g.strstart+=ee,g.insert+=ee>g.w_size-g.insert?g.w_size-g.insert:ee),g.high_water<g.strstart&&(g.high_water=g.strstart),ee=g.bi_valid+42>>3,oe=(ee=g.pending_buf_size-ee>65535?65535:g.pending_buf_size-ee)>g.w_size?g.w_size:ee,((Q=g.strstart-g.block_start)>=oe||(Q||U===q)&&U!==K&&g.strm.avail_in===0&&Q<=ee)&&(x=Q>ee?ee:Q,ke=U===q&&g.strm.avail_in===0&&x===Q?1:0,Ne(g,g.block_start,x,ke),g.block_start+=x,Ct(g.strm)),ke?3:1)},zn=function(g,U){for(var x,Q;;){if(g.lookahead<Te){if(Dr(g),g.lookahead<Te&&U===K)return 1;if(g.lookahead===0)break}if(x=0,g.lookahead>=3&&(g.ins_h=wt(g,g.ins_h,g.window[g.strstart+3-1]),x=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),x!==0&&g.strstart-x<=g.w_size-Te&&(g.match_length=xi(g,x)),g.match_length>=3)if(Q=Me(g,g.strstart-g.match_start,g.match_length-3),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=3){g.match_length--;do g.strstart++,g.ins_h=wt(g,g.ins_h,g.window[g.strstart+3-1]),x=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart;while(--g.match_length!=0);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=wt(g,g.ins_h,g.window[g.strstart+1]);else Q=Me(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(Q&&(Rt(g,!1),g.strm.avail_out===0))return 1}return g.insert=g.strstart<2?g.strstart:2,U===q?(Rt(g,!0),g.strm.avail_out===0?3:4):g.sym_next&&(Rt(g,!1),g.strm.avail_out===0)?1:2},Wr=function(g,U){for(var x,Q,ee;;){if(g.lookahead<Te){if(Dr(g),g.lookahead<Te&&U===K)return 1;if(g.lookahead===0)break}if(x=0,g.lookahead>=3&&(g.ins_h=wt(g,g.ins_h,g.window[g.strstart+3-1]),x=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=2,x!==0&&g.prev_length<g.max_lazy_match&&g.strstart-x<=g.w_size-Te&&(g.match_length=xi(g,x),g.match_length<=5&&(g.strategy===Ue||g.match_length===3&&g.strstart-g.match_start>4096)&&(g.match_length=2)),g.prev_length>=3&&g.match_length<=g.prev_length){ee=g.strstart+g.lookahead-3,Q=Me(g,g.strstart-1-g.prev_match,g.prev_length-3),g.lookahead-=g.prev_length-1,g.prev_length-=2;do++g.strstart<=ee&&(g.ins_h=wt(g,g.ins_h,g.window[g.strstart+3-1]),x=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart);while(--g.prev_length!=0);if(g.match_available=0,g.match_length=2,g.strstart++,Q&&(Rt(g,!1),g.strm.avail_out===0))return 1}else if(g.match_available){if((Q=Me(g,0,g.window[g.strstart-1]))&&Rt(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return 1}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(Q=Me(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<2?g.strstart:2,U===q?(Rt(g,!0),g.strm.avail_out===0?3:4):g.sym_next&&(Rt(g,!1),g.strm.avail_out===0)?1:2};function Or(g,U,x,Q,ee){this.good_length=g,this.max_lazy=U,this.nice_length=x,this.max_chain=Q,this.func=ee}var ur=[new Or(0,0,0,0,bi),new Or(4,4,8,4,zn),new Or(4,5,16,8,zn),new Or(4,6,32,32,zn),new Or(4,4,16,16,Wr),new Or(8,16,32,32,Wr),new Or(8,16,128,128,Wr),new Or(8,32,128,256,Wr),new Or(32,128,258,1024,Wr),new Or(32,258,258,4096,Wr)];function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Kt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ke(this.dyn_ltree),Ke(this.dyn_dtree),Ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ke(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var _i=function(g){if(!g)return 1;var U=g.state;return!U||U.strm!==g||U.status!==xe&&U.status!==57&&U.status!==69&&U.status!==73&&U.status!==91&&U.status!==103&&U.status!==Ce&&U.status!==Ve?1:0},Wl=function(g){if(_i(g))return He(g,he);g.total_in=g.total_out=0,g.data_type=fr;var U=g.state;return U.pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap===2?57:U.wrap?xe:Ce,g.adler=U.wrap===2?0:1,U.last_flush=-2,Y(U),ye},Zl=function(g){var U,x=Wl(g);return x===ye&&((U=g.state).window_size=2*U.w_size,Ke(U.head),U.max_lazy_match=ur[U.level].max_lazy,U.good_match=ur[U.level].good_length,U.nice_match=ur[U.level].nice_length,U.max_chain_length=ur[U.level].max_chain,U.strstart=0,U.block_start=0,U.lookahead=0,U.insert=0,U.match_length=U.prev_length=2,U.match_available=0,U.ins_h=0),x},Kl=function(g,U,x,Q,ee,oe){if(!g)return he;var ke=1;if(U===Oe&&(U=6),Q<0?(ke=0,Q=-Q):Q>15&&(ke=2,Q-=16),ee<1||ee>9||x!==Kt||Q<8||Q>15||U<0||U>9||oe<0||oe>Wt||Q===8&&ke!==1)return He(g,he);Q===8&&(Q=9);var pe=new Xe;return g.state=pe,pe.strm=g,pe.status=xe,pe.wrap=ke,pe.gzhead=null,pe.w_bits=Q,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=ee+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+3-1)/3),pe.window=new Uint8Array(2*pe.w_size),pe.head=new Uint16Array(pe.hash_size),pe.prev=new Uint16Array(pe.w_size),pe.lit_bufsize=1<<ee+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new Uint8Array(pe.pending_buf_size),pe.sym_buf=pe.lit_bufsize,pe.sym_end=3*(pe.lit_bufsize-1),pe.level=U,pe.strategy=oe,pe.method=x,Zl(g)},Vi={deflateInit:function(g,U){return Kl(g,U,Kt,15,8,Ar)},deflateInit2:Kl,deflateReset:Zl,deflateResetKeep:Wl,deflateSetHeader:function(g,U){return _i(g)||g.state.wrap!==2?he:(g.state.gzhead=U,ye)},deflate:function(g,U){if(_i(g)||U>ie||U<0)return g?He(g,he):he;var x=g.state;if(!g.output||g.avail_in!==0&&!g.input||x.status===Ve&&U!==q)return He(g,g.avail_out===0?Pe:he);var Q=x.last_flush;if(x.last_flush=U,x.pending!==0){if(Ct(g),g.avail_out===0)return x.last_flush=-1,ye}else if(g.avail_in===0&&ct(U)<=ct(Q)&&U!==q)return He(g,Pe);if(x.status===Ve&&g.avail_in!==0)return He(g,Pe);if(x.status===xe&&x.wrap===0&&(x.status=Ce),x.status===xe){var ee=Kt+(x.w_bits-8<<4)<<8;if(ee|=(x.strategy>=Ye||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(ee|=32),Mr(x,ee+=31-ee%31),x.strstart!==0&&(Mr(x,g.adler>>>16),Mr(x,65535&g.adler)),g.adler=1,x.status=Ce,Ct(g),x.pending!==0)return x.last_flush=-1,ye}if(x.status===57){if(g.adler=0,pt(x,31),pt(x,139),pt(x,8),x.gzhead)pt(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),pt(x,255&x.gzhead.time),pt(x,x.gzhead.time>>8&255),pt(x,x.gzhead.time>>16&255),pt(x,x.gzhead.time>>24&255),pt(x,x.level===9?2:x.strategy>=Ye||x.level<2?4:0),pt(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(pt(x,255&x.gzhead.extra.length),pt(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(g.adler=F(g.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69;else if(pt(x,0),pt(x,0),pt(x,0),pt(x,0),pt(x,0),pt(x,x.level===9?2:x.strategy>=Ye||x.level<2?4:0),pt(x,3),x.status=Ce,Ct(g),x.pending!==0)return x.last_flush=-1,ye}if(x.status===69){if(x.gzhead.extra){for(var oe=x.pending,ke=(65535&x.gzhead.extra.length)-x.gzindex;x.pending+ke>x.pending_buf_size;){var pe=x.pending_buf_size-x.pending;if(x.pending_buf.set(x.gzhead.extra.subarray(x.gzindex,x.gzindex+pe),x.pending),x.pending=x.pending_buf_size,x.gzhead.hcrc&&x.pending>oe&&(g.adler=F(g.adler,x.pending_buf,x.pending-oe,oe)),x.gzindex+=pe,Ct(g),x.pending!==0)return x.last_flush=-1,ye;oe=0,ke-=pe}var Fe=new Uint8Array(x.gzhead.extra);x.pending_buf.set(Fe.subarray(x.gzindex,x.gzindex+ke),x.pending),x.pending+=ke,x.gzhead.hcrc&&x.pending>oe&&(g.adler=F(g.adler,x.pending_buf,x.pending-oe,oe)),x.gzindex=0}x.status=73}if(x.status===73){if(x.gzhead.name){var me,be=x.pending;do{if(x.pending===x.pending_buf_size){if(x.gzhead.hcrc&&x.pending>be&&(g.adler=F(g.adler,x.pending_buf,x.pending-be,be)),Ct(g),x.pending!==0)return x.last_flush=-1,ye;be=0}me=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,pt(x,me)}while(me!==0);x.gzhead.hcrc&&x.pending>be&&(g.adler=F(g.adler,x.pending_buf,x.pending-be,be)),x.gzindex=0}x.status=91}if(x.status===91){if(x.gzhead.comment){var Et,Ge=x.pending;do{if(x.pending===x.pending_buf_size){if(x.gzhead.hcrc&&x.pending>Ge&&(g.adler=F(g.adler,x.pending_buf,x.pending-Ge,Ge)),Ct(g),x.pending!==0)return x.last_flush=-1,ye;Ge=0}Et=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,pt(x,Et)}while(Et!==0);x.gzhead.hcrc&&x.pending>Ge&&(g.adler=F(g.adler,x.pending_buf,x.pending-Ge,Ge))}x.status=103}if(x.status===103){if(x.gzhead.hcrc){if(x.pending+2>x.pending_buf_size&&(Ct(g),x.pending!==0))return x.last_flush=-1,ye;pt(x,255&g.adler),pt(x,g.adler>>8&255),g.adler=0}if(x.status=Ce,Ct(g),x.pending!==0)return x.last_flush=-1,ye}if(g.avail_in!==0||x.lookahead!==0||U!==K&&x.status!==Ve){var De=x.level===0?bi(x,U):x.strategy===Ye?function($e,gt){for(var dt;;){if($e.lookahead===0&&(Dr($e),$e.lookahead===0)){if(gt===K)return 1;break}if($e.match_length=0,dt=Me($e,0,$e.window[$e.strstart]),$e.lookahead--,$e.strstart++,dt&&(Rt($e,!1),$e.strm.avail_out===0))return 1}return $e.insert=0,gt===q?(Rt($e,!0),$e.strm.avail_out===0?3:4):$e.sym_next&&(Rt($e,!1),$e.strm.avail_out===0)?1:2}(x,U):x.strategy===et?function($e,gt){for(var dt,bt,qe,ze,tt=$e.window;;){if($e.lookahead<=Ae){if(Dr($e),$e.lookahead<=Ae&&gt===K)return 1;if($e.lookahead===0)break}if($e.match_length=0,$e.lookahead>=3&&$e.strstart>0&&(bt=tt[qe=$e.strstart-1])===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]){ze=$e.strstart+Ae;do;while(bt===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]&&bt===tt[++qe]&&qe<ze);$e.match_length=Ae-(ze-qe),$e.match_length>$e.lookahead&&($e.match_length=$e.lookahead)}if($e.match_length>=3?(dt=Me($e,1,$e.match_length-3),$e.lookahead-=$e.match_length,$e.strstart+=$e.match_length,$e.match_length=0):(dt=Me($e,0,$e.window[$e.strstart]),$e.lookahead--,$e.strstart++),dt&&(Rt($e,!1),$e.strm.avail_out===0))return 1}return $e.insert=0,gt===q?(Rt($e,!0),$e.strm.avail_out===0?3:4):$e.sym_next&&(Rt($e,!1),$e.strm.avail_out===0)?1:2}(x,U):ur[x.level].func(x,U);if(De!==3&&De!==4||(x.status=Ve),De===1||De===3)return g.avail_out===0&&(x.last_flush=-1),ye;if(De===2&&(U===W?j(x):U!==ie&&(Ne(x,0,0,!1),U===V&&(Ke(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),Ct(g),g.avail_out===0))return x.last_flush=-1,ye}return U!==q?ye:x.wrap<=0?we:(x.wrap===2?(pt(x,255&g.adler),pt(x,g.adler>>8&255),pt(x,g.adler>>16&255),pt(x,g.adler>>24&255),pt(x,255&g.total_in),pt(x,g.total_in>>8&255),pt(x,g.total_in>>16&255),pt(x,g.total_in>>24&255)):(Mr(x,g.adler>>>16),Mr(x,65535&g.adler)),Ct(g),x.wrap>0&&(x.wrap=-x.wrap),x.pending!==0?ye:we)},deflateEnd:function(g){if(_i(g))return he;var U=g.state.status;return g.state=null,U===Ce?He(g,je):ye},deflateSetDictionary:function(g,U){var x=U.length;if(_i(g))return he;var Q=g.state,ee=Q.wrap;if(ee===2||ee===1&&Q.status!==xe||Q.lookahead)return he;if(ee===1&&(g.adler=Z(g.adler,U,x,0)),Q.wrap=0,x>=Q.w_size){ee===0&&(Ke(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0);var oe=new Uint8Array(Q.w_size);oe.set(U.subarray(x-Q.w_size,x),0),U=oe,x=Q.w_size}var ke=g.avail_in,pe=g.next_in,Fe=g.input;for(g.avail_in=x,g.next_in=0,g.input=U,Dr(Q);Q.lookahead>=3;){var me=Q.strstart,be=Q.lookahead-2;do Q.ins_h=wt(Q,Q.ins_h,Q.window[me+3-1]),Q.prev[me&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=me,me++;while(--be);Q.strstart=me,Q.lookahead=2,Dr(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=2,Q.match_available=0,g.next_in=pe,g.input=Fe,g.avail_in=ke,Q.wrap=ee,ye},deflateInfo:"pako deflate (from Nodeca project)"};function ss(g){return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},ss(g)}var la=function(g,U){return Object.prototype.hasOwnProperty.call(g,U)},Xl=function(g){for(var U=Array.prototype.slice.call(arguments,1);U.length;){var x=U.shift();if(x){if(ss(x)!=="object")throw new TypeError(x+"must be non-object");for(var Q in x)la(x,Q)&&(g[Q]=x[Q])}}return g},Qc=function(g){for(var U=0,x=0,Q=g.length;x<Q;x++)U+=g[x].length;for(var ee=new Uint8Array(U),oe=0,ke=0,pe=g.length;oe<pe;oe++){var Fe=g[oe];ee.set(Fe,ke),ke+=Fe.length}return ee},ed=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ed=!1}for(var ho=new Uint8Array(256),wi=0;wi<256;wi++)ho[wi]=wi>=252?6:wi>=248?5:wi>=240?4:wi>=224?3:wi>=192?2:1;ho[254]=ho[254]=1;var ls=function(g){if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(g);var U,x,Q,ee,oe,ke=g.length,pe=0;for(ee=0;ee<ke;ee++)(64512&(x=g.charCodeAt(ee)))==55296&&ee+1<ke&&(64512&(Q=g.charCodeAt(ee+1)))==56320&&(x=65536+(x-55296<<10)+(Q-56320),ee++),pe+=x<128?1:x<2048?2:x<65536?3:4;for(U=new Uint8Array(pe),oe=0,ee=0;oe<pe;ee++)(64512&(x=g.charCodeAt(ee)))==55296&&ee+1<ke&&(64512&(Q=g.charCodeAt(ee+1)))==56320&&(x=65536+(x-55296<<10)+(Q-56320),ee++),x<128?U[oe++]=x:x<2048?(U[oe++]=192|x>>>6,U[oe++]=128|63&x):x<65536?(U[oe++]=224|x>>>12,U[oe++]=128|x>>>6&63,U[oe++]=128|63&x):(U[oe++]=240|x>>>18,U[oe++]=128|x>>>12&63,U[oe++]=128|x>>>6&63,U[oe++]=128|63&x);return U},Jf=function(g,U){var x,Q,ee=U||g.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(g.subarray(0,U));var oe=new Array(2*ee);for(Q=0,x=0;x<ee;){var ke=g[x++];if(ke<128)oe[Q++]=ke;else{var pe=ho[ke];if(pe>4)oe[Q++]=65533,x+=pe-1;else{for(ke&=pe===2?31:pe===3?15:7;pe>1&&x<ee;)ke=ke<<6|63&g[x++],pe--;pe>1?oe[Q++]=65533:ke<65536?oe[Q++]=ke:(ke-=65536,oe[Q++]=55296|ke>>10&1023,oe[Q++]=56320|1023&ke)}}}return function(Fe,me){if(me<65534&&Fe.subarray&&ed)return String.fromCharCode.apply(null,Fe.length===me?Fe:Fe.subarray(0,me));for(var be="",Et=0;Et<me;Et++)be+=String.fromCharCode(Fe[Et]);return be}(oe,Q)},us=function(g,U){(U=U||g.length)>g.length&&(U=g.length);for(var x=U-1;x>=0&&(192&g[x])==128;)x--;return x<0||x===0?U:x+ho[g[x]]>U?x:U},td=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},rd=Object.prototype.toString,Yf=X.Z_NO_FLUSH,Qf=X.Z_SYNC_FLUSH,ep=X.Z_FULL_FLUSH,Jl=X.Z_FINISH,Ei=X.Z_OK,nd=X.Z_STREAM_END,id=X.Z_DEFAULT_COMPRESSION,fo=X.Z_DEFAULT_STRATEGY,kt=X.Z_DEFLATED;function Pt(g){this.options=Xl({level:id,method:kt,chunkSize:16384,windowBits:15,memLevel:8,strategy:fo},g||{});var U=this.options;U.raw&&U.windowBits>0?U.windowBits=-U.windowBits:U.gzip&&U.windowBits>0&&U.windowBits<16&&(U.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new td,this.strm.avail_out=0;var x=Vi.deflateInit2(this.strm,U.level,U.method,U.windowBits,U.memLevel,U.strategy);if(x!==Ei)throw new Error(I[x]);if(U.header&&Vi.deflateSetHeader(this.strm,U.header),U.dictionary){var Q;if(Q=typeof U.dictionary=="string"?ls(U.dictionary):rd.call(U.dictionary)==="[object ArrayBuffer]"?new Uint8Array(U.dictionary):U.dictionary,(x=Vi.deflateSetDictionary(this.strm,Q))!==Ei)throw new Error(I[x]);this._dict_set=!0}}function ua(g,U){var x=new Pt(U);if(x.push(g,!0),x.err)throw x.msg||I[x.err];return x.result}Pt.prototype.push=function(g,U){var x,Q,ee=this.strm,oe=this.options.chunkSize;if(this.ended)return!1;for(Q=U===~~U?U:U===!0?Jl:Yf,typeof g=="string"?ee.input=ls(g):rd.call(g)==="[object ArrayBuffer]"?ee.input=new Uint8Array(g):ee.input=g,ee.next_in=0,ee.avail_in=ee.input.length;;)if(ee.avail_out===0&&(ee.output=new Uint8Array(oe),ee.next_out=0,ee.avail_out=oe),(Q===Qf||Q===ep)&&ee.avail_out<=6)this.onData(ee.output.subarray(0,ee.next_out)),ee.avail_out=0;else{if((x=Vi.deflate(ee,Q))===nd)return ee.next_out>0&&this.onData(ee.output.subarray(0,ee.next_out)),x=Vi.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===Ei;if(ee.avail_out!==0){if(Q>0&&ee.next_out>0)this.onData(ee.output.subarray(0,ee.next_out)),ee.avail_out=0;else if(ee.avail_in===0)break}else this.onData(ee.output)}return!0},Pt.prototype.onData=function(g){this.chunks.push(g)},Pt.prototype.onEnd=function(g){g===Ei&&(this.result=Qc(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};var Qn={Deflate:Pt,deflate:ua,deflateRaw:function(g,U){return(U=U||{}).raw=!0,ua(g,U)},gzip:function(g,U){return(U=U||{}).gzip=!0,ua(g,U)}},ei=16209,Yl=function(g,U){var x,Q,ee,oe,ke,pe,Fe,me,be,Et,Ge,De,$e,gt,dt,bt,qe,ze,tt,It,Je,ht,yt,ot,rt=g.state;x=g.next_in,yt=g.input,Q=x+(g.avail_in-5),ee=g.next_out,ot=g.output,oe=ee-(U-g.avail_out),ke=ee+(g.avail_out-257),pe=rt.dmax,Fe=rt.wsize,me=rt.whave,be=rt.wnext,Et=rt.window,Ge=rt.hold,De=rt.bits,$e=rt.lencode,gt=rt.distcode,dt=(1<<rt.lenbits)-1,bt=(1<<rt.distbits)-1;e:do{De<15&&(Ge+=yt[x++]<<De,De+=8,Ge+=yt[x++]<<De,De+=8),qe=$e[Ge&dt];t:for(;;){if(Ge>>>=ze=qe>>>24,De-=ze,(ze=qe>>>16&255)===0)ot[ee++]=65535&qe;else{if(!(16&ze)){if(!(64&ze)){qe=$e[(65535&qe)+(Ge&(1<<ze)-1)];continue t}if(32&ze){rt.mode=16191;break e}g.msg="invalid literal/length code",rt.mode=ei;break e}tt=65535&qe,(ze&=15)&&(De<ze&&(Ge+=yt[x++]<<De,De+=8),tt+=Ge&(1<<ze)-1,Ge>>>=ze,De-=ze),De<15&&(Ge+=yt[x++]<<De,De+=8,Ge+=yt[x++]<<De,De+=8),qe=gt[Ge&bt];r:for(;;){if(Ge>>>=ze=qe>>>24,De-=ze,!(16&(ze=qe>>>16&255))){if(!(64&ze)){qe=gt[(65535&qe)+(Ge&(1<<ze)-1)];continue r}g.msg="invalid distance code",rt.mode=ei;break e}if(It=65535&qe,De<(ze&=15)&&(Ge+=yt[x++]<<De,(De+=8)<ze&&(Ge+=yt[x++]<<De,De+=8)),(It+=Ge&(1<<ze)-1)>pe){g.msg="invalid distance too far back",rt.mode=ei;break e}if(Ge>>>=ze,De-=ze,It>(ze=ee-oe)){if((ze=It-ze)>me&&rt.sane){g.msg="invalid distance too far back",rt.mode=ei;break e}if(Je=0,ht=Et,be===0){if(Je+=Fe-ze,ze<tt){tt-=ze;do ot[ee++]=Et[Je++];while(--ze);Je=ee-It,ht=ot}}else if(be<ze){if(Je+=Fe+be-ze,(ze-=be)<tt){tt-=ze;do ot[ee++]=Et[Je++];while(--ze);if(Je=0,be<tt){tt-=ze=be;do ot[ee++]=Et[Je++];while(--ze);Je=ee-It,ht=ot}}}else if(Je+=be-ze,ze<tt){tt-=ze;do ot[ee++]=Et[Je++];while(--ze);Je=ee-It,ht=ot}for(;tt>2;)ot[ee++]=ht[Je++],ot[ee++]=ht[Je++],ot[ee++]=ht[Je++],tt-=3;tt&&(ot[ee++]=ht[Je++],tt>1&&(ot[ee++]=ht[Je++]))}else{Je=ee-It;do ot[ee++]=ot[Je++],ot[ee++]=ot[Je++],ot[ee++]=ot[Je++],tt-=3;while(tt>2);tt&&(ot[ee++]=ot[Je++],tt>1&&(ot[ee++]=ot[Je++]))}break}}break}}while(x<Q&&ee<ke);x-=tt=De>>3,Ge&=(1<<(De-=tt<<3))-1,g.next_in=x,g.next_out=ee,g.avail_in=x<Q?Q-x+5:5-(x-Q),g.avail_out=ee<ke?ke-ee+257:257-(ee-ke),rt.hold=Ge,rt.bits=De},ft=15,Xt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ql=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cs=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),an=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),po=function(g,U,x,Q,ee,oe,ke,pe){var Fe,me,be,Et,Ge,De,$e,gt,dt,bt=pe.bits,qe=0,ze=0,tt=0,It=0,Je=0,ht=0,yt=0,ot=0,rt=0,Lt=0,ln=null,Si=new Uint16Array(16),Ai=new Uint16Array(16),Co=null;for(qe=0;qe<=ft;qe++)Si[qe]=0;for(ze=0;ze<Q;ze++)Si[U[x+ze]]++;for(Je=bt,It=ft;It>=1&&Si[It]===0;It--);if(Je>It&&(Je=It),It===0)return ee[oe++]=20971520,ee[oe++]=20971520,pe.bits=1,0;for(tt=1;tt<It&&Si[tt]===0;tt++);for(Je<tt&&(Je=tt),ot=1,qe=1;qe<=ft;qe++)if(ot<<=1,(ot-=Si[qe])<0)return-1;if(ot>0&&(g===0||It!==1))return-1;for(Ai[1]=0,qe=1;qe<ft;qe++)Ai[qe+1]=Ai[qe]+Si[qe];for(ze=0;ze<Q;ze++)U[x+ze]!==0&&(ke[Ai[U[x+ze]]++]=ze);if(g===0?(ln=Co=ke,De=20):g===1?(ln=Xt,Co=Ql,De=257):(ln=cs,Co=an,De=0),Lt=0,ze=0,qe=tt,Ge=oe,ht=Je,yt=0,be=-1,Et=(rt=1<<Je)-1,g===1&&rt>852||g===2&&rt>592)return 1;for(;;){$e=qe-yt,ke[ze]+1<De?(gt=0,dt=ke[ze]):ke[ze]>=De?(gt=Co[ke[ze]-De],dt=ln[ke[ze]-De]):(gt=96,dt=0),Fe=1<<qe-yt,tt=me=1<<ht;do ee[Ge+(Lt>>yt)+(me-=Fe)]=$e<<24|gt<<16|dt|0;while(me!==0);for(Fe=1<<qe-1;Lt&Fe;)Fe>>=1;if(Fe!==0?(Lt&=Fe-1,Lt+=Fe):Lt=0,ze++,--Si[qe]==0){if(qe===It)break;qe=U[x+ke[ze]]}if(qe>Je&&(Lt&Et)!==be){for(yt===0&&(yt=Je),Ge+=tt,ot=1<<(ht=qe-yt);ht+yt<It&&!((ot-=Si[ht+yt])<=0);)ht++,ot<<=1;if(rt+=1<<ht,g===1&&rt>852||g===2&&rt>592)return 1;ee[be=Lt&Et]=Je<<24|ht<<16|Ge-oe|0}}return Lt!==0&&(ee[Ge+Lt]=qe-yt<<24|64<<16|0),pe.bits=Je,0},mo=X.Z_FINISH,$i=X.Z_BLOCK,$t=X.Z_TREES,Zr=X.Z_OK,go=X.Z_STREAM_END,vo=X.Z_NEED_DICT,Kr=X.Z_STREAM_ERROR,ca=X.Z_DATA_ERROR,ds=X.Z_MEM_ERROR,eu=X.Z_BUF_ERROR,yo=X.Z_DEFLATED,da=16180,ha=16190,on=16191,hs=16192,xo=16194,fs=16199,ut=16200,sn=16206,it=16209,tu=function(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)};function ru(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var bo,_o,Xr=function(g){if(!g)return 1;var U=g.state;return!U||U.strm!==g||U.mode<da||U.mode>16211?1:0},ps=function(g){if(Xr(g))return Kr;var U=g.state;return g.total_in=g.total_out=U.total=0,g.msg="",U.wrap&&(g.adler=1&U.wrap),U.mode=da,U.last=0,U.havedict=0,U.flags=-1,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new Int32Array(852),U.distcode=U.distdyn=new Int32Array(592),U.sane=1,U.back=-1,Zr},fa=function(g){if(Xr(g))return Kr;var U=g.state;return U.wsize=0,U.whave=0,U.wnext=0,ps(g)},pr=function(g,U){var x;if(Xr(g))return Kr;var Q=g.state;return U<0?(x=0,U=-U):(x=5+(U>>4),U<48&&(U&=15)),U&&(U<8||U>15)?Kr:(Q.window!==null&&Q.wbits!==U&&(Q.window=null),Q.wrap=x,Q.wbits=U,fa(g))},Ci=function(g,U){if(!g)return Kr;var x=new ru;g.state=x,x.strm=g,x.window=null,x.mode=da;var Q=pr(g,U);return Q!==Zr&&(g.state=null),Q},nu=!0,ad=function(g){if(nu){bo=new Int32Array(512),_o=new Int32Array(32);for(var U=0;U<144;)g.lens[U++]=8;for(;U<256;)g.lens[U++]=9;for(;U<280;)g.lens[U++]=7;for(;U<288;)g.lens[U++]=8;for(po(1,g.lens,0,288,bo,0,g.work,{bits:9}),U=0;U<32;)g.lens[U++]=5;po(2,g.lens,0,32,_o,0,g.work,{bits:5}),nu=!1}g.lencode=bo,g.lenbits=9,g.distcode=_o,g.distbits=5},od=function(g,U,x,Q){var ee,oe=g.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new Uint8Array(oe.wsize)),Q>=oe.wsize?(oe.window.set(U.subarray(x-oe.wsize,x),0),oe.wnext=0,oe.whave=oe.wsize):((ee=oe.wsize-oe.wnext)>Q&&(ee=Q),oe.window.set(U.subarray(x-Q,x-Q+ee),oe.wnext),(Q-=ee)?(oe.window.set(U.subarray(x-Q,x),0),oe.wnext=Q,oe.whave=oe.wsize):(oe.wnext+=ee,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=ee))),0},Un={inflateReset:fa,inflateReset2:pr,inflateResetKeep:ps,inflateInit:function(g){return Ci(g,15)},inflateInit2:Ci,inflate:function(g,U){var x,Q,ee,oe,ke,pe,Fe,me,be,Et,Ge,De,$e,gt,dt,bt,qe,ze,tt,It,Je,ht,yt,ot,rt=0,Lt=new Uint8Array(4),ln=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xr(g)||!g.output||!g.input&&g.avail_in!==0)return Kr;(x=g.state).mode===on&&(x.mode=hs),ke=g.next_out,ee=g.output,Fe=g.avail_out,oe=g.next_in,Q=g.input,pe=g.avail_in,me=x.hold,be=x.bits,Et=pe,Ge=Fe,ht=Zr;e:for(;;)switch(x.mode){case da:if(x.wrap===0){x.mode=hs;break}for(;be<16;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(2&x.wrap&&me===35615){x.wbits===0&&(x.wbits=15),x.check=0,Lt[0]=255&me,Lt[1]=me>>>8&255,x.check=F(x.check,Lt,2,0),me=0,be=0,x.mode=16181;break}if(x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&me)<<8)+(me>>8))%31){g.msg="incorrect header check",x.mode=it;break}if((15&me)!==yo){g.msg="unknown compression method",x.mode=it;break}if(be-=4,Je=8+(15&(me>>>=4)),x.wbits===0&&(x.wbits=Je),Je>15||Je>x.wbits){g.msg="invalid window size",x.mode=it;break}x.dmax=1<<x.wbits,x.flags=0,g.adler=x.check=1,x.mode=512&me?16189:on,me=0,be=0;break;case 16181:for(;be<16;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(x.flags=me,(255&x.flags)!==yo){g.msg="unknown compression method",x.mode=it;break}if(57344&x.flags){g.msg="unknown header flags set",x.mode=it;break}x.head&&(x.head.text=me>>8&1),512&x.flags&&4&x.wrap&&(Lt[0]=255&me,Lt[1]=me>>>8&255,x.check=F(x.check,Lt,2,0)),me=0,be=0,x.mode=16182;case 16182:for(;be<32;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}x.head&&(x.head.time=me),512&x.flags&&4&x.wrap&&(Lt[0]=255&me,Lt[1]=me>>>8&255,Lt[2]=me>>>16&255,Lt[3]=me>>>24&255,x.check=F(x.check,Lt,4,0)),me=0,be=0,x.mode=16183;case 16183:for(;be<16;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}x.head&&(x.head.xflags=255&me,x.head.os=me>>8),512&x.flags&&4&x.wrap&&(Lt[0]=255&me,Lt[1]=me>>>8&255,x.check=F(x.check,Lt,2,0)),me=0,be=0,x.mode=16184;case 16184:if(1024&x.flags){for(;be<16;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}x.length=me,x.head&&(x.head.extra_len=me),512&x.flags&&4&x.wrap&&(Lt[0]=255&me,Lt[1]=me>>>8&255,x.check=F(x.check,Lt,2,0)),me=0,be=0}else x.head&&(x.head.extra=null);x.mode=16185;case 16185:if(1024&x.flags&&((De=x.length)>pe&&(De=pe),De&&(x.head&&(Je=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Uint8Array(x.head.extra_len)),x.head.extra.set(Q.subarray(oe,oe+De),Je)),512&x.flags&&4&x.wrap&&(x.check=F(x.check,Q,De,oe)),pe-=De,oe+=De,x.length-=De),x.length))break e;x.length=0,x.mode=16186;case 16186:if(2048&x.flags){if(pe===0)break e;De=0;do Je=Q[oe+De++],x.head&&Je&&x.length<65536&&(x.head.name+=String.fromCharCode(Je));while(Je&&De<pe);if(512&x.flags&&4&x.wrap&&(x.check=F(x.check,Q,De,oe)),pe-=De,oe+=De,Je)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=16187;case 16187:if(4096&x.flags){if(pe===0)break e;De=0;do Je=Q[oe+De++],x.head&&Je&&x.length<65536&&(x.head.comment+=String.fromCharCode(Je));while(Je&&De<pe);if(512&x.flags&&4&x.wrap&&(x.check=F(x.check,Q,De,oe)),pe-=De,oe+=De,Je)break e}else x.head&&(x.head.comment=null);x.mode=16188;case 16188:if(512&x.flags){for(;be<16;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(4&x.wrap&&me!==(65535&x.check)){g.msg="header crc mismatch",x.mode=it;break}me=0,be=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),g.adler=x.check=0,x.mode=on;break;case 16189:for(;be<32;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}g.adler=x.check=tu(me),me=0,be=0,x.mode=ha;case ha:if(x.havedict===0)return g.next_out=ke,g.avail_out=Fe,g.next_in=oe,g.avail_in=pe,x.hold=me,x.bits=be,vo;g.adler=x.check=1,x.mode=on;case on:if(U===$i||U===$t)break e;case hs:if(x.last){me>>>=7&be,be-=7&be,x.mode=sn;break}for(;be<3;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}switch(x.last=1&me,be-=1,3&(me>>>=1)){case 0:x.mode=16193;break;case 1:if(ad(x),x.mode=fs,U===$t){me>>>=2,be-=2;break e}break;case 2:x.mode=16196;break;case 3:g.msg="invalid block type",x.mode=it}me>>>=2,be-=2;break;case 16193:for(me>>>=7&be,be-=7&be;be<32;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if((65535&me)!=(me>>>16^65535)){g.msg="invalid stored block lengths",x.mode=it;break}if(x.length=65535&me,me=0,be=0,x.mode=xo,U===$t)break e;case xo:x.mode=16195;case 16195:if(De=x.length){if(De>pe&&(De=pe),De>Fe&&(De=Fe),De===0)break e;ee.set(Q.subarray(oe,oe+De),ke),pe-=De,oe+=De,Fe-=De,ke+=De,x.length-=De;break}x.mode=on;break;case 16196:for(;be<14;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(x.nlen=257+(31&me),me>>>=5,be-=5,x.ndist=1+(31&me),me>>>=5,be-=5,x.ncode=4+(15&me),me>>>=4,be-=4,x.nlen>286||x.ndist>30){g.msg="too many length or distance symbols",x.mode=it;break}x.have=0,x.mode=16197;case 16197:for(;x.have<x.ncode;){for(;be<3;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}x.lens[ln[x.have++]]=7&me,me>>>=3,be-=3}for(;x.have<19;)x.lens[ln[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,yt={bits:x.lenbits},ht=po(0,x.lens,0,19,x.lencode,0,x.work,yt),x.lenbits=yt.bits,ht){g.msg="invalid code lengths set",x.mode=it;break}x.have=0,x.mode=16198;case 16198:for(;x.have<x.nlen+x.ndist;){for(;bt=(rt=x.lencode[me&(1<<x.lenbits)-1])>>>16&255,qe=65535&rt,!((dt=rt>>>24)<=be);){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(qe<16)me>>>=dt,be-=dt,x.lens[x.have++]=qe;else{if(qe===16){for(ot=dt+2;be<ot;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(me>>>=dt,be-=dt,x.have===0){g.msg="invalid bit length repeat",x.mode=it;break}Je=x.lens[x.have-1],De=3+(3&me),me>>>=2,be-=2}else if(qe===17){for(ot=dt+3;be<ot;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}be-=dt,Je=0,De=3+(7&(me>>>=dt)),me>>>=3,be-=3}else{for(ot=dt+7;be<ot;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}be-=dt,Je=0,De=11+(127&(me>>>=dt)),me>>>=7,be-=7}if(x.have+De>x.nlen+x.ndist){g.msg="invalid bit length repeat",x.mode=it;break}for(;De--;)x.lens[x.have++]=Je}}if(x.mode===it)break;if(x.lens[256]===0){g.msg="invalid code -- missing end-of-block",x.mode=it;break}if(x.lenbits=9,yt={bits:x.lenbits},ht=po(1,x.lens,0,x.nlen,x.lencode,0,x.work,yt),x.lenbits=yt.bits,ht){g.msg="invalid literal/lengths set",x.mode=it;break}if(x.distbits=6,x.distcode=x.distdyn,yt={bits:x.distbits},ht=po(2,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,yt),x.distbits=yt.bits,ht){g.msg="invalid distances set",x.mode=it;break}if(x.mode=fs,U===$t)break e;case fs:x.mode=ut;case ut:if(pe>=6&&Fe>=258){g.next_out=ke,g.avail_out=Fe,g.next_in=oe,g.avail_in=pe,x.hold=me,x.bits=be,Yl(g,Ge),ke=g.next_out,ee=g.output,Fe=g.avail_out,oe=g.next_in,Q=g.input,pe=g.avail_in,me=x.hold,be=x.bits,x.mode===on&&(x.back=-1);break}for(x.back=0;bt=(rt=x.lencode[me&(1<<x.lenbits)-1])>>>16&255,qe=65535&rt,!((dt=rt>>>24)<=be);){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(bt&&!(240&bt)){for(ze=dt,tt=bt,It=qe;bt=(rt=x.lencode[It+((me&(1<<ze+tt)-1)>>ze)])>>>16&255,qe=65535&rt,!(ze+(dt=rt>>>24)<=be);){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}me>>>=ze,be-=ze,x.back+=ze}if(me>>>=dt,be-=dt,x.back+=dt,x.length=qe,bt===0){x.mode=16205;break}if(32&bt){x.back=-1,x.mode=on;break}if(64&bt){g.msg="invalid literal/length code",x.mode=it;break}x.extra=15&bt,x.mode=16201;case 16201:if(x.extra){for(ot=x.extra;be<ot;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}x.length+=me&(1<<x.extra)-1,me>>>=x.extra,be-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=16202;case 16202:for(;bt=(rt=x.distcode[me&(1<<x.distbits)-1])>>>16&255,qe=65535&rt,!((dt=rt>>>24)<=be);){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(!(240&bt)){for(ze=dt,tt=bt,It=qe;bt=(rt=x.distcode[It+((me&(1<<ze+tt)-1)>>ze)])>>>16&255,qe=65535&rt,!(ze+(dt=rt>>>24)<=be);){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}me>>>=ze,be-=ze,x.back+=ze}if(me>>>=dt,be-=dt,x.back+=dt,64&bt){g.msg="invalid distance code",x.mode=it;break}x.offset=qe,x.extra=15&bt,x.mode=16203;case 16203:if(x.extra){for(ot=x.extra;be<ot;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}x.offset+=me&(1<<x.extra)-1,me>>>=x.extra,be-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){g.msg="invalid distance too far back",x.mode=it;break}x.mode=16204;case 16204:if(Fe===0)break e;if(De=Ge-Fe,x.offset>De){if((De=x.offset-De)>x.whave&&x.sane){g.msg="invalid distance too far back",x.mode=it;break}De>x.wnext?(De-=x.wnext,$e=x.wsize-De):$e=x.wnext-De,De>x.length&&(De=x.length),gt=x.window}else gt=ee,$e=ke-x.offset,De=x.length;De>Fe&&(De=Fe),Fe-=De,x.length-=De;do ee[ke++]=gt[$e++];while(--De);x.length===0&&(x.mode=ut);break;case 16205:if(Fe===0)break e;ee[ke++]=x.length,Fe--,x.mode=ut;break;case sn:if(x.wrap){for(;be<32;){if(pe===0)break e;pe--,me|=Q[oe++]<<be,be+=8}if(Ge-=Fe,g.total_out+=Ge,x.total+=Ge,4&x.wrap&&Ge&&(g.adler=x.check=x.flags?F(x.check,ee,Ge,ke-Ge):Z(x.check,ee,Ge,ke-Ge)),Ge=Fe,4&x.wrap&&(x.flags?me:tu(me))!==x.check){g.msg="incorrect data check",x.mode=it;break}me=0,be=0}x.mode=16207;case 16207:if(x.wrap&&x.flags){for(;be<32;){if(pe===0)break e;pe--,me+=Q[oe++]<<be,be+=8}if(4&x.wrap&&me!==(4294967295&x.total)){g.msg="incorrect length check",x.mode=it;break}me=0,be=0}x.mode=16208;case 16208:ht=go;break e;case it:ht=ca;break e;case 16210:return ds;default:return Kr}return g.next_out=ke,g.avail_out=Fe,g.next_in=oe,g.avail_in=pe,x.hold=me,x.bits=be,(x.wsize||Ge!==g.avail_out&&x.mode<it&&(x.mode<sn||U!==mo))&&od(g,g.output,g.next_out,Ge-g.avail_out),Et-=g.avail_in,Ge-=g.avail_out,g.total_in+=Et,g.total_out+=Ge,x.total+=Ge,4&x.wrap&&Ge&&(g.adler=x.check=x.flags?F(x.check,ee,Ge,g.next_out-Ge):Z(x.check,ee,Ge,g.next_out-Ge)),g.data_type=x.bits+(x.last?64:0)+(x.mode===on?128:0)+(x.mode===fs||x.mode===xo?256:0),(Et===0&&Ge===0||U===mo)&&ht===Zr&&(ht=eu),ht},inflateEnd:function(g){if(Xr(g))return Kr;var U=g.state;return U.window&&(U.window=null),g.state=null,Zr},inflateGetHeader:function(g,U){if(Xr(g))return Kr;var x=g.state;return 2&x.wrap?(x.head=U,U.done=!1,Zr):Kr},inflateSetDictionary:function(g,U){var x,Q=U.length;return Xr(g)||(x=g.state).wrap!==0&&x.mode!==ha?Kr:x.mode===ha&&Z(1,U,Q,0)!==x.check?ca:od(g,U,Q,Q)?(x.mode=16210,ds):(x.havedict=1,Zr)},inflateInfo:"pako inflate (from Nodeca project)"},iu=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},sd=Object.prototype.toString,ld=X.Z_NO_FLUSH,Nt=X.Z_FINISH,wo=X.Z_OK,Jr=X.Z_STREAM_END,Gi=X.Z_NEED_DICT,ud=X.Z_STREAM_ERROR,cd=X.Z_DATA_ERROR,au=X.Z_MEM_ERROR;function Eo(g){this.options=Xl({chunkSize:65536,windowBits:15,to:""},g||{});var U=this.options;U.raw&&U.windowBits>=0&&U.windowBits<16&&(U.windowBits=-U.windowBits,U.windowBits===0&&(U.windowBits=-15)),!(U.windowBits>=0&&U.windowBits<16)||g&&g.windowBits||(U.windowBits+=32),U.windowBits>15&&U.windowBits<48&&!(15&U.windowBits)&&(U.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new td,this.strm.avail_out=0;var x=Un.inflateInit2(this.strm,U.windowBits);if(x!==wo)throw new Error(I[x]);if(this.header=new iu,Un.inflateGetHeader(this.strm,this.header),U.dictionary&&(typeof U.dictionary=="string"?U.dictionary=ls(U.dictionary):sd.call(U.dictionary)==="[object ArrayBuffer]"&&(U.dictionary=new Uint8Array(U.dictionary)),U.raw&&(x=Un.inflateSetDictionary(this.strm,U.dictionary))!==wo))throw new Error(I[x])}function ms(g,U){var x=new Eo(U);if(x.push(g),x.err)throw x.msg||I[x.err];return x.result}Eo.prototype.push=function(g,U){var x,Q,ee,oe=this.strm,ke=this.options.chunkSize,pe=this.options.dictionary;if(this.ended)return!1;for(Q=U===~~U?U:U===!0?Nt:ld,sd.call(g)==="[object ArrayBuffer]"?oe.input=new Uint8Array(g):oe.input=g,oe.next_in=0,oe.avail_in=oe.input.length;;){for(oe.avail_out===0&&(oe.output=new Uint8Array(ke),oe.next_out=0,oe.avail_out=ke),(x=Un.inflate(oe,Q))===Gi&&pe&&((x=Un.inflateSetDictionary(oe,pe))===wo?x=Un.inflate(oe,Q):x===cd&&(x=Gi));oe.avail_in>0&&x===Jr&&oe.state.wrap>0&&g[oe.next_in]!==0;)Un.inflateReset(oe),x=Un.inflate(oe,Q);switch(x){case ud:case cd:case Gi:case au:return this.onEnd(x),this.ended=!0,!1}if(ee=oe.avail_out,oe.next_out&&(oe.avail_out===0||x===Jr))if(this.options.to==="string"){var Fe=us(oe.output,oe.next_out),me=oe.next_out-Fe,be=Jf(oe.output,Fe);oe.next_out=me,oe.avail_out=ke-me,me&&oe.output.set(oe.output.subarray(Fe,Fe+me),0),this.onData(be)}else this.onData(oe.output.length===oe.next_out?oe.output:oe.output.subarray(0,oe.next_out));if(x!==wo||ee!==0){if(x===Jr)return x=Un.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,!0;if(oe.avail_in===0)break}}return!0},Eo.prototype.onData=function(g){this.chunks.push(g)},Eo.prototype.onEnd=function(g){g===wo&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Qc(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};var gs={Inflate:Eo,inflate:ms,inflateRaw:function(g,U){return(U=U||{}).raw=!0,ms(g,U)},ungzip:ms},dd=Qn.Deflate,vs=Qn.deflate,hd=Qn.deflateRaw,Tn=Qn.gzip,fd=gs.Inflate,ou=gs.inflate,ti=gs.inflateRaw,su=gs.ungzip,lu=X,uu={Deflate:dd,deflate:vs,deflateRaw:hd,gzip:Tn,Inflate:fd,inflate:ou,inflateRaw:ti,ungzip:su,constants:lu};r.Deflate=dd,r.Inflate=fd,r.constants=lu,r.default=uu,r.deflate=vs,r.deflateRaw=hd,r.gzip=Tn,r.inflate=ou,r.inflateRaw=ti,r.ungzip=su,Object.defineProperty(r,"__esModule",{value:!0})})})(Yg,Yg.exports);var p4=Yg.exports,YC=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",QC=p4;Hl.uncompressInputType=YC?"uint8array":"array";Hl.compressInputType=YC?"uint8array":"array";Hl.magic="\b\0";Hl.compress=function(e,t){return QC.deflateRaw(e,{level:t.level||-1})};Hl.uncompress=function(e){return QC.inflateRaw(e)};Xc.STORE={magic:"\0\0",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null};Xc.DEFLATE=Hl;var q0={exports:{}};q0.exports=function(e,t){return typeof e=="number"?Buffer.alloc(e):Buffer.from(e,t)};q0.exports.test=function(e){return Buffer.isBuffer(e)};var V0=q0.exports;(function(e){function t(f){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(f)}var r=qr,n=Xc,i=V0;e.string2binary=function(f){for(var p="",v=0;v<f.length;v++)p+=String.fromCharCode(f.charCodeAt(v)&255);return p},e.arrayBuffer2Blob=function(f,p){e.checkSupport("blob"),p=p||"application/zip";try{return new Blob([f],{type:p})}catch{try{var v=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,b=new v;return b.append(f),b.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};function a(f){return f}function s(f,p){for(var v=0;v<f.length;++v)p[v]=f.charCodeAt(v)&255;return p}function u(f){var p=65536,v=[],b=f.length,k=e.getTypeOf(f),S=0,T=!0;try{switch(k){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,i(0));break}}catch{T=!1}if(!T){for(var y="",_=0;_<f.length;_++)y+=String.fromCharCode(f[_]);return y}for(;S<b&&p>1;)try{k==="array"||k==="nodebuffer"?v.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+p,b)))):v.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+p,b)))),S+=p}catch{p=Math.floor(p/2)}return v.join("")}e.applyFromCharCode=u;function d(f,p){for(var v=0;v<f.length;v++)p[v]=f[v];return p}var h={};h.string={string:a,array:function(p){return s(p,new Array(p.length))},arraybuffer:function(p){return h.string.uint8array(p).buffer},uint8array:function(p){return s(p,new Uint8Array(p.length))},nodebuffer:function(p){return s(p,i(p.length))}},h.array={string:u,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return i(p)}},h.arraybuffer={string:function(p){return u(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return i(new Uint8Array(p))}},h.uint8array={string:u,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return i(p)}},h.nodebuffer={string:u,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return h.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:a},e.transformTo=function(f,p){if(p||(p=""),!f)return p;e.checkSupport(f);var v=e.getTypeOf(p),b=h[v][f](p);return b},e.getTypeOf=function(f){if(f!=null){if(typeof f=="string")return"string";var p=Object.prototype.toString.call(f);if(p==="[object Array]")return"array";if(r.nodebuffer&&i.test(f))return"nodebuffer";if(r.uint8array&&p==="[object Uint8Array]")return"uint8array";if(r.arraybuffer&&p==="[object ArrayBuffer]")return"arraybuffer";if(p==="[object Promise]")throw new Error("Cannot read data from a promise, you probably are running new PizZip(data) with a promise");if(t(f)==="object"&&typeof f.file=="function")throw new Error("Cannot read data from a pizzip instance, you probably are running new PizZip(zip) with a zipinstance");if(p==="[object Date]")throw new Error("Cannot read data from a Date, you probably are running new PizZip(data) with a date");if(t(f)==="object"&&f.crc32==null)throw new Error("Unsupported data given to new PizZip(data) (object given)")}},e.checkSupport=function(f){var p=r[f.toLowerCase()];if(!p)throw new Error(f+" is not supported by this browser")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(f){var p="",v,b;for(b=0;b<(f||"").length;b++)v=f.charCodeAt(b),p+="\\x"+(v<16?"0":"")+v.toString(16).toUpperCase();return p},e.findCompression=function(f){for(var p in n)if(n.hasOwnProperty(p)&&n[p].magic===f)return n[p];return null},e.isRegExp=function(f){return Object.prototype.toString.call(f)==="[object RegExp]"},e.extend=function(){var f={},p,v;for(p=0;p<arguments.length;p++)for(v in arguments[p])arguments[p].hasOwnProperty(v)&&typeof f[v]>"u"&&(f[v]=arguments[p][v]);return f}})(Jn);var m4=Jn,g4=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],v4=function(t,r){if(typeof t>"u"||!t.length)return 0;var n=m4.getTypeOf(t)!=="string";typeof r>"u"&&(r=0);var i=0,a=0,s=0;r^=-1;for(var u=0,d=t.length;u<d;u++)s=n?t[u]:t.charCodeAt(u),a=(r^s)&255,i=g4[a],r=r>>>8^i;return r^-1},co={};co.LOCAL_FILE_HEADER="PK";co.CENTRAL_FILE_HEADER="PK";co.CENTRAL_DIRECTORY_END="PK";co.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";co.ZIP64_CENTRAL_DIRECTORY_END="PK";co.DATA_DESCRIPTOR="PK\x07\b";var Yn={};Yn.base64=!1;Yn.binary=!1;Yn.dir=!1;Yn.createFolders=!1;Yn.date=null;Yn.compression=null;Yn.compressionOptions=null;Yn.comment=null;Yn.unixPermissions=null;Yn.dosPermissions=null;function eS(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}eS.prototype={getContent:function(){return null},getCompressedContent:function(){return null}};var tS=eS,Xf={},Qg=Jn,Zu=qr,y4=V0,jc=new Array(256);for(var ba=0;ba<256;ba++)jc[ba]=ba>=252?6:ba>=248?5:ba>=240?4:ba>=224?3:ba>=192?2:1;jc[254]=jc[254]=1;function x4(e){var t,r,n,i,a,s=0,u=e.length;for(i=0;i<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(Zu.uint8array?t=new Uint8Array(s):t=new Array(s),a=0,i=0;a<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t}function b4(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+jc[e[r]]>t?r:t}function E_(e){var t,r,n,i,a=e.length,s=new Array(a*2);for(r=0,t=0;t<a;){if(n=e[t++],n<128){s[r++]=n;continue}if(i=jc[n],i>4){s[r++]=65533,t+=i-1;continue}for(n&=i===2?31:i===3?15:7;i>1&&t<a;)n=n<<6|e[t++]&63,i--;if(i>1){s[r++]=65533;continue}n<65536?s[r++]=n:(n-=65536,s[r++]=55296|n>>10&1023,s[r++]=56320|n&1023)}return s.length!==r&&(s.subarray?s=s.subarray(0,r):s.length=r),Qg.applyFromCharCode(s)}Xf.utf8encode=function(t){return Zu.nodebuffer?y4(t,"utf-8"):x4(t)};Xf.utf8decode=function(t){if(Zu.nodebuffer)return Qg.transformTo("nodebuffer",t).toString("utf-8");t=Qg.transformTo(Zu.uint8array?"uint8array":"array",t);for(var r=[],n=t.length,i=65536,a=0;a<n;){var s=b4(t,Math.min(a+i,n));Zu.uint8array?r.push(E_(t.subarray(a,s))):r.push(E_(t.slice(a,s))),a=s}return r.join("")};var _4=Jn;function rS(){this.data=[]}rS.prototype={append:function(t){t=_4.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}};var w4=rS,E4=Jn;function nS(e){this.data=new Uint8Array(e),this.index=0}nS.prototype={append:function(t){t.length!==0&&(t=E4.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}};var C4=nS;function S4(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=A4(e))||t){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var h=r.next();return s=h.done,h},e:function(h){u=!0,a=h},f:function(){try{s||r.return==null||r.return()}finally{if(u)throw a}}}}function A4(e,t){if(e){if(typeof e=="string")return C_(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C_(e,t):void 0}}function C_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T4=qr,qt=Jn,$0=v4,ev=co,N4=Yn,iS=Kc,tv=Xc,nf=tS,k4=V0,dl=Xf,j4=w4,D4=C4;function aS(e){if(e._data instanceof nf&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,qt.getTypeOf(e._data)==="uint8array")){var t=e._data;e._data=new Uint8Array(t.length),t.length!==0&&e._data.set(t,0)}return e._data}function rv(e){var t=aS(e),r=qt.getTypeOf(t);return r==="string"?!e.options.binary&&T4.nodebuffer?k4(t,"utf-8"):e.asBinary():t}var nv={load:function(){throw new Error("Load method is not defined. Is the file pizzip-load.js included ?")},filter:function(t){var r=[],n,i,a,s;for(n in this.files)this.files.hasOwnProperty(n)&&(a=this.files[n],s=new G0(a.name,a._data,qt.extend(a.options)),i=n.slice(this.root.length,n.length),n.slice(0,this.root.length)===this.root&&t(i,s)&&r.push(s));return r},file:function(t,r,n){if(arguments.length===1){if(qt.isRegExp(t)){var i=t;return this.filter(function(a,s){return!s.dir&&i.test(a)})}return this.filter(function(a,s){return!s.dir&&a===t})[0]||null}return t=this.root+t,oS.call(this,t,r,n),this},folder:function(t){if(!t)return this;if(qt.isRegExp(t))return this.filter(function(a,s){return s.dir&&t.test(a)});var r=this.root+t,n=lS.call(this,r),i=this.shallowClone();return i.root=n.name,i},remove:function(t){t=this.root+t;var r=this.files[t];if(r||(t.slice(-1)!=="/"&&(t+="/"),r=this.files[t]),r&&!r.dir)delete this.files[t];else for(var n=this.filter(function(a,s){return s.name.slice(0,t.length)===t}),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){t=qt.extend(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:dl.utf8encode}),qt.checkSupport(t.type),(t.platform==="darwin"||t.platform==="freebsd"||t.platform==="linux"||t.platform==="sunos")&&(t.platform="UNIX"),t.platform==="win32"&&(t.platform="DOS");var r=[],n=qt.transformTo("string",t.encodeFileName(t.comment||this.comment||"")),i=0,a=0,s,u,d=[];t.fileOrder instanceof Array&&(d=t.fileOrder);for(var h in this.files)d.indexOf(h)===-1&&d.push(h);typeof t.fileOrder=="function"&&(d=t.fileOrder(this.files));var f=S4(d),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;if(this.files.hasOwnProperty(v)){var b=this.files[v],k=b.options.compression||t.compression.toUpperCase(),S=tv[k];if(!S)throw new Error(k+" is not a valid compression method !");var T=b.options.compressionOptions||t.compressionOptions||{},y=I4.call(this,b,S,T),_=M4.call(this,v,b,y,i,t.platform,t.encodeFileName);i+=_.fileRecord.length+y.compressedSize,a+=_.dirRecord.length,r.push(_)}}}catch(M){f.e(M)}finally{f.f()}var w="";w=ev.CENTRAL_DIRECTORY_END+"\0\0\0\0"+ir(r.length,2)+ir(r.length,2)+ir(a,4)+ir(i,4)+ir(n.length,2)+n;var E=t.type.toLowerCase();for(E==="uint8array"||E==="arraybuffer"||E==="blob"||E==="nodebuffer"?s=new D4(i+a+w.length):s=new j4(i+a+w.length),u=0;u<r.length;u++)s.append(r[u].fileRecord),s.append(r[u].compressedObject.compressedContent);for(u=0;u<r.length;u++)s.append(r[u].dirRecord);s.append(w);var N=s.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return qt.transformTo(t.type.toLowerCase(),N);case"blob":return qt.arrayBuffer2Blob(qt.transformTo("arraybuffer",N),t.mimeType);case"base64":return t.base64?iS.encode(N):N;default:return N}},crc32:function(t,r){return $0(t,r)},utf8encode:function(t){return qt.transformTo("string",dl.utf8encode(t))},utf8decode:function(t){return dl.utf8decode(t)}};function S_(e){var t=aS(this);return t===null||typeof t>"u"?"":(this.options.base64&&(t=iS.decode(t)),e&&this.options.binary?t=nv.utf8decode(t):t=qt.transformTo("string",t),!e&&!this.options.binary&&(t=qt.transformTo("string",nv.utf8encode(t))),t)}function G0(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}}G0.prototype={asText:function(){return S_.call(this,!0)},asBinary:function(){return S_.call(this,!1)},asNodeBuffer:function(){var t=rv(this);return qt.transformTo("nodebuffer",t)},asUint8Array:function(){var t=rv(this);return qt.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};function ir(e,t){var r="",n;for(n=0;n<t;n++)r+=String.fromCharCode(e&255),e>>>=8;return r}function O4(e){return e=e||{},e.base64===!0&&(e.binary===null||e.binary===void 0)&&(e.binary=!0),e=qt.extend(e,N4),e.date=e.date||new Date,e.compression!==null&&(e.compression=e.compression.toUpperCase()),e}function oS(e,t,r){var n=qt.getTypeOf(t),i;if(r=O4(r),typeof r.unixPermissions=="string"&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&r.unixPermissions&16384&&(r.dir=!0),r.dosPermissions&&r.dosPermissions&16&&(r.dir=!0),r.dir&&(e=sS(e)),r.createFolders&&(i=R4(e))&&lS.call(this,i,!0),r.dir||t===null||typeof t>"u")r.base64=!1,r.binary=!1,t=null,n=null;else if(n==="string")r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(t=qt.string2binary(t));else{if(r.base64=!1,r.binary=!0,!n&&!(t instanceof nf))throw new Error("The data of '"+e+"' is in an unsupported format !");n==="arraybuffer"&&(t=qt.transformTo("uint8array",t))}var a=new G0(e,t,r);return this.files[e]=a,a}function R4(e){e.slice(-1)==="/"&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""}function sS(e){return e.slice(-1)!=="/"&&(e+="/"),e}function lS(e,t){return t=typeof t<"u"?t:!1,e=sS(e),this.files[e]||oS.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]}function I4(e,t,r){var n=new nf,i;return e._data instanceof nf?(n.uncompressedSize=e._data.uncompressedSize,n.crc32=e._data.crc32,n.uncompressedSize===0||e.dir?(t=tv.STORE,n.compressedContent="",n.crc32=0):e._data.compressionMethod===t.magic?n.compressedContent=e._data.getCompressedContent():(i=e._data.getContent(),n.compressedContent=t.compress(qt.transformTo(t.compressInputType,i),r))):(i=rv(e),(!i||i.length===0||e.dir)&&(t=tv.STORE,i=""),n.uncompressedSize=i.length,n.crc32=$0(i),n.compressedContent=t.compress(qt.transformTo(t.compressInputType,i),r)),n.compressedSize=n.compressedContent.length,n.compressionMethod=t.magic,n}function L4(e,t){var r=e;return e||(r=t?16893:33204),(r&65535)<<16}function P4(e){return(e||0)&63}function M4(e,t,r,n,i,a){var s=a!==dl.utf8encode,u=qt.transformTo("string",a(t.name)),d=qt.transformTo("string",dl.utf8encode(t.name)),h=t.comment||"",f=qt.transformTo("string",a(h)),p=qt.transformTo("string",dl.utf8encode(h)),v=d.length!==t.name.length,b=p.length!==h.length,k=t.options,S,T,y="",_="",w="",E,N;t._initialMetadata.dir!==t.dir?E=t.dir:E=k.dir,t._initialMetadata.date!==t.date?N=t.date:N=k.date;var M=0,B=0;E&&(M|=16),i==="UNIX"?(B=798,M|=L4(t.unixPermissions,E)):(B=20,M|=P4(t.dosPermissions)),S=N.getHours(),S<<=6,S|=N.getMinutes(),S<<=5,S|=N.getSeconds()/2,T=N.getFullYear()-1980,T<<=4,T|=N.getMonth()+1,T<<=5,T|=N.getDate(),v&&(_=ir(1,1)+ir($0(u),4)+d,y+="up"+ir(_.length,2)+_),b&&(w=ir(1,1)+ir(this.crc32(f),4)+p,y+="uc"+ir(w.length,2)+w);var D="";D+=`
\0`,D+=!s&&(v||b)?"\0\b":"\0\0",D+=r.compressionMethod,D+=ir(S,2),D+=ir(T,2),D+=ir(r.crc32,4),D+=ir(r.compressedSize,4),D+=ir(r.uncompressedSize,4),D+=ir(u.length,2),D+=ir(y.length,2);var A=ev.LOCAL_FILE_HEADER+D+u+y,H=ev.CENTRAL_FILE_HEADER+ir(B,2)+D+ir(f.length,2)+"\0\0\0\0"+ir(M,4)+ir(n,4)+u+y+f;return{fileRecord:A,dirRecord:H,compressedObject:r}}var uS=nv,B4=Jn;function cS(){this.data=null,this.length=0,this.index=0,this.zero=0}cS.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var r=0,n;for(this.checkOffset(t),n=this.index+t-1;n>=this.index;n--)r=(r<<8)+this.byteAt(n);return this.index+=t,r},readString:function(t){return B4.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)}};var dS=cS,F4=dS,z4=Jn;function Jc(e,t){this.data=e,t||(this.data=z4.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}Jc.prototype=new F4;Jc.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)};Jc.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero};Jc.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var hS=Jc,U4=dS;function Yc(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var t=0;t<this.data.length;t++)e[t]&=e[t]}}Yc.prototype=new U4;Yc.prototype.byteAt=function(e){return this.data[this.zero+e]};Yc.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1};Yc.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var fS=Yc,q4=fS;function H0(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}H0.prototype=new q4;H0.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var pS=H0,V4=pS;function W0(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}W0.prototype=new V4;W0.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var $4=W0,Am=hS,ni=Jn,G4=tS,To=uS,H4=qr,W4=0,Z4=3;function mS(e,t){this.options=e,this.loadOptions=t}mS.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},prepareCompressedContent:function(t,r,n){return function(){var i=t.index;t.setIndex(r);var a=t.readData(n);return t.setIndex(i),a}},prepareContent:function(t,r,n,i,a){return function(){var s=ni.transformTo(i.uncompressInputType,this.getCompressedContent()),u=i.uncompress(s);if(u.length!==a)throw new Error("Bug : uncompressed data size mismatch");return u}},readLocalPart:function(t){t.skip(22),this.fileNameLength=t.readInt(2);var r=t.readInt(2);if(this.fileName=t.readData(this.fileNameLength),t.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");var n=ni.findCompression(this.compressionMethod);if(n===null)throw new Error("Corrupted zip : compression "+ni.pretty(this.compressionMethod)+" unknown (inner file : "+ni.transformTo("string",this.fileName)+")");if(this.decompressed=new G4,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,n),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,n,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=ni.transformTo("string",this.decompressed.getContent()),To.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readData(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),t===W4&&(this.dosPermissions=this.externalFileAttributes&63),t===Z4&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new Am(this.extraFields[1].value);this.uncompressedSize===ni.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===ni.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===ni.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===ni.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var r=t.index,n,i,a;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)n=t.readInt(2),i=t.readInt(2),a=t.readString(i),this.extraFields[n]={id:n,length:i,value:a}},handleUTF8:function(){var t=H4.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=To.utf8decode(this.fileName),this.fileCommentStr=To.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(r!==null)this.fileNameStr=r;else{var n=ni.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(i!==null)this.fileCommentStr=i;else{var a=ni.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var r=new Am(t.value);return r.readInt(1)!==1||To.crc32(this.fileName)!==r.readInt(4)?null:To.utf8decode(r.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var r=new Am(t.value);return r.readInt(1)!==1||To.crc32(this.fileComment)!==r.readInt(4)?null:To.utf8decode(r.readString(t.length-5))}return null}};var K4=mS,X4=hS,J4=$4,Y4=pS,Q4=fS,Nn=Jn,ii=co,eM=K4,eh=qr;function gS(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}gS.prototype={checkSignature:function(t){var r=this.reader.readString(4);if(r!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+Nn.pretty(r)+", expected "+Nn.pretty(t)+")")},isSignature:function(t,r){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4),a=i===r;return this.reader.setIndex(n),a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),r=eh.uint8array?"uint8array":"array",n=Nn.transformTo(r,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t=this.zip64EndOfCentralSize-44,r=0,n,i,a;r<t;)n=this.reader.readInt(2),i=this.reader.readInt(4),a=this.reader.readString(i),this.zip64ExtensibleData[n]={id:n,length:i,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,r;for(t=0;t<this.files.length;t++)r=this.files[t],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(ii.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===ii.CENTRAL_FILE_HEADER;)t=new eM({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(ii.CENTRAL_DIRECTORY_END);if(t<0){var r=!this.isSignature(0,ii.LOCAL_FILE_HEADER);throw r?new Error("Can't find end of central directory : is this a zip file ?"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(t);var n=t;if(this.checkSignature(ii.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===Nn.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Nn.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Nn.MAX_VALUE_16BITS||this.centralDirRecords===Nn.MAX_VALUE_16BITS||this.centralDirSize===Nn.MAX_VALUE_32BITS||this.centralDirOffset===Nn.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(ii.ZIP64_CENTRAL_DIRECTORY_LOCATOR),t<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(ii.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ii.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ii.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ii.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var a=n-i;if(a>0)this.isSignature(n,ii.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(a<0)throw new Error("Corrupted zip: missing "+Math.abs(a)+" bytes.")},prepareReader:function(t){var r=Nn.getTypeOf(t);if(Nn.checkSupport(r),r==="string"&&!eh.uint8array)this.reader=new X4(t,this.loadOptions.optimizedBinaryString);else if(r==="nodebuffer")this.reader=new J4(t);else if(eh.uint8array)this.reader=new Y4(Nn.transformTo("uint8array",t));else if(eh.array)this.reader=new Q4(Nn.transformTo("array",t));else throw new Error("Unexpected error: unsupported type '"+r+"'")},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var tM=gS,rM=Kc,nM=Xf,iM=Jn,aM=tM,oM=function(e,t){var r,n;t=iM.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:nM.utf8decode}),t.base64&&(e=rM.decode(e));var i=new aM(e,t),a=i.files;for(r=0;r<a.length;r++)n=a[r],this.file(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:t.createFolders});return i.zipComment.length&&(this.comment=i.zipComment),this},An={},bn=Jn;An.string2binary=function(e){return bn.string2binary(e)};An.string2Uint8Array=function(e){return bn.transformTo("uint8array",e)};An.uint8Array2String=function(e){return bn.transformTo("string",e)};An.string2Blob=function(e){var t=bn.transformTo("arraybuffer",e);return bn.arrayBuffer2Blob(t)};An.arrayBuffer2Blob=function(e){return bn.arrayBuffer2Blob(e)};An.transformTo=function(e,t){return bn.transformTo(e,t)};An.getTypeOf=function(e){return bn.getTypeOf(e)};An.checkSupport=function(e){return bn.checkSupport(e)};An.MAX_VALUE_16BITS=bn.MAX_VALUE_16BITS;An.MAX_VALUE_32BITS=bn.MAX_VALUE_32BITS;An.pretty=function(e){return bn.pretty(e)};An.findCompression=function(e){return bn.findCompression(e)};An.isRegExp=function(e){return bn.isRegExp(e)};(function(e){var t=Kc;function r(n,i){if(!(this instanceof r))return new r(n,i);this.files={},this.comment=null,this.root="",n&&this.load(n,i),this.clone=function(){var a=this,s=new r;return Object.keys(this.files).forEach(function(u){s.file(u,a.files[u].asUint8Array())}),s},this.shallowClone=function(){var a=new r;for(var s in this)typeof this[s]!="function"&&(a[s]=this[s]);return a}}r.prototype=uS,r.prototype.load=oM,r.support=qr,r.defaults=Yn,r.utils=An,r.base64={encode:function(i){return t.encode(i)},decode:function(i){return t.decode(i)}},r.compressions=Xc,e.exports=r,e.exports.default=r})(JC);var sM=JC.exports;const lM=Dc(sM),af={};af._getBinaryFromXHR=function(e){return e.response||e.responseText};function A_(){try{return new window.XMLHttpRequest}catch{}}function uM(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch{}}const cM=window.ActiveXObject?function(){return A_()||uM()}:A_;function dM(e){return e.startsWith("file://")||typeof window<"u"&&window.location.protocol==="file:"}af.getBinaryContent=function(e,t){try{const r=cM();r.open("GET",e,!0);const n=dM(e);"responseType"in r&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(i){let a,s;if(r.readyState===4)if(r.status===200||n&&r.status===0)try{const u=af._getBinaryFromXHR(r);t(null,u)}catch(u){t(new Error(u),null)}else{const u=r.status===0?"Server not responding or CORS headers missing. ":"";t(new Error(`Ajax error for ${e}: status ${r.status} ${u}${r.statusText}`),null)}},r.send()}catch(r){t(new Error(r),null)}};var hM=af,fM=hM;const pM=Dc(fM);var vS={exports:{}};(function(e,t){(function(r,n){n()})(Qe,function(){function r(h,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,f,p){var v=new XMLHttpRequest;v.open("GET",h),v.responseType="blob",v.onload=function(){d(v.response,f,p)},v.onerror=function(){console.error("could not download file")},v.send()}function i(h){var f=new XMLHttpRequest;f.open("HEAD",h,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function a(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(f)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Qe=="object"&&Qe.global===Qe?Qe:void 0,u=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(h,f,p){var v=s.URL||s.webkitURL,b=document.createElement("a");f=f||h.name||"download",b.download=f,b.rel="noopener",typeof h=="string"?(b.href=h,b.origin===location.origin?a(b):i(b.href)?n(h,f,p):a(b,b.target="_blank")):(b.href=v.createObjectURL(h),setTimeout(function(){v.revokeObjectURL(b.href)},4e4),setTimeout(function(){a(b)},0))}:"msSaveOrOpenBlob"in navigator?function(h,f,p){if(f=f||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,p),f);else if(i(h))n(h,f,p);else{var v=document.createElement("a");v.href=h,v.target="_blank",setTimeout(function(){a(v)})}}:function(h,f,p,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof h=="string")return n(h,f,p);var b=h.type==="application/octet-stream",k=/constructor/i.test(s.HTMLElement)||s.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||b&&k||u)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var w=T.result;w=S?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=w:location=w,v=null},T.readAsDataURL(h)}else{var y=s.URL||s.webkitURL,_=y.createObjectURL(h);v?v.location=_:location.href=_,v=null,setTimeout(function(){y.revokeObjectURL(_)},4e4)}});s.saveAs=d.saveAs=d,e.exports=d})})(vS);var mM=vS.exports;function gM(e,t){pM.getBinaryContent(e,t)}const T_=async e=>{const t={FILENUMBER:"FRA-CEDF-2025-0001",submission_date:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit"}),submission_version:"1.0",operatorName:e.operator.name,operatorRegistrationNumber:e.operator.registrationNumber,operatorManagerName:e.operator.managerName,operatorOperationalContact:e.operator.operationalContact,operatorAddress:e.operator.address,operatorPhone:e.operator.phone,operatorEmail:e.operator.email,operatorStartDate:e.operator.startDate||"Non spcifie",operatorEndDate:e.operator.endDate||"Non spcifie",operatorLocations:e.operator.locations||"Non spcifis",operatorRiskAssessmentVersion:e.operator.riskAssessmentVersion||"SORA 2.5",droneManufacturer:e.drone.manufacturer,droneModel:e.drone.model,droneUasType:e.drone.uasType,droneSerialNumber:e.drone.serialNumber,droneTypeCertificateNumber:e.drone.typeCertificateNumber,droneAirworthinessCertificateNumber:e.drone.airworthinessCertificateNumber,droneAcousticCertificateNumber:e.drone.acousticCertificateNumber,droneClassIdentification:e.drone.classIdentification||"Non spcifie",droneMaxCharacteristicDimension:e.drone.maxCharacteristicDimension,droneMinSpeed:e.drone.minSpeed,droneMaxSpeed:e.drone.maxSpeed,droneMaxClimbRate:e.drone.maxClimbRate,droneMaxDescentRate:e.drone.maxDescentRate,droneTurnRate:e.drone.turnRate,droneMaxEndurance:e.drone.maxEndurance,dronePropellerCount:e.drone.propellerCount,droneKineticEnergy:e.drone.kineticEnergy,droneDimensionsLength:e.drone.dimensions.length,droneDimensionsWidth:e.drone.dimensions.width,droneDimensionsHeight:e.drone.dimensions.height,droneMaterials:e.drone.materials,dronePayloads:e.drone.payloads,dronePropulsionType:e.drone.propulsionType,droneFuelType:e.drone.fuelType,droneModifications:e.drone.modifications,droneGroundStation:e.drone.groundStation,droneLocationMeans:e.drone.locationMeans,droneMaxWindSpeedTakeoff:e.drone.environmentalLimitations.maxWindSpeedTakeoff,droneMaxGustSpeed:e.drone.environmentalLimitations.maxGustSpeed,droneMinTemperature:e.drone.environmentalLimitations.minTemperature,droneMaxTemperature:e.drone.environmentalLimitations.maxTemperature,droneVisibility:e.drone.environmentalLimitations.visibility,droneIpRating:e.drone.environmentalLimitations.ipRating,droneOtherLimitations:e.drone.environmentalLimitations.otherLimitations,operationOperationType:e.operation.operationType,operationVisualObserversCount:e.operation.visualObserversCount,operationDangerousGoods:e.operation.dangerousGoods,operationMaxOperationHeight:e.operation.maxOperationHeight,operationDayNightOperation:e.operation.dayNightOperation,operationOperationStartTime:e.operation.operationStartTime,operationOperationEndTime:e.operation.operationEndTime,operationMaxDistanceFromPilot:e.operation.maxDistanceFromPilot,operationConfinementLevel:e.operation.confinementLevel,operationPilotCompetency:e.operation.pilotCompetency,operationOtherPersonnelCompetency:e.operation.otherPersonnelCompetency,operationReportableEvents:e.operation.reportableEvents,riskAssessmentAssessmentTypeHauteurVol:e.riskAssessment.assessmentTypeHauteurVol,riskAssessmentAssessmentCriticalArea:e.riskAssessment.assessmentCriticalArea,riskAssessmentCriticalAreaValue:e.riskAssessment.CriticalArea,riskAssessmentFollowTerrainHeight:e.riskAssessment.followTerrainHeight,riskAssessmentPopulationDensityModulation:e.riskAssessment.PopulationDensityModulation,riskAssessmentAssessmentStartTime:e.riskAssessment.assessmentStartTime,riskAssessmentIntrinsicGroundRisk:e.riskAssessment.intrinsicGroundRisk,riskAssessmentFinalGroundRisk:e.riskAssessment.finalGroundRisk,riskAssessmentAirRisk:e.riskAssessment.airRisk,riskAssessmentSailLevel:e.riskAssessment.sailLevel,mitigationMeasures:e.mitigationMeasures.map(r=>({id:r.id,name:r.name,description:r.description,implemented:r.implemented?"Oui":"Non",robustnessLevel:r.robustnessLevel})),osos:e.osos.map(r=>({number:r.number,description:r.description,requiredLevel:r.requiredLevel,status:r.status,evidence:r.evidence}))};gM(E5,function(r,n){if(r)throw r;const i=new lM(n),a=new h4(i,{paragraphLoop:!0,linebreaks:!0});a.setData(t);try{a.render()}catch(u){if(console.log(JSON.stringify({error:u},function(h,f){return f instanceof Error?Object.getOwnPropertyNames(f).reduce(function(p,v){return p[v]=f[v],p},{}):f})),u.properties&&u.properties.errors instanceof Array){const h=u.properties.errors.map(function(f){return f.properties.explanation}).join(`
`);console.log("errorMessages",h)}throw u}const s=a.getZip().generate({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});mM.saveAs(s,"output.docx")})};function N_(){var f;const{formData:e,setFormData:t}=Ef(),[r,n]=ge.useState("operator-info");ge.useEffect(()=>{var p,v,b,k;((p=e.operation)==null?void 0:p.operationStartTime)!==((v=e.RiskAssessment)==null?void 0:v.assessmentStartTime)&&t({...e,RiskAssessment:{...e.RiskAssessment,assessmentStartTime:((b=e.operation)==null?void 0:b.operationStartTime)||"",assessmentEndTime:((k=e.operation)==null?void 0:k.operationEndTime)||""}})},[(f=e.operation)==null?void 0:f.operationStartTime]);const i=()=>{var v,b,k;const{operator:p}=e;return p.name.trim()!==""&&p.registrationNumber.trim()!==""&&p.managerName.trim()!==""&&p.operationalContact.trim()!==""&&p.address.trim()!==""&&p.phone.trim()!==""&&p.email.trim()!==""&&!!((v=p.startDate)!=null&&v.trim())&&!!((b=p.endDate)!=null&&b.trim())&&!!((k=p.locations)!=null&&k.trim())},a=()=>{const{drone:p,operation:v}=e;return p.manufacturer.trim()!==""&&p.model.trim()!==""&&p.uasType!==null&&p.serialNumber.trim()!==""&&p.classIdentification!==null&&p.maxCharacteristicDimension>0&&p.VCruise>0&&p.maxSpeed>0&&p.MTOW>0&&p.environmentalLimitations.maxWindSpeedTakeoff>=0&&p.environmentalLimitations.maxGustSpeed>=0&&p.environmentalLimitations.minTemperature!=-999&&p.environmentalLimitations.maxTemperature!=999&&p.environmentalLimitations.visibility!=-999&&v.operationType!==null&&v.dangerousGoods!==null&&v.droppingMaterials!==null&&v.controlMultipleDrones!==null&&v.dayNightOperation!==null&&v.operationStartTime!==null&&v.operationEndTime!==null&&v.maxDistanceFromPilot>=0&&v.visualObserversCount>=0&&v.pilotCompetency!==null&&v.geoFiles.length>0},s=ks.find(p=>p.id===r),u=()=>{const p=ks.findIndex(v=>v.id===r);p<ks.length-1&&n(ks[p+1].id)},d=()=>{const p=ks.findIndex(v=>v.id===r);p>0&&n(ks[p-1].id)},h=()=>{switch(r){case"operator-info":return l.jsx(MO,{operator:e.operator,onChange:p=>t({...e,operator:p})});case"conops":return l.jsxs("div",{className:"space-y-8",children:[l.jsx(UO,{drone:e.drone,onChange:p=>{t({...e,drone:p,RiskAssessment:{...e.RiskAssessment,maxCharacteristicDimension:p.maxCharacteristicDimension,VCruise:p.VCruise,CruiseSpeed:p.CruiseSpeed,maxSpeed:p.maxSpeed,minSpeed:p.minSpeed,uasType:p.uasType,turnRate:p.turnRate,MTOW:p.MTOW,environmentalLimitations:p.environmentalLimitations}})}}),l.jsx("hr",{className:"border-gray-200 my-8"}),l.jsx(X3,{operation:e.operation,onChange:p=>{t({...e,operation:p,RiskAssessment:{...e.RiskAssessment,assessmentStartTime:p.operationStartTime,assessmentEndTime:p.operationEndTime}})}})]});case"initial-grc":return l.jsx(aR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p}),showOnly:["intrinsicGroundRisk"]});case"final-grc":return l.jsx(oR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p})});case"initial-arc":return l.jsx(sR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p})});case"final-arc":return l.jsx(lR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p})});case"tactical-mitigation":return l.jsx(uR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p})});case"sail":return l.jsx(dR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p})});case"oso":return l.jsx(J3,{osos:e.osos,assessment:e.RiskAssessment,onChange:p=>t({...e,osos:p})});case"adjacent-areas":return l.jsx(cR,{assessment:e.RiskAssessment,onChange:p=>t({...e,RiskAssessment:p})});case"summary":return l.jsx(fR,{formData:e});default:return null}};return l.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[l.jsx(LE,{}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex justify-between mt-8",children:[r!=="operator-info"&&l.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:[l.jsx(Ox,{className:"w-5 h-5"}),"Retour"]}),r==="operator-info"?l.jsxs("button",{onClick:u,disabled:!i(),className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continuer",l.jsx(ga,{className:"w-5 h-5"})]}):r==="conops"?l.jsxs("button",{onClick:u,disabled:!a(),className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continuer",l.jsx(ga,{className:"w-5 h-5"})]}):r==="oso"?l.jsxs("button",{onClick:u,className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:["Voir le rsum",l.jsx(ga,{className:"w-5 h-5"})]}):r==="summary"?l.jsxs("button",{onClick:()=>T_(e),className:"ml-auto flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:[l.jsx(Eg,{className:"w-5 h-5"}),"Tlcharger le dossier SORA"]}):l.jsxs("button",{onClick:u,className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:["Continuer",l.jsx(ga,{className:"w-5 h-5"})]})]}),l.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[l.jsx("br",{}),s.title]}),l.jsx("h2",{className:"text-lg text-gray-600 mt-2",children:s.subtitle}),l.jsx("p",{className:"mt-2 text-gray-600",children:s.description})]}),l.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[h(),l.jsxs("div",{className:"flex justify-between mt-8",children:[r!=="operator-info"&&l.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:[l.jsx(Ox,{className:"w-5 h-5"}),"Retour"]}),r==="operator-info"?l.jsxs("button",{onClick:u,disabled:!i(),className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continuer",l.jsx(ga,{className:"w-5 h-5"})]}):r==="conops"?l.jsxs("button",{onClick:u,disabled:!a(),className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Continuer",l.jsx(ga,{className:"w-5 h-5"})]}):r==="oso"?l.jsxs("button",{onClick:u,className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:["Voir le rsum",l.jsx(ga,{className:"w-5 h-5"})]}):r==="summary"?l.jsxs("button",{onClick:()=>T_(e),className:"ml-auto flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:[l.jsx(Eg,{className:"w-5 h-5"}),"Tlcharger le dossier SORA"]}):l.jsxs("button",{onClick:u,className:"ml-auto flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:["Continuer",l.jsx(ga,{className:"w-5 h-5"})]})]})]}),l.jsx(pR,{})]})}function vM(){var b,k;const[e,t]=ge.useState(""),[r,n]=ge.useState(""),[i,a]=ge.useState(""),[s,u]=ge.useState(!1),{signIn:d}=ao(),h=ts(),p=((k=(b=es().state)==null?void 0:b.from)==null?void 0:k.pathname)||"/",v=async S=>{var T;S.preventDefault(),a(""),u(!0);try{await d(e,r),h(p,{replace:!0})}catch(y){(T=y==null?void 0:y.message)!=null&&T.includes("Email not confirmed")?a("Veuillez vrifier votre email pour confirmer votre compte avant de vous connecter"):a("Email ou mot de passe incorrect")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{children:l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connexion"})}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[i&&l.jsx("div",{className:"rounded-md bg-red-50 p-4",children:l.jsx("div",{className:"text-sm text-red-700",children:i})}),l.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),l.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:S=>t(S.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),l.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:S=>n(S.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Mot de passe"})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:s?"Connexion...":"Se connecter"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx(wg,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Pas encore de compte ? S'inscrire"})})]})]})})}function yM(){const[e,t]=ge.useState(""),[r,n]=ge.useState(""),[i,a]=ge.useState(""),[s,u]=ge.useState(!1),[d,h]=ge.useState(!1),{signUp:f}=ao();ts();const p=async v=>{v.preventDefault(),a(""),u(!1),h(!0);try{await f(e,r),u(!0)}catch{a("Erreur lors de l'inscription")}finally{h(!1)}};return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"max-w-md w-full space-y-8",children:l.jsxs("div",{children:[l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Inscription russie !"}),l.jsxs("div",{className:"mt-4 text-center text-gray-600",children:[l.jsx("p",{children:"Un email de confirmation a t envoy  votre adresse."}),l.jsx("p",{className:"mt-2",children:"Veuillez vrifier votre bote de rception et confirmer votre email avant de vous connecter."})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx(wg,{to:"/login",className:"text-blue-600 hover:text-blue-500",children:"Retour  la page de connexion"})})]})})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{children:l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crer un compte"})}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[i&&l.jsx("div",{className:"rounded-md bg-red-50 p-4",children:l.jsx("div",{className:"text-sm text-red-700",children:i})}),l.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),l.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:v=>t(v.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),l.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:v=>n(v.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Mot de passe"})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Inscription...":"S'inscrire"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx(wg,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Dj un compte ? Se connecter"})})]})]})})}function th({children:e}){const{user:t,loading:r}=ao(),n=es();return r?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t?l.jsx(l.Fragment,{children:e}):l.jsx(Q2,{to:"/login",state:{from:n},replace:!0})}function xM(){const{user:e,isAdmin:t}=ao(),[r,n]=ge.useState([]),[i,a]=ge.useState(!0),[s,u]=ge.useState(null),[d,h]=ge.useState(null),[f,p]=ge.useState(null),[v,b]=ge.useState(!1);ge.useEffect(()=>{e&&k(),t&&S()},[e,t]);const k=async()=>{b(!0);try{const{data:y,error:_}=await Qt.auth.getUser();_&&(console.error("supabase.auth.getUser error:",_),h(M=>M??JSON.stringify({userError:_},null,2)));const w=(y==null?void 0:y.user)??e,{data:E,error:N}=await Qt.from("user_roles").select("*").eq("user_id",w==null?void 0:w.id).maybeSingle();N&&(console.error("Erreur en rcuprant user_roles pour current user:",N),h(M=>M??JSON.stringify({roleError:N},null,2))),p({user:w??null,roleRow:E??null,derivedIsAdmin:(w==null?void 0:w.id)&&(E==null?void 0:E.role)==="admin"||!!t})}catch(y){console.error("fetchCurrentUserInfo:",y),h(_=>_??(typeof y=="object"?JSON.stringify(y,Object.getOwnPropertyNames(y),2):String(y)))}finally{b(!1)}},S=async()=>{a(!0),u(null),h(null);try{const{data:y,error:_}=await Qt.rpc("get_user_emails");if(_)throw console.error("Erreur en rcuprant les emails utilisateurs:",_),h(JSON.stringify({usersData:y??null,usersError:_},null,2)),_;const{data:w,error:E}=await Qt.from("user_roles").select("*");if(E)throw console.error("Erreur en rcuprant user_roles:",E),h(JSON.stringify({rolesData:w??null,rolesError:E},null,2)),E;const{data:N,error:M}=await Qt.from("sora_studies").select("user_id");if(console.log("Study counts:",N),M)throw console.error("Erreur en rcuprant les tudes:",M),h(JSON.stringify({allStudies:N??null,studiesError:M},null,2)),M;const B=new Map;N==null||N.forEach(A=>{A.user_id&&B.set(A.user_id,(B.get(A.user_id)||0)+1)});const D=(y||[]).map(A=>{const H=(w||[]).find(te=>te.user_id===A.id);return{id:A.id,email:A.email||"Email non disponible",role:(H==null?void 0:H.role)||"user",created_at:A.created_at||new Date().toISOString(),studyCount:B.get(A.id)||0}});n(D),h(JSON.stringify({usersCount:D.length},null,2))}catch(y){if(console.error("Erreur lors du chargement des utilisateurs:",y),u(y!=null&&y.message?`Erreur: ${y.message}`:"Erreur lors du chargement des utilisateurs"),!d)try{h(JSON.stringify(y,Object.getOwnPropertyNames(y),2))}catch{h(String(y))}}finally{a(!1)}},T=async(y,_)=>{try{const{data:w,error:E}=await Qt.from("user_roles").select("*").eq("user_id",y).single();if(E&&E.code!=="PGRST116")throw E;if(w){const{error:N}=await Qt.from("user_roles").update({role:_,updated_at:new Date().toISOString()}).eq("user_id",y);if(N)throw N}else{const{error:N}=await Qt.from("user_roles").insert({user_id:y,role:_,updated_at:new Date().toISOString()});if(N)throw N}n(r.map(N=>N.id===y?{...N,role:_}:N))}catch(w){console.error("Erreur lors de la mise  jour du rle:",w),u("Erreur lors de la mise  jour du rle")}};return t?i?l.jsx("div",{className:"max-w-4xl mx-auto p-6",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):l.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[l.jsx(LE,{}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(e1,{className:"w-8 h-8 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Panneau d'Administration"})]}),l.jsxs("div",{className:"bg-white shadow rounded p-4",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Infos utilisateur courant"}),l.jsxs("details",{children:[l.jsx("summary",{className:"cursor-pointer text-sm text-gray-600",children:"Voir les dtails techniques"}),l.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-2 overflow-auto",children:JSON.stringify({userFromContext:e??null,currentUserInfo:f,isAdmin:t},null,2)})]})]}),s&&l.jsxs("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg",children:[s,d&&l.jsxs("details",{className:"mt-2",children:[l.jsx("summary",{className:"cursor-pointer text-sm text-gray-600",children:"Dtails techniques (debug)"}),l.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-2 overflow-auto",children:d})]})]}),l.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[l.jsx(jk,{className:"w-6 h-6"}),"Gestion des Utilisateurs"]}),l.jsx("div",{className:"space-y-4",children:r.map(y=>l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:y.email}),l.jsx("h3",{className:"font-medium",children:y.id}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Cr le : ",new Date(y.created_at).toLocaleDateString()]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Nombre d'tudes : ",y.studyCount]}),l.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${y.role==="admin"?"bg-red-100 text-red-800":y.role==="super_agent"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:y.role==="admin"?"Administrateur":y.role==="super_agent"?"Super Agent":"Utilisateur"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("select",{value:y.role,onChange:_=>T(y.id,_.target.value),className:"text-sm rounded-md border-gray-300",disabled:y.id===(e==null?void 0:e.id),children:[l.jsx("option",{value:"user",children:"Utilisateur"}),l.jsx("option",{value:"super_agent",children:"Super Agent"}),l.jsx("option",{value:"admin",children:"Administrateur"})]})})]},y.id))})]})]}):l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg",children:"Accs refus. Vous devez tre administrateur pour accder  cette page."}),l.jsxs("div",{className:"mt-4 bg-white shadow rounded p-4",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Diagnostic utilisateur courant"}),v?l.jsx("div",{children:"Chargement des informations utilisateur..."}):l.jsxs("details",{children:[l.jsx("summary",{className:"cursor-pointer text-sm text-gray-600",children:"Voir les dtails techniques"}),l.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded mt-2 overflow-auto",children:JSON.stringify({userFromContext:e??null,currentUserInfo:f},null,2)})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:`Si "derivedIsAdmin" est false, l'appel supabase.auth.admin.listUsers() renverra 403 (not_admin).`})]})]})}function bM(){return l.jsx(vO,{children:l.jsx(Lk,{children:l.jsx(mk,{children:l.jsxs(lk,{children:[l.jsx(_a,{path:"/login",element:l.jsx(vM,{})}),l.jsx(_a,{path:"/register",element:l.jsx(yM,{})}),l.jsx(_a,{path:"/admin",element:l.jsx(th,{children:l.jsx(xM,{})})}),l.jsx(_a,{path:"/",element:l.jsx(th,{children:l.jsx(xO,{})})}),l.jsx(_a,{path:"/evaluation/new",element:l.jsx(th,{children:l.jsx(N_,{})})}),l.jsx(_a,{path:"/evaluation/:id",element:l.jsx(th,{children:l.jsx(N_,{})})}),l.jsx(_a,{path:"*",element:l.jsx(Q2,{to:"/",replace:!0})})]})})})})}q2(document.getElementById("root")).render(l.jsx(ge.StrictMode,{children:l.jsx(bM,{})}));export{Qt as s};
